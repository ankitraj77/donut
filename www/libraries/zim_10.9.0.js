// ZIM - Interactive Media framework at https://zimjs.com - code creativity!
// Also see https://zimjs.com/distill to minify only the functions in your app
// (c) 2020 Dan Zen - free to use - donations welcome! https://zimjs.com/donate

if(void 0===zon)var zon=!0;if(void 0===zns)var zns=!1;var zog=zon?console.log.bind(console):function(){},zogStyle=" border:thin solid black; color: black",zogg=zon?console.log.bind(console,"%c Z ","background: #acd241;"+zogStyle):function(){},zogp=zon?console.log.bind(console,"%c Z ","background: #e472c4;"+zogStyle):function(){},zogb=zon?console.log.bind(console,"%c Z ","background: #50c4b7;"+zogStyle):function(){},zogr=zon?console.log.bind(console,"%c Z ","background: #fb4758;"+zogStyle):function(){},zogy=zon?console.log.bind(console,"%c Z ","background: #ebcb35;"+zogStyle):function(){},zogo=zon?console.log.bind(console,"%c Z ","background: #f58e25;"+zogStyle):function(){},zogl=zon?console.log.bind(console,"%c Z ","background: #eeeeee;"+zogStyle):function(){},zogd=zon?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zogy("zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),r&&(a+="fullscreen=yes,"),i&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");function e(e){(e=e||event).keyCode&&32<=e.keyCode&&e.keyCode<=40&&e.preventDefault()}function t(e){(e=e||event).preventDefault()}var o=t;return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("wheel",t,{passive:!1}),window.addEventListener("DOMMouseScroll",o,{passive:!1}),[e,t,o]}function zet(r){return z_d("6.1"),new function(){var a=this;this.on=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].addEventListener(e,t)},this.off=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].removeEventListener(e,t)},Object.defineProperty(a,"tags",{get:function(){return zot(r)?[]:"string"==typeof r||r instanceof String?document.querySelectorAll(r):"string"==typeof r.innerHTML?[r]:[]},set:function(e){}}),this.css=function(e,t){for(var o=a.tags,n=0;n<o.length;n++)if(1==arguments.length&&e.constructor==={}.constructor)for(var r in e)o[n].style[r]=e[r];else{if(1==arguments.length)return a.tags[0].style[e];o[n].style[e]=t}},this.prop=function(e,t){if(!zot(e)){for(var o=a.tags,n=[],r=0;r<o.length;r++)if(zot(t))if(e.constructor==={}.constructor)for(var i in e)o[r][i]=e[i];else n.push(o[r][e]);else o[r][e]=t;return zot(t)?n:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||window.ZIMONON);if(isDUO(t)){z_d("7");var i,a,l,s=t[0],c=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),u=[];for(i=0;i<c.length;i++)a=c[i].split("=")[0],c[i]=a,u.push(s[a]);for(i in s)c.indexOf(i)<0&&zon&&zogy(e,"bad argument "+i);return!(l=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(u))):e.apply(null,u))||(r&&!l.arguments&&(l.arguments=[s]),l)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}var ignore,zta=console.table&&zon?console.table.bind(console):function(){},zor=function(){for(var e=0;e<arguments.length;e++)if(!zot(arguments[e]))return arguments[e]},zim=function(go){if(go.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},go.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(r=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(r):r));var r},go.series=function(){var t;if(z_d("13.61"),0==arguments.length)return function(){};t=1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments;function o(){var e=t[(10*t.length+n)%t.length];return a?0<r&&n+r*i>=t.length?(r=-1,n=t.length-1-(n+i-(t.length-1))):r<0&&n+r*i<0?(r=1,n=i-n):n+=r*i:l?0<r&&n+r*i>=t.length?n=t.length-1:r<0&&n+r*i<0?n=0:n+=r*i:n+=r*i,e}var n=0,r=1,i=1,a=!1,l=!1;return o.array=t,o.type="series",Object.defineProperty(o,"index",{get:function(){return(10*t.length+n)%t.length},set:function(e){n=e}}),o.jump=function(e){return n=e,o},o.reverse=function(e){return zot(e)&&(e=!0),r=e?-1:1,o},o.bounce=function(e){return zot(e)&&(e=!0),n=(10*t.length+n)%t.length,a=e,o},o.step=function(e){return zot(e)&&(e=1),i=Math.floor(e),o},o.constrain=function(e){return zot(e)&&(e=!0),l=e,o},o},go.makeSeries=function(e){if(z_d("13.6"),zot(e))return function(){};function t(){return e[o++%e.length]}var o=0;return t.array=e,t},go.loop=function(e,t,o,n,r,i){var a;if(a=zob(go.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(z_d("9.5"),!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var l="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":"invalid";if("invalid"!=l){if("number"==l||"array"==l||"nodelist"==l||"htmlcollection"==l){if(0==(u=g((d="number"==l?e:e.length)-1)))return!0;if(o)for(var s=r;i<=s;s-=n){if("number"==l)var c=t(s,u,r,i,e);else if("array"==l)c=t(e[s],s,u,r,i,e);else c=t(e.item(s),s,u,r,i,e);if(void 0!==c)return c}else for(s=r;s<=i;s+=n){if("number"==l)c=t(s,u,r,i,e);else if("array"==l)c=t(e[s],s,u,r,i,e);else c=t(e.item(s),s,u,r,i,e);if(void 0!==c)return c}return!0}if("object"==l){var u,d=0,h=[];for(var s in e)d++,h.push(s);if(0==(u=g(d-1)))return;if(o)for(s=r;i<=s;s-=n){if(void 0!==(c=t(h[s],e[h[s]],s,u,r,i,e)))return c}else for(s=r;s<=i;s+=n){if(void 0!==(c=t(h[s],e[h[s]],s,u,r,i,e)))return c}return!0}}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},go.timeout=function(t,o,e){if(z_d("9.7"),!zot(o)&&"function"==typeof o){zot(t)&&(t=1e3),t=go.Pick.choose(t);var n={startTime:Date.now(),time:0,paused:!1,done:!1};e&&(zot(go.blurCheck)&&go.setBlurDetect(),go.pauseOnBlur.push(n));var r=n.startTime;return n.pause=function(e,t,o){zot(e)&&(e=!0),e?cancelAnimationFrame(n.rid):(t?r=0:o?(r=Date.now(),n.time=0):r=Date.now(),i()),n.paused=e},n.clear=function(){for(var e in n&&cancelAnimationFrame(n.rid),n)delete n[e];n.pause=function(){},n.clear=function(){}},i(),n}function i(){var e=Date.now();if(n.time+=e-r,r=e,n.time>=t)return n.done=!0,o(n),void n.clear();n.rid=requestAnimationFrame(i)}},go.interval=function(e,n,t,o,r){if(z_d("9.8"),!zot(n)&&"function"==typeof n&&(zot(e)&&(e=1e3),zot(o)&&(o=!1),zot(t)||!(isNaN(t)||t<=0))){zot(t)&&(t=-1);var i,a={count:0,total:t,paused:!1,time:e,active:!0};return r&&(zot(go.blurCheck)&&go.setBlurDetect(),go.pauseOnBlur.push(a)),o&&setTimeout(function(){n(a),s()},10),a.pause=function(e,t,o){zot(e)&&(e=!0),e?(clearTimeout(i),clearTimeout(a.id),cancelAnimationFrame(a.rid),a.pauseTimeLeft=a.interval-(Date.now()-a.startTime)):(a.paused||a.pause(!0),i=setTimeout(function(){a.count++,n(a),l(),s()},t?0:o?a.interval:a.pauseTimeLeft),a.pauseTimeLeft=null),a.paused=e},a.clear=function(){a.active=!1,clearTimeout(i),cancelAnimationFrame(a.rid),clearTimeout(a.id);var e=a.count;for(var t in a)delete a[t];a.active=!1,a.count=e,a.pause=function(){},a.clear=function(){}},l(),a}function l(){a.startTime=Date.now(),a.interval=go.Pick.choose(a.time),a.id=setTimeout(function(){a.paused||a.active&&(a.count++,n(a),l(),s())},a.interval)}function s(){-1!=t&&a.count>=(o?a.total-1:a.total)&&a.clear()}},go.async=function(e,t,o){if(z_d("29"),!zot(e)){var n,r=document.createElement("script");if(t){if(o)var i=o;else i=t.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];go.asyncList||(go.asyncList={}),go.asyncList[i]||(go.asyncList[i]=[]),go.asyncList[i].push(t),go.async[i]=(n=r,function(e){go.asyncList[i]&&(t=go.asyncList[i].shift()),"function"==typeof t&&t(e),n&&n.parentNode.removeChild(n),n=null})}else go.async.z_s&&go.async.z_s.parentNode&&go.async.z_s.parentNode.removeChild(go.async.z_s),go.async.z_s=r;e.match(/\?/)||(e+="?"),r.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(r)}},go.couple=function(e){if(z_d("29.2"),!go.isJSON(e))return e;var t=JSON.parse(e),o={};for(var n in t){var r=t[n];for(var i in r)o[n+"_"+i]=r[i]}return JSON.stringify(o)},go.decouple=function(e){if(z_d("29.3"),!go.isJSON(e))return e;var t=JSON.parse(e),o={};for(var n in t){var r=n.split("_",2);if(2!=r.length)return e;o[r[0]]||(o[r[0]]={}),o[r[0]][r[1]]=t[n]}return JSON.stringify(o)},go.convertColorCheck=!1,go.convertColor=function(e,o,n){if(go.convertColorCheck||(z_d("27.5"),go.convertColorCheck=!0),zot(o)&&(o="hex"),!zot(e)){var t,r=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],i=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if("zim"==o.toLowerCase())return go.colorsHex.indexOf(e)<0?e:go.colors[go.colorsHex.indexOf(e)];if(t=e.match(/rgba\((.*)\)/)){if(!zot(n))return(a=e.split(","))[3]=n+")",a.join(",");e="rgb("+t[1]+")"}if(zot(n),t=e.match(/rgb\((.*)\)/)){var a;if("rgba"==o)return(a=e.split(")"))[0]+","+n+a[1];if("hex"==o)return"#"+(r=u(t[1]))[0]+r[1]+r[2];if("string"!=o)return e;var l;e=u(t[1]).join("").toLowerCase();return-1==(l=i.indexOf(e))?"#"+e:r[l]}if("rgb"==o||"rgba"==o){function s(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):"rgb"==o?"rgb(0,0,0)":"rgba(0,0,0,1)"}return"#"==e.charAt(0)?s(e):s(go.convertColor(e))}if("hex"==o){if("#"==e.charAt(0))return e}else"#"==e.charAt(0)&&3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));return"string"!=o?"#"+i[-1!=r.indexOf(e.toLowerCase())?r.indexOf(e):0]:-1==(l=i.indexOf(e))?"#"+e:r[l]}function c(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}function u(e){var t=e.split(",");return[c(t[0]),c(t[1]),c(t[2])]}},go.colorRangeCheck=!1,go.colorRange=function(e,t,o){go.colorRangeCheck||(z_d("27.6"),go.colorRangeCheck=!0),zot(o)&&(o=.5),o=Math.max(0,Math.min(1,o)),zot(e)&&(e="white"),zot(t)&&(t="black");for(var n,r,i=go.convertColor(e,"rgb"),a=go.convertColor(t,"rgb"),l=(e=i.substring(4,i.length-1).split(","),t=a.substring(4,a.length-1).split(","),"#"),s=0;s<e.length;s++)n=t[s]-e[s],(r=Math.floor(parseInt(e[s],10)+n*o).toString(16)).length<2&&(r="0"+r),l+=r;return l},go.lightenCheck=!1,go.lighten=function(e,t){return go.lightenCheck||(z_d("27.65"),go.lightenCheck=!0),go.colorRange(e,"#FFFFFF",t)},go.darkenCheck=!1,go.darken=function(e,t){return go.darkenCheck||(z_d("27.66"),go.darkenCheck=!0),go.colorRange(e,"#000000",t)},go.pointAlongCurve=function(e,t,o,n){if(z_d("27.7"),e&&e[0]&&e[1]&&e[2]&&e[3]){zot(n)&&(n=!1);var r=new go.Bezier(e[0],e[1],e[2],e[3]);if(n)var i=r.mx(t),a=r.my(t);else i=r.x(t),a=r.y(t);if(o){var l=t-.05,s=t+.05;if(l<0&&(l=0),1<s&&(s=1),n)var c=r.mx(l),u=r.my(l),d=r.mx(s),h=r.my(s);else c=r.x(l),u=r.y(l),d=r.x(s),h=r.y(s);return{x:i,y:a,angle:go.angle(c,u,d,h)}}return{x:i,y:a}}},go.distanceAlongCurve=function(e){return z_d("27.8"),(go.dist(e[0],e[3])+(go.dist(e[0],e[1])+go.dist(e[1],e[2])+go.dist(e[2],e[3])))/2},go.closestPointAlongCurve=function(a,e,o,t,n){z_d("27.9");var l,s=1e7,c=0,u=0;return zot(o)&&(o=10),go.loop(e,function(e,r,t){var i=new go.Bezier(e[0],e[1],e[2],e[3]);go.loop(o,function(e,t){var o={x:i.x(e/t),y:i.y(e/t)},n=go.dist(a,o);n<s&&(s=n,l=o,c=r,u=e)})}),n?(c*o+u)/(e.length*o)*100:t?l:c},go.transformPoints=function(e,t,o,n,r){if(z_d("27.95"),!zot(e)&&Array.isArray(e)){zot(n)&&(n=0),zot(r)&&(r=0);e=go.copy(e);var i,a=n,l=r;"rotation"==t&&(0!=n&&(e=go.transformPoints(e,"x",-a)),0!=r&&(e=go.transformPoints(e,"y",-l)));for(var s=0;s<e.length;s++)if(i=e[s],Array.isArray(i))if("x"==t)i[0]+=o;else if("y"==t)i[1]+=o;else if("scaleX"==t)i[0]=(i[0]-n)*o+n,i[4]=i[4]*o,i[6]=i[6]*o;else if("scaleY"==t)i[1]=(i[1]-r)*o+r,i[5]=i[5]*o,i[7]=i[7]*o;else if("scale"==t)i[0]=(i[0]-n)*o+n,i[4]=i[4]*o,i[6]=i[6]*o,i[1]=(i[1]-r)*o+r,i[5]=i[5]*o,i[7]=i[7]*o;else if("rotation"==t){var c=o*Math.PI/180,u=i[0],d=i[1];i[0]=u*Math.cos(c)-d*Math.sin(c),i[1]=d*Math.cos(c)+u*Math.sin(c),u=i[4],d=i[5],i[4]=u*Math.cos(c)-d*Math.sin(c),i[5]=d*Math.cos(c)+u*Math.sin(c),u=i[6],d=i[7],i[6]=u*Math.cos(c)-d*Math.sin(c),i[7]=d*Math.cos(c)+u*Math.sin(c)}return"rotation"==t&&(0!=n&&(e=go.transformPoints(e,"x",a)),0!=r&&(e=go.transformPoints(e,"y",l))),e}},go.makeID=function(e,t,o){var n;z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var r=[2,3,4,5,6,7,8,9],i="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?r:"letters"==e?i:r.concat(i);for(var a,l,s="",c=0;c<t;c++)a=n[Math.floor(Math.random()*n.length)],l=Math.random(),"uppercase"==o||"mixed"==o&&.5<l?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),s+=String(a);return s},go.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},go.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)&&(!/safari/i.test(navigator.userAgent)||"ios")},go.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},go.extend=function(e,t,o,n,r){var i;if(i=zob(go.extend,arguments,"subclass, superclass, override, prefix, prototype"))return i;if(!zot(e)&&!zot(t)){zot(n)&&(n="super"),zot(o)&&(o=[]),Array.isArray(o)||(o=[o]),zot(r)&&(r=!0);var a={};for(var l in e.prototype)Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e.prototype,l));for(l in h.prototype=t.prototype,e.prototype=new h,a)Object.defineProperty(e.prototype,l,Object.getOwnPropertyDescriptor(a,l));var s=e.prototype,c=Object.getPrototypeOf&&Object.getPrototypeOf(s)||s.__proto__;if(c){var u;s[(n+="_")+"constructor"]=c.constructor;for(var d=0;d<o.length;d++)"function"==typeof c[u=o[d]]&&(s[n+u]=c[u]);if(r)for(u in c)s.hasOwnProperty(u)&&"function"==typeof c[u]&&(s[n+u]=c[u])}return e}function h(){this.constructor=e}zon&&e!=go.StageGL&&zog("zim.extend() - please supply a class and its superclass")},go.copyCheck=!1,go.copy=function(e,t,o){if(go.copyCheck||(z_d("10"),go.copyCheck=!0),zot(t)&&(t=!1),zot(o)&&(o=!0),null==e||!(e instanceof Array||e.constructor=={}.constructor))return t&&null!=e&&e.clone&&e.type&&("Container"!=e.type&&"Stage"!=e.type&&"StageGL"!=e.type||o)?e.clone():e;if(e instanceof Array){for(var n=[],r=0;r<e.length;r++)n[r]=go.copy(e[r],t,o);return n}if(e.constructor=={}.constructor){var i={};for(var a in e){var l=go.copy(e[a],t,o);e.hasOwnProperty(a)&&(i[a]=l)}return i}},go.mergeCheck=!1,go.merge=function(){go.mergeCheck||(z_d("12"),go.mergeCheck=!0);var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(o[t]=arguments[e][t]);return o},go.arraysEqual=function(e,t,o){if(z_d("11"),zot(e)||zot(t))return!1;if(zot(o)&&(o=!0),e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!go.arraysEqual(e[n],t[n],o))return!1}else{if(o&&e[n]!=t[n])return!1;if(!o)return go.arraysEqual(e.sort(),t.sort(),!0)}return!0},go.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},go.isJSON=function(e){z_d("11.6");try{return JSON.parse(e).constructor=={}.constructor}catch(e){return!1}},go.isPick=function(e){if(z_d("11.7"),!zot(e))return Array.isArray(e)||e.constructor=={}.constructor&&null!=e.min&&null!=e.max||e.constructor===Function&&(null!=e.array||null!=e())},go.zut=function(e){if(zot(e)||"object"==typeof e)return!0},go.zimDecimalCheck=!1,go.decimals=function(e,t,o,n,r,i,a){if(go.zimDecimalCheck||z_d("13"),go.zimDecimalCheck=!0,zot(e))return 0;zot(t)&&(t=1),zot(o)&&(o=0),zot(n)&&(n=0),zot(n)&&(n=0),zot(r)&&(r=!0),zot(i)&&(i=!1);var l=Math.round(e*Math.pow(10,t))/Math.pow(10,t);if(i){var s=l-Math.floor(l);l=go.decimals(Math.floor(l)+60*s/100,2)}var c=go.sign(l);if(0<o){var u=String(l).indexOf("."),d=String(l).length;u<0&&(u=d++,l+=".");for(var h=0;h<o-(d-u-1);h++)l+="0"}if(0<n){-1==c&&(l=l.substr(1,l.length-1));u=String(l).indexOf("."),d=String(l).length;var g=u<0?d:u;for(h=0;h<n-g;h++)l="0"+l;-1==c&&(l="-"+l)}return 0<o+n&&!r&&0==Number(l)&&(l=0),i&&(l=String(l).replace(".",":")),go.zut(a)?l:null},go.zimSignCheck=!1,go.sign=function(e){return go.zimSignCheck||z_d("13.1"),go.zimSignCheck=!0,e?e<0?-1:1:0},go.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(o=max2=t,t=max2),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},go.zimDistCheck=!1,go.dist=function(e,t,o,n){if(go.zimDistCheck||z_d("13.3"),go.zimDistCheck=!0,!zot(e)&&!zot(t))return zot(e.x)||zot(t.x)?(zot(o)&&(o=0),zot(n)&&(n=0)):(n=t.y,o=t.x,t=e.y,e=e.x),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},go.zimRectIntersectCheck=!1,go.rectIntersect=function(e,t,o){return go.zimRectIntersectCheck||z_d("13.32"),go.zimRectIntersectCheck=!0,zot(o)&&(o=0),!(e.x>=t.x+t.width+o||e.x+e.width+o<=t.x||e.y>=t.y+t.height+o||e.y+e.height+o<=t.y)},go.zimBoundsAroundPointsCheck=!1,go.boundsAroundPoints=function(e){go.zimBoundsAroundPointsCheck||z_d("13.34"),go.zimBoundsAroundPointsCheck=!0;for(var t=1e4,o=1e4,n=-1e4,r=-1e4,i=0;i<e.length;i++){var a=e[i];a.x<t&&(t=a.x),a.x>n&&(n=a.x),a.y<o&&(o=a.y),a.y>r&&(r=a.y)}return{x:t,y:o,width:n-t,height:r-o}},go.angle=function(e,t,o,n){if(z_d("13.4"),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+36e3)%360},go.TAU=2*Math.PI,go.DEG=180/Math.PI,go.RAD=Math.PI/180,go.smoothStep=function(e,t,o){z_d("13.7");var n=go.constrain((e-t)/(o-t),0,1);return n*n*n*(n*(6*n-15)+10)},go.Ajax=function(u,e,d){z_d("13.8");var h=new XMLHttpRequest;this.master=u,this.couple=e,this.lock=d;var g=this;this.get=function(e,t){var o=zot(g.master)?"":"&master="+encodeURI(u);zot(g.lock)||encodeURI(d);h.open("GET",e+o+d,!0),h.onload=function(){200==h.status?t(isJSON(h.responseText)?JSON.parse(h.responseText):h.responseText):t(null,"Error: "+h.status)},h.send()},this.post=function(e,t,o,n,r){var i;if(i=zob(g.post,arguments,"url, data, command, extra, callback"))return i;if(!zot(e)){h.open("POST",e,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onload=function(){var e=h.responseText;go.isJSON(e)&&(g.couple&&(e=go.decouple(e)),e=JSON.parse(e)),r(e)},go.isJSON(t)||(t=JSON.stringify(t)),g.couple&&(t=go.couple(t));var a=zot(g.master)?"":"&master="+encodeURI(u),l=zot(g.lock)?"":"&lock="+encodeURI(d),s=zot(o)?"":"&command="+encodeURI(o),c=zot(n)?"":"&extra="+encodeURI(n);h.send("data="+t+a+l+s+c)}},this.put=function(e,t,o){h.open("PUT",e,!0),h.setRequestHeader("Content-type","application/json"),h.onload=function(){o(isJSON(h.responseText)?JSON.parse(h.responseText):g.http.responseText)},h.send(JSON.stringify(t))}},go.Noise=function(e){"use strict";z_d("13.9"),zot(e)&&(e=1e6*Math.random());var t=e;this.seed=e;var W=this,H={};function o(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function n(e,t,o){this.dx=-t-e*H.SQUISH_2D,this.dy=-o-e*H.SQUISH_2D,this.xsb=t,this.ysb=o}function r(e,t,o,n){this.dx=-t-e*H.SQUISH_3D,this.dy=-o-e*H.SQUISH_3D,this.dz=-n-e*H.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,r){this.dx=-t-e*H.SQUISH_4D,this.dy=-o-e*H.SQUISH_4D,this.dz=-n-e*H.SQUISH_4D,this.dw=-r-e*H.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}H.NORM_2D=1/47,H.NORM_3D=1/103,H.NORM_4D=1/30,H.SQUISH_2D=(Math.sqrt(3)-1)/2,H.SQUISH_3D=(Math.sqrt(4)-1)/3,H.SQUISH_4D=(Math.sqrt(5)-1)/4,H.STRETCH_2D=(1/Math.sqrt(3)-1)/2,H.STRETCH_3D=(1/Math.sqrt(4)-1)/3,H.STRETCH_4D=(1/Math.sqrt(5)-1)/4,H.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],H.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],H.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],H.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],H.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],H.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],H.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],H.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],H.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],H.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],H.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],H.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var a=[],l=0;l<H.p2D.length;l+=4){for(var s=H.base2D[H.p2D[l]],c=null,u=null,d=0;d<s.length;d+=3)u=new n(s[d],s[d+1],s[d+2]),null===c?a[l/4]=u:c.next=u,c=u;u.next=new n(H.p2D[l+1],H.p2D[l+2],H.p2D[l+3])}this.lookup2D=[];for(l=0;l<H.lookupPairs2D.length;l+=2)this.lookup2D[H.lookupPairs2D[l]]=a[H.lookupPairs2D[l+1]];var h=[];for(l=0;l<H.p3D.length;l+=9){for(s=H.base3D[H.p3D[l]],c=null,u=null,d=0;d<s.length;d+=4)u=new r(s[d],s[d+1],s[d+2],s[d+3]),null===c?h[l/9]=u:c.next=u,c=u;u.next=new r(H.p3D[l+1],H.p3D[l+2],H.p3D[l+3],H.p3D[l+4]),u.next.next=new r(H.p3D[l+5],H.p3D[l+6],H.p3D[l+7],H.p3D[l+8])}this.lookup3D=[];for(l=0;l<H.lookupPairs3D.length;l+=2)this.lookup3D[H.lookupPairs3D[l]]=h[H.lookupPairs3D[l+1]];var g=[];for(l=0;l<H.p4D.length;l+=16){for(s=H.base4D[H.p4D[l]],c=null,u=null,d=0;d<s.length;d+=5)u=new i(s[d],s[d+1],s[d+2],s[d+3],s[d+4]),null===c?g[l/16]=u:c.next=u,c=u;u.next=new i(H.p4D[l+1],H.p4D[l+2],H.p4D[l+3],H.p4D[l+4],H.p4D[l+5]),u.next.next=new i(H.p4D[l+6],H.p4D[l+7],H.p4D[l+8],H.p4D[l+9],H.p4D[l+10]),u.next.next.next=new i(H.p4D[l+11],H.p4D[l+12],H.p4D[l+13],H.p4D[l+14],H.p4D[l+15])}this.lookup4D=[];for(l=0;l<H.lookupPairs4D.length;l+=2)this.lookup4D[H.lookupPairs4D[l]]=g[H.lookupPairs4D[l+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var p=new Uint8Array(256);for(l=0;l<256;l++)p[l]=l;(e=new Uint32Array(1))[0]=t,e=o(o(o(e)));for(l=255;0<=l;l--){e=o(e);var f=new Uint32Array(1);f[0]=(e[0]+31)%(l+1),f[0]<0&&(f[0]+=l+1),this.perm[l]=p[f[0]],this.perm2D[l]=14&this.perm[l],this.perm3D[l]=this.perm[l]%24*3,this.perm4D[l]=252&this.perm[l],p[f[0]]=p[l]}this.simplex1D=function(e){return W.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*H.STRETCH_2D,n=[e+o,t+o],r=n[0],i=n[1],a=[Math.floor(r),Math.floor(i)],l=a[0],s=a[1],c=(l+s)*H.SQUISH_2D,u=[e-(l+c),t-(s+c)],d=u[0],h=u[1],g=[r-l,i-s],p=g[0],f=g[1],m=p+f,z=new Uint32Array(4);z[0]=p-f+1,z[1]=m,z[2]=m+f,z[3]=m+p;for(var y=z[0]|z[1]<<1|z[2]<<2|z[3]<<4,b=W.lookup2D[y],v=0;void 0!==b;){var w=[d+b.dx,h+b.dy],C=w[0],x=w[1],k=2-C*C-x*x;if(0<k){var T=[l+b.xsb,s+b.ysb],A=T[0],P=T[1],B=W.perm2D[W.perm[255&A]+P&255];v+=(k*=k)*k*(H.gradients2D[B]*C+H.gradients2D[B+1]*x)}b=b.next}return v*H.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*H.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],a=r[1],l=r[2],s=[Math.floor(i),Math.floor(a),Math.floor(l)],c=s[0],u=s[1],d=s[2],h=(c+u+d)*H.SQUISH_3D,g=[e-(c+h),t-(u+h),o-(d+h)],p=g[0],f=g[1],m=g[2],z=[i-c,a-u,l-d],y=z[0],b=z[1],v=z[2],w=y+b+v,C=new Uint32Array(7);C[0]=b-v+1,C[1]=y-b+1,C[2]=y-v+1,C[3]=w,C[4]=w+v,C[5]=w+b,C[6]=w+y;for(var x=C[0]|C[1]<<1|C[2]<<2|C[3]<<3|C[4]<<5|C[5]<<7|C[6]<<9,k=W.lookup3D[x],T=0;void 0!==k;){var A=[p+k.dx,f+k.dy,m+k.dz],P=A[0],B=A[1],I=A[2],S=2-P*P-B*B-I*I;if(0<S){var O=[c+k.xsb,u+k.ysb,d+k.zsb],E=O[0],M=O[1],j=O[2],L=W.perm3D[W.perm[W.perm[255&E]+M&255]+j&255];T+=(S*=S)*S*(H.gradients3D[L]*P+H.gradients3D[L+1]*B+H.gradients3D[L+2]*I)}k=k.next}return T*H.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*H.STRETCH_4D,i=[e+r,t+r,o+r,n+r],a=i[0],l=i[1],s=i[2],c=i[3],u=[Math.floor(a),Math.floor(l),Math.floor(s),Math.floor(c)],d=u[0],h=u[1],g=u[2],p=u[3],f=(d+h+g+p)*H.SQUISH_4D,m=e-(d+f),z=t-(h+f),y=o-(g+f),b=n-(p+f),v=[a-d,l-h,s-g,c-p],w=v[0],C=v[1],x=v[2],k=v[3],T=w+C+x+k,A=new Uint32Array(11);A[0]=x-k+1,A[1]=C-x+1,A[2]=C-k+1,A[3]=w-C+1,A[4]=w-x+1,A[5]=w-k+1,A[6]=T<<6,A[7]=T+k,A[8]=T+x,A[9]=T+C,A[10]=T+w;for(var P=A[0]|A[1]<<1|A[2]<<2|A[3]<<3|A[4]<<4|A[5]<<5|A[6]<<6|A[7]<<8|A[8]<<11|A[9]<<14|A[10]<<17,B=W.lookup4D[P],I=0;void 0!==B;){var S=[m+B.dx,z+B.dy,y+B.dz,b+B.dw],O=S[0],E=S[1],M=S[2],j=S[3],L=2-O*O-E*E-M*M-j*j;if(0<L){var D=[d+B.xsb,h+B.ysb,g+B.zsb,p+B.wsb],Y=D[0],X=D[1],R=D[2],_=D[3],F=W.perm4D[W.perm[W.perm[W.perm[255&Y]+X&255]+R&255]+_&255];I+=(L*=L)*L*(H.gradients4D[F]*O+H.gradients4D[F+1]*E+H.gradients4D[F+2]*M+H.gradients4D[F+3]*j)}B=B.next}return I*H.NORM_4D}},go.Point=function(e,t,o,n,r,i,a,l,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=a,this.u=l,this.v=s,this.w=c},go.Bezier=function(e,t,o,n){z_d("13.47"),this.a=e,this.b=t,this.c=o,this.d=n,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var r=this.x(0),i=this.y(0),a=0,l=1;l<=this.len;l+=1){var s=this.x(.01*l),c=this.y(.01*l),u=r-s,d=i-c;a+=Math.sqrt(u*u+d*d),this.arcLengths[l]=a,r=s,i=c}this.length=a},go.Bezier.prototype={map:function(e){for(var t=e*this.arcLengths[this.len],o=0,n=this.len,r=0;o<n;)r=o+((n-o)/2|0),this.arcLengths[r]<t?o=r+1:n=r;this.arcLengths[r]>t&&r--;var i=this.arcLengths[r];return i===t?r/this.len:(r+(t-i)/(this.arcLengths[r+1]-i))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+(1-e)*(1-e)*3*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+(1-e)*(1-e)*3*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},go.Boundary=function(e,t,o,n){z_d("13.46"),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)||(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n),this})},go.GradientColor=function(e,t,o,n,r,i){z_d("13.465"),this.type="GradientColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.x1=zot(r)?0:r,this.y1=zot(i)?100:i},go.RadialColor=function(e,t,o,n,r,i,a,l){z_d("13.466"),this.type="RadialColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.r0=zot(r)?0:r,this.x1=zot(i)?0:i,this.y1=zot(a)?100:a,this.r1=zot(l)?100:l},go.BitmapColor=function(e,t,o){z_d("13.467"),this.type="BitmapColor","string"==typeof e&&asset&&(e=asset(e)),this.image="Bitmap"==e.type?e.image:e,this.repetion=t,this.matrix=o},go.Damp=function(e,t){z_d("14");var o;if(o=zob(go.Damp,arguments,"startValue, damp",this))return o;this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},go.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},go.Damp.prototype.immediate=function(e){return this.lastValue=e,this},go.Proportion=function(t,o,n,r,i,a,l){var e,s,c;if(e=zob(go.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",this))return e;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.convert=function(e){if(!isNaN(e)&&o-t!=0)return l&&(e=Math.max(e,t),e=Math.min(e,o)),s=(e-t)/(o-t),c=0<i?n+(r-n)*s:r-(r-n)*s,a&&(c=Math.round(c)),c}},go.ProportionDamp=function(e,t,o,n,r,i,a,l){var s;if(s=zob(go.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",this))return s;z_d("16"),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=.1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.damp=r;var c,u,d,h,g=this,p=0;c=e,p=o;var f=setInterval(m,20);function m(){isNaN(c)||t-e==0||(l&&(c=Math.max(c,e),c=Math.min(c,t)),u=(c-e)/(t-e),d=n-o,p+=((h=0<i?o+d*u:n-d*u)-p)*g.damp)}this.immediate=function(e){return g.convert(e),m(),p=h,a&&(p=Math.round(p)),g},this.convert=function(e){return c=e,a?Math.round(p):p},this.dispose=function(e,t,o){return clearInterval(f),!0}},go.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var n=this.objects=[],r=this.values=[];this.add=function(e,t){zot(e)||(zot(t)&&(t=!0),this.unique&&this.remove(e),n.push(e),r.push(t),this.length++)},this.at=function(e){if(!zot(e)){var t=n.indexOf(e);return-1<t?r[t]:null}},this.remove=function(e){if(zot(e))return!1;var t=n.indexOf(e);return-1<t&&(n.splice(t,1),r.splice(t,1),this.length--,!0)},this.clear=function(){return n=this.objects=[],r=this.values=[],this.length=null,this},this.dispose=function(e,t,o){return r=n=null,!(this.length=null)}},go.Hierarchy=function(o,s){z_d("17.5");var n,t=this;zot(o)||(zot(s)&&(s=!1),t.processSimple=function(e){var l=0,t={};return function r(e,i,a,o){var t;e.constructor=={}.constructor?(e.list&&(e=(t=e).list),o&&t&&go.loop(t,function(e,t){"list"!=e&&(o[e]=t)}),go.loop(e,function(e,t){var o={},n=i["id"+l]={obj:e,level:a,open:s,opened:!1,list:o};l++,r(t,o,a+1,n)})):Array.isArray(e)&&go.loop(e,function(e){i["id"+l]={obj:e},l++})}(o,t,0),n=l,t},t.processComplex=function(e){var r=0;return function o(e,n){go.loop(e,function(e,t){t.level=n,zot(t.open)&&(t.open=s),zot(t.opened)&&(t.opened=!1),t.list&&o(t.list,n+1),r++})}(e,0),n=r,e},zot(o.id0)?t.data=t.processSimple(o):t.data=t.processComplex(o),t.getLinearList=function(e){return zot(e)&&(e=t.data),r(e)[0]},t.getLinearIDs=function(e){return zot(e)&&(e=t.data),r(e)[1]},t.getData=function(n){var r;return function o(e){go.loop(e,function(e,t){if(e==n)return r=t;o(t.list)})}(t.data),r},t.getNextSibling=function(n){var r,i;return function o(e){go.loop(e,function(e,t){if(!i&&r)return i=e;e==n?r=t:o(t.list)})}(t.data),i},t.getPrevSibling=function(r){var i=[];return function o(e,n){go.loop(e,function(e,t){if(e==r)return i[n]||i[n-1];i[n]=e,o(t.list,n+1)})}(t.data,0),answer},Object.defineProperty(t,"length",{get:function(){return n},set:function(e){zon&&zogy("Hierarchy() - length is read only")}}));function r(e){var r=[],i=[];return function o(e,n){go.loop(e,function(e,t){r.push(t.obj),i.push(e),t.open&&o(t.list,n+1)})}(e,0),[r,i]}},go.pickCheck=!1,go.Pick=function(e){go.pickCheck||(z_d("17.6"),go.pickCheck=!0),this.choices=e,this.num=function(e){for(var t=[],o=0;o<e;o++)t.push(go.Pick.choose(this));return this.choices=go.Pick.series(t),this};var r=this;this.loop=function(e,t){for(var o,n=0;n<e;n++)if(void 0!==(o=t(go.Pick.choose(r),n,e)))return o}},go.Pick.prototype.type="Pick",go.Pick.series=function(){return go.pickCheck||(z_d("17.6"),go.pickCheck=!0),go.series.apply(null,arguments)},go.Pick.rand=function(e,t,o,n){return go.pickCheck||(z_d("17.6"),go.pickCheck=!0),go.rand(e,t,o,n)},go.Pick.choose=function(e,t,o){if(go.pickCheck||(z_d("17.6"),go.pickCheck=!0),null==t&&(t=!0),null==e)return e;if("Pick"==e.type||t){var n=e.choices||e;if(Array.isArray(n)){var r=n[Math.floor(Math.random()*n.length)];return go.Pick.choose(r)}return n.constructor==={}.constructor?zot(n.noPick)?zot(n.max)?n:(zot(n.integer)&&(n.integer=!1),r=go.Pick.rand(n.min,n.max,n.integer,n.negative)):n.noPick:"function"==typeof n?(null==n.count?n.count=0:n.count++,go.Pick.choose(n(o))):e}return e},go.scrollX=function(e,t){return z_d("18"),go.abstractScroll("X","Left",e,t)},go.scrollY=function(e,t){return z_d("19"),go.abstractScroll("Y","Top",e,t)},go.abstractScroll=function(e,t,o,n){z_d("20");var r="X"==e?"Y":"X";if(zot(o)){var i=navigator.applicationName;if(-1!=navigator.userAgent.indexOf("Safari")||"Safari"==i);return document.documentElement&&document.documentElement["scroll"+t]||document.body["scroll"+t]}if(zot(n))window.scrollTo(go["scroll"+r](),o);else{n<50&&(n=50);var a=n/50,l=go["scroll"+e](),s=(o-l)/a,c=0,u=setInterval(function(){c++,l+=s,window.scrollTo(go["scroll"+r](),l),a<=c&&(window.scrollTo(go["scroll"+r](),o),clearInterval(u))},50)}return o},go.windowWidth=function(){z_d("21");var e=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,t=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;if(go.mobile()&&!zot(window.orientation)&&(t<e&&90!=Math.abs(window.orientation)||e<t&&90==Math.abs(window.orientation))){var o=e;e=t,t=o}return void 0!==zimDefaultFrame&&zimDefaultFrame.swapRotation?t:e},go.windowHeight=function(){z_d("22");var e=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,t=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;if(go.mobile()&&!zot(window.orientation)&&(t<e&&90!=Math.abs(window.orientation)||e<t&&90==Math.abs(window.orientation))){var o=e;e=t,t=o}return void 0!==zimDefaultFrame&&zimDefaultFrame.swapRotation?e:t},go.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""!=e){for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");void 0===o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o}},go.swapHTML=function(e,t){return z_d("17.2"),go.swapProperties("innerHTML",zid(e),zid(t))},go.urlEncode=function(e){z_d("23");e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},go.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},go.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var r="; expires="+n.toGMTString()}else r="";return document.cookie=e+"="+escape(t)+r+"; path=/",!0}},go.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),n=new Array;for(l=0;l<o.length;l++)n[(t=o[l].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},go.deleteCookie=function(e){return z_d("27"),!zot(go.getCookie(e))&&(go.setCookie(e,"",-1),!0)},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),go;function je(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(go.coordinatesCheck=!1,go.localToGlobal=function(e,t,o,n){if(go.coordinatesCheck||(z_d("50.43"),go.coordinatesCheck=!0),null!=e&&null!=t){var r=n.call(o,e,t),i=o.stage;if(void 0===zimDefaultFrame){if(!i)return r;zimDefaultFrame={stage:i,canvas:i.canvas}}return r.x/=go.scaX,r.y/=go.scaY,r}},go.globalToLocal=function(e,t,o,n){if(go.coordinatesCheck||(z_d("50.43"),go.coordinatesCheck=!0),null!=e&&null!=t){var r=o.stage;if(void 0===zimDefaultFrame){if(!r)return n.call(o,e,t);zimDefaultFrame={stage:r,canvas:r.canvas}}return e*=go.scaX,t*=go.scaY,n.call(o,e,t)}},go.localToLocal=function(e,t,o,n){if(go.coordinatesCheck||(z_d("50.43"),go.coordinatesCheck=!0),null!=e&&null!=t&&null!=o){var r=n.localToGlobal(e,t),i=n.stage;if(void 0===zimDefaultFrame){if(!i)return o.globalToLocal(r.x,r.y);zimDefaultFrame={stage:i,canvas:i.canvas}}return o==(i=i||zimDefaultFrame.stage)?r:r?o.globalToLocal(r.x,r.y):void 0}},go.Stage=function(e){if(z_d("50.44"),!zot(e)){var t="CANVAS"==e.tagName?e:zid(e);zot(t)||(this.cjsStage_constructor(e),this.setBounds(0,0,t.width,t.height),this.type="Stage",void 0===zimDefaultFrame&&(zimDefaultFrame={stage:this}),this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var l=0<this.borderWidth?this.borderWidth/2:0;e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l}}else o=e,n=t,t=e=0;return this.cjsStage_cache(e,t,o,n,r,i),this},this.loop=function(e,t,o,n,r){return go.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d){return go.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},createjs&&!createjs.stageTransformable&&zimDefaultFrame.retina&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,go.scaX=createjs.stageTransformable?1:e,go.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,go.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,go.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsStage_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}))}},go.extend(go.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),go.StageGL=function(e,t){if(z_d("50.45"),!zot(e)){var o="CANVAS"==e.tagName?e:zid(e);zot(o)||(this.cjsStageGL_constructor(e,t),this.setBounds(0,0,o.width,o.height),this.type="StageGL",void 0===zimDefaultFrame&&(zimDefaultFrame={stage:this}),this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var l=0<this.borderWidth?this.borderWidth/2:0;e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l}}else o=e,n=t,t=e=0;return this.cjsStageGL_cache(e,t,o,n,r,i),this},this.loop=function(e,t,o,n,r){return go.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d){return go.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},createjs&&!createjs.stageTransformable&&frame.retina&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,go.scaX=createjs.stageTransformable?1:e,go.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,go.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,go.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}))}},go.extend(go.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),go.containerCheck=!1,go.Container=function(e,t,o,n,r,i,a){var l;if(l=zob(go.Container,arguments,"a, b, c, d, style, group, inherit",this))return l;go.containerCheck||(z_d("50.5"),go.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=i;var u=this,s=!1===r?{}:go.getStyle(this.type,this.group,a);zot(e)&&(e=null!=s.a?s.a:null),zot(t)&&(t=null!=s.b?s.b:null),zot(o)&&(o=null!=s.c?s.c:null),zot(n)&&(n=null!=s.d?s.d:null);var c=d(e,t,o,n);function d(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}zot(e)||this.setBounds(c[0],c[1],c[2],c[3]),this.cache=function(e,t,o,n,r,i,a){var l;if(l=zob(u.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var s=u.getBounds();if(zot(o))if(zot(e)){if(!zot(s)){var c=0<u.borderWidth?u.borderWidth/2:0;e=s.x-c,t=s.y-c,o=s.width+2*c,n=s.height+2*c}}else o=e,n=t,t=e=0;return"Triangle"==u.type&&(e-=u.borderWidth?u.borderWidth:0,o+=u.borderWidth?2*u.borderWidth:0,t-=u.borderWidth?u.borderWidth:0,n+=u.borderWidth?2*u.borderWidth:0),zot(a)&&(a=0),u.cjsContainer_cache(e-a,t-a,o+2*a,n+2*a,r,i),s&&u.setBounds(s.x,s.y,s.width,s.height),u},this.childrenToBitmap=function(){var e=this.cacheCanvas,t=new go.Bitmap(this.cache().cacheCanvas);return e||this.uncache(),this.removeAllChildren(),t.addTo(this),this},createjs&&!createjs.stageTransformable&&frame.retina&&(this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}),!(this.setBounds=function(e,t,o,n){var r=d(e,t,o,n);return this.cjsContainer_setBounds(r[0],r[1],r[2],r[3]),this})!==r&&qe(this,s),this.clone=function(e){var t=this.getBounds();return zot(t)&&(t={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new go.Container(t.x,t.y,t.width,t.height,r,this.group,a)),e)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)}},go.Container.prototype.dispose=function(e){return function e(t,o){!o&&t.dispose&&t.dispose!==go.Container.prototype.dispose&&t.dispose(null,null,!0);if(t.addChild&&(t.removeAllEventListeners(),t.numChildren))for(var n=t.numChildren-1;0<=n;n--)e(t.getChildAt(n));t.parent&&t.parent.removeChild(t)}(this,e),!0},go.Container.prototype.specialColor=function(e,t){"GradientColor"==t.type?e.linearGradient(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"RadialColor"==t.type?e.radialGradient(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type&&e.bitmap(t.image,t.repetition,t.matrix)},zimify(go.Container.prototype),go.extend(go.Container,createjs.Container,["cache","setBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),go.Shape=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(go.Shape,arguments,"a, b, c, d, graphics, optimize, style, group, inherit",this))return c;z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape",this.group=l;var u=!1===a?{}:go.getStyle(this.type,this.group,s),d=this;zot(e)&&(e=null!=u.a?u.a:null),zot(t)&&(t=null!=u.b?u.b:null),zot(o)&&(o=null!=u.c?u.c:null),zot(n)&&(n=null!=u.d?u.d:null),zot(r)&&(r=null!=u.graphics?u.graphics:null),zot(i)&&(i=null!=u.optimize&&u.optimize);var h=g(e,t,o,n);function g(e,t,o,n){var r=[];return zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}if(zot(e)||this.setBounds(h[0],h[1],h[2],h[3]),!i)for(var p=["mt","lt","a","at","bt","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","p"],f=0;f<p.length;f++)!function(){var e=f;d[p[e]]=function(){return d.graphics[p[e]].apply(d.graphics,arguments),d}}();Object.defineProperty(d,"command",{get:function(){return d.graphics.command},set:function(e){}}),this.cache=function(e,t,o,n,r,i,a){var l;if(l=zob(d.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var s=d.getBounds();if(zot(o))if(zot(e)){if(!zot(s)){var c=0<d.borderWidth?d.borderWidth/2:0;e=s.x-c,t=s.y-c,o=s.width+2*c,n=s.height+2*c}}else o=e,n=t,t=e=0;return zot(a)&&(a=0),d.cjsShape_cache(e-a,t-a,o+2*a,n+2*a,r,i),d},!(this.setBounds=function(e,t,o,n){var r=g(e,t,o,n);return this.cjsShape_setBounds(r[0],r[1],r[2],r[3]),this})!==a&&qe(this,u),this.clone=function(e){zot(e)&&(e=!0);var t=this.getBounds();zot(t)&&(t={x:null,y:null,width:null,height:null});var o=d.cloneProps(new go.Shape(t.x,t.y,t.width,t.height,r,a,l,s));return o.graphics=e?d.graphics.clone():d.graphics,o},createjs&&!createjs.stageTransformable&&frame.retina&&(this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsShape_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.dispose=function(e,t,o){this.graphics.c(),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},go.extend(go.Shape,createjs.Shape,["cache","clone","setBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(go.Shape.prototype),go.Bitmap=function(l,s,c,e,t,o,n){var r;if(r=zob(go.Bitmap,arguments,"image, width, height, id, style, group, inherit",this))return r;if(z_d("50.7"),!zot(l)&&l.uncache){var i=l.cacheCanvas,a=l;l=l.cache().cacheCanvas}this.cjsBitmap_constructor(l),a&&!i&&a.uncache();var u=this;this.type="Bitmap",this.group=o;var d,h=!1===t?{}:go.getStyle(this.type,this.group,n);this.id=u.fileID=null!=h.id?h.id:e,zot(s)&&(s=null!=h.width?h.width:null),zot(c)&&(c=null!=h.height?h.height:null),zot(s)||zot(c)||u.setBounds(0,0,s,c),zot(s)&&(s=100),zot(c)&&(c=100),zimDefaultFrame&&(zimDefaultFrame.canvas.getContext("2d")?this.imageData=zimDefaultFrame.canvas.getContext("2d").createImageData(s,c):this.imageData=document.createElement("canvas").getContext("2d").createImageData(s,c),this.drawImageData=function(e,t,o,n,r,i){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=s),zot(i)&&(i=c),!u.proxyCanvas){var a=u.proxyCanvas=document.createElement("canvas");a.setAttribute("width",s),a.setAttribute("height",c),u.proxyContext=a.getContext("2d"),l=u.image=a}u.proxyContext&&u.proxyContext.putImageData(u.imageData,e,t,o,n,r,i)},zot(l)&&u.drawImageData(),l.match&&l.match(/data:image/i)&&setTimeout(function(){u.stage&&u.stage.update(),setTimeout(function(){u.stage&&u.stage.update()},50)},50)),!(this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){if(!zot(l=this.getBounds())){var a=0<this.borderWidth?this.borderWidth/2:0;e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a}}else o=e,n=t,t=e=0;var l=this.getBounds();return this.cjsBitmap_cache(e,t,o,n,r,i),this.setBounds(l.x,l.y,l.width,l.height),this})!==t&&qe(this,h),this.clone=function(){return this.cloneProps(new go.Bitmap(l,null,null,u.fileID,t,this.group,n))},createjs&&!createjs.stageTransformable&&frame.retina&&(this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.getColorAt=function(e,t){d||(u.cache(),d=u.cacheCanvas.getContext("2d"),u.uncache());var o=d.getImageData(e,t,1,1).data;return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},this.dispose=function(e,t,o){this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},go.Bitmap.fromData=function(e,t){var o=new go.Bitmap(e);setTimeout(function(){t(o)},50)},go.extend(go.Bitmap,createjs.Bitmap,["cache","clone","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),zimify(go.Bitmap.prototype),go.Sprite=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y){var b;if(b=zob(go.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, style, group, inherit",this))return b;z_d("50.8"),this.type="Sprite",this.group=z;var v,w=!1===m?{}:go.getStyle(this.type,this.group,y),Y=this;if(zot(d)&&!zot(e)){zot(t)&&(t=null!=w.cols?w.cols:1),zot(o)&&(o=null!=w.rows?w.rows:1),zot(n)&&(n=null!=w.count?w.count:t*o),zot(r)&&(r=null!=w.offsetX?w.offsetX:0),zot(i)&&(i=null!=w.offsetY?w.offsetY:0),zot(a)&&(a=null!=w.spacingX?w.spacingX:0),zot(l)&&(l=null!=w.spacingY?w.spacingY:0),zot(s)&&(s=null!=w.width?w.width:e.width),zot(c)&&(c=null!=w.height?w.height:e.height);var C=(s-r+a)/t-a,x=(c-i+l)/o-l,k=[],T=0;e:for(var A=0;A<o;A++)for(var P=0;P<t;P++){if(++T>n)break e;k.push([r+P*(C+a),i+A*(x+l),C,x])}S(e,k,u)}else if(p)u=(v=p).animations;else{if(!d)return;if(k=d.frames,u=d.animations,zot(e)){var B=d.images?d.images[0]:null;if(B.split){var I=B.split("/").pop();if("EmptyAsset"!=frame.asset(I).type)S(frame.asset(I),k,u);else if("EmptyAsset"!=frame.asset(B).type){frame.asset(B);S(frame.asset(B),k,u)}else v=new createjs.SpriteSheet(d)}else v=new createjs.SpriteSheet(d)}else S(e,k,u)}function S(e,t,o){var n={images:[e.image],frames:t,animations:o||[]};v=new createjs.SpriteSheet(n)}this.animations=u,this.cjsSprite_constructor(v,f),zot(f)||this.stop(),zot(h)&&(h=go.makeID()),this.id=h,zot(g)&&(g=!0),Y.globalControl=g;var X,R=0;this.parseFrames=function(e,t,o,n){var i=[],a=Number.MAX_VALUE,l=0;if(zot(e))zot(t)&&(t=0),zot(o)&&(o=Y.totalFrames-1),s(t,o);else{if(zot(Y.animations)||zot(Y.animations[e]))return[];r(Y.animations[e])}function r(e){var t;Array.isArray(e)?(s((t=e)[0],t[1],t[3]),t[2]&&!zot(Y.animations[t[2]])&&r(Y.animations[t[2]])):e.constructor=={}.constructor?function(e){if(zot(e.frames))return;zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<a&&(a=e.speed),e.speed>l&&(l=e.speed),i.push({f:e.frames[t],s:e.speed});e.next&&!zot(Y.animations[e.next])&&r(Y.animations[e.next])}(e):isNaN(e)||i.push({f:Math.floor(e),s:1})}function s(e,t,o){if(zot(o)&&(o=1),e<t)for(var n=e;n<=t;n++)r(n);else for(n=t;n<=e;n++)r(e-(n-t));function r(e){o<a&&(a=o),l<o&&(l=o),i.push({f:e,s:o})}}if(n)return i;a=go.constrain(go.decimals(a),.1),l=go.constrain(go.decimals(l),.1);for(var c,u=[],d=a!=l,h=0;h<i.length;h++)if(c=i[h],d)for(var g=0;g<go.constrain(Math.round(a<1?c.s/a:c.s),.1);g++)u.push(c.f);else u.push(c.f);return u},this.run=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P){var B,I;if(B=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl"))return B;if(zot(T)&&(T=1),zot(A)||(Y.id=A),zot(P)||(Y.globalControl=P),Array.isArray(t)){var S,O;I=[];for(var E,M=0,j=0;j<t.length;j++){(S=t[j]).lookup=Y.parseFrames(S.label,S.startFrame,S.endFrame),0==j&&(E=S.lookup[0]),delete S.startFrame,delete S.endFrame,S.obj=go.merge(S.obj,{normalizedFrame:S.lookup.length-1}),S.set=go.merge(S.set,{normalizedFrames:{noPick:S.lookup},normalizedFrame:0}),zot(S.wait)&&(S.wait=M*T),O=S.label,delete S.label,I.push(S),M=0;var L=zot(S.time)?e:S.time;0<k-x&&(M=L/(k-x)/2)}if(0==I.length)return this;1==I.length?(e=I[0].time,t=O,D()):Y.gotoAndStop(E)}else D();function D(){X=Y.parseFrames(t,x,k),R=0,Y.gotoAndStop(X[R]),x=k=null,I={normalizedFrame:X.length-1}}if(zot(e)&&(e=1e3),Y.running&&Y.stopAnimate(Y.id),Y.running=!0,!Array.isArray(I)){M=0;0<k-x&&(M=e/Math.abs(k-x)/2),X&&0<X.length&&(M=e/X.length/2),zot(c)&&(c=M*T),zot(m)&&(m=M*T)}return go.animate({target:Y,obj:I,time:e,ease:"linear",call:function(){o&&"function"==typeof o&&o(n||Y),Y.running=!1,Y.stop()},params:n,wait:r,waitedCall:i,waitedParams:a,loop:l,loopCount:s,loopWait:c,loopCall:u,loopParams:d,loopWaitCall:h,loopWaitParams:g,rewind:f,rewindWait:m,rewindCall:z,rewindParams:y,rewindWaitCall:b,rewindWaitParams:v,rewindTime:w,rewindEase:C,override:!1,id:Y.id}),Y.runPaused=!1,Y},this.runPaused=!0,this.pauseRun=function(e){return zot(e)&&(e=!0),Y.runPaused=e,Y.globalControl?go.pauseAnimate(e,Y.id):Y.pauseAnimate(e,Y.id),Y},this.stopRun=function(){return Y.runPaused=!0,Y.running=!1,Y.globalControl?go.stopAnimate(Y.id):Y.stopAnimate(Y.id),Y},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return R},set:function(e){R=Math.round(e),this.gotoAndStop(X[R])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return X},set:function(e){X=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return v.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),!1!==m&&qe(this,w),this.clone=function(){return this.cloneProps(new go.Sprite(e,t,o,n,r,i,a,l,s,c,u,d,null,g,p,m,this.group,y))},createjs&&!createjs.stageTransformable&&frame.retina&&(this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.dispose=function(e,t,o){this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},go.extend(go.Sprite,createjs.Sprite,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(go.Sprite.prototype),go.MovieClip=function(e,t,o,n,r,i,a){var l;if(l=zob(go.MovieClip,arguments,"mode, startPosition, loop, labels, style, group, inherit",this))return l;z_d("50.9"),this.type="MovieClip",this.group=i;var s=!1===r?{}:go.getStyle(this.type,this.group,a);zot(e)&&(e=null!=s.mode?s.mode:null),zot(t)&&(t=null!=s.startPosition?s.startPosition:null),zot(o)&&(o=null!=s.loop?s.loop:null),zot(n)&&(n=null!=s.labels?s.labels:null),this.cjsMovieClip_constructor(e,t,o,n),!1!==r&&qe(this,s),this.clone=function(){return this.cloneProps(new go.MovieClip(e,t,o,n,r,this.group,a))},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},createjs&&!createjs.stageTransformable&&frame.retina&&(this.localToGlobal=function(e,t){return go.localToGlobal(e,t,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(e,t){return go.globalToLocal(e,t,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(e,t,o){return go.localToLocal(e,t,o,this)}),this.dispose=function(e,t,o){this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},go.extend(go.MovieClip,createjs.MovieClip,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(go.MovieClip.prototype),go.SVGContainer=function(e,P,I,S,O,t,o,n){var r;if(r=zob(go.SVGContainer,arguments,"svg, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return r;z_d("50.95"),this.group=o;var i=!1===t?{}:go.getStyle("SVGContainer",this.group,n),E=this,B=new go.Point(0,0);if(zot(P)&&(P=!1),zot(I)&&(I=!0),!zot(e)){if(zot(e.draggable)){if(!e.getAttribute){a=new DOMParser;e=a.parseFromString(e,"image/svg+xml").documentElement}s=this.svg=e}else var a=new DOMParser,l=(e=e.innerHTML?a.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg"),s=this.svg=l?e.getElementsByTagName("svg")[0]:null;if(!zot(s))var c=s.getAttribute("width"),u=s.getAttribute("height");if(c=c&&Number(c.trim()),u=u&&Number(u.trim()),this.zimContainer_constructor(c,u),this.type="SVGContainer",zot(s))return;var M,d=go.black,h=go.black,g=go.black,p=go.black,f=2,m=2,z=1,y=1,b=1,v=1;var w=e.getElementsByTagName("svg");function C(e){var r,i,a,l,s,t=e.split(";");return loop(t,function(e){var t=(e=e.replace(/,/g,"")).split(":"),o=t[0].trim().toLowerCase(),n=t[1].trim().toLowerCase().replace("px","");"fill"==o&&(r=n),"stroke"==o&&(i=n),"stroke-width"==o&&(a=n),"opacity"==o&&(s=l=n),"fill-opacity"==o&&(l=n),"stroke-opacity"==o&&(s=n)}),[r,i,a,l,s]}function x(e,t){var o,n,r,i,a,l,s,c,u,d=L(t),h=d[0],g=d[1],p=d[2],f=(d[3],d[4],d[5]),m=d[6];if("circle"==e){var z=Number(t.getAttribute("r").trim()),y=.5523*z;o=I?new go.Circle(Number(t.getAttribute("r")),h,g,p):new go.Blob(h,g,p,4,z,y,"mirror",null,S,null,null,null,null,null,null,null,null,null,null,O)}else if("rect"==e)if(I)o=new go.Rectangle(Number(t.getAttribute("width")),Number(t.getAttribute("height")),h,g,p,Number(t.getAttribute("rx")));else{var b=Number(t.getAttribute("width")),v=Number(t.getAttribute("height")),w=Number(t.getAttribute("rx")),C=Number(t.getAttribute("ry"));if(w&&C){var x=.5523*w,k=.5523*C;o=new go.Blob(h,g,p,[[w,0,0,0,-x,0,0,0,"free"],[b-w,0,0,0,0,0,x,0,"free"],[b,C,0,0,0,-k,0,0,"free"],[b,v-C,0,0,0,0,0,k,"free"],[b-w,v,0,0,x,0,0,0,"free"],[w,v,0,0,0,0,-x,0,"free"],[0,v-C,0,0,0,k,0,0,"free"],[0,C,0,0,0,0,0,-k,"free"]],null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O)}else o=new go.Blob(h,g,p,[[0,0],[b,0],[b,v],[0,v]],null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O)}else if("line"==e)o=new go.Squiggle(g,p,[[Number(t.getAttribute("x1")),Number(t.getAttribute("y1"))],[Number(t.getAttribute("x2")),Number(t.getAttribute("y2"))]],null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O);else if("polygon"==e||"polyline"==e){var T=t.getAttribute("points");T=(T=T.replace(/-/g," -")).replace(/\s+/g," ");var A,P=[];if(-1!=T.indexOf(","))loop(T.split(" "),function(e){var t=e.split(",");P.push([Number(t[0].trim()),Number(t[1].trim())])});else loop(T.split(" "),function(e,t){(t+1)%2==0&&P.push([A,e.trim()]),A=e.trim()});o="polygon"==e?new Blob(h,g,p,P):new go.Squiggle(g,p,P,null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O)}else"ellipse"==e&&(o=new go.Blob(h,g,p,(r=n=0,i=Number(t.getAttribute("rx")),a=Number(t.getAttribute("ry")),[[n-i,r,0,0,n,(u=r+a)+(s=.5522848*a)-a,n,r-s,"mirror"],[n,r-a,0,0,n-(l=.5522848*i),r,(c=n+i)+l-i,r,"mirror"],[c,r,0,0,n,r-s,n+l-l,u+s-a,"mirror"],[n,u,0,0,c-i+l,r,n-l,r,"mirror"]]),null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O));o.loc(f,m,E);var B=t.getAttribute("transform");(B||M)&&j(o,B||M),!O||"Rectangle"!=o.type&&"Circle"!=o.type||o.transform({showReg:!1,visible:S})}function j(l,e){var t=e.split(")");loop(t,function(e){if(""!=e){var t=e.trim().split("("),o=t[0].trim().toLowerCase(),n=t[1].trim().toLowerCase().replace("px","").replace("deg","");if("translate"==o){var r=n.split(",");l.mov(Number(r[0].trim()),r[1]?Number(r[1].trim()):0)}if("scale"==o){var i=n.split(",");"Blob"==l.type||"Squiggle"==l.type?1==i.length?l.transformPoints("scale",Number(i[0].trim())):2==i.length&&(l.transformPoints("scaleX",Number(i[0].trim())),l.transformPoints("scaleY",Number(i[1].trim()))):1==i.length?l.sca(Number(i[0].trim())):2==i.length&&l.sca(Number(i[0].trim()),Number(i[1].trim()))}if("rotate"==o){var a=n.split(",");1==a.length?a.push(0,0):2==a.length&&a.push(0),l.rot(Number(a[0].trim()),Number(a[1].trim()),Number(a[2].trim()))}"skewX"==o&&(l.skewX=n),"skewY"==o&&(l.skewY=n)}})}0==w.length&&(w=[e]),function c(e){go.loop(e,function(e){var t=e.tagName.toLowerCase();if("path"==t&&k(e),"circle"==t&&x("circle",e),"rect"==t&&x("rect",e),"ellipse"==t&&x("ellipse",e),"line"==t&&x("line",e),"polygon"==t&&x("polygon",e),"polyline"==t&&x("polyline",e),"g"==t){var o,n,r,i,a,l=e.getAttribute("style");if(l){var s=C(l);o=s[0],n=s[1],r=s[2],i=s[3],a=s[4]}M=e.getAttribute("transform"),h=e.getAttribute("fill")?e.getAttribute("fill"):zot(o)?d:o,p=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(n)?g:n,m=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(r)?f:r,y=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(i)?z:i,v=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(a)?b:a}c(e.children),"g"==e.tagName.toLowerCase()&&(h=d,p=g,m=f,y=z,v=b,M=null)})}(w)}function L(e){var t,o,n,r,i,a=e.getAttribute("style");if(a){var l=C(a);t=l[0],o=l[1],n=l[2],r=l[3],i=l[4]}t=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?h:t,o=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?p:o,n=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?m:n,r=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?y:r,i=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?v:i;var s=e.getAttribute("x")?e.getAttribute("x"):0;s=e.getAttribute("cx")?e.getAttribute("cx"):s;var c=e.getAttribute("y")?e.getAttribute("y"):0;return c=e.getAttribute("cy")?e.getAttribute("cy"):c,zot(r)||zot(t)||(t=go.convertColor(t,"rgba",Number(r))),zot(i)||zot(o)||(o=go.convertColor(o,"rgba",Number(i))),[t,o,Number(n),Number(r),Number(i),Number(s),Number(c)]}function k(t,e){zot(e)&&(e=!0);var o,n,r=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],i=["m","l","h","v","c","s","q","t","a","z"],a=new go.Point(0,0);if(zot(t.getAttribute))var l=t;else t.getAttribute("id"),l=t.getAttribute("d");if(l=(l=(l=(l=l.replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," "),e){var s=L(t),c=s[0],u=s[1],d=s[2];s[3],s[4]}var h,g=[],p=[0,0],f=new go.Point(0,0),m=new go.Point(0,0,0,0),z=new go.Point(0,0,0,0,0,0),y=(new go.Point(0,0,0,0,0,0,0),l.split(" ")),b=y.slice(1,y.length),v=[],w=!1,C="",x=!1,k="squiggle",T=null;function A(){C=v[v.length-1],2<=g.length&&("z"!=C&&"Z"!=C||(k="blob")),(o="squiggle"==k?new go.Squiggle(u,d,g,null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O):new go.Blob(c,u,d,g,null,null,null,null,S,null,null,null,null,null,null,null,null,null,null,O)).loc(0,0,E),C=v[v.length-1],v[v.length-2],0<=i.indexOf(C)?(p[0]=g[g.length-1][0],p[1]=g[g.length-1][1],B.x=g[g.length-1][0],B.y=g[g.length-1][1],(g=[]).push([p[0],p[1]])):(p=[0,0],g=[[0,0]]),v=[],"z"!=C&&"Z"!=C&&v.push(C),a.x=0,a.y=0;var e=t.getAttribute("transform");(e||M)&&j(o,e||M)}return go.loop(b,function(e,t){if(0==t&&(B.x=0,B.y=0,p=[0,0],C=""),-1==r.indexOf(e)){if("lxo"==h&&(h="lx",v.push("l"),w=!0),"lyo"==h&&(h="ly",w=!0),"Lxo"==h&&(h="Lx",v.push("L"),w=!0),"Lyo"==h&&(h="Ly",w=!0),n=Number(e),n=Math.round(100*n)/100,"X"==h?(B.x=n,h="Y"):"Y"==h?(B.y=n,h="Lxo",g.push([B.x,B.y])):"x"==h?(B.x=B.x+n,h="y"):"y"==h&&(B.y=B.y+n,h="lxo",g.push([B.x,B.y])),"H"==h||"h"==h?(a.x=g[g.length-1][0],a.y=g[g.length-1][1],a.x=a.x+("h"==h?n:n-B.x),g.push([a.x,a.y]),h="Lx"):"V"!=h&&"v"!=h||(a.x=g[g.length-1][0],a.y=g[g.length-1][1],a.y=a.y+("v"==h?n:n-B.y),g.push([a.x,a.y]),h="lx"),"Lx"==h?(f.x=n,h="Ly"):"Ly"==h?(f.y=n,a.x=f.x,a.y=f.y,g.push([a.x,a.y]),h="Lx"):"lx"==h?(0<v.length&&(0!=a.x&&0!=a.y?(B.x=a.x,B.y=a.y):(B.x=a.x+B.x,B.y=a.y+B.y)),f.x=B.x+n,h=w?"lyo":"ly"):"ly"==h&&(f.y=B.y+n,a.x=f.x,a.y=f.y,g.push([a.x,a.y]),h="lx"),"qx"==h||"Qx"==h)0<g.length?(B.x=g[g.length-1][0],B.y=g[g.length-1][1]):(B.x=0,B.y=0),m.x="qx"==h?B.x+n:n,h="qx"==h?"qy":"Qy";else if("qy"==h||"Qy"==h){if(m.y="qy"==h?B.y+n:n,h="qy"==h?"qz":"Qz",x)x=!1,(o=g[g.length-1])[6]=-o[4],o[7]=-o[5],o[8]="mirror",a.x=m.x,a.y=m.y,g[g.length]=[a.x,a.y,0,0,-o[6],o[7],0,0,"free"],h="qy"==h?"qx":"Qx"}else if("qz"==h||"Qz"==h)m.z="qz"==h?B.x+n:n,h="qz"==h?"qq":"Qq";else if("qq"==h||"Qq"==h){m.w="qq"==h?B.y+n:n;var o=g[g.length-1];a.x=o[0],a.y=o[1],1==g.length?(o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=2/3*(m.x-a.x),o[7]=2/3*(m.y-a.y),o[8]="free"):g[g.length]=[a.x,a.y,0,0,0,0,2/3*(m.x-a.x),2/3*(m.y-a.y),"free"],a.x=m.z,a.y=m.w,g[g.length]=[a.x,a.y,0,0,2/3*(m.x-a.x),2/3*(m.y-a.y),0,0,"free"],h="qq"==h?"qx":"Qx"}if("cx"==h||"Cx"==h)0<g.length?(B.x=g[g.length-1][0],B.y=g[g.length-1][1]):(B.x=0,B.y=0),z.x="cx"==h?B.x+n:n,h="cx"==h?"cy":"Cy";else if("cy"==h||"Cy"==h)z.y="cy"==h?B.y+n:n,h="cy"==h?"cz":"Cz";else if("cz"==h||"Cz"==h)z.z="cz"==h?B.x+n:n,h="cz"==h?"cq":"Cq";else if("cq"==h||"Cq"==h){if(z.q="cq"==h?B.y+n:n,h="cq"==h?"cr":"Cr",x)(o=g[g.length-1])[2]=0,o[3]=0,zot(o[4])&&(o[4]=0),zot(o[5])&&(o[5]=0),o[6]=-o[4],o[7]=-o[5],o[8]="mirror",a.x=z.z,a.y=z.q,g[g.length]=[a.x,a.y,0,0,z.x-a.x,z.y-a.y,0,0,"free"],h="cr"==h?"cx":"Cx"}else if("cr"==h||"Cr"==h)z.r="cr"==h?B.x+n:n,h="cr"==h?"cs":"Cs";else if("cs"==h||"Cs"==h){z.s="cs"==h?B.y+n:n;o=g[g.length-1];1==g.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),o[6]=z.x-o[0],o[7]=z.y-o[1],o[8]="free",a.x=z.r,a.y=z.s,g[g.length]=[a.x,a.y,0,0,z.z-a.x,z.q-a.y,0,0,"free"],h="cs"==h?"cx":"Cx"}}else v.push(e),"s"!=e&&(x=!1),1<v.length&&("M"!=e&&"m"!=e||(A(v),"M"==e?(B.x=0,B.y=0):(B.x=g[g.length-1][0],B.y=g[g.length-1][1]),g=[],(v=[]).push(e))),"M"==e?h="X":"m"==e?h="x":"L"==e?(h="Lx",P&&T&&"l"!=T&&A(v),T="l"):"l"==e?(h="lx",P&&T&&"l"!=T&&A(v),T="l"):"H"==e?(h="H",P&&T&&"l"!=T&&A(v),T="l"):"h"==e?(h="h",P&&T&&"l"!=T&&A(v),T="l"):"V"==e?(h="V",P&&T&&"l"!=T&&A(v),T="l"):"v"==e?(h="v",P&&T&&"l"!=T&&A(v),T="l"):"C"==e?(h="Cx",P&&T&&"c"!=T&&A(v),T="c"):"c"==e?(h="cx",P&&T&&"c"!=T&&A(v),T="c"):"S"==e?(x=!0,h="Cx",P&&T&&"c"!=T&&A(v),T="c"):"s"==e?(x=!0,h="cx",P&&T&&"c"!=T&&A(v),T="c"):"Q"==e?(h="Qx",P&&T&&"q"!=T&&A(v),T="q"):"q"==e?(h="qx",P&&T&&"q"!=T&&A(v),T="q"):"T"==e?(x=!0,h="Qx",P&&T&&"q"!=T&&A(v),T="q"):"t"==e?(x=!0,h="qx",P&&T&&"q"!=T&&A(v),T="q"):"A"==e?k=null:"z"!=e&&"Z"!=e||(k="blob")}),e&&A(),g}!(E.processPath=function(e){return k(e,!1)})!==t&&qe(this,i),this.clone=function(){return E.cloneProps(new go.SVGContainer(e,P,I,S,O,t,this.group,n))}},go.extend(go.SVGContainer,go.Container,"clone","zimContainer",!1),go.Circle=function(e,t,o,n,r,i,a,l,s,c,u){var d;if(d=zob(go.Circle,arguments,"radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",this))return d;z_d("51"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Circle",this.group=c;var h=!1===s?{}:go.getStyle(this.type,this.group,u);zot(e)&&(e=null!=h.radius?h.radius:50),zot(r)&&(r=null!=h.dashed&&h.dashed),zot(o)&&(o=null!=h.borderColor?h.borderColor:null),zot(n)&&(n=null!=h.borderWidth?h.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=h.color?h.color:0<n?"rgba(0,0,0,0)":"black"),zot(i)&&(i=null!=h.percent?h.percent:100),zot(a)&&(a=null==h.percentClose||h.percentClose),zot(l)&&(l=null!=h.strokeObj?h.strokeObj:{});var g=function(){return arguments}(e,t,o,n,i);e=go.Pick.choose(e),t=go.Pick.choose(t),o=go.Pick.choose(o),n=go.Pick.choose(n),i=go.Pick.choose(i);var p=this,f=e,m=t,z=o,y=n;this.mouseChildren=!1;var b=this.shape=new createjs.Shape;this.addChild(b);var v,w,C=b.graphics;function x(){C.c(),p.colorCommand=C.f(m).command,m&&m.type&&p.specialColor(p.colorCommand,m),(zot(y)||0<y)&&(zot(z)&&zot(y)||(zot(z)&&(z="black"),p.borderColorCommand=C.s(z).command,z&&z.type&&p.specialColor(p.borderColorCommand,z),p.borderWidthCommand=C.ss(y,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,r&&(p.borderDashedCommand=C.sd([10,10],5).command)));var e=2*f;if("number"==typeof i&&0<=i&&i<100){var t=360*i/100/2;C.arc(0,0,f,(-t-90)*Math.PI/180,(t-90)*Math.PI/180,!1),a&&C.cp(),e=f-Math.cos(t*Math.PI/180)*f}else C.dc(0,0,f);p.setBounds(-f,-f,2*f,e)}x(),Object.defineProperty(p,"color",{get:function(){return m},set:function(e){zot(e)&&(e="black"),(m=e)&&e.type?p.specialColor(p.colorCommand,e):p.colorCommand.style=e}}),this.setColorRange=function(e,t){return w=zot(t)?(v=p.color,e):(v=zot(e)?p.color:e,t),p};var k=0;Object.defineProperty(p,"colorRange",{get:function(){return k},set:function(e){k=e,zot(v)||zot(w)||(p.color=go.colorRange(v,w,e))}}),Object.defineProperty(p,"borderColor",{get:function(){return z},set:function(e){z=e,p.borderColorCommand?e&&e.type?p.specialColor(p.borderColorCommand,e):p.borderColorCommand.style=e:x()}}),Object.defineProperty(p,"borderWidth",{get:function(){return y},set:function(e){0<e||(e=0),y=e,p.borderWidthCommand&&0!=y?(p.borderWidthCommand.width=y,r&&(p.borderDashedCommand.segments=[20,10],p.borderDashedCommand.offset=5)):x()}}),Object.defineProperty(p,"radius",{get:function(){return f},set:function(e){f=e,x()}}),!1!==s&&qe(this,h),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.clone=function(e){var t=p.cloneProps(new go.Circle(e||!go.isPick(g[0])?p.radius:g[0],e||!go.isPick(g[1])?p.color:g[1],e||!go.isPick(g[2])?p.borderColor:g[2],e||!go.isPick(g[3])?p.borderWidth:g[3],r,e||!go.isPick(g[4])?i:g[4],a,l,s,this.group,u));return p.linearGradientParams&&t.linearGradient.apply(t,p.linearGradientParams),p.radialGradientParams&&t.radialGradient.apply(t,p.radialGradientParams),t}},go.extend(go.Circle,go.Container,"clone","zimContainer",!1),go.Rectangle=function(t,o,e,n,r,i,a,l,s,c,u){var d;if(d=zob(go.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, style, group, inherit",this))return d;z_d("52"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=c;var h=!1===s?{}:go.getStyle(this.type,this.group,u);zot(t)&&(t=null!=h.width?h.width:null),zot(o)&&(o=null!=h.height?h.height:zot(t)?100:t),zot(t)&&(t=o),zot(i)&&(i=null!=h.corner?h.corner:0),zot(a)&&(a=null!=h.dashed&&h.dashed),zot(n)&&(n=null!=h.borderColor?h.borderColor:null),zot(r)&&(r=null!=h.borderWidth?h.borderWidth:null),n<0||r<0?n=r=null:null!=n&&null==r&&(r=1),zot(e)&&(e=null!=h.color?h.color:0<r?"rgba(0,0,0,0)":"black"),zot(l)&&(l=null!=h.strokeObj?h.strokeObj:{});var g=function(){return arguments}(t,o,e,n,r);t=go.Pick.choose(t),o=go.Pick.choose(o),e=go.Pick.choose(e),n=go.Pick.choose(n),r=go.Pick.choose(r);var p=this,f=e,m=n,z=r;this.mouseChildren=!1;var y=this.shape=new createjs.Shape;this.addChild(y);var b,v,w=y.graphics;function C(){w.c(),p.colorCommand=w.f(f).command,e&&e.type&&p.specialColor(p.colorCommand,e),(zot(z)||0<z)&&(zot(m)&&zot(z)||(zot(m)&&(m="black"),p.borderColorCommand=w.s(m).command,m&&m.type&&p.specialColor(p.borderColorCommand,m),p.borderWidthCommand=w.ss(z,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,a&&(p.borderDashedCommand=w.sd([10,10],5).command))),Array.isArray(i)?w.rc(0,0,t,o,i[0],i[1],i[2],i[3]):0<i?w.rr(0,0,t,o,i):w.r(0,0,t,o),p.setBounds(0,0,t,o)}C(),Object.defineProperty(p,"color",{get:function(){return f},set:function(e){zot(e)&&(e="black"),(f=e)&&e.type?p.specialColor(p.colorCommand,e):p.colorCommand.style=e}}),this.setColorRange=function(e,t){return v=zot(t)?(b=p.color,e):(b=zot(e)?p.color:e,t),p};var x=0;Object.defineProperty(p,"colorRange",{get:function(){return x},set:function(e){x=e,zot(b)||zot(v)||(p.color=go.colorRange(b,v,e))}}),Object.defineProperty(p,"borderColor",{get:function(){return m},set:function(e){m=e,p.borderColorCommand?e&&e.type?p.specialColor(p.borderColorCommand,e):p.borderColorCommand.style=e:C()}}),Object.defineProperty(p,"borderWidth",{get:function(){return z},set:function(e){0<e||(e=0),z=e,p.borderWidthCommand&&0!=z?(p.borderWidthCommand.width=z,a&&(p.borderDashedCommand.segments=[20,10],p.borderDashedCommand.offset=5)):C()}}),Object.defineProperty(p,"corner",{get:function(){return i},set:function(e){i=e,C()}}),!1!==s&&qe(this,h),this.clone=function(e){return p.cloneProps(new go.Rectangle(e||!go.isPick(g[0])?t:g[0],e||!go.isPick(g[1])?o:g[1],e||!go.isPick(g[2])?p.color:g[2],e||!go.isPick(g[3])?p.borderColor:g[3],e||!go.isPick(g[4])?p.borderWidth:g[4],i,a,l,s,this.group,u))}},go.extend(go.Rectangle,go.Container,"clone","zimContainer",!1),go.Triangle=function(s,c,o,e,t,n,u,d,h,g,r,i,a){var l;if(l=zob(go.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed, strokeObj, style, group, inherit",this))return l;z_d("53"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Triangle",this.group=i;var p=!1===r?{}:go.getStyle(this.type,this.group,a);zot(s)&&(s=null!=p.a?p.a:100),zot(c)&&(c=null!=p.b?p.b:s),zot(o)&&(o=null!=p.c?p.c:c),-1==o&&(o=Math.sqrt(Math.pow(s,2)+Math.pow(c,2))),zot(u)&&(u=null==p.center||p.center),zot(d)&&(d=null!=p.adjust?p.adjust:0),zot(t)&&(t=null!=p.borderColor?p.borderColor:null),zot(n)&&(n=null!=p.borderWidth?p.borderWidth:null),t<0||n<0?t=n=null:null!=t&&null==n&&(n=1),zot(e)&&(e=null!=p.color?p.color:0<n?"rgba(0,0,0,0)":"black"),zot(d)&&(d=null!=p.adjust?p.adjust:0),zot(g)&&(g=null!=p.strokeObj?p.strokeObj:{});var f=function(){return arguments}(s,c,o,e,t,n);s=go.Pick.choose(s),c=go.Pick.choose(c),o=go.Pick.choose(o),this.a=s,this.b=c,this.c=o,e=go.Pick.choose(e),t=go.Pick.choose(t),n=go.Pick.choose(n);var m=this,z=e,y=t,b=n;this.mouseChildren=!1;var v=[s,c,o];v.sort(function(e,t){return t-e});var w=v[0],C=v[1],x=v[2],k=[v.indexOf(s),v.indexOf(c),v.indexOf(o)];if(C+x<w)zog("zim display - Triangle(): invalid triangle lengths");else{var T=this.shape=new createjs.Shape;this.adjusted=d,this.addChild(T);var A,P,B=T.graphics;S(),Object.defineProperty(m,"color",{get:function(){return z},set:function(e){zot(e)&&(e="black"),(z=e)&&e.type?m.specialColor(m.colorCommand,e):m.colorCommand.style=e}}),this.setColorRange=function(e,t){return P=zot(t)?(A=m.color,e):(A=zot(e)?m.color:e,t),m};var I=0;Object.defineProperty(m,"colorRange",{get:function(){return I},set:function(e){I=e,zot(A)||zot(P)||(m.color=go.colorRange(A,P,e))}}),Object.defineProperty(m,"borderColor",{get:function(){return y},set:function(e){y=e,m.borderColorCommand?e&&e.type?m.specialColor(m.borderColorCommand,e):m.borderColorCommand.style=e:S()}}),Object.defineProperty(m,"borderWidth",{get:function(){return b},set:function(e){0<e||(e=0),b=e,m.borderWidthCommand&&0!=b?(m.borderWidthCommand.width=b,h&&(m.borderDashedCommand.segments=[20,10],m.borderDashedCommand.offset=5)):S()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},!(this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this})!==r&&qe(this,p),this.clone=function(e){var t=m.cloneProps(new go.Triangle(e||!go.isPick(f[0])?s:f[0],e||!go.isPick(f[1])?c:f[1],e||!go.isPick(f[2])?o:f[2],e||!go.isPick(f[3])?m.color:f[3],e||!go.isPick(f[4])?m.borderColor:f[4],e||!go.isPick(f[5])?m.borderWidth:f[5],u,d,h,g,r,this.group,a));return m.linearGradientParams&&t.linearGradient.apply(t,m.linearGradientParams),m.radialGradientParams&&t.radialGradient.apply(t,m.radialGradientParams),t}}function S(){B.c(),m.colorCommand=B.f(z).command,z&&z.type&&m.specialColor(m.colorCommand,z),(zot(b)||0<b)&&(zot(y)&&zot(b)||(zot(y)&&(y="black"),m.borderColorCommand=B.s(y).command,y&&y.type&&m.specialColor(m.borderColorCommand,y),m.borderWidthCommand=B.ss(b,g.caps,g.joints,g.miterLimit,g.ignoreScale).command,h&&(m.borderDashedCommand=B.sd([10,10],5).command))),B.mt(0,0),m.one={x:0,y:0},B.lt(s,0),m.two={x:s,y:0};var e=180*Math.acos((Math.pow(C,2)+Math.pow(x,2)-Math.pow(w,2))/(2*C*x))/Math.PI,t=180*Math.asin(C*Math.sin(e*Math.PI/180)/w)/Math.PI,o=[e,t,180-e-t];m.angles=[o[k[1]],o[k[2]],o[k[0]]];var n=m.angles[1],r=Math.cos(n*Math.PI/180)*c,i=Math.sin(n*Math.PI/180)*c,a=Math.max(s,s-r),l=i;m.setBounds(0,d,a,l),T.y=l,B.lt(s-r,0-i),m.three={x:s-r,y:0-i},B.cp(),u&&(m.regX=a/2,m.regY=l/2),d&&(m.shape.y+=d)}},go.extend(go.Triangle,go.Container,"clone","zimContainer"),go.Squiggle=function(T,A,P,B,I,S,O,E,M,j,t,L,D,Y,X,R,_,e,F,W,H,o,G){var n;if(n=zob(go.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return n;z_d("53.2"),this.group=o;var N=!1===H?{}:go.getStyle("Squiggle",this.group,G);if(zot(A)&&(A=null!=N.thickness?N.thickness:6),zot(B)&&(B=null!=N.length?N.length:300),zot(P)&&(P=null!=N.points?N.points:5),"string"==typeof P){var r=new go.SVGContainer;P=r.processPath(P)}var V="number"==typeof P?P:P.length;if(0!=V){zot(I)&&(I=null!=N.controlLength?N.controlLength:B/V),this.zimContainer_constructor(B,I,null,null,!1),this.type="Squiggle",zot(D)&&(D=null!=N.dashed&&N.dashed),zot(T)&&(T=null!=N.color?N.color:go.blue),T.style&&(this.colorCommand=T,T="black"),zot(S)&&(S=null!=N.controlType?N.controlType:null);var i=S;zot(S)&&(S="mirror"),zot(O)&&(O=null!=N.lockControlType&&N.lockControlType),zot(F)&&(F=null==N.interactive||N.interactive),zot(E)&&(E=null!=N.showControls?N.showControls:F);var q=E;zot(M)&&(M=null!=N.lockControls?N.lockControls:!F),zot(j)&&(j=null!=N.handleSize?N.handleSize:go.mobile()?20:10),zot(t)&&(t=null!=N.allowToggle?N.allowToggle:F),zot(L)&&(L=null!=N.move?N.move:F),zot(X)&&(X=null!=N.stickColor?N.stickColor:"#111"),zot(R)&&(R=null!=N.selectColor?N.selectColor:"#fff"),zot(_)&&(_=null!=N.selectPoints?N.selectPoints:F),this.stickColor=X,zot(Y)&&(Y=null==N.onTop||N.onTop),zot(e)&&(e=null!=N.editPoints?N.editPoints:F),zot(W)&&(W=null!=N.strokeObj?N.strokeObj:{});var U=function(){return arguments}(T);T=go.Pick.choose(T);var K,Z,Q,J=this;this.types=["mirror","straight","free","none"];this.interactive=F,this.num=V,this.onTop=Y,this.move=L,this.editPoints=e,this.allowToggle=t,this.lockControlType=O,this.selectPoints=_,this.lockControls=M;var $,ee,te,oe,ne,re,ie,ae,le=T,se=A,a=J.move,ce=2;i&&"number"!=typeof P&&loop(P,function(e){"none"==(e[8]=i)&&(e[4]=e[5]=e[6]=e[7]=0)}),d(),J.selectionManager.on("keydown",function(e){if(J.selectPoints&&J.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ue();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=J.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=J.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=J.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=J.selectionManager.shiftKey?10:1),re(n)}ie(),J.dispatchEvent("update"),J.stage&&J.stage.update()}}}),J.selectionManager.on("keyup",function(e){if(J.selectPoints&&J.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ue();if(0<t.length)for(var o=0;o<t.length;o++)de(t[o])}}),J.selectionManager.on("undo",function(){if(J.selectPoints&&J.keyFocus&&J.lastPoints){var e=go.copy(J.lastPoints);J.lastPoints=go.copy(J.points),J.points=e,J.stage&&J.stage.update()}}),re=function(e){if(!J.lockControls)if(e.rect1){var t=(n=e).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,r=e,i=r.other,a=(n=r.ball).index,l=S;if(zot(K[a][4])||(l=K[a][4]),"straight"==l||"mirror"==l){var s=r.x-n.x,c=r.y-n.y;if("mirror"==l)i.x=n.x-s,i.y=n.y-c;else{var u=Math.atan2(c,s),d=-i.stickLength*Math.cos(u+Math.PI),h=-i.stickLength*Math.sin(u+Math.PI);i.x=n.x-d,i.y=n.y-h}}}},Object.defineProperty(J,"move",{get:function(){return L},set:function(e){L!=e&&((L=e)?he:ge)()}}),Object.defineProperty(J,"interactive",{get:function(){return F},set:function(e){F=e,J.showControls=F,J.allowToggle=F,J.editPoints=F,J.lockControls=!F,J.selectPoints=F,J.move=F,J.points=J.points}}),Object.defineProperty(J,"allowToggle",{get:function(){return t},set:function(e){t!=e&&((t=e)?J.move&&he():!q&&J.move&&ge())}});var l,s,c=M;Object.defineProperty(J,"lockControls",{get:function(){return c},set:function(e){(c=e)?(J.controls.mouseChildren=!1,J.controls.mouseEnabled=!1):(J.controls.mouseChildren=!0,J.controls.mouseEnabled=!0)}}),J.lockControls=c,Object.defineProperty(J,"controlsVisible",{get:function(){return q},set:function(e){(q=e)?J.showControls():J.hideControls()}}),Object.defineProperty(J,"color",{get:function(){return le},set:function(e){zot(e)&&(e="black"),(le=e)&&e.type?J.specialColor(J.colorCommand,e):J.colorCommand.style=e}}),this.setColorRange=function(e,t){return s=zot(t)?(l=J.color,e):(l=zot(e)?J.color:e,t),J};var u=0;Object.defineProperty(J,"colorRange",{get:function(){return u},set:function(e){u=e,zot(l)||zot(s)||(J.color=go.colorRange(l,s,e))}}),Object.defineProperty(J,"thickness",{get:function(){return se},set:function(e){0<e||(e=0),se=e,J.thicknessCommand&&0!=se?(J.thicknessCommand.width=se,D&&(J.borderDashedCommand.segments=[20,10],J.borderDashedCommand.offset=5)):ie()}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==J},set:function(e){go.KEYFOCUS=J}}),go.KEYFOCUS||function(){if(!J.selectPoints)return;J.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(J,"points",{get:function(){for(var e,t,o=[],n=0;n<K.length;n++)t=K[n],e=[go.decimals(t[0].x),go.decimals(t[0].y),go.decimals(t[1].x),go.decimals(t[1].y),go.decimals(t[2].x),go.decimals(t[2].y),go.decimals(t[3].x),go.decimals(t[3].y)],t[4]&&"mirror"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=J.x,o=J.y,n=J.visible;J.dispose(!0),P=e,J.shape&&(J.shape.graphics.clear(),J.sticks.graphics.clear(),J.controls.noDrag(),J.removeAllChildren(),delete J.shape,delete J.sticks,delete J.controls),d(),J.lockControls=c,J.x=t,J.y=o,J.visible=n}}),Object.defineProperty(J,"pointsAdjusted",{get:function(){var r,i,a=[],l=J.pointObjects;return go.loop(l.length,function(e,t){if(po=l[e],i=K[e],0==po[0].rotation&&0==po[0].scaleX&&0==po[0].scaleY)r=[go.decimals(i[0].x),go.decimals(i[0].y),go.decimals(i[1].x),go.decimals(i[1].y),go.decimals(i[2].x),go.decimals(i[2].y),go.decimals(i[3].x),go.decimals(i[3].y)];else{var o=po[0].localToLocal(po[2].x,po[2].y,po[0].parent),n=po[0].localToLocal(po[3].x,po[3].y,po[0].parent);r=[go.decimals(i[0].x),go.decimals(i[0].y),go.decimals(i[1].x),go.decimals(i[1].y),go.decimals(o.x-i[0].x),go.decimals(o.y-i[0].y),go.decimals(n.x-i[0].x),go.decimals(n.y-i[0].y)]}i[4]&&"mirror"!==i[4]&&r.push(i[4]),a.push(r)}),a},set:function(e){zon&&zogy("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(J,"pointObjects",{get:function(){return K},set:function(e){zon&&zog("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(J,"pointControls",{get:function(){return Q},set:function(e){zon&&zog("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(J,"pointCircles",{get:function(){return Z},set:function(e){zon&&zog("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(J,"segmentPoints",{get:function(){var n=[],r=J.pointsAdjusted;return go.loop(r.length-1,function(e,t){var o=J.getSegmentPoint(r[e],r[e+1]);n.push(o)}),n},set:function(e){zon&&zog("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(J,"segmentRatios",{get:function(){var o=[],n=0;go.loop(J.segmentPoints,function(e){var t=go.distanceAlongCurve(e);o.push(t),n+=t});var t=[],r=0;return go.loop(o,function(e){r+=e/n,t.push(r)}),t},set:function(e){zon&&zog("Squiggle() - segmentRatios is read only")}}),J.approximateBounds=function(e,t){zot(e)&&(e=80),e/=J.num;var o=J.interpolate(e,null,!0,null,!0),n=go.boundsAroundPoints(o);if(J.setBounds(n.x,n.y,n.width,n.height),t){J.hitPathPoints?J.hitPathPoints.removeAllChildren():J.hitPathPoints=(new go.Container).addTo(),J.hitPathPoints.top();for(var r=0;r<o.length;r++){var i=o[r];i=J.localToGlobal(i.x,i.y),new go.Circle(3).loc(i.x,i.y,J.hitPathPoints)}}return J},J.getPointAngle=function(e){var t=J.pointObjects[e][0],o=J.pointObjects[e][2],n=J.pointObjects[e][3];if(t==J.stage)var r=new go.Point(o.x,o.y),i=new go.Point(n.x,n.y);else r=t.localToGlobal(o.x,o.y),i=t.localToGlobal(n.x,n.y);return go.angle(r.x,r.y,i.x,i.y)},J.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==ae.x&&0==ae.y||(o.x+=ae.x,n.x+=ae.x,r.x+=ae.x,i.x+=ae.x,o.y+=ae.y,n.y+=ae.y,r.y+=ae.y,i.y+=ae.y),[o,n,r,i]}},J.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=J.pointsAdjusted;return 2==J.num?[[J.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[J.getSegmentPoint(t[0],t[1]),J.getSegmentPoint(t[1],t[2])],[0,1]]:e>=J.num-2?[[J.getSegmentPoint(t[J.num-3],t[J.num-2]),J.getSegmentPoint(t[J.num-2],t[J.num-1])],[J.num-3,J.num-2]]:[[J.getSegmentPoint(t[e-1],t[e]),J.getSegmentPoint(t[e],t[e+1]),J.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},J.getCurvePoint=function(o,e,t,n,r){(zot(o)||isNaN(o))&&(o=0),zot(e)&&(e=J.segmentRatios),zot(t)&&(t=J.segmentPoints),zot(n)&&(n=!1),zot(r)&&(r=!1);var i=e,a=t,l=go.loop(i,function(e,t){if(o<=e)return t}),s=0<l?i[l-1]:0,c=0<l?i[l]-i[l-1]:i[l];if(c){var u=(o-s)/c,d=go.pointAlongCurve(a[l],u,n,!0),h=J.localToGlobal(d.x,d.y);return h.angle=d.angle,h.z=l,zot(h)?void 0:h}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=J.points,n=J.segmentRatios;return g(o,J.pointControls,n,e,t),J.points=o,J.num=o.length,J},this.addPoints=function(i,a,l,t,s,c,u){zot(c)&&(c=go.copy(J.points));var e=go.copy(J.segmentRatios),d=0;if(s&&(J.interpolatedPoints=[]),t)var h=e.length*i;return go.loop(e,function(o,n){s&&g(c,J.pointControls,J.segmentRatios,100*d,a,!zot(l)&&n!=l,s,u);var e=t?Math.round(h*(o-d)):i,r=1/(e+1);go.loop(e,function(e){var t=d+(o-d)*r*(e+1);g(c,J.pointControls,J.segmentRatios,100*t,a,!zot(l)&&n!=l,s,u),!s&&0<i&&(J.points=c)}),d=o}),s&&"Squiggle"==J.type&&g(c,J.pointControls,J.segmentRatios,100,a,!1,s,u),J.stage&&J.stage.update(),J.num=c.length,J},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),J.addPoints(e,"none",t,o,!0,n,r),J.interpolatedPoints},this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.thicknessCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.thicknessCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.dispose=function(e,t,o){if(J.shape){J.shape.cursor="default";for(var n=0;n<J.points.length;n++)J.pointObjects[n][1].removeAllEventListeners();for(n=0;n<Z.length;n++)Z[n].removeAllEventListeners();J.sticks.removeFrom(J),J.controls.removeFrom(J),J.shape.removeAllEventListeners(),J.controls.removeAllEventListeners(),J.off("mousedown",J.toggleEvent),J.off("click",J.clickEvent),J.toggleStageEvent&&J.stage.off("stagemousedown",J.toggleStageEvent),!e&&J.selectPoints&&J.selectionManager.removeAllEventListeners()}}}function d(){ae&&ae.removeAllEventListeners(),J.num=V="number"==typeof P?P:P.length,V=Math.max(2,V),I=B/V,$=J.shape=new go.Shape({style:!1}).addTo(J);var n=J.sticks=new go.Shape({style:!1}).addTo(J);j<=0&&n.removeFrom();var m=$.graphics;m.c();var z=n.graphics;z.c();var e=j/10*8,t=j;J.selectPoints?(J.selectedBalls=new go.SelectionSet,J.selectedRect1s=new go.SelectionSet,J.selectedRect2s=new go.SelectionSet,J.selectionManager=new go.SelectionManager([J.selectedBalls,J.selectedRect1s,J.selectedRect2s],"ctrl",!1)):J.selectionManager=new go.SelectionManager(null,"ctrl");var o,r,i,a,l,s,c,u,d=go.mobile();ae=J.controls=new go.Container({style:!1}).addTo(J),J.interactive&&ae.drag({onTop:!d}),K=[],Q=[],Z=[];for(var h=0;h<V;h++){if((i=new go.Container({style:!1}).addTo(ae)).num=h,"number"==typeof P){var g=go.Pick.choose(I);r=new go.Container(g,A,null,null,!1).addTo(J).loc({x:h*B/(V-1)-g/2,y:h%2*g}),s=new go.Circle(e,J.selectPoints&&J.selectedBalls.isSelected(h)?R:go.light,go.dark,2,null,null,null,null,!1).centerReg(r).loc({x:g/2,y:0}),a=new go.Rectangle(t,t,J.selectPoints&&J.selectedRect1s.isSelected(h)?R:x(S),0==j?null:go.dark,0==j?null:2,null,null,null,!1).centerReg(r).loc({x:0,y:0}),l=new go.Rectangle(t,t,J.selectPoints&&J.selectedRect2s.isSelected(h)?R:x(S),0==j?null:go.dark,0==j?null:2,null,null,null,!1).centerReg(r).loc({x:g,y:0});var p=r.localToLocal(s.x,s.y,ae);s.x=p.x,s.y=p.y,s.addTo(i,null,!1);var f=r.localToLocal(a.x,a.y,ae);a.x="none"==S?0:f.x-s.x,a.y="none"==S?0:f.y-s.y,a.addTo(i,null,!1);var y=r.localToLocal(l.x,l.y,ae);l.x="none"==S?0:y.x-s.x,l.y="none"==S?0:y.y-s.y,l.addTo(i,null,!1),i.x=s.x,i.y=s.y,s.x=0,s.y=0,"none"==S&&s.addTo(i,null,!1)}else c=(u=P[h])[8]?u[8]:S,i.loc({x:u[0],y:u[1]}),s=new go.Circle(e,go.light,go.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(i).loc({x:u[2],y:u[3]}),a=new go.Rectangle(t,t,x(c),0==j?null:go.dark,0==j?null:2,null,null,null,!1).centerReg({add:!1}).addTo(i,0).loc({x:u[4],y:u[5]}),l=new go.Rectangle(t,t,x(c),0==j?null:go.dark,0==j?null:2,null,null,null,!1).centerReg({add:!1}).addTo(i,0).loc({x:u[6],y:u[7]});s.mySet=i,s.rect1=a,s.rect2=l,s.index=h,d?s.on("mousedown",w):s.on("dblclick",C),a.ball=s,(a.other=l).ball=s,l.other=a,0==j&&(s.expand(10),a.expand(10),l.expand(10)),d&&(s.expand(),a.expand(),l.expand()),o=[i,s,a,l,u?u[8]:S],K.push(o),Z.push(s),Q.push(i)}var b,v=!1;function w(e){v?(e.preventDefault(),C(e)):(v=!0,setTimeout(function(){v=!1},300))}function C(e){if(!J.lockControlType){var t=e.target,o=K[t.index][4]?K[t.index][4]:S;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=J.types[(J.types.indexOf(o)+(J.shiftKey?-1:1)+J.types.length)%J.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),K[t.index][4]=o,t.rect1.color=x(o),t.rect2.color=x(o),ie();var n=new createjs.Event("change");n.controlType="bezierSwitch",J.dispatchEvent(n),t.stage.update()}}function x(e){var t={straight:go.pink,free:go.yellow,none:go.blue};return t[e]?t[e]:go.purple}function k(e){if("Circle"==e.target.type){var t=J.lastSelectedIndex=J.controls.getChildIndex(e.target.parent);if(J.controls.numChildren<=2)return;var o=J.points;J.selectPoints&&(J.lastPoints=go.copy(o)),o.splice(t,1),J.points=o,J.stage.update(),J.lastSelected=J.lastSelectedIndex=null}}(ie=function(){m.c();var e=go.mobile()?10:6;if(A<e){m.s("rgba(0,0,0,.01)").ss(e);var t=(i=K[0][0]).localToLocal(K[0][1].x,K[0][1].y,$);m.mt(t.x,t.y);for(var o=0;o<K.length;o++){var n=o,r=(o+1)%K.length,i=K[n][0],a=K[n][1],l=K[n][2],s=K[n][3],c=K[r][0],u=K[r][1],d=K[r][2],h=(K[r][3],i.localToLocal(s.x,s.y,$)),g=c.localToLocal(d.x,d.y,$),p=c.localToLocal(u.x,u.y,$);o!=K.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y)}}J.colorCommand||(J.colorCommand=m.s(le).command,T&&T.type&&J.specialColor(J.colorCommand,T)),J.thicknessCommand||(J.thicknessCommand=m.ss(se,W.caps,W.joints,W.miterLimit,W.ignoreScale).command),D&&(J.dashedCommand||(J.dashedCommand=m.sd([10,10],5).command)),t=(i=K[0][0]).localToLocal(K[0][1].x,K[0][1].y,$),m.mt(t.x,t.y),z.c().s(J.stickColor).ss(1);for(o=0;o<K.length;o++){n=o,r=(o+1)%K.length,i=K[n][0],a=K[n][1],l=K[n][2],s=K[n][3],c=K[r][0],u=K[r][1],d=K[r][2],K[r][3],h=i.localToLocal(s.x,s.y,$),g=c.localToLocal(d.x,d.y,$),p=c.localToLocal(u.x,u.y,$);o!=K.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y);t=i.localToLocal(a.x,a.y,$);var f=i.localToLocal(l.x,l.y,$);0==o&&(l.visible=0),0!=o&&z.mt(t.x,t.y).lt(f.x,f.y),o!=K.length-1&&z.mt(t.x,t.y).lt(h.x,h.y),o==K.length-1&&(s.visible=0)}D&&m.append(J.dashedCommand),m.append(J.thicknessCommand),m.append(J.colorCommand)})(),ae.on("mousedown",function(e){if(ne=e.target.stage,!J.lockControls){if(J.selectPoints&&(J.keyFocus=!0),b={x:e.target.x,y:e.target.y},e.target.rect1){(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y}else{var t=e.target;t.startX=t.x,t.startY=t.y;var o,n=(o=t.ball).index,r=S;if(zot(K[n][4])||(r=K[n][4]),"straight"==r){var i=t.other,a=i.x-o.x,l=i.y-o.y;i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}if(J.selectPoints){var s=J.selectionManager.currentSet;if(s&&s.selections&&0<s.selections.length)for(var c=0;c<s.selections.length;c++){var u=J.pointObjects[s.selections[c]];u[1].startX=u[1].x,u[1].startY=u[1].y,u[2].startX=u[2].x,u[2].startY=u[2].y,u[3].startX=u[3].x,u[3].startY=u[3].y}}}}),J.selectPoints&&ae.tap(function(e){if(e.target.rect1){var t=e.target;J.selectedBalls.toggle(t.parent.num)}else{var o=e.target;o.color="white",(t=o.ball).rect1==o?J.selectedRect1s.toggle(t.parent.num):J.selectedRect2s.toggle(t.parent.num)}for(var n=0;n<J.pointObjects.length;n++){var r=J.pointObjects[n];r[1].color=J.selectedBalls.isSelected(n)?go.white:go.light,r[2].color=J.selectedRect1s.isSelected(n)?go.white:x(r[4]),r[3].color=J.selectedRect2s.isSelected(n)?go.white:x(r[4])}ne.update()}),ae.on("pressmove",function(e){if(!J.lockControls)if(J.selectPoints){var t=ue();if(-1==t.indexOf(e.target))re(e.target),ie();else if(0<t.length){diffX=e.target.x-e.target.startX,diffY=e.target.y-e.target.startY;for(var o=0;o<t.length;o++){var n=t[o];n.x=n.startX+diffX,n.y=n.startY+diffY,re(n)}ie()}}else re(e.target),ie()}),ae.on("pressup",function(e){if(!J.lockControls){var t=e.target.x!=b.x||e.target.y!=b.y,o=new createjs.Event("change");e.target.rect1?(o.controlType="bezierPoint",function(e){if(J.selectPoints){var t=ue();if(t&&-1==t.indexOf(e))de(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)de(t[o]);else de(e)}else de(e)}(e.target)):o.controlType="bezierHandle",t&&J.dispatchEvent(o)}}),J.changeControl=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(J.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e))for(var u=0;u<K.length;u++)J.changeControl(u,t,o,n,r,i,a,l);else{var d=K[e];"none"==(d[4]=t)?(zot(a)||(d[2].x=a),zot(l)||(d[2].y=l),d[2].x=d[1].x,d[2].y=d[1].y,d[3].x=d[1].x,d[3].y=d[1].y,d[1].parent.addChild(d[1])):(zot(o)||(d[2].x=o),zot(n)||(d[2].y=n),zot(r)||(d[3].x=r),zot(i)||(d[3].y=i),zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),d[1].parent.addChildAt(d[1],0)),s&&(J.update(),J.stage&&J.stage.update())}},J.transformPoints=function(e,t,o,n){return J.points=go.transformPoints(J.points,e,t,o,n),J},J.traverse=function(o,e,t,n){var r=go.copy(J.segmentRatios);r.unshift(0),zot(t)&&(t=e+1);var i=e<t;if(i)var a=100*r[e],l=100*r[t];else a=50+(100-100*r[e])/2,l=50+(100-100*r[t])/2;return o.percentComplete=o.zimStartPercent=a,o.animate({ease:"linear",props:{path:J},rewind:!i,time:n,events:!0}),o.on("animation",function(e){if(o.percentComplete>l||0==o.percentComplete){o.stopAnimate(),e.remove();var t=new createjs.Event("traversed");t.obj=o,J.dispatchEvent(t)}}),J},J.update=function(e){return e?J.points=J.pointsAdjusted:ie(),J.zimAnimateChanged=!0,J},J.interactive&&(L&&$.drag({onTop:!1}),ee=$.on("mousedown",function(e){ne=e.target.stage,b={x:$.x,y:$.y},J.selectPoints&&(J.keyFocus=!0),function(){if(J.onTop){var e=J.parent.numChildren-1;"Keyboard"==J.parent.getChildAt(e).type&&e--,J.parent.setChildIndex(J,e)}}()}),te=$.on("pressmove",function(){ae.x=$.x,ae.y=$.y,n.x=$.x,n.y=$.y}),oe=$.on("pressup",function(){var e=$.x!=b.x||$.y!=b.y,t=$.localToLocal(J.regX,J.regY,J.parent);if(J.x=t.x,J.y=t.y,ae.x=ae.y=n.x=n.y=$.x=$.y=0,e){var o=new createjs.Event("change");o.controlType="move",J.dispatchEvent(o)}ne.update()}),J.move||ge(!0)),J.toggleEvent=J.on("mousedown",function(){J.allowToggle&&(q||(J.showControls(),J.dispatchEvent("controlsshow")))}),J.added(function(){J.toggleStageEvent=J.stage.on("stagemousedown",function(e){J.allowToggle&&J.stage&&q&&!J.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY,!1)&&(J.hideControls(),J.dispatchEvent("controlshide"))})}),J.clickEvent=J.on("click",function(){J.ctrlKey&&setTimeout(function(){J.clone(!0).addTo(J.stage).mov(0,100),J.allowToggle&&(J.hideControls(),J.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",J.dispatchEvent(e),J.stage.update()},50)}),J.hideControls=function(){return J.toggled=!1,ae.visible=!1,n.visible=!1,q=!1,J.stage&&J.stage.update(),!J.allowToggle&&J.move&&ge(),J},E||J.hideControls(),J.showControls=function(){return J.toggled=!0,ae.visible=!0,n.visible=!0,q=!0,ae.x=$.x,ae.y=$.y,n.x=$.x,n.y=$.y,J.addChildAt($,0),J.move&&!J.allowToggle&&he(),J.stage&&J.stage.update(),J},J.toggle=function(e){return!0===e?J.showControls():!1===e||q?J.hideControls():J.showControls(),J},J.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:J.parent?J.parent.getChildIndex(J):-1,x:J.x,y:J.y,points:J.recordPoints(),color:J.color,thickness:J.thickness,move:J.move,toggle:J.allowToggle,controlsVisible:q};return e?JSON.stringify(t):t},J.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||J.setPoints(n),delete e.points,J.num=n.length,e)J[r]=e[r];return J.parent&&J.parent.setChildIndex(J,o),J.update(),J}},J.recordPoints=function(e){zot(e)&&(e=!1);var t=J.points;if(e){if(!J.pane){var o=J.pane=new go.Pane({container:J.stage,width:Math.min(500,J.stage.width-20),height:Math.min(500,J.stage.height-20),draggable:!0});(J.textArea=new go.TextArea(Math.min(400,J.stage.width-70),Math.min(400,J.stage.height-70))).centerReg(o)}J.textArea.text=JSON.stringify(t),J.pane.show()}return t},!(J.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=K[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return J.update(),J})!==H&&qe(J,N),J.clone=function(e,t){var o=J.cloneProps(new go.Squiggle(t?J.colorCommand:e||!go.isPick(U[0])?J.color:U[0],J.thickness,J.recordPoints(),B,I,S,O,ae.visible,M,j,J.allowToggle,J.move,D,Y,X,R,_,J.editPoints,F,W,H,J.group,G));return J.linearGradientParams&&o.linearGradient.apply(o,J.linearGradientParams),J.radialGradientParams&&o.radialGradient.apply(o,J.radialGradientParams),o},J.shape.on("mousedown",function(e){ne=e.target.stage,J.editPoints&&(J.controlsVisible?(J.pressX=e.stageX/go.scaX,J.pressY=e.stageY/go.scaX):(J.pressX=null,J.pressY=null))}),J.addPointFactor=10,J.addMinDistance=15,J.shape.on("pressup",function(e){if(J.editPoints&&J.pressX&&Math.abs(J.pressX-e.stageX/go.scaX)<ce&&Math.abs(J.pressY-e.stageY/go.scaY)<ce){J.selectPoints&&(J.lastPoints=go.copy(J.points));var t=J.points,n=J.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY),o=go.closestPointAlongCurve(n,J.segmentPoints);if("anywhere"==J.editPoints)t.splice(o+1,0,[n.x,n.y,0,0,0,0,0,0]),J.points=t,J.changeControl({index:o+1,type:"mirror",update:!0});else{var r,i=J.pointsAdjusted,a=J.getSegmentPoint(i[o],i[(o+1)%i.length]),l=go.distanceAlongCurve(a),s=Math.round(l/J.addPointFactor),c=J.interpolate(s,o,!1,t),u=1e4;if(go.loop(c,function(e,t){var o=go.dist(e,n);o<u&&(u=o,r=t,0)}),u<J.addMinDistance){var d=J.segmentRatios,h=d[o],g=0<o?d[o-1]:0;J.addPoint(100*(g+r/(s+1)*(h-g)))}}J.lastSelectedIndex=o+1,J.lastSelected=J.controls.getChildAt(J.lastSelectedIndex),J.stage.update()}}),J.controls.on("click",function(e){J.lastSelected=e.target.parent;J.lastSelectedIndex=J.controls.getChildIndex(e.target.parent);J.editPoints&&J.selectionManager.shiftKey&&k(e)}),J.controls.hold(k),q||J.hideControls(),J.dispatchEvent("update")}function ue(){var e=[],t=J.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=J.pointObjects[t.selections[o]];if(t==J.selectedBalls)e.push(n[1]);else if(t==J.selectedRect1s)e.push(n[2]);else{if(t!=J.selectedRect2s)continue;e.push(n[3])}}return e}function de(e){if("Circle"==e.type){var t=e,o=t.mySet,n=t.rect1,r=t.rect2;n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}}function he(){"always"!=J.move&&(a||(a=!0,$.drag({onTop:!1}),ee=$.on("mousedown",ee),te=$.on("pressmove",te),oe=$.on("pressup",oe)))}function ge(e){"always"!=J.move&&(e||a)&&(a=!1,$.noDrag(),$.off("mousedown",ee),$.off("pressmove",te),$.off("pressup",oe))}function C(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function g(e,t,o,n,r,i,a,l){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==J.type&&(n=99.99),n=(n+1e5)%100,go.loop(o,function(e,t){if(n/100<e)return s=t,u=e,!0;c=e});var d=J.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,g=go.pointAlongCurve(d,h,null,l),p=[g.x,g.y,0,0];if(!i)if(a)J.interpolatedPoints.push({x:g.x,y:g.y,r:n/100});else{if("none"!=r){var f=C(d[0],d[1],h),m=C(d[1],d[2],h),z=C(d[2],d[3],h),y=C(f,m,h),b=C(m,z,h);p[4]=y.x-g.x,p[5]=y.y-g.y,p[6]=b.x-g.x,p[7]=b.y-g.y;var v=J.localToLocal(f.x,f.y,t[s]);e[s][6]=v.x,e[s][7]=v.y;var w=J.localToLocal(z.x,z.y,t[(s+1)%e.length]);e[(s+1)%e.length][4]=w.x,e[(s+1)%e.length][5]=w.y}r&&(p[8]=r),e.splice(s+1,0,p)}}},go.extend(go.Squiggle,go.Container,["clone","dispose"],"zimContainer",!1),go.Blob=function(T,e,t,A,P,B,I,S,o,O,E,n,M,j,L,D,Y,X,r,R,_,F,i,W){var a;if(a=zob(go.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return a;z_d("53.5"),this.group=i;var H=!1===F?{}:go.getStyle("Blob",this.group,W);zot(P)&&(P=null!=H.radius?H.radius:100),this.zimContainer_constructor(-P,-P,2*P,2*P,!1),this.type="Blob",zot(j)&&(j=null!=H.dashed&&H.dashed),zot(e)&&(e=null!=H.borderColor?H.borderColor:null),zot(t)&&(t=null!=H.borderWidth?H.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(T)&&(T=null!=H.color?H.color:0<t?"rgba(0,0,0,0)":go.green),T.style&&(this.colorCommand=T,T="black"),e&&e.style&&(this.borderColorCommand=e,e="black"),zot(A)&&(A=null!=H.points?H.points:4);var G="number"==typeof A?A:A.length,N=B;zot(B)&&(B=null!=H.controlLength?H.controlLength:4*P/G),zot(I)&&(I=null!=H.controlType?H.controlType:null);var l=I;zot(I)&&(I="straight"),zot(S)&&(S=null!=H.lockControlType&&H.lockControlType),zot(R)&&(R=null==H.interactive||H.interactive),zot(o)&&(o=null!=H.showControls?H.showControls:R);var V=o;zot(O)&&(O=null!=H.lockControls?H.lockControls:!R),zot(E)&&(E=null!=H.handleSize?H.handleSize:go.mobile()?20:10),zot(n)&&(n=null!=H.allowToggle?H.allowToggle:R),zot(M)&&(M=null!=H.move?H.move:R),zot(D)&&(D=null!=H.stickColor?H.stickColor:"#111"),zot(Y)&&(Y=null!=H.selectColor?H.selectColor:"#fff"),zot(X)&&(X=null!=H.selectPoints?H.selectPoints:R),this.stickColor=D,zot(L)&&(L=null==H.onTop||H.onTop),zot(r)&&(r=null!=H.editPoints?H.editPoints:R),zot(_)&&(_=null!=H.strokeObj?H.strokeObj:{});var q=function(){return arguments}(T,e);T=go.Pick.choose(T),e=go.Pick.choose(e);var U=this;this.interactive=R,this.num=G,this.editPoints=r,this.selectPoints=X,this.lockControls=O,this.onTop=L,this.move=M,this.allowToggle=n,this.lockControlType=S;this.types=["mirror","straight","free","none"];var K,Z,Q,J,$,ee,te,oe,ne,re,ie,ae=T,le=e,se=t,s=U.move,ce=2;function c(e){var t;if("circle"!=e&&"rectangle"!=e&&"triangle"!=e||("circle"==e&&(e=new Circle(P)),"rectangle"==e&&(e=new Rectangle(2*P,2*P).centerReg({add:!1})),"triangle"==e&&(e=new Triangle(2*P,2*P,2*P))),"Circle"!=e.type&&"Rectangle"!=e.type&&"Triangle"!=e.type)return e;var o=e.getBounds();return"Circle"==e.type?(t=4,N=B=2*P*.5523):"Rectangle"==e.type?(e.centerReg({add:!1}),t=[[o.x-o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y+o.height/2],[o.x-o.width/2,o.y+o.height/2]],U.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height),U.regX=e.regX-o.width/2,U.regY=e.regY-o.height/2):"Triangle"==e.type&&(t=[[e.three.x-e.width/2,e.three.y+e.height/2+e.adjusted],[e.two.x-e.width/2,e.two.y+e.height/2+e.adjusted],[e.one.x-e.width/2,e.one.y+e.height/2+e.adjusted]],U.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height)),t}if("string"==typeof(A=c(A))){var u=new go.SVGContainer;A=u.processPath(A)}function d(){if(ie&&ie.removeAllEventListeners(),U.selectPoints?(U.selectedBalls=new go.SelectionSet,U.selectedRect1s=new go.SelectionSet,U.selectedRect2s=new go.SelectionSet,U.selectionManager=new go.SelectionManager([U.selectedBalls,U.selectedRect1s,U.selectedRect2s],"ctrl",!1)):U.selectionManager=new go.SelectionManager(null,"ctrl"),!((G="number"==typeof A?A:A.length)<=0)){zot(N)&&(B=4*P/G),J=U.shape=new go.Shape({style:!1}).addTo(U);var n=U.sticks=new go.Shape({style:!1}).addTo(U);E<=0&&n.removeFrom();var f=J.graphics;f.c();var m=n.graphics;m.c();var e,t,o,r,i,a,l,s,c=E/10*8,u=E,d=go.mobile();ie=U.controls=new go.Container({style:!1}).addTo(U),U.interactive&&ie.drag({onTop:!d}),K=[],Q=[],Z=[];for(var h=0;h<G;h++){if((o=new go.Container({style:!1}).addTo(ie)).num=h,"number"==typeof A){var g=go.Pick.choose(B);(t=new go.Container(g,P,null,null,!1).reg(g/2,P).addTo(U)).rotation=h/G*360,a=new go.Circle(c,U.selectPoints&&U.selectedBalls.isSelected(h)?Y:go.light,go.dark,2,null,null,null,null,!1).centerReg(t).loc({x:g/2,y:0}),r=new go.Rectangle(u,u,U.selectPoints&&U.selectedRect1s.isSelected(h)?Y:x(I),0==E?null:go.dark,0==E?null:2,null,null,null,!1).centerReg(t).loc({x:0,y:0}),i=new go.Rectangle(u,u,U.selectPoints&&U.selectedRect2s.isSelected(h)?Y:x(I),0==E?null:go.dark,0==E?null:2,null,null,null,!1).centerReg(t).loc({x:g,y:0});var p=t.localToLocal(a.x,a.y,ie);a.x=p.x,a.y=p.y,a.addTo(o,null,!1);var z=t.localToLocal(r.x,r.y,ie);r.x="none"==I?0:z.x-a.x,r.y="none"==I?0:z.y-a.y,r.addTo(o,null,!1);var y=t.localToLocal(i.x,i.y,ie);i.x="none"==I?0:y.x-a.x,i.y="none"==I?0:y.y-a.y,i.addTo(o,null,!1),o.x=a.x,o.y=a.y,a.x=0,a.y=0,"none"==I&&a.addTo(o,null,!1)}else l=(s=A[h])[8]?s[8]:I,o.loc({x:s[0],y:s[1]}),a=new go.Circle(c,go.light,go.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(o).loc({x:s[2],y:s[3]}),r=new go.Rectangle(u,u,x(l),0==E?null:go.dark,0==E?null:2,null,null,null,!1).centerReg({add:!1}).addTo(o,0).loc({x:s[4],y:s[5]}),i=new go.Rectangle(u,u,x(l),0==E?null:go.dark,0==E?null:2,null,null,null,!1).centerReg({add:!1}).addTo(o,0).loc({x:s[6],y:s[7]});a.mySet=o,a.rect1=r,a.rect2=i,a.index=h,0==E&&(a.expand(10),r.expand(10),i.expand(10)),d?a.on("mousedown",w):a.on("dblclick",C),r.ball=a,(r.other=i).ball=a,i.other=r,d&&(a.expand(),r.expand(),i.expand()),e=[o,a,r,i,s?s[8]:I],K.push(e),Z.push(a),Q.push(o)}var b,v=!1;(re=function(){f.c(),U.colorCommand||(U.colorCommand=f.f(ae).command,T&&T.type&&U.specialColor(U.colorCommand,T)),(zot(se)||0<se)&&(zot(le)&&zot(se)||(zot(le)&&(le="black"),U.borderColorCommand||(U.borderColorCommand=f.s(le).command,le&&le.type&&U.specialColor(U.borderColorCommand,le)),U.borderWidthCommand||(U.borderWidthCommand=f.ss(se,_.caps,_.joints,_.miterLimit,_.ignoreScale).command),j&&(U.borderDashedCommand||(U.borderDashedCommand=f.sd([10,10],5).command))));var e=(r=K[0][0]).localToLocal(K[0][1].x,K[0][1].y,J);f.mt(e.x,e.y),m.c().s(U.stickColor).ss(1);for(var t=0;t<K.length;t++){var o=t,n=(t+1)%K.length,r=K[o][0],i=K[o][1],a=K[o][2],l=K[o][3],s=K[n][0],c=K[n][1],u=K[n][2],d=(K[n][3],r.localToLocal(l.x,l.y,J)),h=s.localToLocal(u.x,u.y,J),g=s.localToLocal(c.x,c.y,J);f.bt(d.x,d.y,h.x,h.y,g.x,g.y);e=r.localToLocal(i.x,i.y,J);var p=r.localToLocal(a.x,a.y,J);m.mt(e.x,e.y).lt(p.x,p.y),m.mt(e.x,e.y).lt(d.x,d.y)}f.cp(),f.append(U.colorCommand),j&&f.append(U.borderDashedCommand),U.borderWidthCommand&&f.append(U.borderWidthCommand),U.borderColorCommand&&f.append(U.borderColorCommand)})(),ie.on("mousedown",function(e){if(!U.lockControls){if(U.selectPoints&&(U.keyFocus=!0),b={x:e.target.x,y:e.target.y},e.target.rect1){(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y}else{var t=e.target;t.startX=t.x,t.startY=t.y;var o,n=(o=t.ball).index,r=I;if(zot(K[n][4])||(r=K[n][4]),"straight"==r){var i=t.other,a=i.x-o.x,l=i.y-o.y;i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}if(U.selectPoints){var s=U.selectionManager.currentSet;if(s&&s.selections&&0<s.selections.length)for(var c=0;c<s.selections.length;c++){var u=U.pointObjects[s.selections[c]];u[1].startX=u[1].x,u[1].startY=u[1].y,u[2].startX=u[2].x,u[2].startY=u[2].y,u[3].startX=u[3].x,u[3].startY=u[3].y}}}}),U.selectPoints&&ie.tap(function(e){if(e.target.rect1){var t=e.target;U.selectedBalls.toggle(t.parent.num)}else{var o=e.target;o.color="white",(t=o.ball).rect1==o?U.selectedRect1s.toggle(t.parent.num):U.selectedRect2s.toggle(t.parent.num)}for(var n=0;n<U.pointObjects.length;n++){var r=U.pointObjects[n];r[1].color=U.selectedBalls.isSelected(n)?go.white:go.light,r[2].color=U.selectedRect1s.isSelected(n)?go.white:x(r[4]),r[3].color=U.selectedRect2s.isSelected(n)?go.white:x(r[4])}e.target.stage.update()}),ie.on("pressmove",function(e){if(!U.lockControls)if(U.selectPoints){var t=ue();if(-1==t.indexOf(e.target))ne(e.target),re();else if(0<t.length){diffX=e.target.x-e.target.startX,diffY=e.target.y-e.target.startY;for(var o=0;o<t.length;o++){var n=t[o];n.x=n.startX+diffX,n.y=n.startY+diffY,ne(n)}re()}}else ne(e.target),re()}),ie.on("pressup",function(e){if(!U.lockControls){var t=e.target.x!=b.x||e.target.y!=b.y,o=new createjs.Event("change");e.target.rect1?(o.controlType="bezierPoint",function(e){if(U.selectPoints){var t=ue();if(t&&-1==t.indexOf(e))de(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)de(t[o]);else de(e)}else de(e)}(e.target)):o.controlType="bezierHandle",t&&U.dispatchEvent(o)}}),U.changeControl=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(U.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e)){for(var u=0;u<K.length;u++)U.changeControl(u,t,o,n,r,i,a,l);return U}var d=K[e];return"none"==(d[4]=t)?(zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),d[2].x=d[1].x,d[2].y=d[1].y,d[3].x=d[1].x,d[3].y=d[1].y,d[1].parent.addChild(d[1])):(zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),zot(o)||(d[2].x=o),zot(n)||(d[2].y=n),zot(r)||(d[3].x=r),zot(i)||(d[3].y=i),d[1].parent.addChildAt(d[1],0)),d[2].color=x(t),d[3].color=x(t),s&&(U.update(),U.stage&&U.stage.update()),U},U.transformPoints=function(e,t,o,n){return U.points=go.transformPoints(U.points,e,t,o,n),U},U.traverse=function(o,e,t,n){var r=go.copy(U.segmentRatios);r.unshift(0),zot(t)&&(t=e+1);var i=e<t;if(i)var a=100*r[e],l=100*r[t];else a=50+(100-100*r[e])/2,l=50+(100-100*r[t])/2;return o.percentComplete=a,o.animate({ease:"linear",props:{path:U},rewind:!i,time:n,events:!0}),o.on("animation",function(e){if(o.percentComplete>l||0==o.percentComplete){o.stopAnimate(),e.remove();var t=new createjs.Event("traversed");t.obj=o,U.dispatchEvent(t)}}),U},U.update=function(e){return e?U.points=U.pointsAdjusted:re(),U.zimAnimateChanged=!0,U},U.move&&U.interactive&&J.drag({onTop:!1}),$=J.on("mousedown",function(e){oe=e.target.stage,b={x:J.x,y:J.y},U.selectPoints&&(U.keyFocus=!0),function(){if(U.onTop){var e=U.parent.numChildren-1;"Keyboard"==U.parent.getChildAt(e).type&&e--,U.parent.setChildIndex(U,e)}}()}),ee=J.on("pressmove",function(){ie.x=J.x,ie.y=J.y,n.x=J.x,n.y=J.y}),te=J.on("pressup",function(){var e=J.x!=b.x||J.y!=b.y,t=J.localToLocal(U.regX,U.regY,U.parent);if(U.x=t.x,U.y=t.y,ie.x=ie.y=n.x=n.y=J.x=J.y=0,e){var o=new createjs.Event("change");o.controlType="move",U.dispatchEvent(o)}oe.update()}),M||ge(!0),U.toggleEvent=U.on("mousedown",function(){U.allowToggle&&(V||(U.showControls(),U.dispatchEvent("controlsshow")))}),U.added(function(){U.toggleStageEvent=U.stage.on("stagemousedown",function(e){U.allowToggle&&U.stage&&V&&!U.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY,!1)&&(U.hideControls(),U.dispatchEvent("controlshide"))})}),U.clickEvent=U.on("click",function(){U.ctrlKey&&setTimeout(function(){U.clone(!0).addTo(U.stage).mov(100),U.allowToggle&&(U.hideControls(),U.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",U.dispatchEvent(e),U.stage.update()},50)}),U.hideControls=function(){return U.toggled=!1,ie.visible=!1,n.visible=!1,V=!1,U.stage&&U.stage.update(),!U.allowToggle&&U.move&&ge(),U},V||U.hideControls(),U.showControls=function(){return U.toggled=!0,ie.visible=!0,n.visible=!0,V=!0,ie.x=J.x,ie.y=J.y,n.x=J.x,n.y=J.y,U.addChildAt(J,0),U.move&&!U.allowToggle&&he(),U.stage&&U.stage.update(),U},U.toggle=function(e){return!0===e?U.showControls():!1===e||V?U.hideControls():U.showControls(),U},U.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:U.parent?U.parent.getChildIndex(U):-1,x:U.x,y:U.y,points:U.recordPoints(),color:U.color,borderColor:U.borderColor,borderWidth:U.borderWidth,move:U.move,toggle:U.allowToggle,controlsVisible:V};return e?JSON.stringify(t):t},U.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||U.setPoints(n),delete e.points,this.num=n.length,e)U[r]=e[r];return U.parent&&U.parent.setChildIndex(U,o),U}},U.recordPoints=function(e){zot(e)&&(e=!1);var t=U.points;if(e){if(!o){var o=U.pane=new go.Pane({displayClose:!1,container:U.stage,width:Math.min(500,U.stage.width-20),height:Math.min(500,U.stage.height-20),draggable:!0}),n=U.textArea=new go.TextArea(Math.min(400,U.stage.width-70),Math.min(400,U.stage.height-70));n.centerReg(o)}n.text=JSON.stringify(t),o.show()}return t},!(U.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=K[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8],t[2].color=x(t[4]),t[3].color=x(t[4]));return U.update(),U})!==F&&qe(U,H),U.clone=function(e,t){var o=U.cloneProps(new go.Blob(t?U.colorCommand:e||!go.isPick(q[0])?U.color:q[0],t?U.borderColorCommand:e||!go.isPick(q[1])?U.borderColor:q[1],U.borderWidth,U.recordPoints(),P,B,I,S,ie.visible,O,E,U.allowToggle,U.move,j,L,D,Y,X,U.editPoints,R,_,F,U.group,W));return U.linearGradientParams&&o.linearGradient.apply(o,U.linearGradientParams),U.radialGradientParams&&o.radialGradient.apply(o,U.radialGradientParams),o},U.shapeMousedownEvent=U.shape.on("mousedown",function(e){oe=e.target.stage,U.editPoints&&(U.controlsVisible?(U.pressX=e.stageX/go.scaX,U.pressY=e.stageY/go.scaY):(U.pressX=null,U.pressY=null))}),U.addPointFactor=10,U.addMinDistance=15,U.shapePressupEvent=U.shape.on("pressup",function(e){if(U.editPoints&&U.pressX&&Math.abs(U.pressX-e.stageX/go.scaX)<ce&&Math.abs(U.pressY-e.stageY/go.scaY)<ce){U.selectPoints&&(U.lastPoints=go.copy(U.points));var t=U.points,n=U.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY),o=go.closestPointAlongCurve(n,U.segmentPoints);if("anywhere"==U.editPoints)t.splice(o+1,0,[n.x,n.y,0,0,0,0,0,0]),U.points=t,U.changeControl({index:o+1,type:"mirror",update:!0});else{var r,i=U.pointsAdjusted,a=U.getSegmentPoint(i[o],i[(o+1)%i.length]),l=go.distanceAlongCurve(a),s=Math.round(l/U.addPointFactor),c=U.interpolate(s,o,!1,t),u=1e4;if(go.loop(c,function(e,t){if(0!=t){var o=go.dist(e,n);o<u&&(u=o,r=t,0)}}),u<U.addMinDistance){var d=U.segmentRatios,h=d[o],g=0<o?d[o-1]:0;U.addPoint(100*(g+r/(s+1)*(h-g)))}}U.lastSelectedIndex=o+1,U.lastSelected=U.controls.getChildAt(U.lastSelectedIndex),U.stage.update()}}),U.controlsClickEvent=U.controls.on("click",function(e){U.lastSelected=e.target.parent;U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent);U.editPoints&&U.selectionManager.shiftKey&&k(e)}),U.controls.hold(k),V||U.hideControls(),U.dispatchEvent("update")}function w(e){v?(e.preventDefault(),C(e)):(v=!0,setTimeout(function(){v=!1},300))}function C(e){if(!U.lockControlType){var t=e.target,o=K[t.index][4]?K[t.index][4]:I;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=U.types[(U.types.indexOf(o)+(U.shiftKey?-1:1)+U.types.length)%U.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),K[t.index][4]=o,t.rect1.color=x(o),t.rect2.color=x(o),re();var n=new createjs.Event("change");n.controlType="bezierSwitch",U.dispatchEvent(n),t.stage.update()}}function x(e){var t={mirror:go.purple,free:go.yellow,none:go.blue};return t[e]?t[e]:go.pink}function k(e){if("Circle"==e.target.type){var t=U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent);if(U.controls.numChildren<=2)return;var o=U.points;U.selectPoints&&(U.lastPoints=go.copy(o)),o.splice(t,1),U.points=o,U.stage.update(),U.lastSelected=U.lastSelectedIndex=null}}}function ue(){var e=[],t=U.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=U.pointObjects[t.selections[o]];if(t==U.selectedBalls)e.push(n[1]);else if(t==U.selectedRect1s)e.push(n[2]);else{if(t!=U.selectedRect2s)continue;e.push(n[3])}}return e}function de(e){if(U.selectPoints&&"Circle"==e.type){var t=e,o=t.mySet,n=t.rect1,r=t.rect2;n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}}function he(){"always"!=U.move&&(s||(s=!0,J.drag({onTop:!1}),$=J.on("mousedown",$),ee=J.on("pressmove",ee),te=J.on("pressup",te)))}function ge(e){"always"!=U.move&&(e||s)&&(s=!1,J.noDrag(),J.off("mousedown",$),J.off("pressmove",ee),J.off("pressup",te))}l&&"number"!=typeof A&&loop(A,function(e){"none"==(e[8]=l)&&(e[4]=e[5]=e[6]=e[7]=0)}),d(),U.selectionManager.on("keydown",function(e){if(U.selectPoints&&U.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ue();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=U.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=U.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=U.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=U.selectionManager.shiftKey?10:1),ne(n)}re(),U.dispatchEvent("update"),U.stage&&U.stage.update()}}}),U.selectionManager.on("keyup",function(e){if(U.selectPoints&&U.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ue();if(0<t.length)for(var o=0;o<t.length;o++)de(t[o])}}),U.selectionManager.on("undo",function(){if(U.selectPoints&&U.keyFocus&&U.lastPoints){var e=go.copy(U.lastPoints);U.lastPoints=go.copy(U.points),U.points=e,U.stage&&U.stage.update()}}),ne=function(e){if(!U.lockControls)if(e.rect1){var t=(n=e).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,r=e,i=r.other,a=(n=r.ball).index,l=I;if(zot(K[a][4])||(l=K[a][4]),"straight"==l||"mirror"==l){var s=r.x-n.x,c=r.y-n.y;if("mirror"==l)i.x=n.x-s,i.y=n.y-c;else{var u=Math.atan2(c,s),d=-i.stickLength*Math.cos(u+Math.PI),h=-i.stickLength*Math.sin(u+Math.PI);i.x=n.x-d,i.y=n.y-h}}}},Object.defineProperty(U,"move",{get:function(){return M},set:function(e){M!=e&&((M=e)?he:ge)()}}),Object.defineProperty(U,"interactive",{get:function(){return R},set:function(e){R=e,U.showControls=R,U.allowToggle=R,U.editPoints=R,U.lockControls=!R,U.selectPoints=R,U.move=R,U.points=U.points}}),Object.defineProperty(U,"allowToggle",{get:function(){return n},set:function(e){n!=e&&((n=e)?U.move&&he():!V&&U.move&&ge())}}),Object.defineProperty(U,"controlsVisible",{get:function(){return V},set:function(e){(V=e)?U.showControls():U.hideControls()}});var h,g,p=O;Object.defineProperty(U,"lockControls",{get:function(){return p},set:function(e){(p=e)?(U.controls.mouseChildren=!1,U.controls.mouseEnabled=!1):(U.controls.mouseChildren=!0,U.controls.mouseEnabled=!0)}}),U.lockControls=p,Object.defineProperty(U,"color",{get:function(){return ae},set:function(e){zot(e)&&(e="black"),(ae=e)&&e.type?U.specialColor(U.colorCommand,e):U.colorCommand.style=e}}),this.setColorRange=function(e,t){return g=zot(t)?(h=U.color,e):(h=zot(e)?U.color:e,t),U};var f=0;function C(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function m(e,t,o,n,r,i,a,l){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==U.type&&(n=99.99),n=(n+1e5)%100,go.loop(o,function(e,t){if(n/100<e)return s=t,u=e,!0;c=e});var d=U.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,g=go.pointAlongCurve(d,h,null,l),p=[g.x,g.y,0,0];if(!i)if(a)U.interpolatedPoints.push({x:g.x,y:g.y,r:n/100});else{if("none"!=r){var f=C(d[0],d[1],h),m=C(d[1],d[2],h),z=C(d[2],d[3],h),y=C(f,m,h),b=C(m,z,h);p[4]=y.x-g.x,p[5]=y.y-g.y,p[6]=b.x-g.x,p[7]=b.y-g.y;var v=U.localToLocal(f.x,f.y,t[s]);e[s][6]=v.x,e[s][7]=v.y;var w=U.localToLocal(z.x,z.y,t[(s+1)%e.length]);e[(s+1)%e.length][4]=w.x,e[(s+1)%e.length][5]=w.y}r&&(p[8]=r),e.splice(s+1,0,p)}}Object.defineProperty(U,"colorRange",{get:function(){return f},set:function(e){f=e,zot(h)||zot(g)||(U.color=go.colorRange(h,g,e))}}),Object.defineProperty(U,"borderColor",{get:function(){return le},set:function(e){zot(e)||(le=e,U.borderColorCommand?e&&e.type?U.specialColor(U.borderColorCommand,e):U.borderColorCommand.style=e:re())}}),Object.defineProperty(U,"borderWidth",{get:function(){return se},set:function(e){zot(e)||(0<e||(e=0),se=e,U.borderWidthCommand&&0!=se?(U.borderWidthCommand.width=se,j&&(U.borderDashedCommand.segments=[20,10],U.borderDashedCommand.offset=5)):re())}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==U},set:function(e){go.KEYFOCUS=U}}),U.selectPoints&&!go.KEYFOCUS&&function(){U.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(U,"points",{get:function(){for(var e,t,o=[],n=0;n<K.length;n++)t=K[n],e=[go.decimals(t[0].x),go.decimals(t[0].y),go.decimals(t[1].x),go.decimals(t[1].y),go.decimals(t[2].x),go.decimals(t[2].y),go.decimals(t[3].x),go.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=U.x,o=U.y,n=U.visible;U.dispose(!0),A=c(e),U.shape&&(U.shape.graphics.clear(),U.sticks.graphics.clear(),U.controls.noDrag(),U.removeAllChildren(),delete U.shape,delete U.sticks,delete U.controls),U.visible=!1,d(),U.lockControls=p,U.x=t,U.y=o,U.visible=n}}),Object.defineProperty(U,"pointsAdjusted",{get:function(){var r,i,a=[],l=U.pointObjects;return go.loop(l.length,function(e,t){if(po=l[e],i=K[e],0==po[0].rotation&&0==po[0].scaleX&&0==po[0].scaleY)r=[go.decimals(i[0].x),go.decimals(i[0].y),go.decimals(i[1].x),go.decimals(i[1].y),go.decimals(i[2].x),go.decimals(i[2].y),go.decimals(i[3].x),go.decimals(i[3].y)];else{var o=po[0].localToLocal(po[2].x,po[2].y,po[0].parent),n=po[0].localToLocal(po[3].x,po[3].y,po[0].parent);r=[go.decimals(i[0].x),go.decimals(i[0].y),go.decimals(i[1].x),go.decimals(i[1].y),go.decimals(o.x-i[0].x),go.decimals(o.y-i[0].y),go.decimals(n.x-i[0].x),go.decimals(n.y-i[0].y)]}i[4]&&"mirror"!==i[4]&&r.push(i[4]),a.push(r)}),a},set:function(e){zon&&zogy("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(U,"pointObjects",{get:function(){return K},set:function(e){zon&&zog("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"pointControls",{get:function(){return Q},set:function(e){zon&&zog("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"pointCircles",{get:function(){return Z},set:function(e){zon&&zog("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"segmentPoints",{get:function(){var n=U.pointsAdjusted,r=[];return go.loop(n.length,function(e,t){var o=U.getSegmentPoint(n[e],n[e<t-1?e+1:0]);r.push(o)}),r},set:function(e){zon&&zog("Blob() - segmentPoints is read only")}}),Object.defineProperty(U,"segmentRatios",{get:function(){var o=[],n=0;go.loop(U.segmentPoints,function(e){var t=go.distanceAlongCurve(e);o.push(t),n+=t});var t=[],r=0;return go.loop(o,function(e){r+=e/n,t.push(r)}),t},set:function(e){zon&&zog("Blob() - segmentRatios is read only")}}),U.approximateBounds=function(e,t){zot(e)&&(e=80),e/=U.num;var o=U.interpolate(e,null,!0,null,!0),n=go.boundsAroundPoints(o);if(U.setBounds(n.x,n.y,n.width,n.height),t){U.hitPathPoints?U.hitPathPoints.removeAllChildren():U.hitPathPoints=(new go.Container).addTo(),U.hitPathPoints.top();for(var r=0;r<o.length;r++){var i=o[r];i=U.localToGlobal(i.x,i.y),new go.Circle(3).loc(i.x,i.y,U.hitPathPoints)}}return U},U.getPointAngle=function(e){var t=U.pointObjects[e][0],o=U.pointObjects[e][2],n=U.pointObjects[e][3];if(t==U.stage)var r=new go.Point(o.x,o.y),i=new go.Point(n.x,n.y);else r=t.localToGlobal(o.x,o.y),i=t.localToGlobal(n.x,n.y);return go.angle(r.x,r.y,i.x,i.y)},U.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==ie.x&&0==ie.y||(o.x+=ie.x,n.x+=ie.x,r.x+=ie.x,i.x+=ie.x,o.y+=ie.y,n.y+=ie.y,r.y+=ie.y,i.y+=ie.y),[o,n,r,i]}},U.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=U.pointsAdjusted;if(2==U.num)return[[U.getSegmentPoint(t[0],t[1]),U.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[U.getSegmentPoint(t[U.num-1],t[0]),U.getSegmentPoint(t[0],t[1]),U.getSegmentPoint(t[1],t[2])],[U.num-1,0,1]];if(e>=U.num-1)return[[U.getSegmentPoint(t[U.num-2],t[U.num-1]),U.getSegmentPoint(t[U.num-1],t[0]),U.getSegmentPoint(t[0],t[1])],[U.num-2,U.num-1,0]];var o=e+2>=U.num?0:e+2;return[[U.getSegmentPoint(t[e-1],t[e]),U.getSegmentPoint(t[e],t[e+1]),U.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},U.getCurvePoint=function(o,e,t,n){zot(e)&&(e=U.segmentRatios),zot(t)&&(t=U.segmentPoints),zot(n)&&(n=!1);var r=e,i=t,a=go.loop(r,function(e,t){if(o<=e)return t}),l=0<a?r[a-1]:0,s=0<a?r[a]-r[a-1]:r[a],c=(o-l)/s,u=go.pointAlongCurve(i[a],c,n,!0);if(!zot(u)){var d=U.localToGlobal(u.x,u.y);return d.angle=u.angle,d.z=a,zot(d)?void 0:d}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=U.points,n=U.segmentRatios;return m(o,U.pointControls,n,e,t),U.points=o,U.num=o.length,U},this.addPoints=function(i,a,l,t,s,c,u){zot(c)&&(c=go.copy(U.points));var e=go.copy(U.segmentRatios),d=0;if(s&&(U.interpolatedPoints=[]),t)var h=e.length*i;return go.loop(e,function(o,n){s&&m(c,U.pointControls,U.segmentRatios,100*d,a,!zot(l)&&n!=l,s,u);var e=t?Math.round(h*(o-d)):i,r=1/(e+1);go.loop(e,function(e){var t=d+(o-d)*r*(e+1);m(c,U.pointControls,U.segmentRatios,100*t,a,!zot(l)&&n!=l,s,u),!s&&0<i&&(U.points=c)}),d=o}),s&&"Squiggle"==U.type&&m(c,U.pointControls,U.segmentRatios,100,a,null,s,u),U.stage&&U.stage.update(),U.num=c.length,U},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),U.addPoints(e,"none",t,o,!0,n,r),U.interpolatedPoints},this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.dispose=function(e,t,o){if(U.shape){U.shape.cursor="default";for(var n=0;n<U.pointObjects.length;n++)U.pointObjects[n][1].removeAllEventListeners();for(n=0;n<Z.length;n++)Z[n].removeAllEventListeners();return U.sticks.removeFrom(U),U.controls.removeFrom(U),U.shape.removeAllEventListeners(),U.controls.removeAllEventListeners(),U.off("mousedown",U.toggleEvent),U.off("click",U.clickEvent),U.toggleStageEvent&&U.stage.off("stagemousedown",U.toggleStageEvent),!e&&U.selectPoints&&U.selectionManager.removeAllEventListeners(),!0}}},go.extend(go.Blob,go.Container,["clone","dispose"],"zimContainer",!1),go.Flare=function(E,l,s,c,e,u,m,o,z,M,t,n,r,i,a,d,h,g,j,L,D,Y,X,R,_,F,W,H,G,N,p,f,y){var b;if(b=zob(go.Flare,arguments,"color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",this))return b;z_d("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=f,zot(width)&&(width=500),zot(height)&&(height=300);var v=!1===p?{}:go.getStyle(this.type,this.group,y),V=this;zot(l)&&(l=null!=v.borderColor?v.borderColor:null),zot(s)&&(s=null!=v.borderWidth?v.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(E)&&(E=null!=v.color?v.color:0<s?"rgba(0,0,0,0)":"black"),(zot(s)||0<s)&&(zot(l)&&zot(s)||zot(l)&&(l="black")),zot(c)&&(c=null!=v.crossAngle?v.crossAngle:0);var w,C,x=c;function k(y,b,v,w,C,e,x,o){V.removeAllChildren();var n=V.shape=(new go.Shape).addTo(V);if(V.colorCommand=n.c().f(E).command,E&&E.type&&V.specialColor(V.colorCommand,E),(zot(s)||0<s)&&(zot(l)&&zot(s)||(zot(l)&&(l="black"),V.borderColorCommand=n.s(l).command,l&&l.type&&V.specialColor(V.borderColorCommand,l),V.borderWidthCommand=n.ss(s,L.caps,L.joints,L.miterLimit,L.ignoreScale).command,j&&(V.borderDashedCommand=n.sd([10,10],5).command))),n.mt(0,0),0<Y){var r=V.spineShape=(new go.Shape).addTo(V);V.spineColorCommand=r.c().f(D).command,D&&D.type&&V.specialColor(V.spineColorCommand,D),(zot(Y)||0<Y)&&(zot(X)&&zot(Y)||(zot(X)&&(X="black"),V.spineBorderColorCommand=r.s(X).command,X&&X.type&&V.specialColor(V.spineBorderColorCommand,X),V.spineBorderWidthCommand=r.ss(Y,_.caps,_.joints,_.miterLimit,_.ignoreScale).command,R&&(V.spineBorderDashedCommand=r.sd([10,10],5).command)))}if(!zot(F)){var i=V.closeShape=(new go.Shape).addTo(V);V.closeColorCommand=i.c().f(F).command,F&&F.type&&V.specialColor(V.closeColorCommand,F),(zot(W)||0<W)&&(zot(H)&&zot(W)||(zot(H)&&(H="black"),V.closeBorderColorCommand=i.s(H).command,closeBorder&&closeBorder.type&&V.specialColor(V.closeBorderCommand,closeBorder),V.closeBorderWidthCommand=i.ss(W,N.caps,N.joints,N.miterLimit,N.ignoreScale).command,G&&(V.closeBorderDashedCommand=i.sd([10,10],5).command))),n.mt(0,0)}var k,T,d=z,h=M,A=c,P=A-180,B=u,I=m,S=b[0],t=Math.max(y.length,b.length,v.length,w.length,C.length),g=(S=P,[]),p=[],f=[],a=(V.points=[],V.pinPoints=[]);function O(e,t,o,n,r){var i=r-90,a=180-n-(90-i),l=Math.tan(i*go.RAD)*o,s=(e-t-l)/Math.sin(a*go.RAD)*Math.sin(n*go.RAD)+Math.sqrt(Math.pow(o,2)+Math.pow(l,2));return{x:s*Math.sin(i*go.RAD),y:s*Math.cos(i*go.RAD),t:s}}go.loop(t,function(e,t){var o=function(e){var t=b[e],o=y[e],n=v[e],r=w[e],i=C[e];if(x)var a=x[e];zot(t)&&(t=S,V.angles[e]=t);zot(o)&&(o=200,V.lengths[e]=o);zot(n)&&(n=0,V.anglesA[e]=n);zot(r)&&(r=0,V.anglesB[e]=r);zot(i)&&(i=0,V.anglesEnd[e]=i);x&&zot(a)&&(a=E,V.crossColors[e]=a);var l=180-(i+=90),s=Math.cos((S-t)*go.RAD),c=Math.sin((S-t)*go.RAD),u=new go.Point(0,0),d=new go.Point(o,0);if(zot(k))var h=new go.Point(Math.cos(A*go.RAD)*B,Math.sin(A*go.RAD)*B);else h=new go.Point(k.x*s-k.y*c,k.x*c+k.y*s);var g=O(o,h.x,h.y,n,l),p=new go.Point(o-g.x,-g.y);if(zot(T))var f=new go.Point(Math.cos(P*go.RAD)*B,Math.sin(P*go.RAD)*I);else f=new go.Point(T.x*s-T.y*c,T.x*c+T.y*s);var m=O(o,f.x,f.y,r,i),z=new go.Point(o-m.x,m.y);return k=new go.Point(p.x-o,p.y),T=new go.Point(z.x-o,z.y),{a:S=t,A:h,B:p,C:z,D:f,E:d,F:u,tA:g.t,tB:m.t}}(e),n=Math.cos(o.a*go.RAD),r=Math.sin(o.a*go.RAD),i=new go.Point(d+o.A.x*n-o.A.y*r,h+o.A.x*r+o.A.y*n),a=new go.Point(d+o.B.x*n-o.B.y*r,h+o.B.x*r+o.B.y*n),l=new go.Point(d+o.C.x*n-o.C.y*r,h+o.C.x*r+o.C.y*n),s=new go.Point(d+o.D.x*n-o.D.y*r,h+o.D.x*r+o.D.y*n);g.push(i,a),p.unshift(l,s),f.push([i,a,l,s]);var c=new go.Point(d+o.F.x*n-o.F.y*r,h+o.F.x*r+o.F.y*n),u=new go.Point(d+o.E.x*n-o.E.y*r,h+o.E.x*r+o.E.y*n);0==e&&V.pinPoints.push(c),V.pinPoints.push(u),d=u.x,h=u.y,B=o.tA,I=o.tB}),V.points=g.concat(p),e?(go.loop(f,function(e,t){n.mt(e[0].x,e[0].y),zot(x)||zot(x[t])||n.f(x[t]).mt(e[0].x,e[0].y),n.lt(e[1].x,e[1].y).lt(e[2].x,e[2].y).lt(e[3].x,e[3].y).cp()}),o&&n.mt(f[f.length-1][1].x,f[f.length-1][1].y).lt(f[f.length-1][2].x,f[f.length-1][2].y).lt(f[0][3].x,f[0][3].y).lt(f[0][0].x,f[0][0].y).cp()):(go.loop(g,function(e,t){0==t?n.mt(e.x,e.y):n.lt(e.x,e.y)}),o&&(n.lt(g[0].x,g[0].y),n.cp()),go.loop(p,function(e,t){0==t&&o?n.mt(e.x,e.y):n.lt(e.x,e.y)}),o&&n.lt(p[0].x,p[0].y),n.cp()),r&&(go.loop(a,function(e,t){0==t?r.mt(e.x,e.y):r.lt(e.x,e.y)}),o&&r.lt(a[0].x,a[0].y).cp()),zot(F)||(go.loop(p,function(e,t){0==t?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&i.lt(p[0].x,p[0].y).cp())}c-=90,zot(e)&&(e=null!=v.thickness?v.thickness:null),zot(u)&&(u=null!=v.thicknessA?v.thicknessA:null),zot(m)&&(m=null!=v.thicknessB?v.thicknessB:null),zot(e)?zot(m)&&!zot(u)?m=u:zot(u)&&!zot(m)?u=m:m=u=10:zot(m)&&!zot(u)?m=e-u:zot(u)&&!zot(m)?u=e-m:m=u=e/2,V.thickness=u+m,zot(d)&&(d=null==v.cross||v.cross),zot(h)&&(h=null!=v.crossColors?v.crossColors:null),zot(h)||Array.isArray(h)||(h=[h]),zot(g)&&(g=null!=v.close&&v.close),zot(z)&&(z=null!=v.startX?v.startX:0),zot(M)&&(M=null!=v.startY?v.startY:0),zot(t)&&(t=null!=v.lengths?v.lengths:[200]),Array.isArray(t)||(t=[t]),zot(n)&&(n=null!=v.angles?v.angles:[0]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=v.anglesA?v.anglesA:[10]),Array.isArray(r)||(r=[r]),zot(i)&&(i=null!=v.anglesB?v.anglesB:go.copy(r)),Array.isArray(i)||(i=[i]),zot(a)&&(a=null!=v.anglesEnd?v.anglesEnd:[0]),Array.isArray(a)||(a=[a]),zot(L)&&(L=null!=v.strokeObj?v.strokeObj:{miterLimit:2}),zot(X)&&(X=null!=v.spineBorderColor?v.spineBorderColor:null),zot(Y)&&(Y=null!=v.spineBorderWidth?v.spineBorderWidth:null),X<0||Y<0?X=Y=null:null!=X&&null==Y&&(Y=1),zot(D)&&(D=null!=v.spineColor?v.spineColor:0<Y?"rgba(0,0,0,0)":"black"),zot(R)&&(R=null!=v.spineDashed?v.spineDashed:null),zot(_)&&(_=null!=v.spineStrokeObj?v.spineStrokeObj:{miterLimit:2}),(zot(Y)||0<Y)&&(zot(X)&&zot(Y)||zot(X)&&(X=l||"black")),zot(H)&&(H=null!=v.closeBorderColor?v.closeBorderColor:null),zot(W)&&(W=null!=v.closeBorderWidth?v.closeBorderWidth:null),H<0||W<0?H=W=null:null!=H&&null==W&&(W=1),zot(F)&&(F=null!=v.closeColor?v.closeColor:0<W?"rgba(0,0,0,0)":null),zot(G)&&(G=null!=v.closeDashed?v.closeDashed:null),zot(N)&&(N=null!=v.closeStrokeObj?v.closeStrokeObj:{miterLimit:2}),(zot(W)||0<W)&&(zot(H)&&zot(W)||zot(H)&&(H=l||"black")),this.thicknessA=u,this.thicknessB=m,this.cross=d,this.close=g,this.lengths=t,this.angles=n,this.anglesA=r,this.anglesB=i,this.anglesEnd=a,this.crossColors=h,k(t,n,r,i,a,d,h,g),this.add=function(e,t,o,n,r,i,a,l){var s;if(s=zob(V.add,arguments,"lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close"))return s;zot(i)||(V.cross=i),zot(l)||(V.close=l),zot(e)||(Array.isArray(e)||(e=[e]),zot(V.lengths)?V.lengths=e:V.lengths=V.lengths.concat(e)),zot(t)||(Array.isArray(t)||(t=[t]),zot(V.angles)?V.angles=t:V.angles=V.angles.concat(t)),zot(o)||(Array.isArray(o)||(o=[o]),zot(V.anglesA)?V.anglesA=o:V.anglesA=V.anglesA.concat(o)),zot(n)||(Array.isArray(n)||(n=[n]),zot(V.anglesB)?V.anglesB=n:V.anglesB=V.anglesB.concat(n)),zot(r)||(Array.isArray(r)||(r=[r]),zot(V.anglesEnd)?V.anglesEnd=r:V.anglesEnd=V.anglesEnd.concat(r)),zot(a)||(zot(V.crossColors)?zon&&zogy("Flare() - must set crossColor for original object parameters"):(Array.isArray(a)||(a=[a]),zot(V.crossColors)?V.crossColors=a:V.crossColors=V.crossColors.concat(a))),V.remake()},this.remake=function(){u=this.thicknessA,m=this.thicknessB,k(V.lengths,V.angles,V.anglesA,V.anglesB,V.anglesEnd,V.cross,V.crossColors,V.close)},Object.defineProperty(V,"color",{get:function(){return E},set:function(e){zot(e)&&(e="black"),(E=e)&&e.type?V.specialColor(V.colorCommand,e):V.colorCommand.style=e}}),this.setColorRange=function(e,t){return C=zot(t)?(w=V.color,e):(w=zot(e)?V.color:e,t),V};var T=0;Object.defineProperty(V,"colorRange",{get:function(){return T},set:function(e){T=e,zot(w)||zot(C)||(V.color=go.colorRange(w,C,e))}}),Object.defineProperty(V,"borderColor",{get:function(){return l},set:function(e){l=e,V.borderColorCommand?e&&e.type?V.specialColor(V.borderColorCommand,e):V.borderColorCommand.style=e:k()}}),Object.defineProperty(V,"borderWidth",{get:function(){return s},set:function(e){0<e||(e=0),s=e,V.borderWidthCommand&&0!=s?(V.borderWidthCommand.width=s,j&&(V.borderDashedCommand.segments=[20,10],V.borderDashedCommand.offset=5)):k()}}),Object.defineProperty(V,"spineColor",{get:function(){return D},set:function(e){zot(e)&&(e="black"),D=e,V.spineColorCommand?e&&e.type?V.specialColor(V.spineColorCommand,e):V.spineColorCommand.style=e:k()}}),Object.defineProperty(V,"spineBorderColor",{get:function(){return X},set:function(e){X=e,V.spineBorderColorCommand?e&&e.type?V.specialColor(V.spineBorderColorCommand,e):V.spineBorderColorCommand.style=e:k()}}),Object.defineProperty(V,"spineBorderWidth",{get:function(){return Y},set:function(e){0<e||(e=0),Y=e,V.spineBorderWidthCommand&&0!=Y?(V.spineBorderWidthCommand.width=Y,R&&(V.spineBorderDashedCommand.segments=[20,10],V.spineBorderDashedCommand.offset=5)):k()}}),Object.defineProperty(V,"closeColor",{get:function(){return F},set:function(e){zot(e)&&(e="black"),F=e,V.closeColorCommand?e&&e.type?V.specialColor(V.closeColorCommand,e):V.closeColorCommand.style=e:k()}}),Object.defineProperty(V,"closeBorderColor",{get:function(){return H},set:function(e){H=e,V.closeBorderColorCommand?e&&e.type?V.specialColor(V.closeBorderColorCommand,e):V.closeBorderColorCommand.style=e:k()}}),Object.defineProperty(V,"closeBorderWidth",{get:function(){return W},set:function(e){0<e||(e=0),W=e,V.closeBorderWidthCommand&&0!=W?(V.closeBorderWidthCommand.width=W,G&&(V.closeBorderDashedCommand.segments=[20,10],V.closeBorderDashedCommand.offset=5)):k()}}),Object.defineProperty(V,"pin",{get:function(){return o},set:function(e){0<e||(e=0),e>V.pinPoints.length-1&&(o=0),o=e;var t=V.pinPoints[o];t&&(V.regX=t.x,V.regY=t.y)}});var A=go.boundsAroundPoints(V.points);this.setBounds(A.x,A.y,A.width,A.height),zot(o)||(V.pin=o),(this.mouseChildren=!1)!==p&&qe(this,v),this.clone=function(){return V.cloneProps(new Flare(E,l,s,x,go.copy(e),go.copy(u),go.copy(m),o,z,M,go.copy(t),go.copy(n),go.copy(r),go.copy(i),go.copy(a),d,go.copy(h),g,j,L,D,Y,X,R,_,F,W,H,G,N,p,this.group,y))}},go.extend(go.Flare,go.Container,["clone"],"zimContainer",!1),go.MultiFlare=function(l,s,c,u,e,t,o){var n;if(n=zob(go.MultiFlare,arguments,"flares, pins, angles, endToEnd, style, group, inherit",this))return n;z_d("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=t;var r=!1===e?{}:go.getStyle(this.type,this.group,o),d=this;zot(l)&&(l=null!=r.flares?r.flares:[]),Array.isArray(l)||(l=[l]),zot(s)&&(s=null!=r.pins?r.pins:null),zot(c)&&(c=null!=r.angles?r.angles:null),zot(u)&&(u=null!=r.endToEnd&&r.endToEnd),d.flares=l,d.pins=s,d.angles=c,d.endToEnd=u,d.mouseChildren=!1,d.add=function(e,t){return zot(e)||(zot(t)&&(t=!0),Array.isArray(e)||(e=[e]),go.loop(e,function(e){t?d.flares.push(e.clone()):d.flares.push(e)}),d.remake(),d.stage&&d.stage.update()),d},d.remove=function(e){return zot(e)||(Array.isArray(e)||(e=[e]),go.loop(e,function(e){var t=d.flares.indexOf(e);0<=t&&d.flares.splice(t,1)}),d.remake(),d.stage&&d.stage.update()),d},d.remake=function(){d.removeAllChildren(),go.loop(d.flares,function(e,t){if(s&&!zot(s[t])&&(e.pin=s[t]),c&&!zot(c[t])&&(e.rotation=c[t]),e.addTo(d),d.flares.push(e),u&&0<t){var o=l[t-1],n=o.pinPoints[o.pinPoints.length-1],r=o.localToLocal(n.x,n.y,d),i=e.pinPoints[0],a=e.localToLocal(i.x,i.y,d);e.mov(r.x-a.x,r.y-a.y)}})},d.remake(),!1!==e&&qe(this,r),this.clone=function(){return d.cloneProps(new MultiFlare(copy(l,!0),copy(s),copy(c),u,e,this.group,o))}},go.extend(go.MultiFlare,go.Container,["clone"],"zimContainer",!1),go.FlareBox=function(o,n,e,t,r,i,a,l,s,c,u){var d;if(d=zob(go.FlareBox,arguments,"width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",this))return d;z_d("53.8"),this.group=c;var h=!1===s?{}:go.getStyle("FlareBox",this.group,u);zot(o)&&(o=null!=h.width?h.width:220),zot(n)&&(n=null!=h.height?h.height:80),this.zimContainer_constructor(o,n),this.type="FlareBox";var g=this;if(this.mouseChildren=!1,zot(t)&&(t=null!=h.borderColor?h.borderColor:null),zot(r)&&(r=null!=h.borderWidth?h.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(e)&&(e=null!=h.color?h.color:0<r?"rgba(0,0,0,0)":"black"),(zot(r)||0<r)&&(zot(t)&&zot(r)||zot(t)&&(t="black")),zot(i)&&(i=null!=h.flares?h.flares:null),zot(a)&&(a=null!=h.corners?h.corners:null),zot(l)&&(l=null!=h.pins?h.pins:null),g.backing=new Rectangle(o,n,e,t,r).addTo(this),!zot(i)){if("MultiFlare"!=i.type){if(!Array.isArray(i)){if("Flare"!=i.type)return;i=[i]}i=new MultiFlare(i,l)}i.addTo(g),g.multiFlare=i,g.flares=g.multiFlare.flares,i.loop(function(e,t){l&&!zot(l[t])?e.pin=l[t]:zot(e.pin)&&(e.pin=0),a&&!zot(a[t])?e.corner=a[t]:zot(e.corner)&&(e.corner=0),1==e.corner?e.loc(o,0):2==e.corner?e.loc(o,n):3==e.corner?e.loc(0,n):e.loc(0,0),e.rot(90*(e.corner-e.pin))}),!1!==s&&qe(this,h),this.clone=function(){return g.cloneProps(new FlareBox(o,n,e,t,r,copy(i,!0),copy(a),copy(l),s,this.group,u))}}},go.extend(go.FlareBox,go.Container,["clone"],"zimContainer",!1),go.Label=function(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O){var E;if(E=zob(go.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, style, group, inherit",this))return E;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=S;var M=!1===I?{}:go.getStyle(this.type,this.group,O);zot(e)&&(e=null!=M.text?M.text:"LABEL"),zot(o)&&(o=null!=M.size?M.size:36),zot(t)&&(t=null!=M.font?M.font:"arial"),zot(n)&&(n=null!=M.color?M.color:"black"),zot(d)&&(d=null!=M.fontOptions?M.fontOptions:"");var j=function(){return arguments}(e,o,t,n,d);e=go.Pick.choose(e);var L=!1;""===e&&(e=" ",L=!0),o=go.Pick.choose(o),t=go.Pick.choose(t),n=go.Pick.choose(n),d=go.Pick.choose(d),zot(r)&&(r=null!=M.rollColor?M.rollColor:n),!zot(i)&&"ignore"!=i||(i=null!=M.shadowColor&&"ignore"!=i?M.shadowColor:-1),!zot(a)&&"ignore"!=a||(a=null!=M.shadowBlur&&"ignore"!=a?M.shadowBlur:14),zot(l)&&(l=null!=M.align?M.align:"left"),zot(s)&&(s=null!=M.valign?M.valign:"top"),zot(g)&&zot(M.outlineColor)||!zot(p)||(p=null!=M.outlineWidth?M.outlineWidth:Math.round(.2*o)),zot(p)&&zot(M.outlineWidth)||!zot(g)||(g=null!=M.outlineColor?M.outlineColor:"#000000"),zot(p)&&(p=null!=M.outlineWidth?M.outlineWidth:0),!zot(f)&&"ignore"!=f||(f=null!=M.backgroundColor&&"ignore"!=f?M.backgroundColor:null),!zot(v)&&"ignore"!=v||(v=null!=M.padding&&"ignore"!=v?M.padding:10),zot(w)&&(w=null!=M.paddingHorizontal?M.paddingHorizontal:v),zot(C)&&(C=null!=M.paddingVertical?M.paddingVertical:v),zot(x)&&(x=null!=M.shiftHorizontal?M.shiftHorizontal:0),zot(k)&&(k=null!=M.shiftVertical?M.shiftVertical:0),zot(c)&&(c=null!=M.lineWidth?M.lineWidth:null),zot(u)&&(u=null!=M.lineHeight?M.lineHeight:null),!zot(h)&&"ignore"!=h||(h=null!=M.backing&&"ignore"!=h?M.backing.clone():null),zot(T)&&(T=null!=M.rollPersist&&M.rollPersist),null!=M.labelWidth&&(c=M.labelWidth),zot(A)||(c=A),"middle"==l&&(l="center"),zot(P)&&(P=null!=M.labelHeight?M.labelHeight:null),zot(B)&&(B=null!=M.maxSize?M.maxSize:null),o=B?Math.min(o,B):o;var D=void 0!==zimDefaultFrame&&zimDefaultFrame.retina,Y=this;this.mouseChildren=!1,this.paddingVertical=C,this.paddingHorizontal=w;var X=this.label=new createjs.Text(String(e),d+" "+o+"px "+t,n);if(X.textAlign=l,X.lineWidth=c,X.lineHeight=u,X.textBaseline="alphabetic",0<p){var R=this.outlineLabel=X.clone();R.color=g,R.outline=p}-1!=i&&0<a&&(X.shadow=new createjs.Shadow(i,3,3,a)),this.addChild(X);var _,F,W=!1;if(zot(h)&&zot(f)){var H=new createjs.Shape;Y.hitArea=H}function G(){var e,t=X.getBounds();"baseline"==s?e=t.y:"top"==s?(X.y=o-o/6,e=0):"center"==s||"middle"==s?(e=-t.height/2,X.y=.3*o):e=-t.height,Y.setBounds(t.x,e,M.width?M.width-2*v:t.width,M.height?M.height-2*v:t.height),Y.hitArea&&Y.hitArea.graphics.c().f("black").r(Y.getBounds().x,Y.getBounds().y,Y.getBounds().width,Y.getBounds().height),"center"!=s&&"middle"!=s||(go.pos(X,null,0),go.mov(X,0,1)),h?W&&V():zot(f)||(Y.removeChild(Y.background),Y.background=new go.Rectangle(Y.getBounds().width+2*w,Y.getBounds().height+2*C,f,m,z,y,b,null,!1),go.center(Y.background,Y,0),Y.setBounds(Y.background.x,Y.background.y,Y.background.width,Y.background.height)),"baseline"==s||D||(X.y+=o/32),q()}if(G(),!zot(h)){if("Pattern"==h.type){if(Y.backing=new go.Container(Y.width+2*w,Y.height+2*C,null,null,!1).centerReg(null,null,!1),-1!=i&&0<a)new go.Rectangle(Y.width+2*w-2,Y.height+C-2,"#666",null,null,y,null,null,!1).center(Y.backing).shadow=new createjs.Shadow(i,3,3,a);var N=new go.Rectangle(Y.width+2*w,Y.height+2*C,f,null,null,y,null,null,!1).addTo(Y.backing);h.centerReg(N),h.setMask(N),Y.backing.pattern=h}else Y.backing=h;Y.backing.center(Y,0),h=Y.backing,V(),W=!0}function V(){var e=h.boundsToGlobal(),t=Y.boundsToGlobal(e,!0);Y.setBounds(t.x,t.y,t.width,t.height)}function q(){go.pos(X,"left"==l||"right"==l?h||Y.background?w:0:null,"top"==s||"baseline"==s||"bottom"==s?h||Y.background?C:0:null,"right"==l,"bottom"==s),X.x+=x,X.y+=k}function U(){R&&(R.x=X.x,R.y=X.y,Y.addChildAt(R,Y.background?1:0))}q(),U(),Object.defineProperty(Y,"text",{get:function(){return" "==X.text&&L?"":X.text},set:function(e){L=!1,""===e&&(e=" ",L=!0),X.text=String(e),R&&(R.text=String(e)),G(),zot(c)||zot(P)||(Z(),R&&U())}}),Object.defineProperty(Y,"size",{get:function(){return o},set:function(e){o=B?Math.min(e,B):e;var t=this.label.font.match(/^(.*\s)(\d*\.?\d*)+px(.*)$/i);t&&(this.label.font=t[1]+e+"px"+t[3],R&&(R.font=t[1]+e+"px"+t[3]),G())}}),Object.defineProperty(Y,"color",{get:function(){return n},set:function(e){r==n&&(r=e),n=e,X.color=n,go.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}}),this.setColorRange=function(e,t){return F=zot(t)?(_=Y.color,e):(_=zot(e)?Y.color:e,t),Y};var K=0;function Z(){Y.size=200;for(var e=0;u<P/2&&(Y.height>P||Y.width>c)&&(e++,Y.size=Y.size/2,!(50<e)););for(e=0;Y.height<=P&&Y.width<=c&&(e++,Y.size=Math.ceil(Y.size+1),!(50<e)););Y.size=Y.size-1,U()}Object.defineProperty(Y,"colorRange",{get:function(){return K},set:function(e){K=e,zot(_)||zot(F)||(Y.color=go.colorRange(_,F,e))}}),Object.defineProperty(Y,"backgroundColor",{get:function(){return f},set:function(e){f=e,Y.background?Y.background.color=e:Y.backing?Y.backing.color=e:setBackground(),go.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(Y,"outlineColor",{get:function(){return g},set:function(e){g=e,R&&(R.color=g),go.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(Y,"rollColor",{get:function(){return r},set:function(e){r=e}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(e){je(Y,e),X.color=n,Y.mouseChildren=!1,go.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),X.color=e?r:n,Y.stage&&Y.stage.update(),Y},this.mouseoverEvent=this.on("mouseover",function(e){Y.showRollColor&&Y.showRollColor()}),this.mouseoutEvent=this.on("mouseout",function(e){Y.rollPersist||Y.showRollColor(!1)}),this.pressupEvent=this.on("pressup",function(e){Y.rollPersist&&Y.showRollColor(!1)}),Object.defineProperty(Y,"labelWidth",{get:function(){return c},set:function(e){0<e&&(c=e,Y.label.lineWidth=e,R&&(R.lineWidth=e)),P&&Z(),go.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(Y,"labelHeight",{get:function(){return P},set:function(e){0<e&&(P=e),c&&Z(),go.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}}),zot(c)||zot(P)||Z(),qe(this,M),this.clone=function(e){return Y.cloneProps(new go.Label(e||!go.isPick(j[0])?Y.text:j[0],e||!go.isPick(j[1])?o:j[1],e||!go.isPick(j[2])?t:j[2],e||!go.isPick(j[3])?n:j[3],r,i,a,l,s,c,u,e||!go.isPick(j[4])?d:j[4],zot(h)?null:h.clone(e),g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,this.group,O))}},go.extend(go.Label,go.Container,"clone","zimContainer"),go.LabelOnPath=function(o,i,a,l,e,t,n,r,s,c,u){var d;if(d=zob(go.LabelOnPath,arguments,"label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, style, group, inherit",this))return d;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=c;var h=!1===s?{}:go.getStyle(this.type,this.group,u);zot(o)&&(o=null!=h.label?h.label:new go.Label("Label on Path")),zot(i)&&(i=null!=h.path?h.path:new go.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(a)&&(a=null!=h.percentAngle?h.percentAngle:100),zot(l)&&(l=null!=h.percents?h.percents:null),zot(e)&&(e=null==h.showPath||h.showPath),zot(t)&&(t=null==h.allowToggle||h.allowToggle),zot(n)&&(n=null==h.interactive||h.interactive),zot(r)&&(r=null!=h.onTop&&h.onTop),i.addTo(this);var g=this;this.path=i,this.allowToggle=t,i.interactive=n,"string"==typeof o&&(o=new go.Label(o));var p=i.alpha;e||i.alp(0),i.onTop=r;var f=this.letters=(new go.Container).addTo(this);if(!l){l=[];for(var m=0;m<o.text.length;m++)l.push(go.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*m))}function z(){for(var e=f.numChildren-1;0<=e;e--)f.getChildAt(e).dispose();g.numLetters=o.text.length;for(e=0;e<g.numLetters;e++){var t=o.clone();t.text=o.text[e],t.centerReg(f).reg(null,t.height),""!=t.text&&" "!=t.text&&t.expand(0),g.allowToggle&&(t.cursor="pointer"),t.on("mousedown",function(){g.allowToggle&&g.toggle()})}g.resize()}this.percents=l,this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<this.numLetters;o++){var n=i.getCurvePoint(l[o]/100,e,t,!0);if(n){var r=this.globalToLocal(n.x,n.y);r&&f.getChildAt(o).loc(r).rot((180<n.angle?n.angle-360:n.angle)*a/100)}}return this},z(),this.showPath=function(e){return this.toggle(!0),i.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(g,"text",{get:function(){return o.text},set:function(e){o.text=e,l=[];for(var t=0;t<o.text.length;t++)l.push(go.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*t));z()}}),Object.defineProperty(this,"color",{get:function(){return color},set:function(e){color=e;for(var t=0;t<g.letters.numChildren;t++)g.letters.getChildAt(t).color=color;g.stage&&g.stage.update()}}),Object.defineProperty(g,"interactive",{get:function(){return n},set:function(e){n=e,i.interactive=e,this.ticker&&go.Ticker.remove(this.ticker),n&&(this.ticker=go.Ticker.add(function(){g.resize()}))}}),this.interactive&&(this.ticker=go.Ticker.add(function(){g.resize()}));var y=g.toggled=e;this.toggle=function(e){if(this.allowToggle)return(y=zot(e)?!y:!!e)?(i.alp(p),this.interactive&&(i.showControls(),f.mouseEnabled=!1,f.mouseChildren=!1,f.cursor="default",this.controlHideEvent&&i.off("controlshide",this.controlHideEvent),this.controlHideEvent=i.on("controlshide",function(){f.mouseEnabled=!0,f.mouseChildren=!0,f.cursor="pointer",p=i.alpha,i.alp(0),y=!1,g.toggled=y},null,!0))):(p=i.alpha,i.alp(0),f.mouseEnabled=!0,f.mouseChildren=!0,f.cursor="pointer"),g.toggled=y,g.stage.update(),g},qe(this,h),this.clone=function(){return g.cloneProps(new go.LabelOnPath(g.label.clone(),g.path.clone(),a,go.copy(l),e,t,n,r,s,this.group,u))},this.dispose=function(e,t,o){return this.ticker&&go.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},go.extend(go.LabelOnPath,go.Container,["clone","dispose"],"zimContainer",!1),go.LabelOnArc=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){var m;if(m=zob(go.LabelOnArc,arguments,"label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, style, group, inherit",this))return m;z_d("54.55"),this.group=p;var z=!1===g?{}:go.getStyle("LabelOnArc",this.group,f);zot(t)&&(t=null!=z.size?z.size:30),zot(e)&&(e=null!=z.label?z.label:new go.Label("Label on Arc",t)),zot(o)&&(o=null!=z.font?z.font:"verdana"),zot(n)&&(n=null!=z.color?z.color:"white"),zot(r)&&(r=null!=z.radius?z.radius:100),zot(i)&&(i=null!=z.flip&&z.flip),zot(a)&&(a=null!=z.spacing?z.spacing:0),zot(l)&&(l=null!=z.letterSpacing?z.letterSpacing:5),zot(s)&&(s=null!=z.angles?z.angles:null),zot(c)&&(c=null!=z.showCircle&&z.showCircle),zot(u)&&(u=null!=z.arcColor?z.arcColor:null),zot(d)&&(d=null!=z.arcBorderColor?z.arcBorderColor:null),zot(h)&&(h=null!=z.arcBorderWidth?z.arcBorderWidth:null);var y=this.outerRadius=r+a+e.height;this.innerRadius=r+a,this.zimContainer_constructor(-y,-y,2*y,2*y,!1),this.type="LabelOnArc";var b=this;if("Label"!=e.type&&(e=new go.Label(e,t,o,n)),b.text=e.text,i){var v=e.text.split("").reverse().join("");e.text=v}var w=b.letters=new go.Container(this.width,this.height).centerReg(this),C=0,x=[0];b.numLetters=e.text.length;for(var k=b.labels=[],T=0;T<b.numLetters;T++){var A=e.clone();k.push(A),A.text=e.text[T];var P=180*Math.atan((A.width+l)/2/(r+a))/Math.PI*2;x.push(P),C+=P;var B=new go.Container(A.width,A.height);A.centerReg(B).rot(i?180:0),B.centerReg(w).reg(null,r+a+A.height+(i?.13*A.height:0))}if(s){for(T=C=0;T<s.length;T++)C+=s[T];C+=s[s.length-1]/2}else{s=[];for(var T=0;T<x.length-1;T++)s[T]=Math.round((x[T]+x[T+1])/2*100)/100}this.letterHeight=e.height,this.angles=s;var I=this.startAngle=-C/2,S=I;for(T=0;T<w.numChildren;T++){A=w.getChildAt(T),s[T];S=A.rotation=S+s[T]}var O=this.circle=new go.Circle(r);c&&O.addTo(this);var E=this.arc=(new go.Shape).addTo(this);(u||d||h)&&(0<h&&zot(d)?d="#000000":zot(h)&&!zot(d)&&(h=2),E.graphics.f(null).s(d).ss(h).arc(0,0,r,(I-90)*Math.PI/180,(I-90+C)*Math.PI/180)),Object.defineProperty(this,"color",{get:function(){return n},set:function(e){n=e;for(var t=0;t<b.labels.length;t++)b.labels[t].color=n;b.stage&&b.stage.update()}}),qe(this,z),this.clone=function(){return b.cloneProps(new go.LabelOnArc(e,t,o,n,r,i,a,l,s,c,u,d,h,g,this.group,f))}},go.extend(go.LabelOnArc,go.Container,"clone","zimContainer",!1),go.LabelLetters=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(go.LabelLetters,arguments,"label, align, valign, letterSpacing, spacings, cache, style, group, inherit",this))return c;z_d("54.57"),this.group=l;var u=!1===a?{}:go.getStyle("LabelLetters",this.group,s);zot(e)&&(e=null!=u.label?u.label:new go.Label("Label Letters")),zot(t)&&(t=null!=u.align?u.align:"center"),zot(o)&&(o=null!=u.valign?u.valign:"center"),zot(n)&&(n=null!=u.letterSpacing?u.letterSpacing:5),zot(r)&&(r=null==u.spacings||u.spacings),zot(i)&&(i=null!=u.cache&&u.cache),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var d=this;if("Label"!=e.type&&(e=new go.Label(e)),d.text=e.text,d.numLetters=e.text.length,!r||!Array.isArray(r)){r=[];for(var h=0;h<d.numLetters-1;h++)r.push(n)}d.spacings=r,d.labels=[];for(h=0;h<d.numLetters;h++){var g=e.clone();d.labels.push(g),g.text=e.text[h],i&&g.cache(),g.regX="left"==t?0:"right"==t?g.width:g.width/2,g.regY="top"==o?0:"bottom"==o?g.height:g.height/2,g.pos(-g.width,0,RIGHT,TOP,this),g.loc(null,0,this),0<h&&g.mov(r[h-1]?r[h-1]:0)}this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return color},set:function(e){color=e;for(var t=0;t<d.numChildren;t++)d.getChildAt(t).color=color;d.stage&&d.stage.update()}}),qe(this,u),this.clone=function(){return d.cloneProps(new go.LabelLetters(e,t,o,n,r,i,a,this.group,s))}},go.extend(go.LabelLetters,go.Container,"clone","zimContainer",!1),go.Button=function(n,r,o,i,a,l,s,t,c,e,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,q){var U;if(U=zob(go.Button,arguments,"width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, waitBacking, rollWaitBacking, waitIcon, rollWaitIcon, align, valign, indent, indentHorizontal, indentVertical, style, group, inherit",this))return U;z_d("55"),this.group=V;var K=!1===N?{}:go.getStyle("Button",V,q);zot(n)&&(n=null!=K.width?K.width:200),zot(r)&&(r=null!=K.height?K.height:60),this.zimContainer_constructor(n,r,null,null,!1),this.type="Button",zot(i)&&(i=null!=K.backgroundColor?K.backgroundColor:"#C60"),zot(a)&&(a=null!=K.rollBackgroundColor?K.rollBackgroundColor:"#F93"),zot(l)&&(l=null!=K.color?K.color:"white"),zot(s)&&(s=null!=K.rollColor?K.rollColor:"white");var Z=function(){return arguments}(i,a,l,s);i=zik(i),a=zik(a),l=zik(l),s=zik(s),zot(S)&&(S=null!=K.waitBackgroundColor?K.waitBackgroundColor:i),zot(O)&&(O=null!=K.rollWaitBackgroundColor?K.rollWaitBackgroundColor:a);var Q=t,J=e;zot(t)&&(t=null!=K.borderColor?K.borderColor:null),zot(e)&&(e=null!=K.borderWidth?K.borderWidth:null),t<0||e<0?t=e=null:null!=t&&null==e&&(e=1),zot(c)&&(c=null!=K.borderRollColor?K.borderRollColor:t),zot(u)&&(u=null!=K.corner?K.corner:20),zot(d)&&(d=null!=K.shadowColor?K.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=K.shadowBlur?K.shadowBlur:14),zot(g)&&(g=null!=K.hitPadding?K.hitPadding:0),zot(_)&&(_=null!=K.align?K.align:"center"),zot(F)&&(F=null!=K.valign?K.valign:"center"),zot(W)&&(W=null!=K.indent?K.indent:10),zot(H)&&(H=null!=K.indentHorizontal?K.indentHorizontal:W),zot(G)&&(G=null!=K.indentVertical?K.indentVertical:W),zot(p)&&(p=null!=K.gradient?K.gradient:0),zot(f)&&(f=null!=K.gloss?K.gloss:0),zot(o)&&(o=zot(v)?null!=K.label?K.label:"PRESS":"");var $=(!zot(C)||!zot(x)||!zot(k)||!zot(T)||!zot(A))&&zot(B)&&zot(D)&&zot(Y);$&&zot(P)&&(P=go.mobile()?"mousedown":"click"),"string"!=typeof o&&"number"!=typeof o||(o=new go.Label({text:o,size:null!=K.size?K.size:36,font:null!=K.font?K.font:"arial",color:null!=K.color?K.color:l,rollColor:null!=K.rollColor?K.rollColor:s,align:_,valign:F,rollPersist:null!=K.rollPersist&&K.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftVertical:null!=K.shiftVertical?K.shiftVertical:0,shiftHorizontal:null!=K.shiftHorizontal?K.shiftHorizontal:0,style:!1,group:this.group})),zot(b)&&(b=null!=K.rollPersist&&K.rollPersist),this.rollPersist=b,zot(m)&&(m=null!=K.dashed&&K.dashed),zot(C)||"Label"!=C.type||zon&&zogy("Button() - do not pass Label to toggle parameter - just pass a String");var ee=this;this.mouseChildren=!1,this.cursor="pointer",ee.focus=!1,ee.rolled=!1,zot(z)&&(z=null!=K.backing?K.backing.clone():null),zot(z)?ee.backing=new go.Rectangle(n,r,i,null,null,u,m,null,!1).centerReg(null,null,!1):ee.backing=z,ee.rollBacking=zot(y)?null!=K.rollBacking?K.rollBacking.clone():null:y,ee.waitBacking=zot(D)?null!=K.waitBacking?K.waitBacking.clone():null:D,ee.rollWaitBacking=zot(Y)?null!=K.rollWaitBacking?K.rollWaitBacking.clone():null:Y,ee.toggleBacking=zot(x)?null!=K.toggleBacking?K.toggleBacking.clone():null:x,ee.rollToggleBacking=zot(k)?null!=K.rollToggleBacking?K.rollToggleBacking.clone():null:k;for(var te,oe,ne=["backing","rollBacking","toggleBacking","rollToggleBacking","waitBacking","rollWaitBacking"],re=0;re<ne.length;re++)te=ne[re],(oe=ee[te])&&("Pattern"==oe.type?oe=ie(te,oe):-1!=d&&0<h&&(oe.shadow=new createjs.Shadow(d,3,3,h)),oe.x=n/2,oe.y=r/2);function ie(e,t){ee[e]=new go.Container(n,r,null,null,!1).centerReg(null,null,!1),-1!=d&&0<h&&(new go.Rectangle(n-2,r-2,"#666",null,null,u,null,null,!1).center(ee[e]).shadow=new createjs.Shadow(d,3,3,h));var o=ee[e].mask=new go.Rectangle(n,r,0<=e.indexOf("roll")?a:i,null,null,u,null,null,!1).addTo(ee[e]);return t.centerReg(o),t.setMask(o.shape),ee[e].pattern=t,ee[e]}ee.addChild(ee.backing),e&&(ee.border=new go.Rectangle(n,r,"rgba(0,0,0,0)",t,e,u,m,null,!1),ee.addChild(ee.border)),ee.icon=zot(v)?null!=K.icon?K.icon.clone():null:v,ee.rollIcon=zot(w)?null!=K.rollIcon?K.rollIcon.clone():null:w,ee.waitIcon=zot(X)?null!=K.waitIcon?K.waitIcon.clone():null:X,ee.rollWaitIcon=zot(R)?null!=K.rollWaitIcon?K.rollWaitIcon.clone():null:R,ee.toggleIcon=zot(T)?null!=K.toggleIcon?K.toggleIcon.clone():null:T,ee.rollToggleIcon=zot(A)?null!=K.rollToggleIcon?K.rollToggleIcon.clone():null:A;var ae,le,se=["icon","rollIcon","toggleIcon","rollToggleIcon","waitIcon","rollWaitIcon"];for(re=0;re<se.length;re++){var ce=se[re],ue=ee[ce];ue&&(ue.x=n/2,ue.y=r/2)}if(ee.icon&&ee.addChild(ee.icon),Array.isArray(u)||(u=[u,u,u,u]),0<p){var de=new createjs.Shape;de.graphics.lf(["rgba(255,255,255,"+p+")","rgba(0,0,0,"+p+")"],[0,1],0,0,0,r-e),de.graphics.rc(e/2,e/2,n-e,r-e,u[0],u[1],u[2],u[3]),this.addChild(de)}if(0<f){var he=new createjs.Shape;he.graphics.f("rgba(255,255,255,"+f+")"),he.graphics.rc(e/2,e/2,n-e,(r-e)/2,u[0],u[1],0,0),he.graphics.f("rgba(0,0,0,"+f+")"),he.graphics.rc(e/2,r/2,n-e,(r-e)/2,0,0,u[2],u[3]),this.addChild(he)}function ge(){(le=new createjs.Shape).graphics.f("#000").r(-g,-g,n+2*g,r+2*g),ee.hitArea=ae=le}if(0<g&&ge(),this.addChild(o),o.center(this),o.y+=1,this.label=o,go.pos(o,"left"==_||"right"==_?H:null,"top"==F||"bottom"==F?G:null,"right"==_,"bottom"==F),this.toggled=!1,$){var pe=o.text;this.on(P,function(){ee.toggled=!ee.toggled,fe()})}function fe(){ee.toggled?(zot(C)||(ee.text=C),ee.rolled?(ee.rollToggleBacking?Pe("rollToggleBacking",ee.rollToggleBacking):ee.toggleBacking&&Pe("toggleBacking",ee.toggleBacking),ee.rollToggleIcon?Pe("rollToggleIcon",ee.rollToggleIcon):ee.toggleIcon&&Pe("toggleIcon",ee.toggleIcon)):(ee.toggleBacking&&Pe("toggleBacking",ee.toggleBacking),ee.toggleIcon&&Pe("toggleIcon",ee.toggleIcon))):(ee.text=pe,me()),ee.stage&&ee.stage.update()}function me(){ee.rolled?(zot(z)&&!ee.rollBacking&&(ee.backing.color=a),ee.rollBacking?Pe("rollBacking",ee.rollBacking):ee.backing&&Pe("backing",ee.backing),ee.rollIcon?Pe("rollIcon",ee.rollIcon):ee.icon?Pe("icon",ee.icon):Pe("icon",null)):(zot(z)&&(ee.backing.color=i),ee.backing&&Pe("backing",ee.backing),ee.icon?Pe("icon",ee.icon):Pe("icon",null))}var ze,ye,be,ve,we=!(this.toggle=function(e){return $?(zot(e)?ee.toggled=!ee.toggled:ee.toggled=e,fe()):zon&&zogy("Button() - can't toggle with wait parameters provided"),ee}),Ce=ee.waiting=!1,xe=ee.label.color,ke=ee.label.rollColor,Te=this.on("mousedown",function(){we=!0,Ae()});function Ae(){zot(B)&&zot(D)&&zot(Y)||ee.waiting||(Ce=!0,zot(L)&&(L=!0),j&&(ve=ee.stage.on("stagemousedown",function(e){ee.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY)||ee.clearWait()},null,!0)),setTimeout(function(){ee.waiting=!0},50),ye=o.text,zot(E)||(ee.label.color=E),zot(M)||(ee.label.rollColor=M),be=ee.enabled,!L&&ee.enabled&&(ee.enabled=!1),zot(B)||(ee.text=B),ee.rolled?(zot(z)&&!ee.rollWaitBacking&&(ee.backing.color=O),ee.rollWaitBacking?Pe("rollWaitBacking",ee.rollWaitBacking):ee.waitBacking&&Pe("waitBacking",ee.waitBacking),ee.rollWaitIcon?Pe("rollWaitIcon",ee.rollWaitIcon):ee.waitIcon&&Pe("waitIcon",ee.waitIcon)):(zot(z)&&!ee.waitBacking&&(ee.backing.color=S),ee.waitBacking&&Pe("waitBacking",ee.waitBacking),ee.waitIcon&&Pe("waitIcon",ee.waitIcon)),zot(I)&&(I=3e4),ze&&ze.clear(),ze=go.timeout(I,function(){ee.enabled||(ee.enabled=be),ee.clearWait(),ee.dispatchEvent("waited")}),ee.stage&&ee.stage.update())}function Pe(e){if(0<=e.indexOf("con")){for(var t=0;t<se.length;t++){var o=se[t],n=ee[o];ee.removeChild(n)}ee[e]&&ee.addChildAt(ee[e],1)}else{if(!ee[e])return;for(t=0;t<ne.length;t++){var r=ne[t],i=ee[r];ee.removeChild(i)}ee[e]&&ee.addChildAt(ee[e],0)}}this.wait=function(){Ae()},this.clearWait=function(){return ze&&(ve&&ee.stage.off("stagemousedown",ve),ze.clear(),ee.text=ye,me(),ee.label.color=xe,ee.label.rollColor=ke,setTimeout(function(){ee.waiting=!1},55),Ce=!1,ee.stage&&ee.stage.update()),ee},this.removeWait=function(){return ee.clearWait(),B=null,ee.waitBacking=null,ee.rollWaitBacking=null,ee.off("mousedown",Te),ee},this.on("pressup",function(){we=!1,ee.rollPersist&&!Be&&Ie()});var Be=!1;function Ie(){ee.rolled=!1,Ce||ee.waiting?(zot(z)&&zot(ee.waitBacking)&&(ee.backing.color=zot(S)?i:S),ee.waitBacking?Pe("waitBacking",ee.waitBacking):Pe("backing",ee.backing),ee.waitIcon?Pe("waitIcon",ee.waitIcon):ee.icon?Pe("icon",ee.icon):Pe("icon")):ee.toggled&&$?(zot(z)&&zot(ee.toggleBacking)&&(ee.backing.color=i),ee.toggleBacking?Pe("toggleBacking",ee.toggleBacking):Pe("backing",ee.backing),ee.toggleIcon?Pe("toggleIcon",ee.toggleIcon):ee.icon?Pe("icon",ee.icon):Pe("icon")):(zot(z)?ee.backing.color=i:zot(z.mask)||(ee.backing.mask.color=i),Pe("backing",ee.backing),ee.icon?Pe("icon",ee.icon):Pe("icon")),ee.border&&(ee.border.borderColor=t),ee.label.showRollColor&&ee.label.showRollColor(!1),ee.stage&&ee.stage.update()}function Se(e,t){return zot(e)||(ee.contains(ee[e])&&(ee.removeChild(ee[e]),t&&ee.addChildAt(t,0<=e.indexOf("con")?ee.numChildren-1:0),ee.stage&&ee.stage.update()),t?(zot(z)&&"backing"==e&&(z=t),"Pattern"==t.type&&(t=ie(e,t)),ee[e]=t,ee[e].x=n/2,ee[e].y=r/2):ee[e]=null),ee}this.on("mouseover",function(e){ee.rolled=!0,Be=!0,Ce?(zot(z)&&zot(ee.rollWaitBacking)&&(ee.backing.color=zot(O)?a:O),Pe("rollWaitBacking",ee.rollWaitBacking),ee.rollWaitIcon&&Pe("rollWaitIcon",ee.rollWaitIcon)):$&&ee.toggled?(zot(z)&&zot(ee.rollToggleBacking)&&(ee.backing.color=a),Pe("rollToggleBacking",ee.rollToggleBacking),ee.rollToggleIcon&&Pe("rollToggleIcon",ee.rollToggleIcon)):(zot(z)?ee.backing.color=a:zot(z.mask)||(ee.backing.mask.color=a),Pe("rollBacking",ee.rollBacking),ee.rollIcon&&Pe("rollIcon",ee.rollIcon));ee.border&&(ee.border.borderColor=c);ee.label.showRollColor&&ee.label.showRollColor();ee.stage&&ee.stage.update()}),this.on("mouseout",function e(t){Be=!1;ee.off("mouseout",e);ee.rollPersist&&we||Ie()}),Object.defineProperty(ee,"text",{get:function(){return" "==o.text?"":o.text},set:function(e){o.text=e,o.center(this),o.y+=1}}),Object.defineProperty(ee,"color",{get:function(){return l},set:function(e){l=e,ee.label&&!zot(ee.label.color)&&(ee.label.color=l),go.OPTIMIZE||!zns&&OPTIMIZE||!ee.stage||ee.stage.update()}}),Object.defineProperty(ee,"rollColor",{get:function(){return s},set:function(e){s=e,ee.label&&(ee.label.rollColor=s)}}),Object.defineProperty(ee,"backgroundColor",{get:function(){return i},set:function(e){i=e,ee.backing.color?ee.backing.color=i:ee.backing.mask&&(ee.backing.mask.color=i),go.OPTIMIZE||!zns&&OPTIMIZE||!ee.stage||ee.stage.update()}}),Object.defineProperty(ee,"rollBackgroundColor",{get:function(){return a},set:function(e){a=e,ee.rollBacking&&ee.rollBacking.color?ee.rollBacking.color=a:ee.rollBacking&&ee.rollBacking.mask&&(ee.rollBacking.mask.color=a)}}),Object.defineProperty(ee,"borderColor",{get:function(){return t},set:function(e){t=e,ee.rolled||(ee.backing&&ee.backing.borderColor&&(ee.backing.borderColor=e),ee.border&&(ee.border.borderColor=e))}}),Object.defineProperty(ee,"borderRollColor",{get:function(){return c},set:function(e){c=e,ee.rolled&&(ee.backing&&ee.backing.borderColor&&(ee.backing.borderColor=e),ee.border&&(ee.border.borderColor=e))}}),Object.defineProperty(ee,"hitPadding",{get:function(){return g},set:function(e){0==(g=e)?ae&&(this.hitArea=null):ge()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ee,"enabled",{get:function(){return ee._enabled},set:function(e){ee._enabled&&(ee.startMouseChildren=ee.mouseChildren),e?(je(ee,e),ee.mouseChildren=ee.startMouseChildren):(Ie(),je(ee,e)),o.color=o.color,go.OPTIMIZE||!zns&&OPTIMIZE||!ee.stage||ee.stage.update()}}),this.setBacking=function(e,t){Se(e,t)},!(this.setIcon=function(e,t){Se(e,t)})!==N&&!1!==N&&qe(this,K),this.clone=function(e){var t=new go.Button(n,r,o.clone(),e||!go.isPick(Z[0])?i:Z[0],e||!go.isPick(Z[0])?a:Z[1],e||!go.isPick(Z[0])?l:Z[2],e||!go.isPick(Z[0])?s:Z[3],Q,c,J,u,d,h,g,p,f,m,zot(z)?null:ee.backing.clone(),zot(y)?null:ee.rollBacking.clone(),b,zot(v)?null:v.clone(),zot(w)?null:w.clone(),C,zot(x)?null:x.clone(),zot(k)?null:k.clone(),zot(T)?null:T.clone(),zot(A)?null:A.clone(),P,B,I,S,O,E,M,j,L,zot(D)?null:D.clone(),zot(Y)?null:Y.clone(),zot(X)?null:X.clone(),zot(R)?null:R.clone(),_,F,W,H,G,N,this.group);return ee.cloneProps(t)}},go.extend(go.Button,go.Container,"clone","zimContainer",!1),go.CheckBox=function(t,o,e,n,r,i,a,l,s,c,u,d,h,p,f){var m;if(m=zob(go.CheckBox,arguments,"size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, style, group, inherit",this))return m;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=p;var z=!1===h?{}:go.getStyle(this.type,this.group,f);zot(t)&&(t=null!=z.size?z.size:60),zot(o)&&(o=null!=z.label?z.label:null),zot(e)&&(e=null!=z.startChecked&&z.startChecked);var y=e;zot(n)&&(n=null!=z.color?z.color:"#111"),zot(r)&&(r=null!=z.backgroundColor?z.backgroundColor:"rgba(255,255,255,.8)"),zot(i)&&(i=null!=z.borderColor?z.borderColor:"#111"),zot(a)&&(a=null!=z.borderWidth?z.borderWidth:t/10),i<0||a<0?i=a=null:null!=i&&null==a&&(a=t/10),zot(l)&&(l=null!=z.corner?z.corner:0),"string"!=typeof o&&"number"!=typeof o||(o=new go.Label({text:o,size:5*t/6,color:n,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(s)&&(s=null!=z.margin?z.margin:t/5),"box"!=c&&"square"!=c&&"x"!=c&&(c=null!=z.indicatorType?z.indicatorType:"check"),zot(u)&&(u=null!=z.indicatorColor?z.indicatorColor:0<a?i:"black"),this.setBounds(-s,-s,t+2*s,t+2*s),zot(d)&&(d=null!=z.tap&&z.tap);var b=this;this.cursor="pointer";var v=new go.Rectangle(t,t,r,null,null,l),w=new go.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",i,a,l);w.x=t/7,w.y=t/7,this.addChild(v,w);var C=t;o&&(o.center(b),o.x=b.getBounds().width,this.label=o,this.setBounds(-s,-s,t+3*s+o.getBounds().width,Math.max(t+2*s,o.getBounds().height)),C=o.x+o.width);var x=new go.Shape({style:!1});g=x.graphics,g.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,C+2*s,this.getBounds().height),this.hitArea=x;var k=new go.Shape({style:!1}),T=k.graphics;"check"==c?T.f(u).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==c||"square"==c?T.f(u).dr(-35,-35,70,70):T.f(u).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");k.setBounds(-47.5,-47.5,95,95);var A=t/161;function P(e){y=!y,b.setChecked(y),b.dispatchEvent("change")}k.scaleX=k.scaleY=A,k.alpha=.9,k.x=t/2,k.y=t/2,y&&this.addChild(k),d?this.tap(P):this.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",P),Object.defineProperty(b,"checked",{get:function(){return y},set:function(e){b.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!y),b.setChecked(e)},Object.defineProperty(b,"toggled",{get:function(){return y},set:function(e){b.setChecked(e)}}),Object.defineProperty(b,"text",{get:function(){if(o)return o.text},set:function(e){o&&(o.text=e,go.OPTIMIZE||!zns&&OPTIMIZE||!b.stage||b.stage.update())}}),Object.defineProperty(k,"indicatorColor",{get:function(){return u},set:function(e){y&&b.removeChild(k),k=new createjs.Shape,T=k.graphics,u=e,T.f(u).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),k.scaleX=k.scaleY=A,k.alpha=.9,k.x=t/2,k.y=t/2,y&&b.addChild(k),go.OPTIMIZE||!zns&&OPTIMIZE||!b.stage||b.stage.update()}}),Object.defineProperty(b,"indicator",{get:function(){return k},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){je(b,e)}}),!(this.setChecked=function(e){return zot(e)&&(e=!0),(y=e)?b.addChild(k):b.removeChild(k),go.OPTIMIZE||!zns&&OPTIMIZE||!b.stage||b.stage.update(),b})!==h&&qe(this,z),this.clone=function(){return b.cloneProps(new go.CheckBox(t,o?o.clone():"",e,n,r,i,a,l,s,c,u,d,h,this.group,f))}},go.extend(go.CheckBox,go.Container,"clone","zimContainer",!1),go.RadioButtons=function(s,a,l,c,u,d,h,g,p,o,f,n,r,e,i){var t;if(t=zob(go.RadioButtons,arguments,"size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, style, group, inherit",this))return t;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=e;var m=!1===r?{}:go.getStyle(this.type,this.group,i);zot(s)&&(s=null!=m.size?m.size:60),s=Math.max(5,s),zot(a)&&(a=null!=m.buttons?m.buttons:["A","B","C"]),zot(l)&&(l=null==m.vertical||m.vertical),zot(c)&&(c=null!=m.color?m.color:"#111"),zot(u)&&(u=null!=m.backgroundColor?m.backgroundColor:"rgba(255,255,255,.8)"),zot(d)&&(d=null!=m.borderColor?m.borderColor:"#111"),zot(h)&&(h=null!=m.borderWidth?m.borderWidth:s/9),d<0||h<0?d=h=null:null!=d&&null==h&&(h=s/10),zot(g)&&(g=l?null!=m.spacing?m.spacing:.2*s:null!=m.spacing?m.spacing:s),zot(p)&&(p=null!=m.margin?m.margin:s/5),zot(f)&&(f=null!=m.indicatorColor?m.indicatorColor:0<h?d:"black");var z,y=this;if(this.cursor="pointer",this.labels=[],this.indicators=[],"string"==typeof a){var b=a;a=[];for(var v=0;v<b.length;v++)a.push({label:b[v]})}var w=new go.Container({style:!1});function C(e){var t=w.getChildIndex(e.target);o&&y.selectedIndex==t||(y.setSelected(t),y.dispatchEvent("change"))}this.addChild(w),function(){for(var e,t,o=!1,n=a.length-1;0<=n;n--)(e=a[n]).selected&&!0===e.selected&&(o?e.selected="false":(o=!0,y.id=e.id));w.removeAllChildren(),y.buttons=[];var r=0;for(n=0;n<a.length;n++){if("string"==typeof(e=a[n])||"number"==typeof e){var i={selected:!1,label:new go.Label({text:e,size:5*s/6,color:null!=m.color?m.color:c,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:y.group})};e=i}(e.label&&"string"==typeof e.label||"number"==typeof e.label)&&(e.label=new go.Label({text:e.label,size:null!=m.size?m.size:5*s/6,color:null!=m.color?m.color:c,valign:"center"})),y.labels.push(e.label),e.index=n,a[n]=e,(t=k(e.selected,e.label)).type="RadioButton",(t.obj=e).selected&&(z=t.obj),w.addChild(t),l?(t.y=r,r+=t.getBounds().height+g):(t.x=r,r+=t.getBounds().width+g)}}();for(var x=0;x<w.numChildren;x++)w.getChildAt(x).on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",C);function k(e,t){var o=new go.Container({style:!1});y.buttons.push(o),o.mouseChildren=!1,o.setBounds(-p,-p,s+2*p,s+2*p);var n=new go.Shape({style:!1}),r=n.graphics;r.f(u).dc(s/2,s/2,s/1.85),r.s(d).ss(h).dc(s/2,s/2,s/2-s/2/5),o.addChild(n);var i=o.check=new go.Circle(s/5.2,f,null,null,null,null,null,null,!1);y.indicators.push(i),i.mouseEnabled=!1,i.alpha=.95,i.regX=i.regY=-s/2;var a=s;t&&(o.addChild(t),t.x=o.getBounds().width,t.y=s/2,o.setBounds(-p,-p,s+2*p+t.getBounds().width,Math.max(s+2*p,t.getBounds().height)),a=t.x+t.width,o.text=t.text),e&&(o.addChild(i),y.label=t,y.label&&(y.text=t.text));var l=new go.Shape({style:!1});return(r=l.graphics).f("rgba(0,0,0,.01)").r(o.getBounds().x,o.getBounds().y,a+2*p,o.getBounds().height),o.hitArea=l,o}this.getBounds()||this.setBounds(0,0,s,s),this.setBounds(-p,-p,this.getBounds().width+2*p,this.getBounds().height),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||w.getChildAt(e)){for(var t,o=0;o<w.numChildren;o++)(t=w.getChildAt(o)).removeChild(t.check);if(0<=e){t=w.getChildAt(e);var n=-2;z&&(n=z.index),z=t.obj}return-1==e||n==z.index?(z=null,y.id=null,y.label=null,y.text=""):(t.addChild(t.check),y.id=z.id,y.label=z.label,y.label&&(y.text=y.label.text)),go.OPTIMIZE||!zns&&OPTIMIZE||!y.stage||y.stage.update(),y}},Object.defineProperty(y,"selected",{get:function(){return z},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(y,"selectedIndex",{get:function(){return z?z.index:-1},set:function(e){o&&y.selectedIndex==e||y.setSelected(e)}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){je(y,e)}}),zot(n)&&(n=null!=m.selectedIndex?m.selectedIndex:0),y.selectedIndex=n,qe(this,m),this.clone=function(){for(var e=go.copy(a),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return y.cloneProps(new go.RadioButtons(s,e,l,c,u,d,h,g,p,o,f,n,r,this.group,i))}},go.extend(go.RadioButtons,go.Container,"clone","zimContainer",!1),go.Toggle=function(o,r,e,t,i,n,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w){var C;if(C=zob(go.Toggle,arguments,"width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",this))return C;z_d("57.5"),this.group=v;var x=!1===b?{}:go.getStyle("Toggle",this.group,w);zot(o)&&(o=null!=x.width?x.width:80),zot(r)&&(r=null!=x.height?x.height:50),this.zimContainer_constructor(o,r,null,null,!1),this.type="Toggle",zot(i)&&(i=null!=x.backgroundColor?x.backgroundColor:"#C60"),zot(n)&&(n=null!=x.margin?x.margin:10),zot(a)&&(a=null!=x.indicatorType?x.indicatorType:"circle"),zot(l)&&(l=null!=x.indicatorColor?x.indicatorColor:"#fff"),zot(c)&&(c=null!=x.toggleBackgroundColor?x.toggleBackgroundColor:"#F93"),zot(u)&&(u=null!=x.color?x.color:"#111"),zot(d)&&(d=null!=x.borderColor?x.borderColor:null),zot(h)&&(h=null!=x.borderWidth?x.borderWidth:null),d<0||h<0?d=h=null:null!=d&&null==h&&(h=1),zot(g)&&(g=null!=x.corner?x.corner:"circle"!=a?0:25),zot(p)&&(p=null!=x.indicatorCorner?x.indicatorCorner:0),zot(f)&&(f=null!=x.shadowColor?x.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=x.shadowBlur?x.shadowBlur:14),zot(t)&&(t=null!=x.startToggled&&x.startToggled),zot(z)&&(z=null!=x.time?x.time:100);var k=this;function T(e){var t=k.indicator.x,o=z;if(!0===e&&(o=0),"rectangle"==a||"square"==a?k.indicator.pos(.2*r,null,k.toggled):k.indicator.pos(.175*r,null,k.toggled),0<z&&k.indicator.animate({props:{x:t},from:!0,time:o}),k.background.color=k.toggled?c:i,k.text=k.toggled?k.label?k.label.text:"on":k.labelLeft?k.labelLeft.text:"off",k.zimAccessibility){var n="Toggle set to "+(k.toggled?k.label?k.label.text+".":"on.":k.labelLeft?k.labelLeft.text+".":"off.");setTimeout(function(){k.zimAccessibility.talk(n)},50)}}k.cursor="pointer","string"!=typeof e&&"number"!=typeof e||(e=this.label=new go.Label({text:e,size:5*r/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof y&&"number"!=typeof y||(y=this.labelLeft=new go.Label({text:y,size:5*r/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new go.Rectangle(o,r,i,d,h,g).addTo(this),this.indicator="rectangle"==a||"square"==a?new go.Rectangle(.65*r,.65*r,l,null,null,p).center(this.background).pos(.2*r,null,t):new go.Circle(.35*r,l).center(this.background).pos(.175*r,null,t),this.toggled=t,k.background.color=k.toggled?c:i,-1!=f&&0<m&&(this.background.shadow=new createjs.Shadow(f,3,3,m)),e&&(this.addChild(e),e.x=o+2+n+h,e.y=r/2,this.label=e,this.setBounds(-n,-n,o+3*n+h+e.getBounds().width,Math.max(r+2*n,e.getBounds().height))),y&&(this.addChild(y),y.x=0,k.background.x+=y.width+3+n+h,k.label.x+=y.width+3+n+h,y.y=r/2,this.labelLeft=y,this.setBounds(-n,-n,k.getBounds().width+y.width+3+n+h,k.getBounds().height)),this.expand(go.mobile()?20:10),this.tap(function(e){if(y){var t=k.localToGlobal(y.width+3+n+h+o/2,0);if(e.stageX/go.scaX<t.x-o/2&&!k.toggled||e.stageX/go.scaX>=t.x+o/2&&k.toggled)return}k.toggled=!k.toggled,T(),k.dispatchEvent("change")},go.mobile()?20:10),new go.Swipe(this,20,200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&k.toggled||-1==e.swipeX&&!k.toggled||(k.toggled=!k.toggled,T(),k.dispatchEvent("change")))}),Object.defineProperty(k,"textLeft",{get:function(){if(y)return y.text},set:function(e){y&&(y.text=e,go.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update())}}),k.toggle=function(e,t){var o=k.toggled;return zot(e)&&(e=!0),k.toggled=e,o!=k.toggled&&T(t),k},k.text=k.toggled?k.label?k.label.text:"on":k.labelLeft?k.labelLeft.text:"off",this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){je(k,e)}}),!1!==b&&qe(this,x),this.clone=function(){return k.cloneProps(new go.Toggle(o,r,e?e.clone():"",t,i,n,a,l,s,c,u,d,h,g,p,f,m,z,y?y.clone():"",b,this.group,w))}},go.extend(go.Toggle,go.Container,"clone","zimContainer",!1),go.Tip=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X){var R;if(R=zob(go.Tip,arguments,"text, align, valign, margin, marginH, marginV, outside, target, size, font, color, rollColor, shadowColor, shadowBlur, textAlign, textValign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, style, group, inherit",this))return R;z_d("57.6"),this.group=Y;var _=!1===D?{}:go.getStyle("Tip",this.group,X);zot(e)&&(e=null!=_.text?_.text:"Here's a tip!"),zot(n)&&(n=null!=_.margin?_.margin:40),zot(r)&&(r=null!=_.marginH?_.marginH:n),zot(i)&&(i=null!=_.marginV?_.marginV:n),zot(t)&&(t=null!=_.align?_.align:"right"),zot(o)&&(o=null!=_.valign?_.valign:"bottom"),zot(a)&&(a=null!=_.outside&&_.outside),zot(C)&&(C=null!=_.backgroundColor?_.backgroundColor:blue),zot(u)&&(u=null!=_.color?_.color:white),zot(T)&&(T=null!=_.corner?_.corner:25),zot(T)&&(T=null!=_.corner?_.corner:25),zot(T)&&(T=null!=_.corner?_.corner:25),zot(B)&&(B=null!=_.paddingHorizontal?_.paddingHorizontal:14+(Array.isArray(T)?T[0]:T)),!zot(h)&&"ignore"!=h||(h=null!=_.shadowColor&&"ignore"!=h?_.shadowColor:"rgba(0,0,0,.3)"),!zot(g)&&"ignore"!=g||(g=null!=_.shadowBlur&&"ignore"!=g?_.shadowBlur:1),this.zimLabel_constructor(e,s,c,u,d,null,null,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,go.copy(_)),this.type="Tip",a&&(r=-r,i=-i);var F=this;F.align=t,F.valign=o,this.background.sha(h,3,5,g),this.show=function(e,o){zot(e)&&(e=null!=_.delay?_.delay:0),zot(o)&&(o=null!=_.time?_.time:2e3);if(zot(l)){if(!zimDefaultFrame)return F;l=zimDefaultFrame.stage}else{if(!l.getBounds)return F;if(zot(l.stage))return zog("zim display - Waiter(): The container must have a stage property"),F}function t(){if(l.boundsToGlobal)var e=l.boundsToGlobal();else e=l.getBounds();var t=new go.Container(e.x,e.y,e.width,e.height);t.zimTemp=!0,t.loc(0,0,l.stage),"center"!=F.align&&"middle"!=F.align&&"center"!=F.valign&&"middle"!=F.valign||F.center(t),F.pos("center"==F.align||"middle"==F.align?null:r,"center"==F.valign||"middle"==F.valign?null:i,"right"==F.align,"bottom"==F.valign,t),a&&("right"==F.align?F.x+=F.width:"left"==F.align&&(F.x-=F.width),"bottom"==F.valign?F.y+=F.height:"top"==F.valign&&(F.y-=F.height)),F.addTo(t.stage),t.zimTemp&&t.removeFrom&&(t.removeFrom(),t=null),t=F.stage,F.timeoutID&&F.timeoutID.clear(),F.timeoutID=go.timeout(o,function(){F.hide(),t.stage.update()}),F.upID&&t.stage.off("stagemouseup",F.upID),F.upID=t.stage.on("stagemouseup",function(){F.hide(),t.stage&&t.stage.update()}),t.stage&&t.stage.update()}return 0<e?F.showID=go.timeout(e,t):t(),F},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&l.stage&&l.stage.off("stagemouseup",this.downID),F},!(this.clear=function(){F.showID&&F.showID.clear(),F.hide()})!==D&&qe(this,_),this.clone=function(){return F.cloneProps(new go.Tip(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,this.group,X))}},go.extend(go.Tip,go.Label,"clone","zimLabel",!1),go.Panel=function(e,t,o,l,s,n,c,u,r,i,a,d,h,g,p,f,m,z,y,b){var v;if(v=zob(go.Panel,arguments,"width, height, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, arrow, align, shadowColor, shadowBlur, draggable, boundary, extraButton, style, group, inherit",this))return v;z_d("57.7"),this.group=y;var w=!1===z?{}:go.getStyle("Panel",this.group,b);zot(e)&&(e=null!=w.width?w.width:250),zot(t)&&(t=null!=w.height?w.height:300),this.zimContainer_constructor(e,t,null,null,!1),this.type="Panel",zot(o)&&(o=null!=w.titleBar?w.titleBar:"PANEL"),zot(l)&&(l=null!=w.titleBarColor?w.titleBarColor:"#fff"),zot(s)&&(s=null!=w.titleBarBackgroundColor?w.titleBarBackgroundColor:"#555"),zot(n)&&(n=null!=w.titleBarHeight?w.titleBarHeight:30),zot(c)&&(c=null!=w.backgroundColor?w.backgroundColor:"#eee"),zot(u)&&(u=null!=w.borderColor?w.borderColor:"#888"),zot(r)&&(r=null!=w.borderWidth?w.borderWidth:null),u<0||r<0?u=r=null:null!=u&&null==r&&(r=1),zot(i)&&(i=null!=w.corner?w.corner:5),zot(d)&&(d=null!=w.align?w.align:"left"),zot(h)&&(h=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(g)&&(g=null!=w.shadowBlur?w.shadowBlur:14),zot(p)&&(p=null!=w.draggable&&w.draggable),zot(f)&&(f=null!=w.boundary?w.boundary:null),zot(a)&&(a=null!=w.arrow?w.arrow:go.vee(o)),Array.isArray(i)||(i=[i,i,i,i]);var C=this;this.background=new go.Rectangle(e,t,c,u,r,i).addTo(this);-1!=h&&0<g&&(this.background.shadow=new createjs.Shadow(h,3,3,g));var x=o,k=go.Pick.choose(x),T=go.Pick.choose(l),A=go.Pick.choose(s);go.Pick.choose(c),go.Pick.choose(u);"string"==typeof k&&(k=new go.Label({text:k,color:T,size:null!=w.size?w.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var P=C.titleBarLabel=k;zot(A)&&(A="rgba(0,0,0,.2)"),C.titleBar=o=new go.Container(e,n,null,null,!1).loc(0,0,C);var B=C.titleBar.backing=new go.Rectangle(e+r,n,A,null,null,[.95*i[0],.95*i[1],0,0],!0,null,!1).center(o);function I(){"right"==d?P.center(o).pos(Math.max(i[0]/2,10),null,!0):"center"==d||"middle"==d?P.center(o):P.center(o).loc(Math.max(i[0]/2,10)),P.mov(0,2)}if(I(),C.label=k,C.text=k.text,this.nextPanel=function(e,t){var o=zot(e)||zot(x.array)?go.Pick.choose(x):x.array[e],n=zot(e)||zot(l.array)?go.Pick.choose(l):l.array[e],r=zot(e)||zot(s.array)?go.Pick.choose(s):s.array[e],i=zot(e)||zot(c.array)?go.Pick.choose(c):c.array[e],a=zot(e)||zot(u.array)?go.Pick.choose(u):u.array[e];"string"==typeof o&&(o=new go.Label({text:o,color:n,size:null!=w.size?w.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),C.label=o,C.text=o.text,P.removeFrom(),P=C.titleBarLabel=o,I(),B.color=r,C.background.color=i,C.background.borderColor=a,t&&C.dispatchEvent("change"),!OPTIMIZE&&C.stage&&C.stage.update()},p&&(o.cursor="pointer",o.on("mousedown",function(){C.drag({rect:f,currentTarget:!0})}),o.on("pressup",function(){C.noDrag()})),0<a){var S=C.arrow=new go.Shape(-20,-20,40,40,null,!1);S.graphics.f(l).p("AiJieIETCeIkTCfg"),S.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),"right"==d?S.pos(Math.max(i[1]/2,10)):S.pos(Math.max(i[1]/2,10),null,!0),S.cursor="pointer",S.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){C.nextPanel(),C.dispatchEvent("change")})}if(!zot(m)){m=C.extraButton=new go.Button({label:"R",width:50,height:50,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand();"left"==d?m.pos(0<a?S.x-S.width-15:Math.max(i[1]/2,10)):m.pos(0<a&&"center"!=d?S.x+S.width:Math.max(i[1]/2,10))}C.overlay=new go.Rectangle(e,t).alp(.7);this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function(e){je(C,e),e?C.overlay.removeFrom():C.overlay.addTo(C),!OPTIMIZE&&C.stage&&C.stage.update()}}),!1!==z&&qe(this,w),this.clone=function(){return C.cloneProps(new go.Toggle(e,t,o?o.clone():"",l,s,n,c,u,r,i,a,d,h,g,p,f,m,z,this.group,b))}},go.extend(go.Panel,go.Container,"clone","zimContainer",!1),go.Pane=function(a,l,n,r,i,s,c,u,d,h,g,p,f,m,z,y,b,e,v,w,C,x,k,T,A,t,P){var o;if(o=zob(go.Pane,arguments,"width, height, label, backgroundColor, color, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, style, group, inherit",this))return o;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var B="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(e)){if(!zimDefaultFrame)return void zog(B);e=zimDefaultFrame.stage}else{if(!e.getBounds)return void zog(B);if(zot(e.getStage))return void zog("zim display - Pane(): The container must have a stage property")}this.group=t;var I=!1===A?{}:go.getStyle(this.type,this.group,P);zot(a)&&(a=null!=I.width?I.width:200),zot(l)&&(l=null!=I.height?I.height:200),zot(n)&&(n=null!=I.label?I.label:null),"string"!=typeof n&&"number"!=typeof n||(n=new go.Label({text:n,size:null!=I.size?I.size:40,align:null!=I.align?I.align:"center",valign:null!=I.valign?I.valign:"center",color:null!=I.color?I.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(r)&&(r=null!=I.backgroundColor?I.backgroundColor:"white"),zot(s)&&(s=null!=I.draggable&&I.draggable),zot(c)&&(c=null==I.resets||I.resets),zot(u)&&(u=null==I.modal||I.modal),zot(d)&&(d=null!=I.corner?I.corner:20),zot(v)&&(v=null!=I.titleBar?I.titleBar:null),zot(w)&&(w=null!=I.titleBarColor?I.titleBarColor:null),zot(C)&&(C=null!=I.titleBarBackgroundColor?I.titleBarBackgroundColor:null),zot(x)&&(x=null!=I.titleBarHeight?I.titleBarHeight:null),zot(h)&&(h=null!=I.backdropColor?I.backdropColor:"rgba(0,0,0,.2)"),zot(g)&&(g=null!=I.shadowColor?I.shadowColor:"rgba(0,0,0,.3)"),zot(p)&&(p=null!=I.shadowBlur?I.shadowBlur:20),zot(f)&&(f=null==I.center||I.center),zot(m)&&(m=null==I.displayClose||I.displayClose),s&&(m=!1),zot(z)&&(z=null==I.backdropClose||I.backdropClose),zot(b)&&(b=null!=I.fadeTime?I.fadeTime:0),zot(k)&&(k=null!=I.close&&I.close),zot(T)&&(T=null!=I.closeColor?I.closeColor:"#555");var S=this.backdrop=new go.Shape({style:!1});S.type="CreateJS_Shape";var O=S.graphics;O.f(h),O.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-a/2,-l/2,a,l);var E=this;E.container=e,S.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z?R:function(e){e.stopImmediatePropagation()});var M,j,L,D,Y,X=new go.Dictionary(!0);function R(e){F(),E.container.stage.update(),E.dispatchEvent("close"),e.stopImmediatePropagation()}if(S.on("mousedown",function(e){e.stopImmediatePropagation()}),u&&this.addChild(S),zot(y))M=this.backing=this.display=new go.Rectangle({width:a,height:l,color:r,corner:d,style:!1});else{if("Pattern"==y.type){var _=y;M=new go.Rectangle(a,l,r,null,null,d,null,null,!1),_.centerReg(M),_.setMask(M.shape)}else M=y;E.display=E.backing=M}m&&(M.cursor="pointer",M.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",R)),-1!=g&&0<p&&(M.shadow=new createjs.Shadow(g,8,8,p)),M.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,s&&(M.cursor="pointer",M.on("mousedown",function(e){D=e.target.stage,isNaN(E.resetX)&&(E.resetX=E.x),isNaN(E.resetY)&&(E.resetY=E.y),j=e.stageX/go.scaX-E.x,L=e.stageY/go.scaY-E.y,M.cursor="pointer"}),M.on("pressmove",function(e){var t,o,n,r=(t=e.stageX/go.scaX-j,o=e.stageY/go.scaY-L,t=Math.max(a/2,Math.min(E.container.getBounds().width-a/2,t)),o=Math.max(l/2,Math.min(E.container.getBounds().height-l/2,o)),{x:t,y:o});E.x=r.x,E.y=r.y;for(var i=0;i<E.numChildren;i++)"TextArea"!=(n=E.getChildAt(i)).type&&"Loader"!=n.type&&"Tag"!=n.type||n.resize();D.update()}),this.on("pressup",function(e){M.cursor="pointer",E.stage&&E.stage.update()}));if(M.centerReg(this),n&&(this.addChild(n),go.center(n,this),this.label=n,this.text=n.text,n.mouseEnabled=!1),!zot(v)){"string"==typeof v&&(v=new go.Label(v,null,null,w)),titleBarLabel=E.titleBarLabel=v,zot(x)&&(x=1.5*titleBarLabel.height),zot(w)&&(w="black"),zot(C)&&(C="rgba(0,0,0,.2)"),E.titleBar=v=new go.Container(a,x,null,null,!1).centerReg(E).mov(0,-l/2+x/2),v.mouseEnabled=!1,v.mouseChildren=!1;E.titleBar.backing=new go.Rectangle(a,x,C,null,null,[.95*d,.95*d,0,0],null,null,!1).addTo(v);titleBarLabel.center(v).pos({x:Math.max(d/2,10),reg:!0})}k&&((k=E.close=new go.Shape(-40,-40,80,80,null,!1)).graphics.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),v?k.addTo(E).scaleTo(v,null,50).mov(a/2-Math.max(d/2,10)-k.width/2,-l/2+x/2).expand(40):k.addTo(E).sca(.3).mov(a/2-k.width-3,-l/2+k.height).expand(40),k.cursor="pointer",k.expand(),k.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",R));function F(){function e(){var e;E.container.removeChild(E);for(var t=0;t<E.numChildren;t++)if("TextArea"==(e=E.getChildAt(t)).type||"Loader"==e.type||"Tag"==e.type){var o={obj:e,depth:E.getChildIndex(e)};X.add(e,o)}for(t=E.numChildren-1;0<=t;t--)"TextArea"!=(e=E.getChildAt(t)).type&&"Loader"!=e.type&&"Tag"!=e.type||E.removeChild(e);if(go.OPTIMIZE||!zns&&OPTIMIZE||E.container.stage.update(),c&&(isNaN(E.resetX)||(E.x=E.resetX),isNaN(E.resetY)||(E.y=E.resetY)),E.zimAccessibility){var n=E.zimAccessibility;n.resize(E),Y?Y.focus():E.zimTabTag.nextSibling.focus(),setTimeout(function(){n.talk("Pane has been closed.")},50)}}0<b?E.animate({obj:{alpha:0},time:b,call:function(){e(),E.dispatchEvent("fadedout")}}):e()}Object.defineProperty(E,"text",{get:function(){return" "==n.text?"":n.text},set:function(e){n.text=e}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){je(E,e)}}),this.hide=function(e){return F(),E.toggled=!1,e&&E.dispatchEvent("close"),E},this.show=function(){f&&isNaN(E.resetX)&&(E.x=E.container.getBounds().width/2,E.y=E.container.getBounds().height/2),E.container.addChild(E);for(var e=0;e<X.length;e++)E.addChildAt(X.values[e].obj,X.values[e].depth);if(0<b?(E.alpha=0,E.animate({props:{alpha:1},time:b,call:function(){E.dispatchEvent("fadedin")}})):E.container.stage&&E.container.stage.update(),E.zimAccessibility){var t=E.zimAccessibility;setTimeout(function(){t.activatedObject&&(Y=t.activatedObject.zimTabTag)},50),t.resize(E),t.tabIndex=E.zimTabIndex}return E.toggled=!0,E},!(this.toggle=function(e){return!0===e?E.show():!1===e||E.container.contains(E)?E.hide():E.show(),E})!==A&&qe(this,I),this.clone=function(){var e=n.x,t=n.y,o=E.cloneProps(new go.Pane(a,l,n.clone(),r,i,s,c,u,d,h,g,p,f,m,z,zot(y)?y.clone():null,b,E.container,v,w,C,x,k,T,A,this.group,P));return o.label.x=e,o.label.y=t,o}},go.extend(go.Pane,go.Container,"clone","zimContainer",!1),go.Window=function(u,d,o,e,h,n,g,p,f,m,t,r,i,z,y,a,l,s,b,c,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_){var F;if(F=zob(go.Window,arguments,"width, height, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, style, group, inherit",this))return F;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=R;var W=!1===X?{}:go.getStyle(this.type,this.group,_);zot(u)&&(u=null!=W.width?W.width:300),zot(d)&&(d=null!=W.height?W.height:200),zot(o)&&(o=null!=W.backgroundColor?W.backgroundColor:"#333");var H=e,G=h;zot(e)&&(e=null!=W.borderColor?W.borderColor:"#999"),zot(h)&&(h=null!=W.borderWidth?W.borderWidth:1),zot(n)&&(n=null!=W.padding?W.padding:0),zot(g)&&(g=null!=W.corner?W.corner:0),zot(p)&&(p=null==W.swipe||W.swipe),zot(f)&&(f=null==W.scrollBarActive||W.scrollBarActive),zot(m)&&(m=null!=W.scrollBarDrag&&W.scrollBarDrag),zot(t)&&(t=null!=W.scrollBarColor?W.scrollBarColor:e),zot(r)&&(r=null!=W.scrollBarAlpha?W.scrollBarAlpha:.3),zot(i)&&(i=null==W.scrollBarFade||W.scrollBarFade),zot(z)&&(z=null==W.scrollBarH||W.scrollBarH),zot(y)&&(y=null==W.scrollBarV||W.scrollBarV),m&&(i=null!=W.scrollBarFade&&W.scrollBarFade),zot(a)&&(a=null==W.slide||W.slide),zot(l)&&(l=null!=W.slideDamp?W.slideDamp:.6),zot(s)&&(s=null!=W.slideSnap?W.slideSnap:"vertical"),zot(b)&&(b=null==W.interactive||W.interactive),zot(c)&&(c=null!=W.shadowColor?W.shadowColor:"rgba(0,0,0,.3)"),zot(v)&&(v=null!=W.shadowBlur?W.shadowBlur:20),zot(C)&&(C=null!=W.paddingVertical?W.paddingVertical:n),zot(w)&&(w=null!=W.paddingHorizontal?W.paddingHorizontal:n),zot(x)&&(x=null==W.scrollWheel||W.scrollWheel),zot(T)&&(T=null!=W.titleBar?W.titleBar:null),zot(A)&&(A=null!=W.titleBarColor?W.titleBarColor:null),zot(P)&&(P=null!=W.titleBarBackgroundColor?W.titleBarBackgroundColor:null),zot(B)&&(B=null!=W.titleBarHeight?W.titleBarHeight:null),zot(I)&&(I=null!=W.draggable?W.draggable:null),zot(S)&&(S=null!=W.boundary?W.boundary:null),zot(O)&&(O=null!=W.onTop?W.onTop:null),zot(E)&&(E=null!=W.close?W.close:null),zot(M)&&(M=null!=W.closeColor?W.closeColor:null),zot(j)&&(j=null!=W.cancelCurrentDrag&&W.cancelCurrentDrag),zot(L)&&(L=null!=W.fullSize?W.fullSize:null),zot(D)&&(D=null!=W.fullSizeColor?W.fullSizeColor:null),zot(Y)&&(Y=null!=W.resizeHandle?W.resizeHandle:null),!1===T&&(T=null),zot(T)||(zot(B)&&(B=30),d-=B);var N=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var V=this.backing=new go.Shape({style:!1});this.addChild(V);var q=new createjs.Shape;q.type="WindowBacking";var U=q.graphics;this.addChild(q);var K=this.content=new go.Container({style:!1});if(this.addChild(K),K.mask=q,!b)var Z=new createjs.Shape;if(0<h){var Q=new createjs.Shape;this.addChild(Q)}var J=T?0:g;function $(){N.setBounds(0,0,u,d),V.graphics.c().f(o).rc(0,0,u,d,J,J,g,g),-1!=c&&0<v&&(V.shadow=new createjs.Shadow(c,4,4,v)),0<h&&(g?Q.graphics.c().s(e).ss(h,"square","miter").rc(0,0,u,d,J,J,g,g):Q.graphics.c().s(e).ss(h,"square","miter").dr(0,0,u,d)),zot(pe)||(pe=T.backing.widthOnly=N.width,N.setBounds(0,-B,N.width,d+B)),N.close&&(T?E.pos({x:u-Math.max(g/2,10)-E.width/2,y:B/2,reg:!0}):E.pos(Math.max(g/2,10)/2,E.height/2,!0,!1,N)),N.fullSize&&(L.pos({x:u-Math.max(g/2,10)-L.width/2,y:B/2,reg:!0}),N.close&&L.mov(-E.width-10))}$();var ee,te,oe,ne,re,ie,ae,le,se,ce=this.scrollBar={};if(ce.color=t,ce.size=6,ce.minSize=2*ce.size,ce.spacing=3.5+h/2,ce.margin=0,ce.corner=ce.size/2,ce.showTime=500,ce.fadeTime=3e3,f){var ue=ce.horizontal=new go.Shape({style:!1}),de=ue.graphics;ue.alpha=r,this.addChild(ue),m&&ue.drag({localBounds:!0});var he=ce.vertical=new go.Shape({style:!1}),ge=he.graphics;he.alpha=r,this.addChild(he),m&&he.drag({localBounds:!0})}if(this.update=function(){f&&(de.clear(),ge.clear()),re=f?ce.size+2*ce.spacing:0,ie=K.getBounds()?K.getBounds().width:0,ae=K.getBounds()?K.getBounds().height:0,oe=z&&u-w<ie&&(f||!0===p||"auto"==p||"horizontal"==p),ne=y&&d-C<ae&&(f||!0===p||"auto"==p||"vertical"==p),N.scrollXMax=ie+2*w-u+(ne?re+ce.margin:0),N.scrollYMax=ae+2*C-d+(oe?re+ce.margin:0),U.clear();var e=h/2,t=h/2,o=u-(ne&&f?ce.size+2*ce.spacing:0)-(ne?0:h),n=d-(oe&&f?ce.size+2*ce.spacing:0)-(oe?0:h);U.f("rgba(0,0,0,0)").rc(e,t,o,n,J,J,ne&&f?0:g,oe&&f?0:g),q.setBounds(N.getBounds().x,N.getBounds().y,N.getBounds().width,N.getBounds().height),go.expand(q,0),b||(Z.graphics.c().f("red").dr(e,t,o,n),K.hitArea=Z);var r=Math.max(g,Math.min(ce.corner,ce.spacing)),i=r+h/2,a=r+(ne?re:0)+h/2,l=r+h/2,s=r+(oe?re:0)+h/2;if(oe&&f&&(scrollBarLength=Math.max(ce.minSize,(u-i-a)*(u-i-a)/(ie+w+ce.margin)),de.f(ce.color).rr(0,0,scrollBarLength,ce.size,ce.corner),ue.x=i,ue.y=d-ce.size-ce.spacing,ee=new go.Proportion(-N.scrollXMax,0,i,u-scrollBarLength-a,-1),m)){ue.setBounds(0,0,scrollBarLength,ce.size);var c=new createjs.Rectangle(i,ue.y,u-scrollBarLength-i-a,0);ue.dragBoundary(c),ue.proportion=new go.Proportion(c.x,c.x+c.width,0,-N.scrollXMax),ue.off("pressmove",le),le=ue.on("pressmove",function(){N.dispatchEvent("scrolling"),Z&&(Z.x=-K.x,Z.y=-K.y),K.x=ue.proportion.convert(ue.x)})}if(ne&&f&&(scrollBarLength=Math.max(ce.minSize,(d-l-s)*(d-l-s)/(ae+C+ce.margin)),ge.f(ce.color).rr(0,0,ce.size,scrollBarLength,ce.corner),he.x=u-ce.size-ce.spacing,he.y=l,te=new go.Proportion(-N.scrollYMax,0,l,d-scrollBarLength-s,-1),m)){he.setBounds(0,0,ce.size,scrollBarLength);c=new createjs.Rectangle(he.x,l,0,d-scrollBarLength-l-s);he.dragBoundary(c),he.proportion=new go.Proportion(c.y,c.y+c.height,0,-N.scrollYMax),he.off("pressmove",se),se=he.on("pressmove",function(){N.dispatchEvent("scrolling"),Z&&(Z.x=-K.x,Z.y=-K.y),We=K.y=he.proportion.convert(he.y)})}Ie(),clearTimeout(N.d2Timeout),N.d2Timeout=setTimeout(function(){ue&&ue.proportion&&(K.x=ue.proportion.convert(ue.x)),he&&he.proportion&&(K.y=he.proportion.convert(he.y))},50),clearTimeout(N.dTimeout),N.dTimeout=setTimeout(function(){xe()},300)},this.resize=function(e,t){zot(e)&&(e=u),zot(t)&&(t=d);var o=20;T&&(o=titleBarLabel.x+titleBarLabel.width+10),e<o&&(e=o),t<20&&(t=20),u=e,d=t,$();for(var n=0;n<K.numChildren;n++){var r=K.getChildAt(n);"Wrapper"==r.type&&Ce(r)}return N.update(),We=K.y,k&&Ge.immediate(We),N},!zot(T)){zot(I)&&(I=!0),"string"==typeof T&&(T=new go.Label({text:T,color:A,size:null!=W.size?W.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),titleBarLabel=N.titleBarLabel=T,zot(P)&&(P="rgba(0,0,0,.2)"),N.titleBar=T=new go.Container(u,B,null,null,!1).centerReg(N).mov(0,-d/2-B/2);var pe=N.titleBar.backing=new go.Rectangle(u+h,B,P,null,null,[.95*g,.95*g,0,0],!0,null,!1).center(T);titleBarLabel.center(T).pos({x:Math.max(g/2,Math.max(10,n)),reg:!0}),N.regX=0,N.regY=-B,N.setBounds(0,-B,u,d+B),I?(T.cursor="pointer",T.on("mousedown",function(){N.drag({rect:S,currentTarget:!0,onTop:O})}),T.on("pressup",function(){N.noDrag()})):T.on("mousedown",function(){})}E&&(zot(M)&&(M="#555"),(E=N.close=new go.Shape(-40,-40,80,80,null,!1)).graphics.f(M).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),T?E.centerReg(N).scaleTo(T,null,50).pos({x:u-Math.max(g/2,10)-E.width/2,y:B/2,reg:!0}).expand(40):E.sca(.3).pos(Math.max(g/2,10)/2,E.height/2,!0,!1,N).expand(40),E.cursor="pointer",E.expand(),E.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){N.removeFrom(),N.dispatchEvent("close")}));if(!zot(T)&&L){zot(D)&&(D="#555");L=N.fullSize=new go.Rectangle(80,80,faint,D,16);var fe=(new go.Shape).s(D).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(N.fullSize).mov(40,40).alp(0);L.centerReg(N).scaleTo(T,null,42).pos({x:u-Math.max(g/2,10)-L.width/2,y:B/2,reg:!0}).expand(40),N.close&&L.mov(-E.width-10),L.cursor="pointer",L.expand(),N.fullCheck=!1;var me=u,ze=d,ye=N.x,be=N.y;L.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){N.fullCheck?(N.resize(me,ze-T.height),N.x=ye,N.y=be,N.fullCheck=!1,fe.alpha=0,N.fullSize.getChildAt(0).alpha=1):(me=N.width,ze=N.height,ye=N.x,be=N.y,N.resize(N.parent.width,N.parent.height),N.x=0,N.y=0,N.fullCheck=!0,fe.alpha=1,N.fullSize.getChildAt(0).alpha=.01)})}if(Y){var ve=N.resizeHandle=new go.Rectangle(25,25,grey,white).alp(.01).centerReg().rot(45).hov(.5).loc(0,0,N).mov(N.width,N.height-(N.titleBar?N.titleBar.height:0)).drag();function we(){ve.loc(0,0,N).top().alp(.01).mov(N.width,N.height-(N.titleBar?N.titleBar.height:0))}ve.on("pressmove",function(){N.resize(ve.x,ve.y)}),ve.on("pressup",we),N.titleBar&&N.titleBar.on("pressup",we)}function Ce(e){"right"==e.align?(e.x=w,e.resize(N.width-(ne?ce.size+2*ce.spacing:w)-2*w)):("center"==e.align||e.align,e.resize(N.width-(ne?ce.size+2*ce.spacing:0)-2*w)),e.alpha=e.wrapperLastAlpha}function xe(){go.dragBoundary(K,new createjs.Rectangle(0,0,oe?-N.scrollXMax:0,ne?-N.scrollYMax:0))}this.add=function(e,t){if(Ve(e),e.getBounds())return t&&N.removeAll(),K.addChild(e),"Wrapper"==e.type&&(he.alpha=0,z=!1,e.wrapperLastAlpha=e.alpha,e.alpha=0,this.added(function(){Ce(e),N.resize(),ue.alpha=1,he.alpha=1})),0==e.x&&(e.x=w),0==e.y&&(e.y=C),N.update(),N;zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){return K.removeChild(e),N.update(),N};var ke,Te,Ae,Pe=!(this.removeAll=function(){return K.removeAllChildren(),N.update(),N});function Be(){We=K.y,k&&Ge.immediate(We),f&&Ie()}function Ie(){N.dispatchEvent("scrolling"),Z&&(Z.x=-K.x,Z.y=-K.y),oe&&f&&(ue.x=ee.convert(K.x)),ne&&f&&(he.y=te.convert(K.y))}function Se(e){go.Ticker.remove(Be),Pe=!1,oe&&i&&f&&go.animate(ue,{alpha:0},ce.fadeTime),ne&&i&&f&&go.animate(he,{alpha:0},ce.fadeTime)}if(p&&K.on("mousedown",function(){Pe||go.Ticker.add(Be,K.stage),Pe=!0,oe&&f&&i&&go.animate(ue,{alpha:r},ce.showTime),ne&&f&&i&&go.animate(he,{alpha:r},ce.showTime)}),this.on("added",function(){if(Ve(N),!p)return;go.drag({obj:K,currentTarget:!0,localBounds:!0,slide:a,slideDamp:l,slideSnap:!((!z||!0!==p&&"auto"!=p&&"horizontal"!=p)&&(!y||!0!==p&&"auto"!=p&&"vertical"!=p))&&s}),K.getBounds()&&0<K.getBounds().width&&setTimeout(function(){xe()},300)},null,!0),this.cancelCurrentDrag=function(){N.content.noDrag(),go.drag({obj:K,currentTarget:!0,localBounds:!0,slide:a,slideDamp:l,slideSnap:!((!z||!0!==p&&"auto"!=p&&"horizontal"!=p)&&(!y||!0!==p&&"auto"!=p&&"vertical"!=p))&&s}),K.getBounds()&&0<K.getBounds().width&&setTimeout(function(){xe()},300)},this.added(function(e){e.on("stagemousemove",function(e){N.windowMouseX=e.stageX/go.scaX,N.windowMouseY=e.stageY/go.scaY})}),a?K.on("slidestop",Se):K.on("mousedown",function(){K.stage.on("stagemouseup",Se,null,!0)}),j&&(N.blurEvent=document.window.addEventListener("blur",function(){N.cancelCurrentDrag(),Se()})),b){var Oe,Ee,Me;K.on("mousedown",function(e){e.target.stage,Oe=e.stageX/go.scaX,Ee=Date.now()}),K.on("click",function(e){Date.now()-Ee<600&&Math.abs(e.stageX/go.scaX-Oe)<5&&(N.contentMouse=K.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY),N.dispatchEvent("select"))}),K.on("mouseover",function(){Me=Date.now(),go.Ticker.add(Fe,K.stage)}),K.on("mouseout",function(){_e||(N.dispatchEvent("hoverout"),_e=!0);go.Ticker.remove(Fe)});var je=0,Le=0,De=0,Ye=0,Xe=300,Re=2,_e=!1;function Fe(){if(!K.stage)return _e||(N.dispatchEvent("hoverout"),_e=!0),void go.Ticker.remove(Fe);Math.abs(je-N.windowMouseX)>Re||Math.abs(Le-N.windowMouseY)>Re?(_e||(N.dispatchEvent("hoverout"),_e=!0),Me=Date.now(),je=N.windowMouseX,Le=N.windowMouseY):Date.now()-Me>Xe&&((Math.abs(De-N.windowMouseX)>Re||Math.abs(Ye-N.windowMouseY)>Re)&&(N.contentMouse=K.globalToLocal(N.windowMouseX,N.windowMouseY),N.dispatchEvent("hoverover"),De=N.windowMouseX,Ye=N.windowMouseY,_e=!1),Me=Date.now())}}var We=N.scrollY;if(x){function He(e){if(ne&&N.stage&&N.hitTestPoint(N.windowMouseX,N.windowMouseY)&&N.contains(N.stage.getObjectUnderPoint(N.windowMouseX*go.scaX,N.windowMouseY*go.scaY))){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;zot(t)&&(t=-19*e.deltaY),We+=t,We=Math.max(-N.scrollYMax,Math.min(0,We)),k||(N.scrollY=We,K.stage.update())}}ke=window.addEventListener("mousewheel",He),Te=window.addEventListener("wheel",He),Ae=window.addEventListener("DOMMouseScroll",He)}var Ge,Ne=!1;function Ve(e){k&&!Ne&&e.stage&&(Ne=!0,Ge=new go.Damp(N.scrollY,k),go.Ticker.add(function(){Pe||zot(We)||(N.scrollY=Ge.convert(We))},e.stage))}Object.defineProperty(N,"scrollX",{get:function(){return K.x},set:function(e){K.x=e,K.zimDragImmediate&&K.zimDragImmediate(K.x,K.y),Ie()}}),Object.defineProperty(N,"scrollY",{get:function(){return K.y},set:function(e){K.y=e,K.zimDragImmediate&&K.zimDragImmediate(K.x,K.y),Ie()}}),!1!==X&&qe(this,W),this.clone=function(e){zot(e)&&(e=!0);var t=N.cloneProps(new go.Window(u,d,o,H,G,n,g,p,f,m,ce.color,r,i,z,y,a,l,s,b,c,v,w,C,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_));return e&&(N.content.cloneChildren(t.content),t.update()),t},this.dispose=function(e,t,o){return x&&(window.removeEventListener("mousewheel",ke),window.removeEventListener("wheel",Te),window.removeEventListener("DOMMouseScroll",Ae)),N.resizeHandle&&N.resizeHandle.removeAllEventListeners(),N.blurEvent&&document.window.removeEventListener("blur",N.blurEvent),zot(Fe)||go.Ticker.remove(Fe),zot(Be)||go.Ticker.remove(Be),o||this.zimContainer_dispose(!0),!0}},go.extend(go.Window,go.Container,["clone","dispose"],"zimContainer",!1),go.Layer=function(e,t,o,s,c,u,n,r,d,h,i,a,g,l,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){var I;if(I=zob(go.Layer,arguments,"width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, style, group, inherit",this))return I;z_d("58.5"),this.group=P;var S=!1===A?{}:go.getStyle("Layer",this.group,B);zot(e)&&(e=null!=S.width?S.width:500),zot(t)&&(t=null!=S.height?S.height:500),this.zimContainer_constructor(0,0,e,t,!1),this.type="Layer";var O=this;O.distX=40,O.distY=0,zot(o)&&(o=null!=S.titleBar?S.titleBar:"LAYER");var E=o,M=o,j=!0;zot(c)&&(c=null!=S.backgroundColor?S.backgroundColor:"#eee"),zot(u)&&(u=null!=S.rollBackgroundColor?S.rollBackgroundColor:"#fff"),zot(n)&&(n=null!=S.selectedBackgroundColor?S.selectedBackgroundColor:"#666"),zot(d)&&(d=null!=S.color?S.color:"#666"),zot(h)&&(h=null!=S.rollColor?S.rollColor:"#666"),zot(i)&&(i=null!=S.selectedColor?S.selectedColor:"#ddd"),zot(g)&&(g=null!=S.borderWidth?S.borderWidth:1),zot(l)&&(l=null!=S.borderColor?S.borderColor:c),(l<0||g<0)&&(l=g=null),zot(p)&&(p=null==S.dashed||S.dashed),zot(f)&&(f=null!=S.titleBar?S.titleBar:null),zot(m)&&(m=null!=S.titleBarWidth?S.titleBarWidth:100);var L=m;if(zot(z)&&(z=null!=S.titleBarHeight?S.titleBarHeight:40),zot(y)&&(y=null!=S.titleBarX?S.titleBarX:null),zot(b)&&(b=null!=S.titleBarY?S.titleBarY:null),zot(v)&&(v=null==S.titleBarDraggable||S.titleBarDraggable),zot(w)&&(w=null==S.close||S.close),zot(C)&&(C=null!=S.closeColor?S.closeColor:n),zot(x)&&(x=null!=S.closeBackgroundColor?S.closeBackgroundColor:n),zot(k)&&(k=null!=S.closeIndicatorColor?S.closeIndicatorColor:i),zot(T)&&(T=null==S.anchor||S.anchor),v||(T=!1),O.anchor=T,w&&(m+=30),f=go.merge({borderColor:n},f,{events:!0,visible:!1,ghostColor:l,ghostWidth:g,ghostDashed:p,ghostHidden:!0}),zot(s)&&(s=null!=S.titleBarContainer?S.titleBarContainer:null),zot(s)){if(!zimDefaultFrame)return void zog("zim Layer(): Please pass in a reference to a container with bounds set.");s=zimDefaultFrame.stage}var D;O.active=!1,O.turnOff=function(e,t){O.active=!1,w&&(O.checkBox.visible=!1),O.transformControls.remove(),O.mouseChildren=!0,O.button.backgroundColor=c,O.button.rollBackgroundColor=u,O.button.color=d,O.button.rollColor=d,O.transformControls.allowToggleOff(),O.resizeChildren&&O.resizeChildren()},O.turnOn=function(){O.active=!0,w&&(O.checkBox.visible=!0,O.checkBox.checked=!0),O.button.backgroundColor=n,O.button.rollBackgroundColor=n,O.button.color=i,O.button.rollColor=i,O.mouseChildren=!1,O.transformControls.add(),O.transformControls.allowToggleOn()},O.titleBarPos=function(e,t){if(O.titleBar)return O.titleBar.pos?(O.titleBar.pos(e,t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),D.update()):(O.distX=e,O.distY=t),j=!1,O};var Y=O.visible;O.visible=!1,this.added(function(l){O.transform(f),0<=g&&O.transformControls.hideGhost(),go.timeout(50,function(){O.visible=Y,0<=g&&go.timeout(100,function(){O.transformControls.showGhost(),D.update()}),D=l;var r=O.titleBar=new go.Container(m,z).reg(0,z).loc(O,null,s).mov(O.distX,O.distY);function t(e){if(j&&v){var t=s.localToLocal(r.x-O.distX,r.y-O.distY,O.parent),o=O.localToLocal(O.regX,O.regY,O.parent),n=O.localToLocal(0,0,O.parent);O.x=t.x+(o.x-n.x),O.y=t.y+(o.y-n.y),O.transformControls.resize(e),i(O)}}function i(e){e.loop(function(e){"Layer"==e.type&&(O.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),i(e))})}function o(){return 0==r.x||(r.y==r.height||(r.x==s.width-r.width||r.y==s.height))}if(v&&r.drag({all:!0,boundary:new go.Boundary(0,z,s.width-m,s.height-z),localBounds:!0}),40==O.distX&&0==O.distY||r.pos(O.distX,O.distY),w&&(O.checkBox=new go.CheckBox({borderColor:C,backgroundColor:x,indicatorColor:k,size:20,startChecked:!0}).center(r).pos(0,null,!0).change(function(){O.turnOff(!0,!0)}),O.checkBox.visible=!1),r.mouseChildren=!0,(r.layer=O).resetTitleBar=function(){O.distX=40,O.distY=0,j=!0,O.move(!0),D.update()},"string"!=typeof M&&"number"!=typeof M||(M=new go.Label({text:M,color:d,rollColor:h,size:null!=S.size?S.size:18,group:this.group})),O.label=M,O.label.center(r),O.button=new go.Button({shadowBlur:-1,width:L,height:z-1,label:O.label,color:d,rollColor:h,backgroundColor:c,rollBackgroundColor:u,corner:null!=S.corner?S.corner:0,inherit:go.copy(S)}).addTo(r),O.button.on("mousedown",function(){s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff(!0,!0)}),O.active||O.turnOn(),r.top()}),O.button.on("pressmove",function(){t()}),O.button.on("pressup",function(){t(!0);var e=O.localToLocal(0,0,s);if(O.distX=r.x-e.x,O.distY=r.y-e.y,r.top(),!o()&&v){e=O.localToGlobal(0,0);O.button.hitTestPoint(e.x,e.y)&&O.resetTitleBar()}}),O.button.on("dblclick",function(){v&&O.resetTitleBar()}),O.turnOff(),O.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(v&&O.move(),i(O))}),O.move=function(e){!e&&!j&&O.anchor&&o()||(r.loc(O.localToLocal(0,0,s)).mov(O.distX,O.distY),r.x<0&&(j=!1,r.x=0),r.y<r.height&&(j=!1,r.y=r.height),r.x>s.width-r.width&&(j=!1,r.x=s.width-r.width),r.y>s.height&&(j=!1,r.y=s.height),O.anchor||(j=!0))},O.on("transformhide",function(){O.turnOff(!0,!0),s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),O.resizeChildren=function(e){O.transformControls.resize(e),O.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type?e.resizeChildren():e.transformControls.resize())})},O.resize=function(e){return O.move(),O.resizeChildren(e),O},O.toggled=!1,O.toggle=function(e){return zot(e)?O.toggled=!O.toggled:O.toggled=e,O.toggled?(s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),O.turnOn()):(r.top(),O.turnOff(),s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})),O.stage&&O.stage.update(),O},Object.defineProperty(O,"titleBarDraggable",{get:function(){return v},set:function(e){(v=e)?r.drag({all:!0,boundary:go.Boundary(0,40,s.width-m,s.height-z),localBounds:!0}):r.noDrag()}}),D.on("stagemouseup",function(){O.transformControls.visible&&r.top()}),!zot(y)||!zot(b)){j=!1;var e=zot(y)?r.x:y,n=zot(b)?r.y-z:b;O.titleBarStartX=y,O.titleBarStartY=b,O.titleBarPos(e,n);var a=O.parent.localToLocal(O.x,O.y,s);O.distX=r.x-a.x,O.distY=r.y-a.y}})}),!1!==A&&qe(this,S),this.clone=function(){return O.cloneProps(new go.Layer(e,t,E,s,c,u,n,r,d,h,i,a,g,l,p,f,L,z,y,b,v,w,C,x,k,T,A,this.group,B))},this.dispose=function(e,t,o){return O.transformControls.remove(),O.transformControls.disable(),o||this.zimContainer_dispose(!0),!0}},go.extend(go.Layer,go.Container,["clone","dispose"],"zimContainer",!1),go.Waiter=function(i,a,e,t,o,n,r,l,s,c,u){var d;if(d=zob(go.Waiter,arguments,"container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",this))return d;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=c;var h=!1===s?{}:go.getStyle(this.type,this.group,u);zot(a)&&(a=null!=h.speed?h.speed:600),zot(e)&&(e=null!=h.foregroundColor?h.foregroundColor:"white"),zot(t)&&(t=null!=h.backgroundColor?h.backgroundColor:"orange"),zot(o)&&(o=null!=h.corner?h.corner:16),zot(n)&&(n=null!=h.shadowColor?h.shadowColor:"rgba(0,0,0,.3)"),zot(r)&&(r=null!=h.shadowBlur?h.shadowBlur:14),zot(l)&&(l=null!=h.fadeTime?h.fadeTime:0);this.setBounds(-52,-20,104,40);var g=this,p=this.display=new go.Shape({style:!1});this.addChild(p),p.setBounds(0,0,104,40),p.regX=52,p.regY=20;var f=p.graphics;f.f(t);var m=o;Array.isArray(m)||(m=[o,o,o,o]),f.rc(0,0,104,40,m[0],m[1],m[2],m[3]),-1!=n&&0<r&&(p.shadow=new createjs.Shadow(n,3,3,r)),p.on("click",function(e){e.stopImmediatePropagation()});var z,y,b=new go.Container({style:!1});this.addChild(b);for(var v=0;v<3;v++)(z=new createjs.Shape).graphics.f(e).dc(0,0,12),z.x=32*(v-1),b.addChild(z),z.cache(-12,-12,24,24),z.alpha=0;this.hide=function(){function e(){g.parent&&g.parent.removeChild(g);var e=g.stage;if(e&&e.update(),g.zimAccessibility){var t=g.zimAccessibility;t.resize(g),y?y.focus():g.zimTabTag.nextSibling.focus(),setTimeout(function(){t.talk("Waiter has finished.")},50)}}return 0<l?g.animate({obj:{alpha:0},time:l,call:e}):e(),g.toggled=!1,g};var w=[];this.show=function(){var e,t="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(i)){if(!zimDefaultFrame)return void zog(t);i=zimDefaultFrame.stage}else{if(!i.getBounds)return void zog(t);if(zot(i.stage))return void zog("zim display - Waiter(): The container must have a stage property")}for(var o=0,n=0;n<b.numChildren;n++)b&&w.push(setTimeout(function(){e=b.getChildAt(o),createjs.Tween.get(e,{loop:!0}).to({alpha:1},a/3/2).wait(a/3).to({alpha:0},a/3).wait(a-a/3-a/3/2),o++},n*a/3));if(g.ticker=createjs.Ticker.on("tick",function(){i.stage.update()}),g.x=i.getBounds().width/2,g.y=i.getBounds().height/2,i.addChild(g),0<l&&(g.alpha=0,g.animate({alpha:1},l)),g.zimAccessibility){var r=g.zimAccessibility;setTimeout(function(){r.activatedObject&&(y=r.activatedObject.zimTabTag)},50),r.resize(g),r.talk(g.zimTabTag.getAttribute("aria-label"))}return g.toggled=!0,g},!(g.toggle=function(e){return!0===e?g.show():!1===e||g.parent?g.hide():g.show(),g})!==s&&qe(this,h),this.clone=function(){return g.cloneProps(new go.Waiter(i,a,e,t,o,n,r,l,s,this.group,u))},this.dispose=function(e,t,o){g.ticker&&createjs.Ticker.off("tick",g.ticker),createjs.Tween.removeTweens(g),g.removeFrom();for(var n=0;n<b.numChildren;n++){var r=b.getChildAt(n);clearInterval(w[n]),createjs.Tween.removeTweens(r)}return o||this.zimContainer_dispose(!0),!0}},go.extend(go.Waiter,go.Container,["clone","dispose"],"zimContainer",!1),go.ProgressBar=function(t,o,n,r,i,a,l,e,s,c,u,d,h,g,p,f,m,z,y,b,v){var w;if(w=zob(go.ProgressBar,arguments,"barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, style, group, inherit",this))return w;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=b;var C=!1===y?{}:go.getStyle(this.type,this.group,v);zot(o)&&(o=null!=C.foregroundColor?C.foregroundColor:"#acd241"),zot(n)&&(n=null!=C.backgroundColor?C.backgroundColor:"#444"),zot(r)&&(r=null!=C.borderColor?C.borderColor:n),zot(i)&&(i=null!=C.borderWidth?C.borderWidth:null),zot(s)&&(s=null!=C.labelPosition?C.labelPosition:"bottom"),zot(t)&&(t=null!=C.barType?C.barType:"circle"),zot(a)&&(a=null!=C.padding?C.padding:"circle"==t?2:-.5),zot(u)&&(u=null!=C.corner?C.corner:15),zot(d)&&(d=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=C.shadowBlur?C.shadowBlur:14),zot(g)&&(g=null!=C.backing?C.backing.clone():null),zot(f)&&(f=null==C.fastClose||C.fastClose),r<0||i<0?r=i=null:null!=r&&null==i&&(i="circle"==t?10:2),zot(p)&&(p=null!=C.delay?C.delay:100),zot(z)&&(z=null==C.autoHide||C.autoHide),zot(l)&&(l=null!=C.label?C.label:null),zot(e)&&(e=null!=C.color?C.color:o),"string"!=typeof l&&"number"!=typeof l||(l=new go.Label({text:l,color:e,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));l&&l.text,!zot(c)&&zot(l)&&(l=new go.Label("")),this.label=l;var x,k=30,T=this,A=0;if(T.visible=!1,setTimeout(function(){T.visible=!0,T.stage&&T.stage.update()},p),"circle"==t)var P=20,B=(g=this.backing=new go.Circle(P,"rgba(0,0,0,0)",n,i,null,null,null,null,!1).addTo(T),this.bar=new go.Shape({style:!1}).addTo(T).loc(g.x,g.y).rot(-90));else{P=200;if(-1!=d&&0<h)new go.Rectangle(P-2,k-2,n,null,null,u,null,null,!1).addTo(this).shadow=new createjs.Shadow(d,3,3,h);g=E(g);var I=u;Array.isArray(I)||(I=[u,u,u,u]);var S=1.2*(a+i/2),O=(B=this.bar=new go.Rectangle(P-1.8*(a+i/2),k-1.8*(a+i/2),o,null,null,[I[0]-S,I[1]-S,I[2]-S,I[3]-S],null,null,!1).center(this),this.mask=new go.Rectangle(P-1.8*(a+i/2),k-1.8*(a+i/2),null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1));B.setMask(O)}function E(e){if(T.backing){var t=T.getChildIndex(T.backing);T.removeChild(T.backing)}else t=T.numChildren;if(T.border&&T.removeChild(T.border),zot(e)||"Pattern"!=e.type)e=T.backing=zot(e)?new go.Rectangle(P,k,n,r,i,u,null,null,!1).addTo(T,t):g.addTo(T,t);else{var o=e;((e=T.backing=new go.Rectangle(P,k,n,null,null,u,null,null,!1).addTo(T,t)).pattern=o).center(e);e.getBounds();if(o.setMask(e.shape),i)T.border=new go.Rectangle(P,k,"rgba(0,0,0,0)",r,i,u,null,null,!1).addTo(T,t+1)}return e}function M(e){"circle"==t?B.graphics.c().mt(0,0).s(o).ss(i-2*a+.5).a(0,0,P,0,360*e/100*Math.PI/180):(O.sca(e/100,1),B.setMask(O)),zot(c)||(l.text=l.startText+" "+Math.min(Math.round(e),100)+"%"),z&&f&&100<=Math.round(e)&&(T.timeOut=setTimeout(function(){T.hide()},200)),!T.dispatched&&100<=Math.round(e)&&(T.dispatchEvent("complete"),T.dispatched=!0,setTimeout(function(){T&&(T.dispatched=!1)},100)),T.stage&&T.stage.update()}T.setBacking=function(e){E(e),T.stage&&T.stage.update()},g.on("click",function(e){e.stopImmediatePropagation()}),zot(l)||(l.scaleX=l.scaleY=.8,l.startText=l.text,zot(c)||(l.text=l.startText+"  0%"),l.center(T),"above"==s?l.y-=60:l.y+=60,l.alpha=.8),this.hide=function(){var e=T.stage;if(T.parent&&T.parent.removeChild(T),"Pattern"==T.backing.type&&T.backing.pauseInterval&&T.backing.pauseInterval(),e&&e.update(),T.zimAccessibility){var t=T.zimAccessibility;t.resize(T),x?x.focus():T.zimTabTag.nextSibling.focus(),setTimeout(function(){t.talk("Progress Bar has finished.")},50)}return T.toggled=!1,T},this.show=function(){var e="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(m)){if(!zimDefaultFrame)return void zog(e);m=zimDefaultFrame.stage}else{if(!m.getBounds)return void zog(e);if(zot(m.stage))return void zog("zim display - Waiter(): The container must have a stage property")}if(T.timeOut&&clearTimeout(T.timeOut),M(0),T.zimActiveLoader&&T.zimActiveLoader.on("progress",function(e){M(A=100*e.progress)}),T.center(m),"Pattern"==T.backing.type&&T.backing.pauseInterval&&T.backing.pauseInterval(!1),T.zimAccessibility){var t=T.zimAccessibility;setTimeout(function(){t.activatedObject&&(x=t.activatedObject.zimTabTag)},50),t.resize(T),t.talk(T.zimTabTag.getAttribute("aria-label"))}return T.toggled=!0,zog("centering"),T},T.toggle=function(e){return!0===e?T.show():!1===e||T.parent?T.hide():T.show(),T},T.run=function(e,t){zot(t)||(z=t),zot(e)&&(e=3e3),T.toggle(!0),T.runInterval&&clearInterval(T.runInterval),T.percent=0;var o=Date.now();return T.runInterval=setInterval(function(){T.percent=(Date.now()-o)/e*100,100<=T.percent&&(T.percent=100,clearInterval(T.runInterval))},30),T},T.dispatched=!1,Object.defineProperty(T,"percent",{get:function(){return A},set:function(e){M(A=e)}}),!1!==y&&qe(this,C),this.clone=function(){return T.cloneProps(new go.ProgressBar(t,o,n,r,i,a,l,e,s,c,u,d,h,g,p,f,m,z,y,this.group,v))},this.dispose=function(e,t,o){return"Pattern"==T.backing.type&&T.backing.clearInterval&&T.backing.clearInterval(),T.runInterval&&clearInterval(T.runInterval),o||this.zimContainer_dispose(!0),!0}},go.extend(go.ProgressBar,go.Container,["clone","dispose"],"zimContainer",!1),go.Indicator=function(e,t,n,r,i,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b){var v;if(v=zob(go.Indicator,arguments,"width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, style, group, inherit",this))return v;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=y;var w=!1===z?{}:go.getStyle(this.type,this.group,b);zot(e)&&(e=null!=w.width?w.width:300),zot(t)&&(t=null!=w.height?w.height:50),zot(n)&&(n=null!=w.num?w.num:6),zot(r)&&(r=null!=w.foregroundColor?w.foregroundColor:"#f58e25"),zot(i)&&(i=null!=w.backgroundColor?w.backgroundColor:"#666"),i<0&&(i=null!=w.backgroundColor?w.backgroundColor:"rgba(0,0,0,.01)"),zot(o)&&(o=null!=w.borderColor?w.borderColor:null),zot(a)&&(a=null!=w.borderWidth?w.borderWidth:null),o<0||a<0?o=a=null:null!=o&&null==a&&(a=1),zot(l)&&(l=null!=w.backdropColor?w.backdropColor:-1),zot(s)&&(s=null!=w.corner?w.corner:0),zot(c)&&(c=null!=w.indicatorType?w.indicatorType:"dot"),zot(u)&&(u=null!=w.fill&&w.fill),zot(d)&&(d=null!=w.scale?w.scale:1),zot(h)&&(h=null!=w.lightScale?w.lightScale:1),zot(g)&&(g=null!=w.interactive&&w.interactive),zot(p)&&(p=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=w.shadowBlur?w.shadowBlur:5);var C,x=(zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",k=this;this.lights=[];new go.Container({style:!1});if(-1!=l){var T=k.backdrop=new go.Rectangle(e,t,l,o,a,s,null,null,!1);this.addChild(T)}var A,P=this.lightsContainer=new go.Container({style:!1});this.addChild(P);var B=.5*t,I=e/(n+1),S=new createjs.Shape;"square"==c||"box"==c?S.graphics.f("black").dr(-I/2/h+B/2,-t/2+B/2,I/h,t):S.graphics.f("black").dr(-I/2/h,-t/2,I/h,t);for(var O=0;O<n;O++)"square"==c||"box"==c?((A=new go.Rectangle(B,B,i,o,a,null,null,null,!1)).regX=A.width/2,A.regY=A.height/2):A=new go.Circle(B/2,i,o,a,null,null,null,null,!1),this.lights.push(A),A.znum=O,A.scaleX=A.scaleY=h,A.hitArea=S,A.x=I+I*O,A.y=t/2,P.addChild(A);if(P.setBounds(0,0,e,t),P.regX=P.x=e/2,P.regY=P.y=t/2,this.addChild(P),-1!=p&&0<f&&(P.shadow=new createjs.Shadow(p,2,2,f)),g){P.cursor="pointer";P.on(x,function(e){C!=e.target.znum&&(E(C=e.target.znum),k.dispatchEvent("change"))})}function E(e){var t;n<=e&&(e=-1);for(var o=0;o<n;o++)t=u&&o<e?r:i,o==e&&(t=r),P.getChildAt(o).color=t;k.zimAccessibility&&k.zimAccessibility.changeTitle(k),go.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}P.scaleX=P.scaleY=d,Object.defineProperty(this,"selectedIndex",{get:function(){return C},set:function(e){C=Math.floor(e),E(C=go.constrain(C,-1,n-1))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zogy("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){je(k,e)}}),zot(m)&&(m=null!=w.selectedIndex?w.selectedIndex:0),k.selectedIndex=m,!1!==z&&qe(this,w),this.clone=function(){return k.cloneProps(new go.Indicator(e,t,n,r,i,o,a,l,s,c,u,d,h,g,p,f,m,z,this.group,b))}},go.extend(go.Indicator,go.Container,"clone","zimContainer",!1),go.List=function(r,n,o,e,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,q,U,K,Z,Q,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue){var de;if(de=zob(go.List,arguments,"width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, spacing, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideDamp, slideSnap, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, style, group, inherit",this))return de;z_d("60.5"),this.group=ce;var he=!1===se?{}:go.getStyle("List",this.group,ue);zot(r)&&(r=null!=he.width?he.width:300),zot(n)&&(n=null!=he.height?he.height:zot(oe)?200:200+oe.height),zot(o)&&(o=null!=he.list?he.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==o.length&&(o=["%-&"]),this.originalList=o,zot(e)&&(e=null!=he.viewNum?he.viewNum:5),zot(i)&&(i=null==he.vertical||he.vertical),zot(t)&&(t=null==he.currentSelected||he.currentSelected);var ge=!zot(a)||!zot(s);zot(ne)&&(ne=null!=he.checkBox&&he.checkBox),zot(a)&&(a=null!=he.align?he.align:ne?"left":"center"),zot(l)&&(l=null!=he.valign?he.valign:"center"),zot(s)&&(s=null!=he.labelAlign?he.labelAlign:a),zot(c)&&(c=null!=he.labelValign?he.labelValign:l),zot(g)&&(g=null!=he.indent?he.indent:ne?0:10),zot(u)&&(u=null!=he.labelIndent?he.labelIndent:g),zot(d)&&(d=null!=he.labelIndentHorizontal?he.labelIndentHorizontal:u),zot(h)&&(h=null!=he.labelIndentVertical?he.labelIndentVertical:u),zot(p)&&(p=null!=he.spacing?he.spacing:2),zot(b)&&(b=null!=he.backdropColor?he.backdropColor:"#333"),zot(f)&&(f=null!=he.backgroundColor?he.backgroundColor:"#777"),zot(m)&&(m=null!=he.rollBackgroundColor?he.rollBackgroundColor:"#555"),zot(z)&&(z=null!=he.selectedBackgroundColor?he.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=he.selectedRollBackgroundColor?he.selectedRollBackgroundColor:"#555"),zot(v)&&(v=null!=he.color?he.color:"white"),zot(w)&&(w=null!=he.rollColor?he.rollColor:v),zot(C)&&(C=null!=he.selectedColor?he.selectedColor:v),zot(x)&&(x=null!=he.selectedRollColor?he.selectedRollColor:w),zot(b)&&(b=null!=he.backdropColor?he.backdropColor:b);var pe=k,fe=T;zot(k)&&(k=null!=he.borderColor?he.borderColor:"#999"),zot(T)&&(T=null!=he.borderWidth?he.borderWidth:1),zot(A)&&(A=null!=he.padding?he.padding:p),zot(P)&&(P=null!=he.corner?he.corner:0),zot(B)&&(B=null==he.swipe||he.swipe),zot(I)&&(I=null==he.scrollBarActive||he.scrollBarActive),zot(S)&&(S=null==he.scrollBarDrag||he.scrollBarDrag),zot(O)&&(O=null!=he.scrollBarColor?he.scrollBarColor:k),zot(E)&&(E=null!=he.scrollBarAlpha?he.scrollBarAlpha:.3),zot(M)&&(M=null==he.scrollBarFade||he.scrollBarFade),zot(j)&&(j=null!=he.scrollBarH?he.scrollBarH:!i),zot(L)&&(L=null!=he.scrollBarV?he.scrollBarV:i),S&&(M=null!=he.scrollBarFade&&he.scrollBarFade),zot(D)&&(D=null==he.scrollBarOverlay||he.scrollBarOverlay),zot(Y)&&(Y=null==he.slide||he.slide),zot(X)&&(X=null!=he.slideDamp?he.slideDamp:.6),zot(R)&&(R=null!=he.slideSnap?he.slideSnap:i?"vertical":"horizontal"),zot(_)&&(_=null!=he.shadowColor?he.shadowColor:"rgba(0,0,0,.3)"),zot(F)&&(F=null!=he.shadowBlur?he.shadowBlur:20),zot(H)&&(H=null!=he.paddingVertical?he.paddingVertical:A),zot(W)&&(W=null!=he.paddingHorizontal?he.paddingHorizontal:A),zot(G)&&(G=null==he.scrollWheel||he.scrollWheel),zot(V)&&(V=null!=he.titleBar?he.titleBar:null),zot(q)&&(q=null!=he.titleBarColor?he.titleBarColor:null),zot(U)&&(U=null!=he.titleBarBackgroundColor?he.titleBarBackgroundColor:null),zot(K)&&(K=null!=he.titleBarHeight?he.titleBarHeight:35),zot(Z)&&(Z=null!=he.draggable?he.draggable:null),zot(Q)&&(Q=null!=he.boundary?he.boundary:null),zot(J)&&(J=null!=he.onTop?he.onTop:null),zot($)&&($=null!=he.close?he.close:null),zot(ee)&&(ee=null!=he.closeColor?he.closeColor:null),zot(te)&&(te=null!=he.excludeCustomTap&&he.excludeCustomTap),zot(ne)&&(ne=null!=he.checkBox&&he.checkBox),zot(re)&&(re=null!=he.pulldown&&he.pulldown),zot(ie)&&(ie=null!=he.clone&&he.clone),!1===V&&(V=null),this.vertical=i;var me,ze,ye,be,ve=this,we=n;if(ne&&go.loop(o,function(e,t){o[t]=go.List.checkItem(e,null,r,"left",10,10,p,v,w,C,x,f,m,z,y)}),o.constructor=={}.constructor){var Ce=zot(o.shade)?zot(he.shade)?.2:he.shade:o.shade,xe=zot(o.dim)?zot(he.dim)?.1:he.dim:o.dim,ke=zot(o.shift)?zot(he.shift)?15:he.shift:o.shift,Te=zot(o.bloom)?!zot(he.bloom)&&he.bloom:o.bloom,Ae=zot(o.whither)?!zot(he.whither)&&he.whither:o.whither,Pe=zot(o.open)?!zot(he.open)&&he.open:o.open,Be=zot(o.arrows)?!zot(he.arrows)&&he.arrows:o.arrows;!0===Te&&(Te=10),!0===Ae&&(Ae=10),!0===ke&&(ke=15),!0===Ce&&(Ce=.2),!0===xe&&(xe=.1);var Ie=zot(o.subStyles)?zot(he.subStyles)?{}:he.subStyles:o.subStyles;zot(o.menu)||(o=o.menu),me=new go.Hierarchy(o,Pe),Pe&&me.data&&me.data.id0&&(me.data.id0.open=!1),o=me.getLinearList(),ge||(a=s="left")}if(re&&(e=zot(me)?o.length:me.length,n=e*r/620*100+(e+1)*p+(zot(V)?0:K),T=0,z=f,b=go.clear,B=!1),go.loop(o,function(e){"ListItem"==e.type&&(e.width=r-2*p)}),this.align=a,this.valign=l,this.indent=g,zot(oe)||(n-=oe.height,oe.list=ve,oe.setButtons(),K+=oe.height),this.zimWindow_constructor(r,n,b,k,T,A,P,B,I,S,O,E,M,j,L,Y,X,R,!0,_,F,W,H,G,N,V,q,U,K,Z,Q,J,$,ee,ae,!1,null,!1,se,ce,go.copy(he)),this.type="List",zot(V)||(this.titleBarLabel.pos(null,K-30,null,!0),zot(K)&&(K=30),n-=K),zot(oe)||oe.addTo(ve).loc(0,-oe.height),ve.itemWidth=i?r-2*W-(I?D?0:6:0):(r-2*W)/e,ve.itemHeight=i?(n-2*H)/e:n-2*H-(I?D?0:6:0),ye=go.copy(o,ie),ze=ve.tabs=new go.Tabs({width:i?ve.itemWidth:ve.itemWidth*o.length,height:i?ve.itemHeight*o.length:ve.itemHeight,tabs:ye,spacing:p,vertical:i,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,backdropColor:b,currentEnabled:!0,currentSelected:t,align:a,valign:l,labelAlign:s,labelValign:c,labelIndent:u,labelIndentHorizontal:d,labelIndentVertical:h,indent:g,useTap:!0,excludeCustomTap:te,style:se,group:ce,inherit:go.copy(he)}).mov(i?0:W,i?H:0),ve.add(ze),me){var Se=me.getLinearIDs();function Oe(e,t,o){e.listZID=t,e.label&&(Ce&&new Rectangle(ke*(o.level+1),e.height).alp(Ce).pos(0,0,"right"==ve.align,!1,e),xe&&new Rectangle(e.width,e.height).alp((o.level+1)*xe).addTo(e).bot().ord(1),ke&&"center"!=ve.align&&(e.label.x+=("right"==ve.align?-1:1)*ke*(o.level+1)));var n=me.getData(t);n.obj=e,n.list&&!isEmpty(n.list)&&(e.accordion=new Label({size:Be?22:36,text:n.open?Be?"":"-":Be?"":"+",align:"center",color:convertColor(v,"rgba",.6)}).center(e).alp(.7).pos(15,null,"right"!=ve.align).mov(0,n.open?-3:0))}function Ee(){if(ve.selected.accordion){var o=me.getData(ve.selected.listZID);if(o.open){ve.selected.accordion&&(ve.selected.accordion.text=Be?"":"+",ve.selected.accordion.mov(0,3)),o.open=!1;var n=me.getNextSibling(ve.selected.listZID);if(zot(n))var t=ve.items.length-1;else t=go.loop(ve.items,function(e,t){if(e.listZID==n)return t-1});if(Ae){var r=0;ve.enabled=!1,interval(Ae,function(e){ve.removeAt(1,ve.selectedIndex+t-ve.selectedIndex-r),r++,e.total==e.count+1&&(ve.enabled=!0)},t-ve.selectedIndex,!0)}else ve.removeAt(t-ve.selectedIndex,ve.selectedIndex+1)}else{o.open=!0,ve.selected.accordion&&(ve.selected.accordion.text=Be?"":"-",ve.selected.accordion.mov(0,-3));var i=me.getLinearList(o.list),a=me.getLinearIDs(o.list);if(o.opened){if(Array.isArray(i))if(Te){r=0;ve.enabled=!1,interval(Te,function(e){ve.addAt(i[r],ve.selectedIndex+1+r),e.total==e.count+1&&(ve.enabled=!0),r++},i.length,!0)}else ve.addAt(i,ve.selectedIndex+1)}else{o.opened=!0;var l=Ie[o.level];if(zot(l)&&(l={}),Array.isArray(i))if(Te){var r=0;ve.enabled=!1,interval(Te,function(e){ve.addAt(i[r],ve.selectedIndex+1+r,{backgroundColor:l.backgroundColor,color:l.color,rollBackgroundColor:l.rollBackgroundColor,rollColor:l.rollColor,selectedBackgroundColor:l.selectedBackgroundColor,selectedColor:l.selectedColor,selectedRollBackgroundColor:l.selectedRollBackgroundColor,selectedRollColor:l.selectedRollColor});var t=a[r];Oe(ve.items[ve.selectedIndex+1+r],t,o),e.total==e.count+1&&(ve.enabled=!0),r++,ve.stage&&ve.stage.update()},i.length,!0)}else ve.addAt(i,ve.selectedIndex+1,{backgroundColor:l.backgroundColor,color:l.color,rollBackgroundColor:l.rollBackgroundColor,rollColor:l.rollColor,selectedBackgroundColor:l.selectedBackgroundColor,selectedColor:l.selectedColor,selectedRollBackgroundColor:l.selectedRollBackgroundColor,selectedRollColor:l.selectedRollColor}),loop(a,function(e,t){Oe(ve.items[ve.selectedIndex+1+t],e,o)})}}}}loop(Se,function(e,t){ve.tabs.buttons[t].listZID=e}),loop(ve.tabs.buttons,function(e){var t=me.getData(e.listZID);isEmpty(t.list)||(e.accordion=new Label({size:Be?22:36,text:Be?"":"+",align:"center",color:convertColor(v,"rgba",.6)}).center(e).alp(.7).pos(15,null,"right"!=ve.align))}),ve.tap(Ee)}function Me(e){if(i){var t=-(ve.itemHeight+p)*e+n/2-ve.itemHeight/2;return(ve.itemHeight+p)*ve.length<n&&(t=0),0<t&&(t=0),(ve.itemHeight+p)*ve.length>n&&t<-ve.tabs.height+n-2*H&&(t=-ve.tabs.height+n-2*H),t}var o=-(ve.itemWidth+p)*e+r/2-ve.itemWidth/2;return(ve.itemWidth+p)*ve.length<r&&(o=0),0<o&&(o=0),(ve.itemWidth+p)*ve.length>r&&o<-ve.tabs.width+r-2*W&&(o=-ve.tabs.width+r-2*W),o}ze.tap(function(e){e.target.selectedIndex!=ve.selectedIndex&&(ve.selectedIndex=ze.selectedIndex,ve.dispatchEvent("change"),e.preventDefault())}),this.getItemIndex=function(e){return ve.items.indexOf(e)},this.animateTo=function(e,t){zot(e)&&(e=0),zot(t)&&(t=50);var o=Me(ve.selectedIndex=e);if(i){var n=Math.abs(ve.scrollY-o)/ve.itemHeight;ve.animate({scrollY:o},n*t)}else{n=Math.abs(ve.scrollX-o)/ve.itemWidth;ve.animate({scrollX:o},n*t)}return ve},this.addAt=function(e,t,o,n){return"ListItem"==e.type?e.width=r-2*p:Array.isArray(e)&&go.loop(e,function(e){"ListItem"==e.type&&(e.width=r-2*p)}),e.clone?ve.tabs.addAt(e,t,o):ve.tabs.addAt(copy(e,n),t,o),ve.content.x=0,ve.content.y=0,ve.update(),ve},this.removeAt=function(e,t){ve.tabs.removeAt(e,t);var o=ze.getBounds();return ze.setBounds(0,0,o.width,o.height),ve.content.x=0,ve.content.y=0,ve.update(),ve},"%-&"==o[0]&&1==o.length&&ve.removeAt(1,0),this.clear=function(){return ve.tabs.removeAt(ve.length,0),ve.content.x=0,ve.content.y=0,ve.update(),ve},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),ve.items[e].checkBox.checked=t,ve.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),ve.items[e].checkBox.checked},this.setChecks=function(t){return go.loop(ve.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),ve},Object.defineProperty(ve,"items",{get:function(){return ve.tabs.buttons},set:function(e){zon&&zogy("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(ve,"list",{get:function(){return ve.tabs.buttons},set:function(e){zon&&zogy("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(ve,"length",{get:function(){return ve.tabs.buttons.length},set:function(e){zon&&zogy("List() - length is read only")}}),Object.defineProperty(ve,"selectedIndex",{get:function(){return be},set:function(e){ze.selectedIndex=e,ve.label=ze.label,ve.selected=ze.selected,be=e,go.OPTIMIZE||!zns&&OPTIMIZE||!ve.stage||ve.stage.update()}}),t&&(ve.selectedIndex=0),Object.defineProperty(ve,"selectedIndexPlusPosition",{get:function(){return be},set:function(e){ve.selectedIndex=e,be=e,i?ve.scrollY=Me(e)-2:ve.scrollX=Me(e),go.OPTIMIZE||!zns&&OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"text",{get:function(){if(ve.label)return ve.label.text},set:function(e){ve.label&&(ve.label.text=e)}}),Object.defineProperty(ve,"itemDown",{get:function(){return ve.tabs.buttonDown},set:function(e){}}),Object.defineProperty(ve,"itemsText",{get:function(){for(var e=[],t=0;t<ve.tabs.buttons.length;t++){var o=ve.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(e){zon&&zogy("List() - itemsText is read only")}}),t&&(ve.selectedIndex=0),Object.defineProperty(ve,"checkBoxes",{get:function(){for(var e=[],t=0;t<ve.tabs.buttons.length;t++){var o=ve.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(e){zon&&zogy("List() - checkBoxes is read only")}}),Object.defineProperty(ve,"accordionIndex",{get:function(){var e=ve.selected.listZID;if(e)return Number(e.split("id")[1])},set:function(e){zon&&zogy("List() - accordionIndex is read only")}}),this._enabled=!0,Object.defineProperty(ve,"enabled",{get:function(){return ve._enabled},set:function(e){je(ve,e)}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},Pe&&Ee&&(ve.selected=ve.items[0],Ee()),zot(le)&&(le=null!=he.selectedIndex?he.selectedIndex:0),ve.selectedIndex=le,!1!==se&&qe(this,he),this.clone=function(){return ve.cloneProps(new go.List(r,we,go.copy(ve.originalList,!0),e,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,pe,fe,A,go.copy(P),B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,q,U,K,Z,Q,J,$,ee,te,oe,ne,re,ie,ae,le,se,this.group,ue))}},go.extend(go.List,go.Window,"clone","zimWindow",!1),go.List.makeBase=function(e,t,o){e.backing=new go.Rectangle(e.width,e.height,dark).center(e),"Label"==t.type?e.label=t:e.label=new go.Label(t,null,null,white),e.text=e.label.text,e.label.center(e).loc(o)},go.List.slider=function(e,t,o,n,r,i,a,l,s,c){var u;if(u=zob(go.List.slider,arguments,"label, min, max, val, call, step, obj, property, paddingLeft, paddingRight"))return u;var d=new go.Container(620,100);return d.type="ListItem",d.listItem="Slider",zot(s)&&(s=20),zot(c)&&(c=30),go.List.makeBase(d,e,s),d.slider=new go.Slider({inside:!0,barWidth:40,barLength:150,barColor:blue,min:t,max:o,step:i}).sca(1.5).center(d).mov(20).change(function(){d.stepper.currentValue=Math.round(d.slider.currentValue),a&&l&&(a[l]=d.slider.currentValue),r&&"function"==typeof r&&r(d.slider.currentValue,d.parent),d.slider.stage&&d.slider.stage.update()}),zot(n)||(d.slider.currentValue=n),d.stepper=new go.Stepper({corner:0,arrows:!1,stepperType:"number",min:t,max:o}).sca(.5).center(d).pos(c,null,!0).change(function(){d.slider.currentValue=d.stepper.currentValue,a&&l&&(a[l]=d.stepper.currentValue),r&&"function"==typeof r&&r(d.stepper.currentValue,d.parent),d.stepper.stage&&d.stepper.stage.update()}),zot(n)||(d.stepper.currentValue=n),d},go.List.checkBox=function(e,t,o,n,r,i,a){var l;if(l=zob(go.List.checkBox,arguments,"label, checked, call, obj, property, paddingLeft, paddingRight"))return l;var s=new go.Container(620,100);return s.type="ListItem",s.listItem="CheckBox",zot(i)&&(i=20),zot(a)&&(a=30),go.List.makeBase(s,e,i),s.checkBox=new go.CheckBox({startChecked:t,label:""}).sca(1.2).center(s).pos(256+a,null,!0).change(function(){n&&r&&(n[r]=s.checkBox.checked),o&&"function"==typeof o&&o(s.checkBox.checked,s.parent),s.checkBox.stage&&s.checkBox.stage.update()}),s},go.List.colorPicker=function(e,t,o,n,r,i,a,l){var s;if(s=zob(go.List.colorPicker,arguments,"label, color, picker, call, obj, property, paddingLeft, paddingRight"))return s;var c=new go.Container(620,100);return c.type="ListItem",c.listItem="ColorPicker",zot(a)&&(a=20),zot(l)&&(l=30),go.List.makeBase(c,e,a),zot(t)&&(t=go.pink),c.colorPicker=o||new go.ColorPicker({alphaPicker:!1}),c.swatch=new go.Rectangle(132,66,t,go.lighter,5).center(c).pos(270,null,!0).cur(),c.swatch.on("mousedown",function(){c.colorPicker.selectedColor=c.swatch.color,c.colorPicker.show()}),c.colorLabel=new go.Label(c.swatch.color.toUpperCase(),40,null,go.light).center(c).pos(l,null,!0),c.colorPicker.on("close",function(){var e=c.colorPicker.stage;c.colorPicker.hide(),e&&e.update()}),c.colorPicker.on("change",function(){var e=c.colorPicker.stage;c.swatch.color=c.colorPicker.selectedColor,c.colorLabel.text=c.swatch.color.toUpperCase(),c.colorPicker.hide(),r&&i&&(r[i]=c.colorPicker.selectedColor),n&&"function"==typeof n&&n(c.colorPicker.selectedColor,c.parent),e&&e.update()}),c},go.List.checkItem=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m){var z;if(z=zob(go.List.checkItem,arguments,"label, size, width, align, paddingHorizontal, paddingVertical, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit"))return z;var y=go.getStyle("CheckBox",f,m);zot(t)&&(t=null!=y.size?y.size:20);y=go.getStyle("List",f,m);zot(o)&&(o=300),zot(r)&&(r=10),zot(i)&&(i=10),zot(n)&&(n=null!=y.align?y.align:"center"),zot(a)&&(a=null!=y.spacing?y.spacing:2),zot(d)&&(d=null!=y.backgroundColor?y.backgroundColor:"#777"),zot(h)&&(h=null!=y.rollBackgroundColor?y.rollBackgroundColor:"#555"),zot(g)&&(g=null!=y.selectedBackgroundColor?y.selectedBackgroundColor:"#444"),zot(p)&&(p=null!=y.selectedRollBackgroundColor?y.selectedRollBackgroundColor:"#555"),zot(l)&&(l=null!=y.color?y.color:"white"),zot(s)&&(s=null!=y.rollColor?y.rollColor:l),zot(c)&&(c=null!=y.selectedColor?y.selectedColor:l),zot(u)&&(u=null!=y.selectedRollColor?y.selectedRollColor:s);var b=new go.Container;return b.type="CheckItem",b.checkBox=new go.CheckBox({size:t,label:e,color:l,tap:!0}),b.backing=new go.Rectangle(o-2*a,b.checkBox.height+2*i,d).addTo(b),b.checkBox.center(b),"center"!=n&&"middle"!=n&&b.checkBox.pos(r,null,"right"==n),b.backing.tap(function(){b.checkBox.toggle(),b.zimOut()}),b.checkBox.change(function(){b.zimOut()}),b.zimOver=function(){b.backing.color=b.checkBox.checked?p:h,b.checkBox.label.color=b.checkBox.checked?u:s,b.stage&&b.stage.update()},b.zimOut=function(){b.backing.color=b.checkBox.checked?g:d,b.checkBox.label.color=b.checkBox.checked?c:l,b.stage&&b.stage.update()},b.backing.on("mouseover",b.zimOver),b.checkBox.on("mouseover",b.zimOver),b.backing.on("mouseout",b.zimOut),b.checkBox.on("mouseout",b.zimOut),b},go.Stepper=function(n,e,o,t,r,l,i,s,a,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L){var D;if(D=zob(go.Stepper,arguments,"list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, style, group, inherit",this))return D;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=j;var Y=!1===M?{}:go.getStyle(this.type,this.group,L);zot(n)&&(n=null!=Y.list?Y.list:[]),zot(e)&&(e=null!=Y.width?Y.width:200),zot(o)&&(o=null!=Y.backgroundColor?Y.backgroundColor:"white"),zot(t)&&(t=null!=Y.borderColor?Y.borderColor:null),zot(r)&&(r=null!=Y.borderWidth?Y.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(i)&&(i=null!=Y.color?Y.color:"#555"),zot(l)&&(l=null!=Y.label?Y.label:""),"string"!=typeof l&&"number"!=typeof l||(l=new go.Label({text:l,size:null!=Y.size?2*Y.size:64,color:i,align:null!=Y.align?Y.align:"center",valign:null!=Y.valign?Y.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(s)&&(s=null!=Y.vertical&&Y.vertical),zot(a)&&(a=null==Y.arrows||Y.arrows),zot(c)&&(c=null!=Y.corner?Y.corner:16),zot(u)&&(u=null!=Y.shadowColor?Y.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=Y.shadowBlur?Y.shadowBlur:14),zot(h)&&(h=null!=Y.continuous&&Y.continuous),zot(g)&&(g=null==Y.display||Y.display),zot(p)&&(p=null==Y.press||Y.press),zot(f)&&(f=null==Y.hold||Y.hold),zot(m)&&(m=null!=Y.holdDelay?Y.holdDelay:400),zot(z)&&(z=null!=Y.holdSpeed?Y.holdSpeed:200),zot(y)&&(y=null==Y.draggable||Y.draggable),(zot(b)||b<=0)&&(b=null!=Y.dragSensitivity?Y.dragSensitivity:.1),zot(v)&&(v=null!=Y.dragRange?Y.dragRange:200),zot(w)&&(w=null!=Y.stepperType?Y.stepperType:"number"),zot(C)&&(C=null!=Y.min?Y.min:0),zot(x)&&(x=null!=Y.max?Y.max:10),zot(k)&&(k=null!=Y.step?Y.step:1),zot(T)&&(T=null!=Y.step2?Y.step2:k),zot(A)&&T!=k&&"number"==w&&(A=null==Y.arrows2||Y.arrows2),zot(P)&&(P=null!=Y.arrows2Scale?Y.arrows2Scale:.5),zot(B)&&(B=null==Y.keyEnabled||Y.keyEnabled),zot(I)&&(I=null==Y.keyArrows||Y.keyArrows),zot(S)&&(S=null==Y.rightForward||Y.rightForward),zot(O)&&(O=null!=Y.downForward?Y.downForward:"number"!=w);var X,R,_,F,W=this,H=k,G=1;if("number"==w){if(C=Number(C),x=Number(x),NaN==C&&(C=0),NaN==x&&(x=100),x<C){G=-1;var N=x;x=C,C=N,R=x}else R=C;this.min=C,this.max=x,C<0&&0<x&&(R=0),k=Math.abs(k),_=Math.max(U(k),U(T))}else if("letter"==w){n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof C&&(C="A"),"string"!=typeof x&&(x="Z"),C=C.substr(0,1).toUpperCase(),x=x.substr(0,1).toUpperCase();var V=n.indexOf(C);V<0&&(C="A",V=0);var q=n.indexOf(x);q<0&&(x="Z",q=n.length),q<V&&(n.reverse(),V=n.length-1-V,q=n.length-1-q),n=n.splice(V,q-V+1)}else w="list";function U(e){var t=String(e).split(".")[1];return t=t?t.length:0}var K=0,Z=0;y&&this.on("mousedown",function(e){W.zimAccessibility&&W.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,K=e.rawX/go.scaX,Z=e.rawY/go.scaY,F=this.stage.on("stagemousemove",function(e){K=e.rawX/go.scaX,Z=e.rawY/go.scaY}))},null,!0),(this.label=l).mouseChildren=!1;l.mouseEnabled=!1;var Q,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue=!1;if(a||A){var de=new createjs.Shape;de.graphics.ss(t).s(r).f("rgba(255,255,255,.11)").r(0,0,150,150),de.regX=75,de.regY=87.5}if(a&&(ee=this.containerPrev=new go.Container({style:!1}),this.addChild(ee),ee.hitArea=de,te=this.arrowPrev=new go.Triangle(100,80,80,o,null,null,null,null,null,null,!1),-1!=u&&0<d&&(ee.shadow=new createjs.Shadow(u,3,3,d)),ee.addChild(te),ee.cursor="pointer",ee.on("mousedown",function(e){if(!W.zimAccessibility||!W.zimAccessibility.aria){H=k;var t=s?O?1:-1:S?-1:1;me(t),pe(t,null,null,e.stageX/go.scaX,e.stageY/go.scaY)}}),f&&ee.on("pressup",fe),s?(ee.rotation=180,ee.x=e/2,ee.y=g?ee.height+25+100+ee.height/2+25:2*ee.height):(ee.rotation=-90,ee.x=ee.height/2,ee.y=ee.width/2)),g){var he,ge=this.textBox=new go.Rectangle(e,100,o,t,r,c,null,null,!1);ge.cursor="pointer",this.addChild(ge),-1!=u&&0<d&&(ge.shadow=new createjs.Shadow(u,3,3,d)),a&&(s?a&&(ge.y=te.height+25):a&&(ge.x=te.height+25)),this.addChild(l),0<n.length&&(X=0,l.text=n[X]),l.center(W),ge.on("mousedown",function(e){W.zimAccessibility&&W.zimAccessibility.aria||(he=W.currentValue,p&&me(1),pe(1,!0,null,e.stageX/go.scaX,e.stageY/go.scaY),"number"==w&&(clearTimeout($),ue=!0,$=setTimeout(function(){ue=!1},200)))}),ge.on("pressup",function(){W.zimAccessibility&&W.zimAccessibility.aria||ue&&(ye(R=Math.round(R),R),W.currentValue!=he&&W.dispatchEvent("change"),he=W.currentValue)})}else 0<n.length&&(X=0);function pe(r,i,a,e,t){if(f){holdY=t,0==(se=e)&&(se=1),0==holdY&&(holdY=1),y||(b=1),ce=new go.Proportion(0,v,z,z*b);var l=z;Q=setTimeout(function(){(function n(){J=setTimeout(function(){var e=r;if(y){var t=Math.abs(K-se),o=Math.abs(Z-holdY);s?(i||a||(t=0),a&&(o=0)):(i||a||(o=0),a&&(t=0)),(10<=t||10<=o)&&(l=o<t?(H=s?T:k,e=0<K-se?1:-1,ce.convert(Math.abs(se-K))):(H=s?k:T,e=0<Z-holdY?1:-1,"number"!=w&&O||(e*=-1),ce.convert(Math.abs(holdY-Z))))}me(e),n()},l)})()},m)}}function fe(){W.zimAccessibility&&W.zimAccessibility.aria||(clearTimeout(Q),clearTimeout(J))}function me(e){var t;if("number"==w){var o=R;R+=H*e*G,R=go.decimals(R,_),h?R>W.max?R=W.min:R<W.min&&(R=W.max):(R>W.max?(R=1==k?W.max:o,g&&(ge.cursor="default")):g&&(ge.cursor="pointer"),R<W.min&&(R=1==k?W.min:o))}else{if(t=X+e,h)t>n.length-1&&(t=0),t<0&&(t=n.length-1);else{if(t>n.length-1)return void(g&&(ge.cursor="default"));if(g&&(ge.cursor="pointer"),t<0)return}X=t}ye("number"==w?R:n[X],"number"==w?R:X),W.currentValue!=he&&W.dispatchEvent("change"),he=W.currentValue}function ze(){W.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function ye(e,t){X=t,g&&("number"==w&&0!=e&&0<_&&(e=go.decimals(e,_,!0)),l.text=e,l.center(W)),a&&(ee.alpha=1,te.color=o,ee.cursor="pointer",oe.alpha=1,ne.color=o,oe.cursor="pointer",h||("number"==w?(X==W.min&&(0<G?be:ve)(),X==W.max&&(0<G?ve:be)()):(0==X&&(s?ve:be)(),X==n.length-1&&(s?be:ve)()))),!oe||go.OPTIMIZE||!zns&&OPTIMIZE||!oe.stage?!l||go.OPTIMIZE||!zns&&OPTIMIZE||!l.stage||l.stage.update():oe.stage.update(),W.zimAccessibility&&W.zimAccessibility.changeTitle(W,null,!0)}function be(){a&&(ee.alpha=.8,te.color="#aaa",ee.cursor="default")}function ve(){a&&(oe.alpha=.8,ne.color="#aaa",oe.cursor="default")}a&&(oe=this.containerNext=new go.Container({style:!1}),this.addChild(oe),oe.hitArea=de.clone(),ne=this.arrowNext=new go.Triangle(100,80,80,o,null,null,null,null,null,null,!1),-1!=u&&0<d&&(oe.shadow=new createjs.Shadow(u,3,3,d)),oe.addChild(ne),oe.cursor="pointer",oe.on("mousedown",function(e){if(!W.zimAccessibility||!W.zimAccessibility.aria){H=k;var t=s?O?-1:1:S?1:-1;me(t),pe(t,null,null,e.stageX/go.scaX,e.stageY/go.scaY)}}),f&&oe.on("pressup",fe),s?(oe.rotation=0,oe.x=e/2,oe.y=oe.getBounds().height/2):(oe.rotation=90,oe.x=g?ge.x+ge.getBounds().width+oe.getBounds().height/2+25:ee.x+ee.getBounds().width,oe.y=oe.getBounds().width/2)),f&&g&&ge.on("pressup",fe),A&&((re=this.prev2=new go.Container({style:!1})).hitArea=de.clone(),ie=this.arrowPrev2=new go.Triangle(100,80,80,"rgba(0,0,0,.2)",o,2,null,null,null,null,!1),re.addChild(ie),re.cursor="pointer",re.sca(P),re.alpha=.5,re.on("mousedown",function(e){if(!W.zimAccessibility||!W.zimAccessibility.aria){H=T;var t=s?S?-1:1:O?1:-1;me(t),pe(t,null,!0,e.stageX/go.scaX,e.stageY/go.scaY)}}),f&&re.on("pressup",fe),(ae=this.next2=new go.Container({style:!1})).hitArea=de.clone(),le=this.arrowNext2=new go.Triangle(100,80,80,"rgba(0,0,0,.2)",o,2,null,null,null,null,!1),ae.addChild(le),ae.cursor="pointer",ae.sca(P),ae.alpha=.5,ae.on("mousedown",function(e){if(!W.zimAccessibility||!W.zimAccessibility.aria){H=T;var t=s?S?1:-1:O?-1:1;me(t),pe(t,null,!0,e.stageX/go.scaX,e.stageY/go.scaY)}}),f&&ae.on("pressup",fe),s?(re.y=this.height/2,re.x=-re.width/2-25*Math.max(.2,Math.min(1,P)),re.rotation=270,ae.y=this.height/2,ae.x=this.width+ae.width/2+25*Math.max(.2,Math.min(1,P)),ae.rotation=90):(ae.x=this.width/2,ae.y=-ae.height/2-25*Math.max(.2,Math.min(1,P)),ae.rotation=0,re.x=this.width/2,re.y=this.height+re.height/2+25*Math.max(.2,Math.min(1,P)),re.rotation=180),this.addChild(re,ae)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){n=[];for(var e=W.min;e<=W.max;e+=Math.min(k,T))n.push(go.decimals(e,_,null,!1))}return n},set:function(e){n=e,W.selectedIndex=W.selectedIndex}}),Object.defineProperty(this,"min",{get:function(){return C},set:function(e){"number"==w?(W.currentValue<e&&(W.currentValue=e),C=e,W.selectedIndex=W.selectedIndex):C=e}}),Object.defineProperty(this,"max",{get:function(){return x},set:function(e){"number"==w?(W.currentValue>e&&(W.currentValue=e),x=e,W.selectedIndex=W.selectedIndex):x=e}}),ye("number"==w?R:n[X],"number"==w?R:X),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==w?W.stepperArray.indexOf(W.currentValue):X},set:function(e){zot(e)||("number"==w?(X=Math.min(W.stepperArray.length-1,Math.max(0,e)),ye(R=W.stepperArray[X],R)):(e=Math.min(n.length-1,Math.max(0,e)),ye(n[X=e],X)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?R:n[X]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),W.max>W.min){if(e>W.max||e<W.min)return}else if(e<W.max||e>W.min)return;if(newIndex=W.stepperArray.indexOf(e),newIndex<0)return;X=newIndex,ye(R=W.stepperArray[X],R)}else{if(!(-1<n.indexOf(e)))return;if((e=n.indexOf(e))==W.selectedIndex)return;ye(n[X=e],X)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return W.currentValue},set:function(e){String(e)!=String(W.currentValue)&&(W.currentValue=e,W.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return h},set:function(e){h=e,"number"==w?ye(R,R):ye(n[W.selectedIndex],W.selectedIndex)}}),this._enabled=!0,Object.defineProperty(W,"enabled",{get:function(){return W._enabled},set:function(e){je(W,e),e?("number"==w?ye(R,R):ye(n[W.selectedIndex],W.selectedIndex),window.addEventListener("keydown",W.keyDownEvent)):(be(),ve(),window.removeEventListener("keydown",W.keyDownEvent),g&&(l.mouseChildren=!1),g&&(l.mouseEnabled=!1)),!oe||go.OPTIMIZE||!zns&&OPTIMIZE||!oe.stage?!l||go.OPTIMIZE||!zns&&OPTIMIZE||!l.stage||l.stage.update():oe.stage.update()}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==W},set:function(e){go.KEYFOCUS=W}}),go.KEYFOCUS||ze(),this.on("mousedown",function(){ze()});var we=!1,Ce=!1,xe=!1;this.on("mousedown",function(){W.zimAccessibility&&W.zimAccessibility.aria||(W.focus=!0,xe=Ce=!(we=!0))}),this.keyDownEvent=function(e){if(W.stage&&(W.zimAccessibility&&W.focus||!W.zimAccessibility&&W.keyFocus)){var t,o=(e=e||event).keyCode;if(I&&37<=o&&o<=40){var n=O?40:38,r=S?39:37,i=O?38:40,a=S?37:39;o==n||o==r?(H=s&&o==n||!s&&o==r?k:T,me(1)):o!=i&&o!=a||(H=s&&o==i||!s&&o==a?k:T,me(-1))}if(B)if("number"==w)!e.shiftKey&&48<=o&&o<=57?t=o-48:96<=o&&o<=105?t=o-96:190==o?Ce=!0:173==o||189==o?(W.currentValue=-1*W.currentValue,W.currentValue!=he&&W.dispatchEvent("change"),he=W.currentValue,xe=!xe):46==o&&(Ce=!(we=!0)),we&&!zot(t)?(Ce&&(t/=10),xe&&(t*=-1),W.currentValue=t,we=!1,W.currentValue!=he&&W.dispatchEvent("change"),he=W.currentValue):zot(t)||(Ce&&(t=String(t/10).substr(1)),W.currentValue=Number(Math.floor(Number(l.text))+String(t)),W.currentValue!=he&&W.dispatchEvent("change"),he=W.currentValue);else W.currentValue=String.fromCharCode(e.keyCode),W.currentValue!=he&&W.dispatchEvent("change"),he=W.currentValue}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){me(1)},this.prev=function(){me(-1)},zot(E)&&(E=null!=Y.selectedIndex?Y.selectedIndex:0),W.selectedIndex=E,!1!==M&&qe(this,Y),this.clone=function(){return W.cloneProps(new go.Stepper(n,e,o,t,r,l.clone(),i,s,a,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,this.group,L))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",W.keyDownEvent),W.stage&&W.stage.off(F),o||this.zimContainer_dispose(!0),!0}},go.zut=function(e){if(zot(e)||!e.key)return!0;go.async("https://zimjs.com/gamdata.php?id="+e.key+"&player="+e.player+"&score="+e.score+"&reverse="+e.info.reverse+"&total="+e.info.total+"&allowZero="+e.info.allowZero,e.info.type)},go.extend(go.Stepper,go.Container,["clone","dispose"],"zimContainer",!1),go.Slider=function(a,l,t,s,e,o,n,c,r,i,u,d,h,g,p,f,m,z,y){var b;if(b=zob(go.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, style, group, inherit",this))return b;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=z;var v=!1===m?{}:go.getStyle(this.type,this.group,y);if(zot(a)&&(a=null!=v.min?v.min:0),zot(l)&&(l=null!=v.max?v.max:10),l-a!=0){zot(t)&&(t=null!=v.step?v.step:0),zot(e)&&(e=null!=v.barLength?v.barLength:300),zot(o)&&(o=null!=v.barWidth?v.barWidth:3),zot(n)&&(n=null!=v.barColor?v.barColor:"#666"),zot(c)&&(c=null!=v.vertical&&v.vertical),zot(r)&&(r=null!=v.useTicks&&v.useTicks),zot(i)&&(i=null!=v.inside&&v.inside),zot(u)&&(u=null==v.keyArrows||v.keyArrows),zot(h)&&(h=null==v.keyArrowsH||v.keyArrowsH),zot(g)&&(g=null==v.keyArrowsV||v.keyArrowsV),zot(d)&&(d=null!=v.keyArrowsStep?v.keyArrowsStep:(l-a)/100),zot(p)&&(p=null!=v.damp&&v.damp),zot(f)&&(f=null!=v.currentValue&&v.currentValue);var w,C,x=!(!zot(v.backing)&&"Pattern"!=v.backing.type);if(zot(s)){var k=30,T=40;c&&(k=50,T=40),s=null!=v.button?v.button:new go.Button({width:null!=v.width?v.width:k,height:null!=v.height?v.height:T,label:"",backgroundColor:null!=v.backgroundColor?v.backgroundColor:"#fff",rollBackgroundColor:null!=v.rollBackgroundColor?v.rollBackgroundColor:"#ddd",borderColor:null!=v.borderColor?v.borderColor:x?"#666":null,borderWidth:null!=v.borderWidth?v.borderWidth:x?1:null,corner:null!=v.corner?v.corner:0,backing:null!=v.backing?v.backing.clone():null,rollBacking:null!=v.rollBacking?v.rollBacking.clone():null,shadowColor:null!=v.shadowColor?v.shadowColor:null,shadowBlur:null!=v.shadowBlur?v.shadowBlur:null,hitPadding:30,style:!1})}s.rollPersist=!0,zot(v.expand)||s.expand(v.expand),c?(w=s.width,i?(C=e,this.setBounds(0,0,w,C)):(C=e+s.height,this.setBounds(-s.width/2,-s.height/2,w,C))):(C=Math.max(s.height,o),i?(w=e,this.setBounds(0,0,w,C)):(w=e+s.width,this.setBounds(-s.width/2,-s.height/2,w,C)));var A,P,B,I,S,O,E,M,j,L=this,D=a,Y=0;if(this.button=s,this.cursor="pointer",r&&0!=t){I=this.ticks=new go.Shape({style:!1}),this.addChild(I),(S=I.graphics).ss(1).s(n);var X=Math.round((l-a)/t),R=(l-a)/X;if(R!=t&&zon&&zogy("Slider() - non-divisible step ("+t+") adjusted"),t=R,i)var _=(e-(c?s.height:s.width))/Math.abs(X);else _=e/Math.abs(X)}if(c){var F=i?s.height/2:0;if(A=this.bar=new go.Rectangle(o,e,n,null,null,null,null,null,!1),zot(v.expand)?A.expand(20,0):A.expand(v.expand,0),A.centerReg(this),s.centerReg(this),B=A.getBounds(),P=new createjs.Rectangle(A.x,B.y+F,0,B.height-2*F),r&&0!=t){for(var W=0;W<=Math.abs(X);W++)S.mt(0,F+_*W).lt(20,F+_*W);I.x=A.x+15}}else{F=i?s.width/2:0;if(A=this.bar=new go.Rectangle(e,o,n,null,null,null,null,null,!1),zot(v.expand)?A.expand(0,20):A.expand(0,v.expand),A.centerReg(this),s.centerReg(this),B=A.getBounds(),P=new createjs.Rectangle(B.x+F,A.y,B.width-2*F,0),r&&0!=t){for(W=0;W<=Math.abs(X);W++)S.mt(F+_*W,0).lt(F+_*W,-20);I.y=A.y-10}}s.x=P.x,s.y=P.y,s.on("mousedown",function(e){e.target.stage,L.focus=!0;var t=L.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY);O=t.x-s.x,E=t.y-s.y,L.stage&&(L.stage.mouseMoveOutside=!0)}),s.on("pressmove",function(e){U(e)}),A.on("mousedown",function(e){e.target.stage,E=O=0,L.zimAccessibility&&L.zimAccessibility.aria||U(e)}),p&&(M=a,j=new go.Damp(M,p),L.ticker=go.Ticker.add(function(){M=j.convert(D)})),Object.defineProperty(this,"currentValue",{get:function(){return p?M:D},set:function(e){zot(e)||(a<l?(e<a&&(e=a),l<e&&(e=l)):(a<e&&(e=a),e<l&&(e=l)),D=e=q(e),j&&j.immediate(D),Y=c?(s.y=(e-l)/(a-l)*P.height+F,s.y):(s.x=(e-a)/(l-a)*P.width+F,s.x),Z(),go.OPTIMIZE||!zns&&OPTIMIZE||!L.stage||L.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return p?M:D},set:function(e){e!=L.currentValue&&(L.currentValue=e,L.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return a},set:function(e){zon&&zogy("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return l},set:function(e){zon&&zogy("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return t},set:function(e){zon&&zogy("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return g},set:function(e){g=e}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==L},set:function(e){go.KEYFOCUS=L}}),u&&!go.KEYFOCUS&&Q(),this.on("mousedown",function(){u&&Q()});var H=!1,G=!1,N=!1,V=!1;this.keyDownEvent=function(e){L.stage&&(L.zimAccessibility&&L.focus||!L.zimAccessibility&&L.keyFocus)&&(37==e.keyCode&&h?H=!0:40==e.keyCode&&g?G=!0:39==e.keyCode&&h?N=!0:38==e.keyCode&&g&&(V=!0),null==L.keyInterval&&(H||G||N||V)&&(J(),L.keyTimeout=setTimeout(function(){null==L.keyInterval&&(H||G||N||V)&&(L.keyInterval=setInterval(J,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),L.keyUpEvent=function(e){37==e.keyCode?H=!1:40==e.keyCode?G=!1:39==e.keyCode?N=!1:38==e.keyCode&&(V=!1),null==L.keyInterval||H||G||N||V||(clearInterval(L.keyInterval),L.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(L,"enabled",{get:function(){return L._enabled},set:function(e){je(L,e),e?(window.addEventListener("keydown",L.keyDownEvent),window.addEventListener("keyup",L.keyUpEvent)):(window.removeEventListener("keydown",L.keyDownEvent),window.removeEventListener("keyup",L.keyUpEvent))}}),zot(f)||(L.currentValue=f),!1!==m&&qe(this,v),this.clone=function(){return L.cloneProps(new go.Slider(a,l,t,s.clone(),e,o,n,c,r,i,u,d,h,g,p,f,m,this.group,y))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",L.keyDownEvent),window.removeEventListener("keyup",L.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Slider range must not be 0");function q(e){return 0==t?e:Math.round(e/t)*t}function U(e){var t,o,n,r=L.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY),i=(t=r.x-O,o=r.y-E,n=P,t=Math.max(n.x,Math.min(n.x+n.width,t)),o=Math.max(n.y,Math.min(n.y+n.height,o)),{x:t,y:o});Y=c?(s.x=i.x,D=q((i.y-P.y)/P.height*(a-l)),s.y=P.y+D*P.height/(a-l),D+=l,s.y!=Y&&L.dispatchEvent("change"),s.y):(D=q((i.x-P.x)/P.width*(l-a)),s.x=P.x+D*P.width/(l-a),D+=a,s.y=i.y,s.x!=Y&&L.dispatchEvent("change"),s.x),Z(),go.OPTIMIZE||!zns&&OPTIMIZE||!L.stage||L.stage.update()}function K(e){return 0<e?1:-1}function Z(){L.zimAccessibility&&L.zimAccessibility.changeTitle(L,null,!0)}function Q(){L.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function J(){(H||G)&&(L.currentValueEvent-=0<t?t*K(l-a):d*K(l-a)),(N||V)&&(L.currentValueEvent+=0<t?t*K(l-a):d*K(l-a))}},go.extend(go.Slider,go.Container,["clone","dispose"],"zimContainer",!1),go.Selector=function(l,n,r,i,a,s,c,u,d,h,g,p,f,m,z,e,t,o){var y;if(y=zob(go.Selector,arguments,"tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingHorizontal, paddingVertical, speed, diagonal, dim, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit",this))return y;z_d("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=t;var b=!1===e?{}:go.getStyle(this.type,this.group,o);zot(l)&&(l=null!=b.tile?b.tile:new go.Tile(new go.Circle(20,go.red),4,4,10,10)),zot(n)&&(n=null!=b.borderColor?b.borderColor:"white"),zot(r)&&(r=null!=b.borderWidth?b.borderWidth:2),zot(i)&&(i=null!=b.backgroundColor?b.backgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=b.corner?b.corner:10),zot(s)&&(s=null!=b.dashed&&b.dashed),zot(c)&&(c=null!=b.padding?b.padding:l.spacingH/2),zot(u)&&(u=null!=b.paddingVertical?b.paddingVertical:l.spacingV/2),zot(d)&&(d=null!=b.speed?b.speed:2),zot(h)&&(h=null!=b.diagonal&&b.diagonal),zot(g)&&(g=null!=b.dim&&b.dim),zot(p)&&(p=null==b.keyArrows||b.keyArrows),zot(f)&&(f=null!=b.behind&&b.behind),zot(m)&&(m=null!=b.resizeScale&&b.resizeScale),zot(z)&&(z=null!=b.selectedIndex?b.selectedIndex:0);var v=this,w=z,C=zot(z)||z<0?0:z,x=l.getChildAt(C);v.currentItem=l.getChildAt(C),z=w;var k=x,T=k.width+2*c,A=k.height+2*u;v.tile=l.addTo(v).cur();var P=this.selector=new Rectangle(T,A,i,n,r,a,s,{ignoreScale:!m}).centerReg(v).loc(k.x+c,k.y+u,v,f?0:1);function B(e,t){z=(x=e).tileNum,v.animating=!0;var o=l.localToLocal(e.x,e.y,v),n=Math.abs(o.x-P.x),r=Math.abs(o.y-P.y),i=t?0:d;if(h||(n+r)*i<=0?P.animate({x:o.x,y:o.y},(r+n)*i):r<=n?P.animate([{props:{x:o.x},time:Math.max(100,n*i)},{props:{y:o.y},time:Math.max(100,r*i)}]):P.animate([{props:{y:o.y},time:Math.max(100,r*i)},{props:{x:o.x},time:Math.max(100,n*i)}]),P.animate({props:{widthOnly:e.width+2*c,heightOnly:e.height+2*u},time:Math.max(200,(r+n)*i),call:function(){v.animating=!1,v.dispatchEvent("change")}}),g){if(!0===g)var a=.7;else a=go.constrain(a,0,1);l.animate({props:{alpha:a},rewind:!0,time:(r+n)*d*.7})}l.stage.update()}function I(){v.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(z<0||zot(x))&&(P.visible=!1),l.mov(c,u),this.setBounds(l.width+2*c,l.height+2*u),l.on("mousedown",function(e){P.visible=!0;for(var t=e.target,o=0;t.parent!=l&&o<10;)t=t.parent,o++;t.parent==l&&B(t)}),p&&v.added(function(){v.stage.frame.on("keydown",function(e){if(v.stage&&!v.animating&&(v.zimAccessibility&&v.focus||!v.zimAccessibility&&v.keyFocus)){var t=go.loop(l.items2D,function(e,o){var t=go.loop(e,function(e,t){if(e==x)return[t,o]});if(Array.isArray(t))return t}),o=l.items2D[t[1]].length,n=l.items2D.length;if("39"==e.keyCode){var r=(t[0]+1)%o;B(l.items2D[t[1]][r],r<t[0])}else if("37"==e.keyCode){r=(t[0]-1+o)%o;B(l.items2D[t[1]][r],r>t[0])}else if("38"==e.keyCode){r=(t[1]-1+n)%n;B(l.items2D[r][t[0]],r>t[1])}else if("40"==e.keyCode){r=(t[1]+1)%n;B(l.items2D[r][t[0]],r<t[1])}}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return z},set:function(e){zot(e)&&(v.currentItem=null),v.currentItem=l.items[e]}}),Object.defineProperty(this,"currentItem",{get:function(){return x},set:function(e){if(zot(e))return z=x=null,P.visible=!1,v.selectedCol=null,void(v.selectedRow=null);P.visible=!0,v.lastItem=x,v.lastIndex=z,v.lastCol=v.selectedCol,v.lastRow=v.selectedRow,v.selectedCol=e.tileCol,v.selectedRow=e.tileRow,zog("setting here"+e.tileNum),z=e.tileNum,x=e}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==v},set:function(e){go.KEYFOCUS=v}}),go.KEYFOCUS||I(),this.on("mousedown",function(){I()}),!1!==e&&qe(this,b),this.clone=function(e){if(e)for(var t=[],o=0;o<v.tile.items.length;o++)t.push(v.tile.items[o].clone(!0));return v.cloneProps(new go.Selector(e?series(t):obj.clone?obj.clone():obj,n,r,i,a,s,c,u,d,h,g,p,f,m,z,this.style,this.group))}},go.extend(go.Selector,go.Container,"clone","zimContainer",!1),go.Dial=function(n,r,i,e,t,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T){var A;if(A=zob(go.Dial,arguments,"min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, style, group, inherit",this))return A;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=k;var P=!1===x?{}:go.getStyle(this.type,this.group,T);if(zot(n)&&(n=null!=P.min?P.min:0),zot(r)&&(r=null!=P.max?P.max:10),r-n!=0){zot(i)&&(i=null!=P.step?P.step:1),zot(e)&&(e=null!=P.width?P.width:100),zot(t)&&(t=null!=P.backgroundColor?P.backgroundColor:"#666"),zot(o)&&(o=null!=P.indicatorColor?P.indicatorColor:"#222"),zot(a)&&(a=null!=P.indicatorScale?P.indicatorScale:1),zot(l)&&(l=null!=P.indicatorType?P.indicatorType:"arrow"),zot(s)&&(s=null==P.innerCircle||P.innerCircle),zot(c)&&(c=null!=P.innerScale?P.innerScale:.5),zot(u)&&(u=null==P.useTicks||P.useTicks),zot(d)&&(d=null!=P.innerTicks&&P.innerTicksinnerTicks),zot(h)&&(h=null!=P.tickColor?P.tickColor:o),zot(g)&&(g=null==P.limit||P.limit),zot(p)&&(p=null==P.keyArrows||P.keyArrows),zot(f)&&(f=null!=P.keyArrowsStep?P.keyArrowsStep:(r-n)/100),zot(m)&&(m=null==P.keyArrowsH||P.keyArrowsH),zot(z)&&(z=null==P.keyArrowsV||P.keyArrowsV),zot(y)&&(y=null!=P.continuous&&P.continuous),y&&(g=null!=P.limit&&P.limit),zot(w)&&(w=null!=P.damp&&P.damp),0==g&&(w=null);var B=this;this.cursor="pointer";var I=e/2,S=n,O=0,E=this.backing=new go.Circle(I,t,null,null,null,null,null,null,!1);if(this.addChild(E),s){var M=d?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=t&&"#000"!=t&&"#000000"!=t&&"#111"!=t&&"#111111"!=t||(M="#222");var j=this.inner=new go.Circle(I*c,M,null,null,null,null,null,null,!1);if(this.addChild(j),!d){var L=this.inner2=new go.Circle(I*(c-.1),"rgba(0,0,0,.1)",null,null,null,null,null,null,!1);this.addChild(L)}}var D,Y,X,R,_=Math.abs(r-n)/i;if(u&&0!=i){var F=this.ticks=new go.Container({style:!1});this.addChild(F);for(var W=0;W<(y?_:_+1);W++){var H;(H=new go.Rectangle(1,.2*I,h,null,null,null,null,null,!1)).regY=I*(d?c-.05:1.28),H.regX=.5,H.rotation=360/(y?_:_+1)*W,F.addChild(H)}}if(this.setBounds(-I,-I,e,e),"dot"==l||"circle"==l){var G=this.indicator=new go.Container({style:!1}),N=this.indicatorShape=new go.Circle(.19*I,o,null,null,null,null,null,null,!1);G.addChild(N),go.sca(G,a),G.regY=I-G.getBounds().width*a/2-.07*I}else if("line"==l||"rectangle"==l){G=this.indicator=new go.Container({style:!1}),N=this.indicatorShape=new go.Rectangle(.1*I,.3*I,o,null,null,null,null,null,null,null,!1);G.addChild(N),go.sca(G,a),G.regY=I-G.getBounds().width*a/2-.07*I,G.regX=.05*I}else{G=this.indicator=new go.Container({style:!1}),N=this.indicatorShape=new go.Triangle(.4*I,.4*I,.4*I,o,null,null,null,null,null,null,!1);G.addChild(N),go.sca(G,a),G.regY=I-G.getBounds().height*a*(d?.85:.75),d&&(N.rotation=180)}G.regY/=a,this.addChild(G);var V,q,U=0;if(y)var K=0,Z=0,Q=0,J=!1,$=!0;else 0;this.on("mousedown",function(e){if(e.target.stage,!B.zimAccessibility||!B.zimAccessibility.aria){D=G.rotation;var t=B.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY);t.x;var o=t.x-B.x,n=B.y-t.y;Y=180*Math.atan2(o,n)/Math.PI;var r=(new Date).getTime();X=B.on("pressmove",function(e){if(J){var t=B.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY),o=t.x-B.x,n=B.y-t.y;Y=180*Math.atan2(o,n)/Math.PI,D=G.rotation}o=(t=B.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY)).x-B.x,n=B.y-t.y;var r=180*Math.atan2(o,n)/Math.PI,i=D+r-Y;i=(i+36e5)%360,g&&(180<i-U?i=0:i-U<-180&&(i=359)),le(i),U=i,t.x}),R=this.on("pressup",function(e){(new Date).getTime()-r<200&&(t=B.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY),o=t.x-B.x,n=B.y-t.y,le(180*Math.atan2(o,n)/Math.PI));D=G.rotation,B.off("pressmove",X),B.off("pressup",R)})}}),w&&(V=n,q=new go.Damp(V,w),B.ticker=go.Ticker.add(function(){V=q.convert(S)})),Object.defineProperty(this,"currentValue",{get:function(){return w?V:S},set:function(e){zot(e)||(y?(J=!1,zot(b)||zot(v)?zot(b)?zot(v)||v<e&&(e=v,J=!0):e<b&&(e=b,J=!0):b<v?(e<b&&(e=b,J=!0),v<e&&(e=v,J=!0)):(b<e&&(e=b,J=!0),e<v&&(e=v,J=!0)),$&&(Q=360*Math.floor(e/(r-n)))):n<r?(e<n&&(e=g?n:r),r<e&&(e=g?r:n)):(n<e&&(e=g?n:r),e<r&&(e=g?r:n)),e=re(S=e),w&&w.immediate(S),G.rotation=360*(e-n)/(r-n+(y?0:ie(r-n)*i)),G.rotation=(G.rotation+36e5)%360,O=e-n,U=G.rotation,ae(),go.OPTIMIZE||!zns&&OPTIMIZE||!B.stage||B.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return w?V:S},set:function(e){e!=B.currentValue&&(B.currentValue=e,B.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){y?n=e:zon&&zogy("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(e){y?r=e:zon&&zogy("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return y},set:function(e){zon&&zogy("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return b},set:function(e){b=e,B.currentValue<b&&(B.currentValue=b)}}),Object.defineProperty(this,"continuousMax",{get:function(){return v},set:function(e){v=e,B.currentValue>v&&(B.currentValue=v)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zogy("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return m},set:function(e){m=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return z},set:function(e){z=e}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==B},set:function(e){go.KEYFOCUS=B}}),p&&!go.KEYFOCUS&&se(),this.on("mousedown",function(){p&&se()});var ee=!1,te=!1,oe=!1,ne=!1;this.keyDownEvent=function(e){B.stage&&(B.zimAccessibility&&B.focus||!B.zimAccessibility&&B.keyFocus)&&(37==e.keyCode&&m?ee=!0:40==e.keyCode&&z?te=!0:39==e.keyCode&&m?oe=!0:38==e.keyCode&&z&&(ne=!0),null==B.keyInterval&&(ee||te||oe||ne)&&(ce(),B.keyTimeout=setTimeout(function(){null==B.keyInterval&&(ee||te||oe||ne)&&(B.keyInterval=setInterval(ce,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),B.keyUpEvent=function(e){37==e.keyCode?ee=!1:40==e.keyCode?te=!1:39==e.keyCode?oe=!1:38==e.keyCode&&(ne=!1),null==B.keyInterval||ee||te||oe||ne||(clearInterval(B.keyInterval),B.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(B,"enabled",{get:function(){return B._enabled},set:function(e){je(B,e),e?(B.keyDownEvent=window.addEventListener("keydown",B.keyDownEvent),B.keyUpEvent=window.addEventListener("keyup",B.keyUpEvent)):(window.removeEventListener("keydown",B.keyDownEvent),window.removeEventListener("keyup",B.keyUpEvent))}}),zot(C)&&(C=null!=P.currentValue?P.currentValue:n),B.currentValue=C,!1!==x&&qe(this,P),this.clone=function(){return B.cloneProps(new go.Dial(n,r,i,e,t,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,this.group,T))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",B.keyDownEvent),window.removeEventListener("keyup",B.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Dial range must not be 0");function re(e){return 0==i?e:Math.round(e/i)*i}function ie(e){return 0<e?1:-1}function ae(){B.zimAccessibility&&B.zimAccessibility.changeTitle(B,null,!0)}function le(e){if(y){K+180<e?Q-=360:e<K-180&&(Q+=360),Z=Q+e,$=!1;var t=B.currentValue;return B.currentValue=re(Z*(r-n)/360),t!=B.currentValue&&B.dispatchEvent("change"),K=e,$=!0}var o;e<0&&(e+=360),e%=360,0!=i?(o=re((e=Math.min(e,360-360/(_+1)))/(360-360/(_+1))*(r-n)),G.rotation=o*(360-360/(_+1))/(r-n)):o=(G.rotation=e)/360*(r-n),o!=O&&(S=(O=o)+n,B.dispatchEvent("change"),go.OPTIMIZE||!zns&&OPTIMIZE||!B.stage||B.stage.update()),ae()}function se(){B.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function ce(){(ee||te)&&(B.currentValueEvent-=0<i?i*ie(r-n):f*ie(r-n)),(oe||ne)&&(B.currentValueEvent+=0<i?i*ie(r-n):f*ie(r-n))}},go.extend(go.Dial,go.Container,["clone","dispose"],"zimContainer",!1),go.Tabs=function(l,s,o,c,u,d,g,p,f,m,z,y,r,i,a,b,n,v,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,e,q){var t;if(t=zob(go.Tabs,arguments,"width, height, tabs, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, useTap, excludeCustomTap, selectedIndex, style, group, inherit",this))return t;z_d("65");var U=!1===V?{}:go.getStyle("Tabs",e,q);zot(y)&&(y=null!=U.vertical&&U.vertical);var K=!zot(l);if(zot(l)&&(l=null!=U.width?U.width:y?60:240),zot(s)&&(s=null!=U.height?U.height:y?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=e,(zot(o)||o.length<=0)&&(o=null!=U.tabs?U.tabs:[1,2,3,4]),zot(c)&&(c=null!=U.backgroundColor?U.backgroundColor:"#777"),zot(u)&&(u=null!=U.rollBackgroundColor?U.rollBackgroundColor:"#555"),zot(d)&&(d=null!=U.selectedBackgroundColor?U.selectedBackgroundColor:"#333"),zot(g)&&(g=null!=U.selectedRollBackgroundColor?U.selectedRollBackgroundColor:u),zot(p)&&(p=null!=U.color?U.color:"white"),zot(f)&&(f=null!=U.rollColor?U.rollColor:p),zot(m)&&(m=null!=U.selectedColor?U.selectedColor:p),zot(z)&&(z=null!=U.selectedRollColor?U.selectedRollColor:f),zot(k)&&(k=null!=U.backing?U.backing.clone():null),zot(T)&&(T=null!=U.rollBacking?U.rollBacking.clone():null),zot(L)&&(L=null!=U.align?U.align:"center"),zot(D)&&(D=null!=U.valign?U.valign:"center"),zot(Y)&&(Y=null!=U.labelAlign?U.labelAlign:L),zot(X)&&(X=null!=U.labelValign?U.labelValign:D),zot(W)&&(W=null!=U.indent?U.indent:10),zot(R)&&(R=null!=U.labelIndent?U.labelIndent:W),zot(_)&&(_=null!=U.labelIndentHorizontal?U.labelIndentHorizontal:R),zot(F)&&(F=null!=U.labelIndentVertical?U.labelIndentVertical:R),zot(i)&&(i=null!=U.currentEnabled&&U.currentEnabled),zot(a)&&(a=null==U.currentSelected||U.currentSelected),a||(i=!0),zot(r)&&(r=null!=U.spacing?U.spacing:1),zot(b)&&(b=null!=U.corner?U.corner:0),zot(C)&&(C=null!=U.gradient?U.gradient:null),zot(x)&&(x=null!=U.gloss?U.gloss:null),zot(n)&&(n=null!=U.base?U.base:0!=b||Array.isArray(b)?y?"left":"bottom":"none"),zot(v)&&(v=null==U.keyEnabled||U.keyEnabled),zot(H)&&(H=null!=U.useTap&&U.useTap),zot(G)&&(G=null!=U.excludeCustomTap&&U.excludeCustomTap),zot(j)&&(j=null!=U.backdropColor?U.backdropColor:null),"none"==n||0==b||Array.isArray(b))Array.isArray(b)||(b=[b,b,b,b]);else switch(n){case"bottom":b=[b,b,0,0];break;case"left":b=[0,b,b,0];break;case"top":b=[0,0,b,b];break;case"right":b=[b,0,0,b]}var Z=this;this.keyEnabled=v;var Q,J=0,$=[],ee=[],te=o.length,oe=(l-r*(te-1))/te,ne=(s-r*(te-1)-2)/te;if(!zot(j)){var re=this.backdrop=new go.Rectangle(l,s,j,null,null,null,null,null,!1);this.addChild(re)}var ie,ae=!1;function le(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?ie="string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},ie&&"TabObject"!=ie&&(ae=!0),"TabObject"):(ie&&"TabObject"==ie&&(ae=!0),"Other"):(ie&&"TabObject"!=ie&&(ae=!0),ie="TabObject",o.type="TabObject")}}le(o);for(var se,ce,ue=0,de=0,he=0;he<o.length;he++)se=o[he],y?K&&(se.width=se.width?se.width:l):(zot(se.width)&&de++,ue+=zot(se.width)?oe:se.width);if(!y)if(l-r*(te-1)<ue)for(he=0;he<o.length;he++)(se=o[he]).width=(l-r*(te-1))/ue*(zot(se.width)?oe:se.width);else if(Math.round(ue)<Math.round(l-r*(te-1))&&0<de)for(ce=(te*oe-(ue-de*oe))/de,he=0;he<o.length;he++)(se=o[he]).width=zot(se.width)?ce:se.width;function ge(e,t){for(he=0;he<e.length;he++)""!=(se=e[he])&&"TabObject"==se.type&&(zot(se.label)&&(se.label=" "),"string"!=typeof se.label&&"number"!=typeof se.label||(se.label=new go.Label({text:se.label,size:null!=U.size?U.size:y?ne/2:s/2,font:null!=U.font?U.font:null,style:!1,valign:X,inherit:t})))}ge(o);var pe=0;for(he=0;he<o.length;he++)!(se=o[he]).width&&y&&se.label.width>pe&&(pe=se.label.width);var fe=0;function me(e,t){var o=[],n=[];for(he=0;he<e.length;he++){if("TabObject"==(se=e[he]).type){var r={color:zot(se.color)?go.Pick.choose(p):se.color,rollColor:zot(se.rollColor)?go.Pick.choose(f):se.rollColor,selectedColor:zot(se.selectedColor)?go.Pick.choose(m):se.selectedColor,selectedRollColor:zot(se.selectedRollColor)?go.Pick.choose(z):se.selectedRollColor,backgroundColor:zot(se.backgroundColor)?go.Pick.choose(c):se.backgroundColor,rollBackgroundColor:zot(se.rollBackgroundColor)?go.Pick.choose(u):se.rollBackgroundColor,selectedBackgroundColor:zot(se.selectedBackgroundColor)?go.Pick.choose(d):se.selectedBackgroundColor,selectedRollBackgroundColor:zot(se.selectedRollBackgroundColor)?go.Pick.choose(g):se.selectedRollBackgroundColor,wait:zot(se.wait)?go.Pick.choose(A):se.wait};if(t)for(aStyle in t)zot(t[aStyle])||(r[aStyle]=t[aStyle]);(Q=new go.Button({width:y?zot(se.width)?K?l:pe+ne/2+b[0]/2:se.width:zot(se.width)?oe:se.width,height:y?ne:s,label:se.label,borderColor:null!=U.borderColor?U.borderColor:null,borderWidth:null!=U.borderWidth?U.borderWidth:null,backgroundColor:r.backgroundColor,rollBackgroundColor:r.rollBackgroundColor,corner:b,shadowColor:-1,gradient:C,gloss:x,backing:k?k.clone():null,rollBacking:T?T.clone():null,wait:r.wait,waitTime:zot(se.waitTime)?P:se.waitTime,waitBackgroundColor:zot(se.waitBackgroundColor)?B:se.waitBackgroundColor,rollWaitBackgroundColor:zot(se.rollWaitBackgroundColor)?I:se.rollWaitBackgroundColor,waitColor:zot(se.waitColor)?S:se.waitColor,rollWaitColor:zot(se.rollWaitBackgroundColor)?O:se.rollWaitColor,waitModal:zot(se.waitModal)?E:se.waitModal,waitEnabled:zot(se.waitEnabled)?M:se.waitEnabled,align:Y,valign:X,indentHorizontal:_,indentVertical:F,inherit:go.copy(U)})).tabInfo=r,Q.color=Q.tabInfo.color,Q.rollColor=Q.tabInfo.rollColor,Q.type="TabsButton",Q.listIndentReady=!0}else{if(se.listIndentReady)Q=se;else{(Q=new go.Container).type=se.type;for(var i=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],a=0;a<i.length;a++)se[i[a]]&&(Q[i[a]]=se[i[a]])}if((Q.content=se).checkBox&&(Q.checkBox=se.checkBox),zot(Q.tabInfo)&&(Q.tabInfo={}),G&&(Q.excludeTap=!0),Q.tabInfo.color=zot(se.color)?p:se.color,Q.tabInfo.backgroundColor=zot(se.backgroundColor)?c:se.backgroundColor,!se.listIndentReady){new go.Rectangle(Math.max(se.width,y?K?l:pe+ne/2+b[0]/2:oe),Math.max(se.height,y?ne:s),go.clear).addTo(Q).expand(0);se.center(Q),"center"!=L&&"middle"!=L&&se.pos(0,null,"right"==L),"center"!=D&&"middle"!=D&&se.pos(null,0,null,"bottom"==D)}}Q.width>fe&&(fe=Q.width),H?Q.tap(function(e){be(e.currentTarget.znum),Z.dispatchEvent("change"),go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}):Q.zimTabEvent=Q.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){be(e.currentTarget.znum),Z.dispatchEvent("change"),go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}),Q.on("mousedown",function(e){Z.buttonDown=e.currentTarget}),Q.on("pressup",function(){Z.buttonDown=null}),n.push(se.label),o.push(Q),Q.index=he}return[o,n]}var ze=me(o);function ye(){var e,t=0,o=0;for(he=0;he<ee.length;he++)(e=ee[he]).znum=he,e.selectedIndex=he,e.selectedIndex==J&&a&&(e.backgroundColor=d,e.rollBackgroundColor=g,e.color=m),$[he]&&($[he].znum=he),Z.addChild(e),y&&!K||(e.x=(l-e.width)/2,e.y=(s-e.height)/2),y?(e.y=o,o=e.y+e.height+r,"left"==L?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:W)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==L&&(e.x=(K?l:fe)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:W))):(e.x=t,t=e.x+e.width+r,"top"==D?e.y=("TabsButton"!=e.type||ae?W:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==D&&(e.y=s-e.height-("TabsButton"!=e.type||ae?W:0))),0!=he||i||(e.enabled=!1),e.enabled=!0;zot(j)||Z.removeChild(re),Z._bounds=null;var n=Z.getBounds();if(n||0==createjs.EaselJS.version[0]?n&&(w=y&&0!=n.width&&K?l:n.width,h=y&&0!=n.height?n.height:s,Z.setBounds(w,h)):(w=h=0,Z.setBounds()),zot(j)||(re.widthOnly=w,re.heightOnly=h,Z.addChildAt(re,0)),y&&!K)for(he=0;he<=ee.length;he++)"center"!=L&&"middle"!=L||(e.x=(w-e.width)/2)}function be(e){var t=ee[J];t&&a&&(t.tabInfo&&zot(t.tabInfo.wait)&&(t.tabInfo.backgroundColor&&(t.backgroundColor=t.tabInfo.backgroundColor),t.tabInfo.rollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.rollBackgroundColor),t.tabInfo.color&&t.label&&(t.color=t.tabInfo.color),t.tabInfo.rollColor&&t.label&&(t.rollColor=t.tabInfo.rollColor)),i||(t.enabled=!0)),(t=ee[J=e])&&(t.tabInfo&&zot(t.tabInfo.wait)&&a&&(t.tabInfo.selectedBackgroundColor&&(t.backgroundColor=t.tabInfo.selectedBackgroundColor),t.tabInfo.selectedRollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.selectedRollBackgroundColor),t.tabInfo.selectedColor&&t.label&&(t.color=t.tabInfo.selectedColor),t.tabInfo.selectedRollColor&&t.label&&(t.rollColor=t.tabInfo.selectedRollColor)),i||(t.enabled=!1))}function ve(){Z.keyFocus=!0;var e=document.activeElement;e&&e.blur()}ee=ze[0],$=ze[1],ye(),this.addAt=function(e,t,o){zot(t)&&(t=ee.length),t=go.constrain(t,0,ee.length),Array.isArray(e)||(e=[e]),le(e),ge(e,o);var n=me(e,o),r=n[0],i=n[1];t<=J&&(J+=r.length);var a=[t,0].concat(r);return Array.prototype.splice.apply(ee,a),a=[t,0].concat(i),Array.prototype.splice.apply($,a),ye(),Z},this.removeAt=function(e,t){if(0==ee.length)return Z;for(zot(e)&&(e=1),zot(t)&&(t=ee.length-e),(t=go.constrain(t,0,ee.length-e))<=J&&J<=t+e&&(J=-1),t+e<J&&(J-=e),he=t;he<t+e;he++)ee[he].tabInfo&&(ee[he].tabInfo.backgroundColor&&(ee[he].backgroundColor=ee[he].tabInfo.backgroundColor),ee[he].tabInfo.color&&ee[he].label&&(ee[he].color=ee[he].tabInfo.color)),H?ee[he].noTap():ee[he].off((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",ee[he].zimTabEvent),ee[he].removeFrom();return ee.splice(t,e),$.splice(t,e),ye(),Z},window.addEventListener("keydown",function(e){if(Z.keyEnabled&&Z.keyFocus&&!Z.zimAccessibility&&9==e.keyCode){var t=J;e.shiftKey?be(--t<0?o.length-1:t):be(++t>o.length-1?0:t),Z.dispatchEvent("change"),go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update(),e.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return ee[J]},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return J},set:function(e){be(e),go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return J},set:function(e){be(Math.min(Math.max(e,0),o.length-1)),go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.color:p},set:function(e){if(p=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.color=e),t==J&&a||(Z.buttons[t].color=p);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.rollColor:f},set:function(e){if(f=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.rollColor=e),Z.buttons[t].rollColor=f,t!=J&&Z.buttons[t].rolled&&(Z.buttons[t].color=f);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedColor:m},set:function(e){if(m=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedColor=e),t==J&&a&&(Z.buttons[t].color=m);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedRollColor:z},set:function(e){if(z=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedRollColor=e),t==J&&a&&Z.buttons[t].rolled&&(Z.buttons[t].color=z);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.backgroundColor:c},set:function(e){if(c=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.backgroundColor=e),t==J&&a||(Z.buttons[t].backgroundColor=c);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.rollBackgroundColor:u},set:function(e){if(u=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.rollBackgroundColor=e),Z.buttons[t].rollBackgroundColor=u,t!=J&&Z.buttons[t].rolled&&(Z.buttons[t].backgroundColor=u);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedBackgroundColor:d},set:function(e){if(d=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedBackgroundColor=e),t==J&&a&&(Z.buttons[t].backgroundColor=d);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedRollBackgroundColor:g},set:function(e){if(g=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedRollBackgroundColor=e),t==J&&a&&Z.buttons[t].rolled&&(Z.buttons[t].backgroundColor=g);go.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return $[J]},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=$[J]?$[J].text:void 0},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return ee},set:function(e){zon&&zogy("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return $},set:function(e){zon&&zogy("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(Z,"enabled",{get:function(){return Z._enabled},set:function(e){je(Z,e)}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==Z},set:function(e){go.KEYFOCUS=Z}}),v&&go.KEYFOCUS&&ve(),this.on("mousedown",function(){v&&ve()});var we=Z.getBounds();zot(we)||0==we.width?Z.setBounds(0,0,l,s):Z.width=l,zot(N)&&(N=null!=U.selectedIndex?U.selectedIndex:0),Z.selectedIndex=N,!1!==V&&qe(this,U),this.clone=function(){for(var e=go.copy(o,!0),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return Z.cloneProps(new go.Tabs(l,s,e,c,u,d,g,p,f,m,z,y,r,i,a,b,n,v,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,this.group,q))}},go.extend(go.Tabs,go.Container,"clone","zimContainer",!1),go.Pad=function(e,r,t,o,n,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O){var E;if(E=zob(go.Pad,arguments,"width, cols, rows, keys, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",this))return E;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=S;var M=!1===I?{}:go.getStyle(this.type,this.group,O);if(zot(e)&&(e=null!=M.width?M.width:150),zot(r)&&(r=null!=M.cols?M.cols:3),zot(t)&&(t=null!=M.rows?M.rows:r),zot(o))if(null!=M.keys)o=M.keys;else{o=[];for(var j=1;j<=t*r;j++)o.push(j)}zot(g)&&(g=null==M.currentEnabled||M.currentEnabled),zot(h)&&(h=null!=M.spacing?M.spacing:1);var L,D=this;this.cols=r,this.rows=t;var Y,X=e/r-h,R=[],_=0;this.labels=[],this.buttons=[];for(j=0;j<t;j++){for(var F=[],W=0;W<r;W++)F.push(null!=o[_]?o[_]:""),_++;var H=null!=M.corner?M.corner:p;H&&!Array.isArray(H)&&(H=[H,H,H,H]),Y=R[j]=new go.Tabs({width:e,height:X,tabs:F,backgroundColor:null!=M.backgroundColor?M.backgroundColor:n,rollBackgroundColor:null!=M.rollBackgroundColor?M.rollBackgroundColor:i,selectedBackgroundColor:null!=M.selectedBackgroundColor?M.selectedBackgroundColor:a,color:null!=M.color?M.color:s,rollColor:null!=M.rollColor?M.rollColor:c,selectedColor:null!=M.selectedColor?M.selectedColor:u,spacing:null!=M.spacing?M.spacing:h,currentEnabled:null!=M.currentEnabled?M.currentEnabled:g,corner:H,backing:null!=M.backing?M.backing.clone():y,rollBacking:null!=M.rollBacking?M.rollBacking.clone():b,base:null,keyEnabled:!1,gradient:null!=M.gradient?M.gradient:m,gloss:null!=M.gloss?M.gloss:z,wait:null!=M.wait?M.wait:v,waitTime:null!=M.waitTime?M.waitTime:w,waitBackgroundColor:null!=M.waitBackgroundColor?M.waitBackgroundColor:C,rollWaitBackgroundColor:null!=M.rollWaitBackgroundColor?M.rollWaitBackgroundColor:x,waitColor:null!=M.waitColor?M.waitColor:k,rollWaitColor:null!=M.rollWaitColor?M.rollWaitColor:T,waitModal:null!=M.waitModal?M.waitModal:A,waitEnabled:null!=M.waitEnabled?M.waitEnabled:P,group:S,style:!1}),this.labels=this.labels.concat(Y.labels),this.buttons=this.buttons.concat(Y.buttons),this.addChild(Y),Y.selectedIndex=-1,Y.y=(X+h)*j,Y.znum=j,Y.on("change",G)}function G(e){var t=e.target;D.selected=t.selected,D.text=t.text,D.label=t.label;for(var o=t.selectedIndex,n=0;n<R.length;n++)R[n].selectedIndex=-1;t.selectedIndex=o,L=t.znum*r+o,D.dispatchEvent("change"),go.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update()}this.tabs=R,Object.defineProperty(this,"selectedIndex",{get:function(){return L},set:function(e){L=e;for(var t=0;t<R.length;t++)R[t].selectedIndex=-1;var o=Math.floor(L/r);0<=o&&o<D.tabs.length&&(D.tabs[o].selectedIndex=L%r)}}),this._enabled=!0,Object.defineProperty(D,"enabled",{get:function(){return D._enabled},set:function(e){je(D,e)}}),zot(B)&&(B=null!=M.selectedIndex?M.selectedIndex:0),D.selectedIndex=B,!1!==I&&qe(this,M),this.clone=function(){return D.cloneProps(new go.Pad(e,r,t,o,n,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,this.group,O))}},go.extend(go.Pad,go.Container,"clone","zimContainer",!1),go.DPad=function(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,f,m){var z;if(z=zob(go.DPad,arguments,"axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",this))return z;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=f;var y=!1===p?{}:go.getStyle(this.type,this.group,m);zot(e)&&(e=null!=y.axis?y.axis:"all"),zot(o)&&(o=null!=y.width?y.width:100),zot(t)&&(t=null!=y.backgroundColor?y.backgroundColor:"#666666"),zot(r)&&(r=null!=y.borderColor?y.borderColor:null),zot(n)&&(n=null!=y.borderWidth?y.borderWidth:null),r<0||n<0?r=n=null:null!=r&&null==n&&(n=1),zot(i)&&(i=null!=y.indicatorColor?y.indicatorColor:"#dddddd"),zot(a)&&(a=null!=y.indicatorPressColor?y.indicatorPressColor:"#eeeeee"),zot(l)&&(l=null!=y.indicatorScale?y.indicatorScale:1),zot(s)&&(s=null!=y.indicatorRadius?y.indicatorRadius:null),zot(c)&&(c=null==y.innerCircle||y.innerCircle),zot(u)&&(u=null!=y.innerScale?y.innerScale:.5),zot(d)&&(d=null!=y.activeRadius?y.activeRadius:o),zot(h)&&(h=null==y.clamp||y.clamp),zot(g)&&(g=null!=y.logo&&y.logo);var b=this;this.axis=e;this.outer=new go.Circle(o/2,t,r,n).addTo(this);var v=this.inner=new go.Circle(o*u/2,"rgba(0,0,0,.2)").center(this);g&&(this.logo=new go.Label({text:"D",fontOptions:"bold"}).center(v).mov(1,2).alp(.3));var w=(new go.Container).addTo(this),C=.2*(o-n)*l,x=8;"vertical"==e?x=2:"horizontal"==e?(x=2,w.rotation=90):"both"==e&&(x=4),go.loop(x,function(e,t){new Triangle(C,C,C,i).addTo(w).reg(null,zot(s)?.475*(o-n):s).rot(360*e/t)});var k,T,A,P=0,B=0;this.on("mousedown",function(e){k=e.target.stage,A=e,w.loop(function(e){e.color=a}),b.ticker=go.Ticker.add(function(){!function(){var e=A;P=e.stageX/go.scaX,B=e.stageY/go.scaY,T=b.globalToLocal(P,B),(e=new createjs.Event("change")).dirX=2*((T.x+d)/(2*d)-.5),e.dirY=2*((T.y+d)/(2*d)-.5),h&&(e.dirX=go.constrain(e.dirX,-1,1),e.dirY=go.constrain(e.dirY,-1,1));b.dirX=e.dirX,b.dirY=e.dirY,b.dispatchEvent(e)}()})}),this.on("pressmove",function(e){A=e}),this.on("pressup",function(e){go.Ticker.remove(b.ticker),b.dirX=b.dirY=0,w.loop(function(e){e.color=i}),b.stage&&k.update()}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){je(b,e)}}),qe(this,y),this.clone=function(){return b.cloneProps(new go.DPad(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&go.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},go.extend(go.DPad,go.Container,["clone","dispose"],"zimContainer",!1),go.Radial=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,L,D,Y,X){var R;if(R=zob(go.Radial,arguments,"labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",this))return R;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=Y;var _=!1===D?{}:go.getStyle(this.type,this.group,X);zot(e)&&(e=null!=_.labels?_.labels:["A","B","C","D","E"]),zot(t)&&(t=null!=_.size?_.size:30),zot(o)&&(o=null!=_.font?_.font:"verdana"),zot(a)&&(a=null!=_.startAngle?_.startAngle:null),zot(l)&&(l=null!=_.totalAngle?_.totalAngle:360),zot(s)&&(s=null!=_.angles?_.angles:null),zot(c)&&(c=null==_.flip||_.flip),zot(u)&&(u=null!=_.shiftRadial?_.shiftRadial:0),zot(d)&&(d=null!=_.icons?_.icons:null),zot(h)&&(h=null!=_.rollIcons?_.rollIcons:null),zot(g)&&(g=null!=_.rotateIcons&&_.rotateIcons),zot(p)&&(p=null!=_.iconsShiftRadial?_.iconsShiftRadial:0),zot(n)&&(n=null!=_.height?_.height:60),zot(r)&&(r=null!=_.coreRadius?_.coreRadius:100),zot(i)&&(i=null!=_.coreColor?_.coreColor:"#333"),zot(b)&&(b=null!=_.backdropColor?_.backdropColor:go.clear),zot(f)&&(f=null!=_.backgroundColor?_.backgroundColor:"#666"),zot(m)&&(m=null!=_.rollBackgroundColor?_.rollBackgroundColor:"#777"),zot(z)&&(z=null!=_.selectedBackgroundColor?_.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=_.selectedRollBackgroundColor?_.selectedRollBackgroundColor:z),zot(v)&&(v=null!=_.color?_.color:"white"),zot(w)&&(w=null!=_.rollColor?_.rollColor:v),zot(C)&&(C=null!=_.selectedColor?_.selectedColor:v),zot(x)&&(x=null!=_.selectedRollColor?_.selectedRollColor:w),zot(k)&&(k=null!=_.borderColor?_.borderColor:"#333"),zot(T)&&(T=null!=_.borderWidth?_.borderWidth:2),zot(B)&&(B=null!=_.gapAsAngle&&_.gapAsAngle),zot(P)&&(P=null!=_.gap?_.gap:B?3:6),zot(A)&&(A=null!=_.gradient?_.gradient:null),!0===A&&(A=.1),zot(I)&&(I=null!=_.spacing?_.spacing:6),zot(S)&&(S=null!=_.spacingInner?_.spacingInner:I),zot(O)&&(O=null!=_.spacingOuter?_.spacingOuter:I),zot(E)&&(E=null!=_.currentEnabled&&_.currentEnabled),zot(M)&&(M=null==_.currentSelected||_.currentSelected);var F=this,W=this.innerRadius=r+S,H=this.outerRadius=W+n;this.setBounds(-H,-H,2*H,2*H);var G=this.backdrop=new Circle(H+O,b).center(this);if(0<r&&(this.core=new Circle(r,i).center(this)),s&&s.length<e.length-1)return zon&&zogy("Radial() - not enough angles provided"),this;if(e&&0<e.length||d&&0<d.length){var N;if(e&&0<e.length&&(N=e.length),d&&0<d.length&&(N=0<N?Math.min(d.length,N):d.length),h&&h.length<N)for(j=0;j<N-h.length;j++)h.push(new Circle(1,clear));var V=G.width,q=this.buttons=new go.Container(-V/2,-V/2,V,V).centerReg(this),U=P;B||(P=P/H*180/Math.PI,U=U/W*180/Math.PI),segmentAngle=(l-P*N+(360==l?0:P))/N;for(var K=a||0,Z=0;Z<N;Z++){s&&(segmentAngle=s[Z]);var Q=new go.Shape(-V/2,-V/2,V,V).centerReg(q);Q.num=Z,Q.zimSelected=!1,Q.angle=segmentAngle;var J=Q.graphics;Q.backgroundColor=go.Pick.choose(f),zog(Q.backgroundColor),Q.rollBackgroundColor=go.Pick.choose(m),Q.selectedBackgroundColor=go.Pick.choose(z),Q.selectedRollBackgroundColor=go.Pick.choose(y),Q.color=go.Pick.choose(v),Q.rollColor=go.Pick.choose(w),Q.selectedColor=go.Pick.choose(C),Q.selectedRollColor=go.Pick.choose(x),Q.colorCommand=J.f(Q.backgroundColor).command,(zot(T)||0<T)&&(zot(k)&&zot(T)||(zot(k)&&(k="black"),Q.borderColorCommand=J.s(k).command,Q.borderWidthCommand=J.ss(T).command));var $=(K-90-segmentAngle/2)*Math.PI/180,ee=(K-90+segmentAngle/2)*Math.PI/180,te=(K-90+(segmentAngle+P-U)/2)*Math.PI/180,oe=(K-90-(segmentAngle+P-U)/2)*Math.PI/180;if(J.arc(0,0,H,$,ee,!1),J.arc(0,0,W,te,oe,!0).cp(),A&&(J.s().ss().rf(["rgba(0,0,0,"+A+")","rgba(255,255,255,"+A+")"],[0,1],0,0,W,0,0,H),J.arc(0,0,H,$,ee,!1),J.arc(0,0,W,te,oe,!0).cp()),Q.cursor="pointer",Q.zimOverEvent=Q.on("mouseover",function(e){var t=e.target;t.colorCommand.style=t==F.selected&&M?t.selectedRollBackgroundColor:t.rollBackgroundColor,t.label&&(t.label.color=t==F.selected&&M?t.selectedRollColor:t.rollColor),h&&(t.holder.removeAllChildren(),h[t.num].loc(1,0,t.holder)),F.stage&&F.stage.update()}),Q.zimOutEvent=Q.on("mouseout",function(e){var t=e.target;t.colorCommand.style=t==F.selected&&M?t.selectedBackgroundColor:t.backgroundColor,t.label&&(t.label.color=t==F.selected&&M?t.selectedColor:t.color),h&&(t.holder.removeAllChildren(),d&&d[t.num].loc(1,0,t.holder)),F.stage&&F.stage.update()}),Q.zimDownEvent=Q.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=e.target,o=t!==F.selected;F.lastSelected=F.selected,se=t.num,M?o?(F.selected&&(F.selected.colorCommand.style=F.selected.backgroundColor,F.selected.label&&(F.selected.label.color=F.selected.color)),F.selected=t,F.label=t.label,F.label&&(F.text=F.label.text),F.icon=t.icon,t.colorCommand.style=t.selectedRollBackgroundColor,t.label&&(t.label.color=t.selectedRollColor)):E||(se=-1,F.selected=null,F.label=null,F.text=null,F.icon=null,t.colorCommand.style=t.rollBackgroundColor,t.label&&(t.label.color=t.rollColor)):(F.selected=t,F.label=t.label,F.label&&(F.text=F.label.text),F.icon=t.icon),F.dispatchEvent("change"),go.OPTIMIZE||!zns&&OPTIMIZE||!F.stage||F.stage.update()}),d&&0<d.length){var ne=W+n/2+p,re=Q.holder=new go.Container(3,ne).addTo(this).reg(1,ne).rot(K);re.mouseChildren=!1,re.mouseEnabled=!1,Q.icon=d[Z],d[Z].loc(1,0,re),g||(d[Z].rotation=-K)}if(e&&0<e.length){var ie;if("LabelOnArc"!=e[Z].type){var ae="Label"==e[Z].type?e[Z]:new Label(e[Z],t,o,v);ie=new go.LabelOnArc({label:ae,color:v,size:t,spacing:-5,flip:c&&90<K&&K<270,radius:W+(n-ae.height)/2+2+u})}else ie=e[Z];e[Z]=ie,(Q.label=ie).center(this).rot(K),ie.mouseChildren=!1,ie.mouseEnabled=!1}if(Z!=e.length-1){var le=s?s[Z+1]:segmentAngle;K+=(segmentAngle+le)/2+P}}zot(a)||(F.rotation+=F.buttons.getChildAt(0).angle/2)}var se=null;Object.defineProperty(this,"selectedIndex",{get:function(){return se},set:function(e){var t;F.buttons&&(t=F.buttons.getChildAt(e)),t!==F.selected&&(F.selected&&(F.selected.colorCommand.style=F.selected.backgroundColor,F.selected.label&&(F.selected.label.color=F.selected.color)),(F.selected=t)&&(M&&(t.colorCommand.style=t.selectedRollBackgroundColor),t.label&&(M&&(t.label.color=t.selectedColor),F.text=t.label.text))),go.OPTIMIZE||!zns&&OPTIMIZE||!F.stage||F.stage.update()}}),zot(L)&&(L=null!=_.selectedIndex?_.selectedIndex:0),F.selectedIndex=L,qe(this,_),this.clone=function(){return F.cloneProps(new go.Radial(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,L,D,this.group,X))}},go.extend(go.Radial,go.Container,"clone","zimContainer",!1),go.RadialMenu=function(e,l,s,c,r,t,o,n,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,i,S,O,E,M,a,j,L,D,Y){var X,R="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",_=R.split(", "),F=!1;if(e&&e.constructor==={}.constructor)for(var W in e)if(0<=_.indexOf(W)){F=!0;break}if(e&&F&&(X=zob(go.RadialMenu,arguments,R,this)))return X;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=D;var H=!1===L?{}:go.getStyle(this.type,this.group,Y);zot(e)&&(e=null!=H.menu?H.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(l)&&(l=null!=H.size?H.size:30),zot(s)&&(s=null!=H.font?H.font:"verdana"),zot(u)&&(u=null!=H.startAngle?H.startAngle:null),zot(d)&&(d=null!=H.totalAngle?H.totalAngle:360),zot(h)&&(h=null==H.flip||H.flip),zot(p)&&(p=null!=H.rotateIcons&&H.rotateIcons),zot(g)&&(g=null!=H.shiftRadial?H.shiftRadial:0),zot(f)&&(f=null!=H.iconsShiftRadial?H.iconsShiftRadial:0),zot(c)&&(c=null!=H.height?H.height:60),zot(r)&&(r=null!=H.coreRadius?H.coreRadius:100),zot(t)&&(t=null!=H.coreColor?H.coreColor:"#333"),zot(o)&&(o=null!=H.title?H.title:"MENU"),zot(n)&&(n=null!=H.titleIcon?H.titleIcon:null),zot(v)&&(v=null!=H.backdropColor?H.backdropColor:go.clear),zot(m)&&(m=null!=H.backgroundColor?H.backgroundColor:"#666"),zot(z)&&(z=null!=H.rollBackgroundColor?H.rollBackgroundColor:"#777"),zot(y)&&(y=null!=H.selectedBackgroundColor?H.selectedBackgroundColor:"#444"),zot(b)&&(b=null!=H.selectedRollBackgroundColor?H.selectedRollBackgroundColor:y),zot(w)&&(w=null!=H.color?H.color:"white"),zot(C)&&(C=null!=H.rollColor?H.rollColor:w),zot(x)&&(x=null!=H.selectedColor?H.selectedColor:w),zot(k)&&(k=null!=H.selectedRollColor?H.selectedRollColor:C),zot(T)&&(T=null!=H.borderColor?H.borderColor:"#333"),zot(A)&&(A=null!=H.borderWidth?H.borderWidth:2),zot(I)&&(I=null!=H.gapAsAngle&&H.gapAsAngle),zot(B)&&(B=null!=H.gap?H.gap:I?3:6),zot(i)&&(i=null!=H.spacing?H.spacing:6),zot(P)&&(P=null!=H.gradient?H.gradient:null),!0===P&&(P=.1),zot(S)&&(S=null!=H.spacingInner?H.spacingInner:i),zot(O)&&(O=null!=H.spacingOuter?H.spacingOuter:i),zot(E)&&(E=null!=H.currentEnabled&&H.currentEnabled),zot(M)&&(M=null==H.currentSelected||H.currentSelected),zot(a)&&(a=null!=H.open&&H.open),zot(j)&&(j=null==H.under||H.under);var G=this,N=(zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",V=null,q=this.core=new Circle(r,t).addTo(this);n&&(this.titleIcon=n.center(q)),o&&(this.title=new Label(o,l,s,w).center(q)),q.cursor="pointer",q.on(N,function(e){G.leafNode=!1,0==Q.length?J():(loop(Q,function(e){e.selectedIndex=-1,e.removeFrom(),Q=[]}),G.outerLevel=0,G.selected=G.outerMenu=G.selectedMenu=G.text=null),!E&&G.selected==V||G.dispatchEvent("change"),V=G.selected,G.stage&&G.stage.update()}),this.closeRings=function(e){zot(e)&&(e=G.outerLevel);var o=G.outerLevel-e;loop(Q,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,Q.pop())},!0),G.outerLevel=o,G.outerMenu=Q[Q.length-1],G.outerMenu&&(G.outerMenu.selectedIndex=-1),G.selected=G.selectedMenu=G.text=null,Q[Q.length-2]?(G.selectedMenu=Q[Q.length-2],G.selectedIndex=G.selectedMenu.selectedIndex):G.selectedIndex=-1,G.selected!=V&&G.dispatchEvent("change"),V=G.selected,G.stage&&G.stage.update()};var U,K,Z={};G.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},U=G.tree=new go.Hierarchy(e),K=U.getLinearIDs()),G.lastRadial=null;var Q=this.radials=[];function J(e){var o,t,n;e?o=e.level:(o=0,t=r),loop(Q,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,Q.pop())},!0),e&&(n=e.selected),n?(id=n.id,t=e.outerRadius,$(id,o+1,t)):e||$("id0",o+1,t),G.selected=n,G.selected?(G.selectedMenu=Q[G.selected.menu.level-1],G.selectedIndex=G.selected.num,G.selected.label?G.text=G.selected.label.text:G.text=null):E&&e?(G.selectedIndex=e.selectedIndex,G.label=e.label,G.text=e.text,G.icon=e.icon,G.selectedMenu=e):(G.text=null,G.selectedIndex=-1,G.selectedMenu=null),G.stage&&G.stage.update()}function $(e,t,o){var n;if(t&&(G.outerLevel=t),!Z[e]){var r=U.getData(e),i=r.list;if(i&&!go.isEmpty(i)){var a={labels:U.getLinearList(i),coreRadius:o,size:l,font:s,startAngle:u,totalAngle:d,flip:h,rotateIcons:p,shiftRadial:g,iconsShiftRadial:f,height:c,coreColor:clear,backdropColor:v,backgroundColor:m,rollBackgroundColor:z,selectedBackgroundColor:y,selectedRollBackgroundColor:b,color:w,rollColor:C,selectedColor:x,selectedRollColor:k,borderColor:T,borderWidth:A,gapAsAngle:I,gap:B,gradient:P,spacingInner:S,spacingOuter:O,currentSelected:M,currentEnabled:E};r.styles&&(a=merge(a,r.styles)),n=Z[e]=new Radial(a),K=U.getLinearIDs(i),n.buttons.loop(function(e,t){e.menu=n,e.id=K[t]}),n.level=G.outerLevel,n.on("change",function(e){G.leafNode=!1,J(e.target),!E&&G.selected==V||G.dispatchEvent("change"),V=G.selected})}}Z[e]?(Q.push(Z[e]),Z[e].center(G),j&&Z[e].bot()):(G.leafNode=!0,--G.outerLevel),G.outerMenu=n}a&&J(),qe(this,H),this.clone=function(){return G.cloneProps(new go.RadialMenu(e,l,s,c,r,t,o,n,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,i,S,O,E,M,a,j,L,this.group,Y))}},go.extend(go.RadialMenu,go.Container,"clone","zimContainer",!1),go.ColorPicker=function(e,o,n,r,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b){var v;if(v=zob(go.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, style, group, inherit",this))return v;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=y;var w=!1===z?{}:go.getStyle(this.type,this.group,b);zot(e)&&(e=null!=w.width?w.width:500),zot(o)&&(o=null!=w.colors?w.colors:null),zot(o)&&(O=!0),zot(n)&&(n=null!=w.cols?w.cols:10),zot(r)&&(r=null!=w.spacing?w.spacing:2);var C=!O&&0<o.length&&o.length<=n;zot(t)&&(t=null!=w.alphaPicker?w.alphaPicker:!C),zot(i)&&(i=null!=w.greyPicker?w.greyPicker:!C),zot(s)&&(s=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=w.shadowBlur?w.shadowBlur:14),zot(u)&&(u=null!=w.buttonBar?w.buttonBar:!C),zot(l)&&(l=u?null==w.draggable||w.draggable:null!=w.draggable&&w.draggable),zot(d)&&(d=null!=w.circles&&w.circles),zot(h)&&(h=null!=w.indicator&&w.indicator,u||(h=null==w.indicator||w.indicator)),zot(g)&&(g=null!=w.backgroundColor?w.backgroundColor:"black"),zot(a)&&(a=null!=w.startBackgroundColor?w.startBackgroundColor:null),zot(p)&&(p=null==w.keyArrows||w.keyArrows);var x=this;if(zot(f)){if(!zimDefaultFrame)return;f=zimDefaultFrame.stage}else{if(!f.getBounds)return;if(zot(f.getStage))return}x.container=f;var k="#e472c4",T="#50c4b7",A=1,P=1,B=new createjs.Shape;this.addChild(B),B.x+=r,B.y+=r;var I,S,O=!1,E=[];if(zot(o)){O=!0;var M=6,j=M*M*M;M=Math.ceil(Math.pow(j,.5)),S=(e-r)/18-r;var L=Math.floor(Math.pow(M*M,1/3));I=[];for(var D=0;D<6;D++)for(var Y=0;Y<6;Y++)for(var X=0;X<6;X++)I.push("#"+G(3*D)+G(3*Y)+G(3*X));for(o=[],D=0;D<I.length;D++)V=Math.floor(D/6),o[18*((N=D%6)+6*(L=18<=V?1:0))+(V-6*L*3)]=I[D];n=18,E=[T,k]}else S=(e-r)/n-r;var R,_=Math.ceil(o.length/n),F=1,W=String(o[o.length-1]);if(!zot(a)){var H=a.match(/rgba\((.*)\)/);if(H)F=(V=H[1].split(",")).pop(),a="rgb("+V.join(",")+")";W=String(a)}function G(e){return(e=Math.floor(e).toString(16))+""+e}O&&(R=T);var N,V,q,U,K=B.graphics,Z=(L=0,null!=w.borderColor?w.borderColor:null),Q=null!=w.borderWidth?w.borderWidth:null;for(!zot(Z)&&zot(Q)&&(Q=1),Q&&zot(Z)&&(Z="#333"),Q&&K.s(Z).ss(Q),D=0;D<o.length;D++)V=D%n,N=Math.floor(D/n),q=V*(S+r),U=N*(S+r),d?K.f(o[D]).dc(q+S/2,U+S/2,S/2):K.f(o[D]).r(q,U,S,S);var J=U+S+r;x.colors=o;var $=J;if(i){for(D=0;D<16;D++)E.push("#"+G(D)+G(D)+G(D));for(D=0;D<E.length;D++)V=Math.floor(D/n),q=(N=D%n)*(S+r),U=V*(S+r)+J,d?K.f(E[D]).dc(q+S/2,U+S/2,S/2):K.f(E[D]).r(q,U,S,S);J=U+S+r;var ee=n,te=Math.ceil(E.length/n)}if(x.greys=E,h){function oe(e){zot(e)||e<0?h.visible=!1:(h.visible=!0,"#000"==W||"#000000"==W||"black"==W?(h.color="#222",h.alpha=1):(h.color="black",h.alpha=.5),h.x=B.x+e%n*(S+r)+S/2,h.y=B.x+Math.floor(e/n)*(S+r)+S/2)}(h=this.indicator=d?new go.Circle(S/2*.5,null,null,null,null,null,null,null,!1):new go.Rectangle(.5*S,.5*S,null,null,null,null,null,null,!1)).alpha=.5,h.centerReg(),this.addChild(h),oe(o.indexOf(W))}if(t){var ne=new go.Container({style:!1});ne.setBounds(0,0,600,70),this.addChild(ne),ne.x=0,ne.y=J;var re=this.alphaBacking=new go.Rectangle(580,50,"#222",null,null,0,null,null,!1);ne.addChild(re),go.centerReg(re,ne);var ie=this.alphaBut=new go.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),ae=this.alphaSlider=new go.Slider({min:0,max:1,step:.05,button:ie,barLength:330,barWidth:2,barColor:"#999",vertical:!1,useTicks:!1,inside:!1,style:!1});ae.currentValue=zot(F)?1:F,ne.addChild(ae),ae.x=40,ae.y=ne.height/2;var le=this.alphaText=new go.Label({text:"Alpha: "+go.decimals(F),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});ne.addChild(le),le.x=ae.x+ae.bar.width+40,le.y=ne.height/2-le.height/2,ne.scaleX=ne.scaleY=e/600,ae.on("change",function(){le.text="Alpha: "+Pe(ae.currentValue),pe&&(pe.alpha=P=ae.currentValue),u?x.dispatchEvent("set"):x.dispatchEvent("change"),x.stage&&x.stage.update()}),J+=ne.height-10}if(u){var se=new go.Container({style:!1});se.setBounds(0,0,600,100),this.addChild(se),se.x=0,se.y=J+10;var ce=this.swatchText=new go.Label({align:"center",text:W.toUpperCase(),labelWidth:120,labelHeight:50,size:30,color:"orange",rollColor:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(se.addChild(ce),go.centerReg(ce),ce.x=90,ce.y=48,l){var ue=this.grip=new go.Shape({style:!1});se.addChild(ue),ue.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),ue.x=70,ue.y=65,ce.y=40,ue.mouseEnabled=!1}var de=this.closeBut=new go.Button({width:90,height:90,label:"X",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1});se.addChild(de),de.x=600-de.width-10,de.y=0,de.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){x.dispatchEvent("close")});var he=this.okBut=new go.Button({width:150,height:90,label:"OK",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1});se.addChild(he),he.x=de.x-he.width-10,he.y=0,he.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",be);var ge=this.swatchBacking=new go.Shape({style:!1});se.addChild(ge),(K=ge.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ge.x=he.x-150-10,ge.y=0;var pe=this.swatch=new go.Rectangle(150,90,W,null,null,null,null,null,!1);se.addChild(pe),pe.x=ge.x,pe.y=0,pe.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",be),pe.cursor="pointer",pe.alpha=P=F,se.scaleX=se.scaleY=e/600,J+=se.height}else B.cursor="pointer";t||u||(J-=10-r);var fe=J+10;this.setBounds(0,0,e,fe);var me,ze,ye=this.background=new go.Rectangle(e,fe,g,null,null,null,null,null,!1);function be(){if(W!=R||P!=A){if(O&&i){var e=[T=k,k=R];for(D=0;D<2;D++){var t=B.graphics;V=Math.floor(D/n),q=(N=D%n)*(S+r),U=V*(S+r)+$,E[D]=e[D],t.f(ye.color).r(q-1,U-1,S+2,S+2).f(e[D]).r(q,U,S,S)}go.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}R=W,A=P,x.dispatchEvent("change")}else x.dispatchEvent("close")}this.addChildAt(ye,0),-1!=s&&0<c&&(ye.shadow=new createjs.Shadow(s,8,8,c)),l&&(ye.on("mousedown",function(e){e.target.stage,me=e.stageX/go.scaX-x.x,ze=e.stageY/go.scaY-x.y,ye.cursor="move"}),ye.on("pressmove",function(e){x.x=e.stageX/go.scaX-me,x.y=e.stageY/go.scaY-ze,x.stage&&x.stage.update()}),ye.on("pressup",function(e){ye.cursor="default",x.stage&&x.stage.update()}));var ve,we=n*(S+r),Ce=_*(S+r);if(i)var xe=ee*(S+r),ke=te*(S+r);function Te(){x.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Ae(){x.zimAccessibility&&x.zimAccessibility.changeTitle(x,null,!0)}function Pe(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}B.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=go.hitTestGrid(B,we,Ce,n,_,e.stageX,e.stageY,0,0,r,r);zot(t)||(W=o[t],u?(pe.color=W,ce.text=String(o[t]).toUpperCase(),W!=R&&x.dispatchEvent("set")):be()),i&&(t=null,zot(t=go.hitTestGrid(B,xe,ke,ee,te,e.stageX,e.stageY,0,Ce,r,r))||(W=E[t],u?(pe.color=W,ce.text=E[t].toUpperCase(),W!=R&&x.dispatchEvent("set")):be())),h&&oe(o.indexOf(W)),u?x.stage&&x.stage.update():h&&x.stage&&x.stage.update(),Ae()}),Object.defineProperty(this,"selectedColor",{get:function(){return W},set:function(e){e=e.toUpperCase(),R=W=e,u&&(pe.color=W,ce.text=W,x.stage&&x.stage.update()),h&&oe(o.indexOf(W)),Ae()}}),Object.defineProperty(this,"currentValue",{get:function(){return W},set:function(e){x.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return W},set:function(e){e!=x.selectedColor&&(x.selectedColor=e,x.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(W)},set:function(e){R=W=o[e],u&&(pe.color=W,ce.text=W,x.stage&&x.stage.update()),h&&oe(o.indexOf(W)),Ae()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return t?Pe(ae.currentValue):1},set:function(e){t&&(A=ae.currentValue=e,pe&&(pe.alpha=A),le&&(le.text="Alpha: "+Pe(ae.currentValue)),x.stage&&x.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return i?o.concat(E):o},set:function(e){zon&&zogy("ColorPicker() colors is read only - make a new ColorPicker to change")}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==x},set:function(e){zns?go.KEYFOCUS=x:KEYFOCUS=x}}),p&&go.KEYFOCUS&&Te(),this.on("mousedown",function(){p&&Te()}),this.keyDownEvent=function(e){if(x.stage&&(x.zimAccessibility&&x.focus||!x.zimAccessibility&&x.keyFocus)){var t=x.selectedIndex;function o(){t<0&&(t=x.colors.length-1),t>x.colors.length-1&&(t=0),x.selectedIndex=t,x.dispatchEvent("change"),x.stage&&x.stage.update()}37==e.keyCode||40==e.keyCode?(t--,o()):38!=e.keyCode&&39!=e.keyCode||(t++,o())}},window.addEventListener("keydown",this.keyDownEvent),this.hide=function(){if(x.removeFrom(),x.toggled=!1,x.zimAccessibility){var e=x.zimAccessibility;e.resize(x),ve?ve.focus():x.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50)}return x},this.show=function(){if(x.center(x.container),x.zimAccessibility){var e=x.zimAccessibility;setTimeout(function(){e.activatedObject&&(ve=e.activatedObject.zimTabTag)},50),e.resize(x),e.tabIndex=x.zimTabIndex}return x.toggled=!0,x},this.toggle=function(e){return!0===e?x.show():!1===e||x.container.contains(x)?x.hide():x.show(),x},zot(m)&&(m=null!=w.selectedIndex?w.selectedIndex:0),x.selectedIndex=m,!1!==z&&qe(this,w),this.clone=function(){return x.cloneProps(new go.ColorPicker(e,O?null:o,n,r,i,t,a,l,s,c,u,d,h,g,p,f,m,z,this.group,b))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",x.keyDownEvent),ae&&ae.dispose(),o||this.zimContainer_dispose(!0),!0}},go.extend(go.ColorPicker,go.Container,["clone","dispose"],"zimContainer",!1),go.Keyboard=function(n,f,m,r,i,a,l,t,z,y,b,o,v,s,c,u,d,h,g,p,w,C,x,k,e,T){var A;if(A=zob(go.Keyboard,arguments,"labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl, hardKeyboard, style, group, inherit",this))return A;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=e;var P=!1===k?{}:go.getStyle(this.type,this.group,T);zot(n)&&(n=null!=P.labels?P.labels:[]),Array.isArray(n)||(n=[n]),zot(f)&&(f=null!=P.backgroundColor?P.backgroundColor:"#333"),zot(m)&&(m=null!=P.color?P.color:"white"),zot(r)&&(r=null!=P.shiftBackgroundColor?P.shiftBackgroundColor:"orange"),zot(i)&&(i=null!=P.shiftHoldBackgroundColor?P.shiftHoldBackgroundColor:"red"),zot(a)&&(a=null!=P.placeBackgroundColor?P.placeBackgroundColor:"#50c4b7"),zot(l)&&(l=null!=P.placeColor?P.placeColor:m),zot(t)&&(t=null!=P.cursorColor?P.cursorColor:"#50c4b7"),zot(z)&&(z=null!=P.shadeAlpha?P.shadeAlpha:.2),zot(y)&&(y=null!=P.borderColor?P.borderColor:"rgba(0,0,0,.1)"),zot(b)&&(b=null!=P.borderWidth?P.borderWidth:null),y<0||b<0?y=b=null:null!=y&&null==b&&(b=1),zot(o)&&(o=null!=P.margin?P.margin:5),zot(v)&&(v=null!=P.corner?P.corner:30),zot(s)&&(s=null!=P.draggable&&P.draggable),zot(c)&&(c=null==P.placeClose||P.placeClose),zot(u)&&(u=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.2)"),zot(d)&&(d=null!=P.shadowBlur?P.shadowBlur:14),zot(g)&&(g=null!=P.data?P.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC"]]]);var B=this;B.data=g,zot(p)&&(p=null==P.place||P.place),zot(C)&&(C=null!=P.rtl&&P.rtl),zot(x)&&(x=null==P.hardKeyboard||P.hardKeyboard);var I="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(h)){if(!zimDefaultFrame)return void zog(I);h=zimDefaultFrame.stage}else{if(!h.getBounds)return void zog(I);if(zot(h.stage))return void zog("zim display - Keyboard(): The container must have a stage property")}-1!=u&&0<d&&(B.shadow=new createjs.Shadow(u,3,3,d));var S,O=zimDefaultFrame?zimDefaultFrame.stage:null;B.labels=n;var E=["@","",".","/","away"];zot(w)||E.splice(1,0,w);var M=go.copy(g[0]);M[3]=M[3].concat(E);var j=go.copy(g[1]);j[3]=j[3].concat(E);var L=go.copy(g[2]);L[3]=L[3].concat(E);var D,Y,X,R,_,F,W,H,G,N,V,q,U=["","","","","","",""],K=["","","","",""],Z=["","","","","",""],Q=["","","","","","","",""],J=["","","","","","","",""],$=["",""],ee=[],te=95.5,oe={def:"default",shift:"shift",number1:"number1",number2:"number2"},ne=oe.def,re=!1,ie=0,ae=[];function le(e){var t,o=!1;if(ne===oe.def){for(R.color=e?i:r,t=0;t<ee.length-6-(zot(w)?0:1);t++){0<(n=ee[t]).label.text.length&&(1===n.name.length?(n.label.text=n.label.text.toUpperCase(),n.label.centerReg(n).mov(0,6)):n.label.centerReg(n))}e||(o=!0,go.timeout(500,function(){o&&(re=!0,R.color=i,D.updateCache(),B.stage.update())}),q=B.on("pressup",function(e){B.off("pressup",q),o=!1})),ne=oe.shift}else{for(R.color=f,re=!1,t=0;t<ee.length-6;t++){var n;0<(n=ee[t]).label.text.length&&(1===n.name.length?(n.label.text=n.label.text.toLowerCase(),n.label.centerReg(n).mov(0,3)):n.label.centerReg(n))}ne=oe.def}D.updateCache(),B.stage.update()}function se(e){var t,o,n,r,i,a,l,s=0,c=0,u=!1,d=!1;zot(e)&&(e=oe.def),e===oe.def?t=M:e===oe.number1?t=j:e===oe.number2&&(t=L),D=new go.Container(1e3,430,null,null,!1).addTo(B);for(var h=0;h<t.length;h++){(h<=1||e==oe.def&&2==h&&"shift"!=t[2][0])&&(s=(te/2+2.5)*(10-t[h].length));for(var g=0;g<t[h].length;g++){if(a=null,d=u=!1,"backspace"==t[h][g]?(a=H,d=i=!0):"shift"==t[h][g]?(i=!0,a=W):(3==h||e!=oe.def&&2==h)&&0==g?d=i=!0:""==t[h][g]?u=!(i=!1):"away"==t[h][g]?(a=G,d=i=!0):i=!1,r=i?1.5*te+2.5:u?(te+5)*(zot(w)?4:3)-5:te,n=new go.Rectangle(r,te,f,y,b,v,null,null,!1).cur().addTo(D),d&&n.addChild(new go.Rectangle(r,te,"black",null,null,v,null,null,!1).alp(z)),n.label=o=a?new go.Label({text:"",backgroundColor:"ignore",font:null!=P.font?P.font:null,style:!1}):new go.Label({lineWidth:10,lineHeight:25,font:null!=P.font?P.font:null,text:t[h][g],color:m,align:"center",style:!1}),a){var p=a.clone();p.scaleTo(n,70,70),p.centerReg(n)}l?(l=!1,s+=67.33):(o.centerReg(n).mov(0,isNaN(o.text)?3:7),n.x=s,n.y=c,n.name=t[h][g],2==h&&0==g&&e==oe.number1&&(n.toggle="1/2"),2==h&&0==g&&e==oe.number2&&(n.toggle="2/2"),3==h&&0==g&&e==oe.def&&(n.toggle="?123"),3==h&&0==g&&e!=oe.def&&(n.toggle="ABC"),n.toggle&&o.mov(0,3),ee.push(n),"shift"==n.name&&(R=n),s=n.x+n.width+5)}c+=te+5,s=0}D.cache(b?-b:0,b?-b:0,b?D.width+2*b:D.width,b?D.height+2*b:D.height)}function ce(){B.mouseYAmount&&(B.y=B.parent.globalToLocal(0,B.mouseYAmount-V).y)}function ue(){O.off("pressmousemove",B.tickerMouseEvent),go.Ticker.remove(ce)}function de(){if(_&&X){for(var e=_.label.x+_.label.getBounds().x,t=0;t<ie;t++)e+=_.widthArray[t]?_.widthArray[t]:0;X.heightOnly=_.getBounds().height*(_.backing&&zot(_.padding)?.9:1)-(_.paddingVertical&&_.background?2*_.paddingVertical:0),X.center(_),X.x=e}}function he(){if(F)return B;if(!_)return B;var e,t,o,n=c?["<",">","x"]:["<",">"];ae=[],o=_.localToLocal(0,0,B),F=new go.Container({style:!1}).addTo(B).pos({x:o.x,y:o.y+_.height+15,reg:!0}).cur();for(var r=0;r<n.length;r++)e=new go.Rectangle(te,te,a,y,b,v,null,null,!1),"x"==n[r]&&new go.Rectangle(te,te,"black",null,null,v,null,null,!1).alp(z).addTo(e),(t=new go.Label({lineWidth:10,text:n[r],backing:e,font:null!=P.font?P.font:null,color:l,align:"center",valign:"center",style:!1}).addTo(F).cache()).x=r*(te+5),ae.push(t);o=_.localToLocal(0,0,B),F.x=o.x,F.y=o.y+_.height+15,F.on("click",function(e){0==ae.indexOf(e.target)?0<ie&&ie--:1==ae.indexOf(e.target)?ie<_.text.length&&ie++:ge();de()}),B.stage.update()}function ge(){if(!F)return B;F.removeAllEventListeners(),B.removeChild(F),F=null}function pe(e){if(_){var t,o;if("del"===e)_&&(_.text=[_.text.slice(0,ie-1),_.text.slice(ie)].join("")),ie--,me();else{ne===oe.shift&&(e=e.toUpperCase());var n=_.text;(t=_.clone().removeFrom()).text=e,o=t.label.getMeasuredWidth(),_.widthArray?_.widthArray.splice(ie,0,o):_.widthArray=[_.breedte],ie<_.text.length?_.text=[_.text.slice(0,ie),e,_.text.slice(ie)].join(""):_.text+=e,_&&_.label.getBounds().width<S?(ie++,de()):_.text=n}ne!==oe.shift||re||(B.removeChild(D),se(),ne=oe.def),de();var r=new createjs.Event("keydown");r.letter=e,B.dispatchEvent(r),B.stage.update()}}function fe(e){if(B.stage){var t,o=0,n=!1;(_=e.target).widthArrayCheck||me(),S=_.label.lineWidth?_.label.lineWidth:1e4,(t=_.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY)).x-=_.label.x,t.y-=_.label.y;for(var r=0;r<_.widthArray.length;r++)if(o+=_.widthArray[r],t.x<o-_.widthArray[r]/2+_.label.getBounds().x){ie=r,n=!0;break}n||(ie=_.text.length),de(),p&&!F&&0<_.text.length&&he(),F&&_&&(0<_.text.length?(t=_.localToLocal(0,0,B),F.x=t.x,F.y=t.y+_.height+15):ge())}}function me(){if(_){var e;_.widthArray=[];for(var t=0;t<_.text.length;t++)(e=_.clone().removeFrom()).text=_.text[t],_.widthArray.push(e.label.getMeasuredWidth());_.widthArrayCheck=!0,de()}}function ze(e){var t,o=!0;function n(){_&&0<_.text.length?(0<B.selectedIndex&&pe("del"),e?r():B.on("pressup",r)):pe("del")}function r(){o=!1,t&&t.clear(),B.off("pressup",r)}n(),t=go.timeout(300,function e(){(!_||_.text.length<1||0==B.currentIndex)&&(o=!1),o&&(n(),t=t&&go.timeout(200,e)),_&&_.text.length<1&&r()}),B.stage.update()}function ye(){for(var e=0;e<n.length;e++)n[e].clickEvent=n[e].on("click",fe)}function be(){if(1<n.length)for(var e=0;e<n.length;e++)n[e].off("click",n[e].clickEvent)}function ve(){if(!X&&(_=n[0],S=_&&_.label.lineWidth?_.label.lineWidth:1e4,_)){(X=new go.Rectangle(3,_.height-(_.paddingVertical&&_.background?2*_.paddingVertical:0),t,null,null,null,null,null,!1).center(_)).x=0,X.visible=!1,X.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst"});for(var e=0;e<n.length;e++)n[e].widthArray=[0];me()}}function we(){go.stopAnimate("knipperTekst"),_&&_.removeChild(X),_=X=null}!function(){(W=new go.Shape({style:!1})).graphics.f(m).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),W.setBounds(-25.5,-36,51,72),H=new go.Container({style:!1});var e=new go.Shape({style:!1});e.graphics.f(m).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),e.setTransform(82.6,32),e.addTo(H);var t=new go.Shape({style:!1});t.graphics.f(m).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),t.setTransform(62.2,32),t.addTo(H),H.setBounds(0,0,125,64),(G=new go.Container({style:!1})).setBounds(0,0,147,86);for(var o,n=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],r=0;r<n.length;r++)(o=new go.Shape({style:!1})).graphics.f(m).s().p(n[r].p),o.setTransform(n[r].transform[0],n[r].transform[1]),o.addTo(G)}(),se(ne),s&&function(){N=new go.Rectangle(1.5*te+2.5+2.5,te,f,y,b,v,null,null,!1).addTo(B,0).cur();for(var e=0;e<4;e++)new go.Rectangle(.4*N.width,4,m,null,null,null,null,null,!1).centerReg(N).alp(.2).y-=15*e-22;N.x=8.5*te+40,N.y=-te-5,N.name="drag"}(),this.on("mousedown",function(e){O=B.stage,Y&&B.removeChild(Y);F&&ae.indexOf(e.target)<0&&ge();zot(e.target.name)||(s&&e.target===N?(B.tickerMouseEvent=O.on("stagemousemove",function(e){B.mouseYAmount=e.stageY}),go.Ticker.add(ce),B.on("pressup",ue),V=e.stageY-B.localToGlobal(0,0).y):zot(w)||e.target.name!==w?"shift"===e.target.name?le():"?123"===e.target.toggle?(B.removeChild(D),se(oe.number1)):"ABC"===e.target.toggle?(B.removeChild(D),ne=oe.def,se(),re&&le(!0)):"1/2"===e.target.toggle?(B.removeChild(D),se(oe.number2)):"2/2"===e.target.toggle?(B.removeChild(D),se(oe.number1)):"away"===e.target.name?(B.hide(),B.dispatchEvent("close")):"e"===e.target.name||"u"===e.target.name||"i"===e.target.name||"o"===e.target.name||"a"===e.target.name||"n"===e.target.name?function(t){var a,l,s=!1,c=!1;switch(t){case"e":a=U;break;case"u":a=K;break;case"i":a=Z;break;case"o":a=Q;break;case"a":a=J;break;case"n":a=$}l=go.timeout(500,function(){var e,t,o,n,r=0;if(l.clear(),!s){c=!0,(Y=new go.Container(1e3,te,null,null,!1).addTo(B,0)).y=-te-5;for(var i=0;i<a.length;i++)n=ne===oe.shift?a[i].toUpperCase():a[i],e=new go.Label({lineWidth:10,lineHeight:25,text:n,font:null!=P.font?P.font:null,color:m,align:"center",style:!1}),t=new go.Rectangle(te,te,f,y,b,v,null,null,!1).addTo(Y),o=new go.Rectangle(te,te,"white",null,null,v,null,null,!1).alp(.2),t.addChild(o),e.center(t),t.name=a[i],t.x=r,r+=te+5;B.stage.update()}});var o=B.on("pressup",function(e){s=!0,B.off("pressup",o),c||pe(t)})}(e.target.name):"return"===e.target.name?pe("\n"):"backspace"===e.target.name?ze():""===e.target.name?pe(" "):pe(e.target.name):B.dispatchEvent("special"),O.update())}),B.addChar=function(e){!zot(e)&&e.match(/^.$/)&&pe(e)},B.removeChar=function(){ze(!0)},ye(),ve(),Object.defineProperty(this,"selectedLabel",{get:function(){return _},set:function(e){fe({target:e}),B.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ie},set:function(e){ie=e,de()}}),this.show=function(e){B.addTo(h),zot(e)||fe({target:n[e]});return X&&(X.visible=!0),B.toggled=!0,B},this.hide=function(){return B.removeFrom(h),X&&(X.visible=!1),O.update(),B.toggled=!1,B},this.toggle=function(e){return!0===e?B.show():!1===e||B.parent?B.hide():B.show(),B},this.showPlace=function(){return he(),B},this.hidePlace=function(){return ge(),B},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--){0<=n.indexOf(e[t])||"Label"!=e[t].type?e.splice(t,1):e[t].widthArray=[0]}return be(),n=n.concat(e),ye(),ve(),X&&(X.visible=!0),B},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),be();for(var t=0;t<e.length;t++){var o=n.indexOf(e[t]);0<=o&&n.splice(o,1)}return ye(),0==n.length?_&&we():_&&-1==n.indexOf(_)&&(we(),ve()),B};var Ce=new go.Rectangle(this.width,this.height,go.clear,null,null,null,null,null,!1).addTo(this).expand().bot();Ce.on("mousedown",function(){}),Ce.on("click",function(){}),this.resize=function(){return B.scaleTo(O,100-2*o/O.width*100,50-2*o/O.height*100),B.y=O.height-B.height-o,B.x=O.width/2-B.width/2,_&&F&&(point=_.localToLocal(0,0,B),F.x=point.x,F.y=point.y+_.height+15),B.stage&&B.stage.update(),B},this.resize(),B.selectedLabel&&(B.selectedIndex=B.selectedLabel.text.length),x&&(this.keydownEvent=window.addEventListener("keydown",function(e){if(B.stage){var t=B;zot(t)||(35==e.keyCode&&(t.selectedIndex=t.selectedLabel.text.length),36==e.keyCode&&(t.selectedIndex=0),37==e.keyCode&&(t.selectedIndex=t.selectedIndex-1),39==e.keyCode&&(t.selectedIndex=t.selectedIndex+1),46==e.keyCode&&t.selectedIndex<t.selectedLabel.text.length&&(t.selectedIndex=t.selectedIndex+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),B.stage&&B.stage.update())}})),!1!==k&&qe(this,P),this.clone=function(){var e=new go.Keyboard(n,f,m,r,i,a,t,z,o,v,s,c,u,d,h,g,p,w,C,x,k,this.group,T);return B.cloneProps(e)},this.dispose=function(e,t,o){return Ce.removeAllEventListeners(),B.keydownEvent&&window.removeEventListener("keydown",B.keydownEvent),B.zimContainer_dispose(),!0}},go.extend(go.Keyboard,go.Container,"clone, dispose","zimContainer",!1),go.Organizer=function(e,t,r,o,i,a,l,s,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A){var P;if(P=zob(go.Organizer,arguments,"width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",this))return P;z_d("67.3"),this.group=T;var B=!1===k?{}:go.getStyle("Organizer",this.group,A);if(zot(e)&&(e=null!=B.width?B.width:t&&t.vertical?t.width:300),zot(r)&&(r=null==B.useAdd||B.useAdd),zot(o)&&(o=null==B.useRemove||B.useRemove),zot(i)&&(i=null==B.usePosition||B.usePosition),zot(a)&&(a=null!=B.autoAdd?B.autoAdd:r),zot(l)&&(l=null!=B.autoRemove?B.autoRemove:o),zot(s)&&(s=null!=B.autoPosition?B.autoPosition:i),zot(n)&&(n=null==B.addForward||B.addForward),zot(c)&&(c=null==B.removeForward||B.removeForward),zot(u)&&(u=null!=B.backgroundColor?B.backgroundColor:"#777"),zot(d)&&(d=null!=B.rollBackgroundColor?B.rollBackgroundColor:"#555"),zot(h)&&(h=null!=B.selectedBackgroundColor?B.selectedBackgroundColor:"#333"),zot(p)&&(p=null!=B.color?B.color:"white"),zot(f)&&(f=null!=B.rollColor?B.rollColor:p),zot(m)&&(m=null!=B.selectedColor?B.selectedColor:p),zot(z)&&(z=null!=B.selectedRollColor?B.selectedRollColor:p),zot(y)&&(y=null!=B.spacing?B.spacing:1),zot(b)&&(b=null!=B.corner?B.corner:0),zot(w)&&(w=null!=B.gradient?B.gradient:.2),zot(C)&&(C=null!=B.gloss?B.gloss:null),zot(x)&&(x=null!=B.backdropColor?B.backdropColor:null),Array.isArray(b)||(b=[b,b,b,b]),r||i||o){var I=(e+y)/((r?1:0)+(i?4:0)+(o?1:0)),S={width:I,height:I,label:"",shadowColor:-1,gradient:w,corner:b,backgroundColor:u,rollBackgroundColor:d},O=this.buttons=[],E=new go.Shape;if(E.graphics.f(p).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),r&&O.push(new go.Button({icon:E.sca(.55).rot(-45).reg(1),inherit:S})),i){var M=new go.Shape;M.graphics.f(p).p("AiJieIETCeIkTCfg"),O.push(new go.Button({icon:M.sca(.6).rot(t&&!t.vertical?180:-90).reg(-2),inherit:S})),O.push(new go.Button({icon:M.clone().sca(.6).rot(t&&!t.vertical?0:90).reg(-2),inherit:S}));var j=new go.Shape;j.graphics.f(p).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),O.push(new go.Button({icon:j.sca(.62).rot(t&&!t.vertical?0:90).reg(0),inherit:S})),O.push(new go.Button({icon:j.clone().sca(.62).rot(t&&!t.vertical?180:-90).reg(0),inherit:S}))}o&&O.push(new go.Button({icon:E.clone().rot(0).sca(.55),inherit:S})),0==O.length&&(O=[""]),this.zimTabs_constructor(e,I,O,u,d,h,g,p,f,m,z,!1,y,!0,!1,b,null,!0,w,C,null,null,null,null,null,null,null,null,null,null,x);var L=this;L.list=t,L.type="Organizer";var D=!(L.setButtons=function(){if(i){var e=r?1:0;O[0+e]&&(O[0+e].icon.rotation=L.list&&!L.list.vertical?180:-90),O[1+e]&&(O[1+e].icon.rotation=L.list&&!L.list.vertical?0:90),O[2+e]&&(O[2+e].icon.rotation=L.list&&!L.list.vertical?0:90),O[3+e]&&(O[3+e].icon.rotation=L.list&&!L.list.vertical?180:-90)}}),Y=t;L.change(function(e){(!D&&L.list||L.list&&L.list!=Y)&&(L.list!=Y&&Y&&Y.noChange(),L.list.change(function(e){L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex}),D=!0,Y=L.list);var t=e.target.selectedIndex;r||t++,i||r&&!(0<t)||(t=5);var o=zot(L.list.selectedIndex)||L.list.selectedIndex<0;switch(o&&(L.currentValue=null),L.lastIndex=L.list.selectedIndex,t){case 0:if(a){var n=Math.max(0,L.list.selectedIndex);L.add(n)}L.orgType="add";break;case 1:if(o)break;if(s){n=L.list.selectedIndex;L.up(n)}L.orgType="up";break;case 2:if(o)break;if(s){n=L.list.selectedIndex;L.down(n)}L.orgType="down";break;case 3:if(o)break;if(s){n=L.list.selectedIndex;L.toTop(n)}L.orgType="top";break;case 4:if(o)break;if(s){n=L.list.selectedIndex;L.toBottom(n)}L.orgType="bottom";break;case 5:if(o)break;if(l){n=L.list.selectedIndex;L.remove(n)}L.orgType="remove"}}),this.add=function(e,t,o){if(zot(e)&&(e=L.lastIndex),zot(t)&&(t=""),n)e=Math.min(L.list.length,Math.max(0,L.list.selectedIndex)+1);else e=Math.max(0,L.list.selectedIndex);L.list.addAt(t,e,o),L.list.selectedIndexPlusPosition=e,L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex},this.up=function(e){zot(e)&&(e=L.lastIndex);var t=L.list.items[e];zot(t)||(L.list.removeAt(1,e),L.list.addAt(t,e-1),L.list.selectedIndexPlusPosition=Math.max(0,e-1),L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex)},this.down=function(e){zot(e)&&(e=L.lastIndex);var t=L.list.items[e];zot(t)||(L.list.removeAt(1,e),L.list.addAt(t,e+1),L.list.selectedIndexPlusPosition=Math.min(L.list.length-1,e+1),L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex)},this.toTop=function(e){zot(e)&&(e=L.lastIndex);var t=L.list.items[e];zot(t)||(L.list.removeAt(1,e),L.list.addAt(t,0),L.list.first(),L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex)},this.toBottom=function(e){zot(e)&&(e=L.lastIndex);var t=L.list.items[e];zot(t)||(L.list.removeAt(1,e),L.list.addAt(t,L.list.length),L.list.last(),L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex)},!(this.remove=function(e){zot(e)&&(e=L.lastIndex),L.removedItem=L.list.selected;e=Math.max(0,L.list.selectedIndex);if(L.list.removeAt(1,e),c)e=Math.max(0,L.list.selectedIndex);else e=Math.max(0,L.list.selectedIndex-1);L.list.selectedIndexPlusPosition=Math.min(L.list.length-1,e),L.orgItem=L.list.selected,L.orgIndex=L.list.selectedIndex})!==k&&qe(this,B),this.clone=function(){return L.cloneProps(new go.Organizer(e,t,r,o,i,a,l,s,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,L.group,A))}}},go.extend(go.Organizer,go.Tabs,"clone","zimTabs",!1),go.Marquee=function(e,t,o,r,n,i,a,l,s,c,u,d,h,g,p,f,m){var z;if(z=zob(go.Marquee,arguments,"width, height, items, time, transition, speed, direction, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",this))return z;z_d("67.4"),this.group=f;var y=!1===p?{}:go.getStyle("Marquee",this.group,m),b=this;zot(e)&&(e=null!=y.width?y.width:300),zot(t)&&(t=null!=y.height?y.height:100),zot(r)&&(r=null!=y.time?y.time:2e3),zot(n)&&(n=null!=y.transition?y.transition:"slide"),zot(u)&&(u=null!=y.borderColor?y.borderColor:"#333"),zot(d)&&(d=null!=y.borderWidth?y.borderWidth:1),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(l)&&(l=null!=y.marginLeft?y.marginLeft:25),zot(s)&&(s=null!=y.marginRight?y.marginRight:25),zot(i)&&(i=null!=y.speed?y.speed:500),zot(a)&&(a=null!=y.direction?y.direction:"right"),zot(h)&&(h=null!=y.refresh?y.refresh:18e5),zot(g)&&(g=null==y.mix||y.mix),this.zimContainer_constructor(e+l+s,t,null,null,!1),this.type="Marquee",this.speed=i;var v=new go.Rectangle(e-1,t-1,clear).addTo(b).mov(l+.5,.5),w=this.content=new go.Container(e,t).loc(l,0,b).setMask(v),C=this.pages=new go.Pages(null,n,i,null,w).addTo(w),x=!1;this.add=function(e,t,o,n){e.scaleTo(w),t&&e.cur().on("click",function(){zgo(t,o)}),C.addPage(e),e.marqueeViews=0,e.marquee=b,x||function(){x=!0,b.selectedIndex=0,b.selected=C.pages[b.selectedIndex].page,b.lastSelected=null,b.selected.marqueeOn&&b.selected.marqueeOn();b.interval=go.interval(r,function(){b.go()})}(),n||S(),L&&L.top()},this.remove=function(e){if(b.selected==e){if(1==b.pages.pages.length)return;var t=b.selectedIndex+1;t==b.pages.pages.length&&(t=0),b.pages.go(t,null,null,0),go.timeout(20,function(){b.pages.removePage(e),e.dispose&&e.dispose(),S()})}else b.pages.removePage(e),e.dispose&&e.dispose(),S()},zot(o)||Array.isArray(o)||(o=[o]),o&&0<o.length&&(g&&go.shuffle(o),go.loop(o,function(e){b.add(e,null,null,!0)})),0<h&&go.timeout(h,function(){location.reload()}),b.go=function(o){if(b.selected.marqueeViews+=1,b.selected.marqueeOff&&b.selected.marqueeOff(),o)b.selected=o,go.loop(C.pages,function(e,t){e.page!=o||(b.selectedIndex=t)}),b.interval.interval=b.selected.marqueeTime?b.selected.marqueeTime:r,b.interval.pause(I.toggled,null,!0);else{var e=b.selectedIndex+1;b.selectedIndex=e%C.pages.length,b.selected=C.pages[b.selectedIndex].page,b.interval.time=b.selected.marqueeTime?b.selected.marqueeTime:r}b.dispatchEvent("page"),b.selected.marqueeOn&&b.selected.marqueeOn(),C.go(b.selected,a,n,i)},C.on("pagetransitioned",function(){b.dispatchEvent("pagetransitioned"),b.indicator&&(b.indicator.selectedIndex=b.selectedIndex)});var k=!1,T=b.left=new go.Container(l-4,t-4),A=(new go.Shape).sca(.6);A.graphics.f(light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var P=(new go.Shape).sca(.6).reg(-2,0);P.graphics.f(light).mt(0,0).p("AiJieIETCeIkTCfg");var B,I=b.button=new go.Button({label:"",icon:A,toggleIcon:P,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(T,100).pos(0,0,!1,!0,T);function S(){if(!zot(l)&&0!=l){var e=4*l/25;T.pos(l-T.width-e,e/2,!1,!0,b),b.indicator&&(b.indicator.dispose(),b.indicator.removeFrom()),B=B||new go.Proportion(8,16,T.width+e,T.width/2+e,-1),b.indicator=new go.Indicator({width:(C.pages.length<=2?C.pages.length:C.pages.length-1)*(T.width-3),height:B.convert(C.pages.length),num:C.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:c}),b.indicator.fit(0,0,t-I.height,I.width),b.indicator.rot("down"==a?-90:90).center(T).pos(null,T.width-e/2,null,!0),b.indicator.selectedIndex=b.selectedIndex,b.indicator.on("change",function(){b.go(C.pages[b.indicator.selectedIndex].page)})}}if(I.on("click",function(){b.interval&&b.interval.pause(I.toggled),k=I.toggled,b.stage.update()}),S(),!zot(s)&&0<s&&void 0!==zimDefaultFrame&&zimDefaultFrame){var O=4*s/25,E=b.right=new go.Container(45,270),M=b.icon=zimDefaultFrame.makeIcon(go.grey,go.lighter,go.silver).sca(.5).pos(0,0,!0,!0,E).mov(0,0).cur();M.on("mouseover",function(){j.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0}),M.stage.update()}),M.on("mouseout",function(){j.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0}),M.stage.update()}),M.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")});var j=b.label=new go.Label({text:"MARQUEE",color:dark,backgroundColor:lighter,shiftVertical:1,paddingVertical:5}).rot(-90).pos(0,13,!0,!1,E).reg(-10).sca(0,1).mov(0);E.fit(0,0,s-O,t-O),E.pos(s-E.width-O,O/2,!0,!0,b)}if(b.stage&&b.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=k&&(k=e,b.interval.pause(e,t),b.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return k},set:function(e){zon&&zogy("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return r},set:function(e){r=e,b.interval.time=r}}),this.load=function(r,e){var t=[];return g&&go.shuffle(r),go.loop(r,function(e){Array.isArray(e)?t.push(e[0]):t.push(e)}),b.marqueeLoader=frame.loadAssets(t,e),b.marqueeLoader.on("assetload",function(e){var t=r[e.asset.id];if(Array.isArray(t))var o=t[0],n=t[1];else o=t,n="_self";b.add(e.asset,o,n),S()}),b},!zot(u)){var L=new go.Rectangle(e-1,t-1,go.clear,u,d).loc(v,null,b);L.mouseEnabled=!1}!1!==p&&qe(this,y),this.clone=function(){return b.cloneProps(new go.Marquee(e,t,o,r,n,i,a,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return b.interval&&b.interval.clear(),o||this.zimContainer_dispose(!0),!0}},go.extend(go.Marquee,go.Container,["clone","dispose"],"zimContainer"),go.Loader=function(t,o,n,r,i,a,l,s,e,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O){var E;if(E=zob(go.Loader,arguments,"width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, style, group, inherit",this))return E;z_d("67.5"),this.group=S;var M=!1===I?{}:go.getStyle("Loader",this.group,O);if(zot(t)&&(t=null!=M.width?M.width:250),zot(o)&&(o=null!=M.height?M.height:70),zot(r)&&(r=null!=M.backgroundColor?M.backgroundColor:"rgba(0,0,0,.05)"),zot(i)&&(i=null!=M.rollBackgroundColor?M.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=M.color?M.color:"rgba(0,0,0,.5)"),zot(l)&&(l=null!=M.rollColor?M.rollColor:a),zot(s)&&(s=null!=M.borderColor?M.borderColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=M.borderWidth?M.borderWidth:1),zot(m)&&(m=null==M.dashed||M.dashed),zot(u)&&(u=null!=M.corner?M.corner:0),zot(n)&&(n=null!=M.label?M.label:new go.Label({text:"UPLOAD PIC",color:a,rollColor:l,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),zot(B)){if(!zimDefaultFrame)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));B=zimDefaultFrame}this.zimButton_constructor(t,o,n,r,i,a,l,s,e,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var j=this,L=B.stage;n=j.label;var D=j.tag=document.createElement("input");document.body.appendChild(D),D.setAttribute("type","file"),D.setAttribute("multiple","multiple"),D.setAttribute("aria-hidden",!0),D.hidden=!0,D.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){D.click()}),D.addEventListener("change",R);var Y=new createjs.DOMElement(D);L.addChild(Y),Y.alpha=0;var X=B.retina&&window.devicePixelRatio||1;function R(e){var n;n=e.dataTransfer&&e.dataTransfer.files&&0<e.dataTransfer.files.length?e.dataTransfer.files:e.target.files;for(var r,t,o,i=[],a=0;a<n.length;a++)t=n[a],o=void 0,(o=new FileReader).onload=function(e){var o=new Image;o.onload=function(){var e=new go.Bitmap(o);if(i.push(e),1==i.length&&(r=e),i.length==n.length){var t=new createjs.Event("loaded");t.bitmaps=i,t.bitmap=r,t.lastBitmap=e,t.total=i.length,j.dispatchEvent(t),D.value=""}},o.src=e.target.result},o.readAsDataURL(t)}this.resize=function(){return j.stage?(D.setAttribute("aria-hidden",!1),D.hidden=!1,D.style.display="block",setTimeout(function(){var e=j.localToGlobal(0,0);B.retina?(Y.x=B.x/L.scaleX+e.x/X,Y.y=B.y/L.scaleY+e.y/X,go.sca(Y,j.scaleX/X,j.scaleY/X)):(Y.x=B.x+e.x*B.scale,Y.y=B.y+e.y*B.scale,go.sca(Y,B.scale*j.scaleX,B.scale*j.scaleY)),L.update()},50),j):(D.setAttribute("aria-hidden",!0),D.hidden=!0,void(D.style.display="none"))},this.resize(),j.on("added",function(){D.style.display="block",D.hidden=!1,D.style.display="block",j.resize()}),j.added(function e(){j.resize();setTimeout(function(){D.style.display="block",D.hidden=!1,D.style.display="block"},50);j.on("added",e,null,!0)}),j.on("removed",function(){D.style.display="none",D.hidden=!0,D.style.display="none"}),(new XMLHttpRequest).upload&&D.addEventListener("drop",function(e){D.removeEventListener("change",R),R(e),setInterval(function(){D.addEventListener("change",R)},100)}),!(this.save=function(e,t,o,n,r,i,a,l,s,c){var u;if(u=zob(j.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type, data"))return u;if(zot(e)&&(e=B.stage),zot(s)&&(s="png"),zot(t))t="saved_"+String(go.makeID("numbers",5))+"."+s;else{var d=t.split(".");if(1==d.length)t+="."+s;else{var h=["png","jpg","jpeg"],g=h.indexOf(d[d.length-1].toLowerCase());-1==g?t+="."+s:s=h[g]}}if(zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=e.getBounds&&e.getBounds()?e.getBounds().width:B.width),zot(i)&&(i=e.getBounds&&e.getBounds()?e.getBounds().height:B.height),e.cache(o,n,r,i),c){var p=e.cacheCanvas.toDataURL("image/"+s);return a?l&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),p}if(/Edge\/(\d)+/.test(navigator.userAgent)){var f=window.open();f.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+e.cacheCanvas.toDataURL("image/"+s)+"></body></html>"),f.document.close()}else{"jpg"==s&&(s="jpeg");var m=document.createElement("a");m.setAttribute("download",t),m.setAttribute("href",e.cacheCanvas.toDataURL("image/"+s)),document.body.appendChild(m),m.click(),document.body.removeChild(m)}return a?l&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),j})!==I&&qe(this,M),this.clone=function(){var e=new go.Loader(t,o,zot(n)?null:n.clone(),r,i,a,l,s,c,u,d,h,g,p,f,zot(z)?null:z.clone(),zot(y)?null:y.clone(),b,zot(v)?null:v.clone(),zot(w)?null:w.clone(),C,zot(x)?null:x.clone(),zot(k)?null:k.clone(),zot(T)?null:T.clone(),zot(A)?null:A.clone(),P,B,I,this.group);return j.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return B},set:function(e){e!=B&&(B.off("update",j.updateEvent),B.off("resize",j.resizeEvent),B=e,j.resizeEvent=B.on("resize",j.resize),j.updateEvent=B.on("update",j.resize),j.resize())}}),this.resizeEvent=B.on("resize",j.resize),this.updateEvent=B.on("update",j.resize),this.dispose=function(e,t,o){var n;return j.stage&&(n=j.stage),B.off("update",j.updateEvent),B.off("resize",j.resizeEvent),D&&document.body.removeChild(D),D=null,o||(this.zimButton_dispose(),n&&n.update()),!0}},go.extend(go.Loader,go.Button,["clone","dispose"],"zimButton",!1),go.TextArea=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,e,C){var x;if(x=zob(go.TextArea,arguments,"width, height, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, password, inputType, frame, expand, style, group, inherit",this))return x;z_d("67.6"),this.group=e;var k=!1===w?{}:go.getStyle("TextArea",this.group,C);if(zot(t)&&(t=null!=k.width?k.width:250),zot(o)&&(o=null!=k.height?k.height:70),zot(n)&&(n=null!=k.size?k.size:20),zot(r)&&(r=null!=k.padding?k.padding:5),zot(i)&&(i=null!=k.color?k.color:"#666"),zot(a)&&(a=null!=k.backgroundColor?k.backgroundColor:"rgba(256,256,256,.1)"),zot(l)&&(l=null!=k.borderColor?k.borderColor:"rgba(0,0,0,.1)"),zot(s)&&(s=null!=k.borderWidth?k.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(c)&&(c=null!=k.corner?k.corner:0),!zot(d)&&zot(u)&&(u=null!=k.shadowColor?k.shadowColor:"rgba(0,0,0,.3)"),!zot(u)&&zot(d)&&(d=null!=k.shadowBlur?k.shadowBlur:10),zot(z)&&(z=null!=k.password&&k.password),zot(y)&&(y=null!=k.inputType&&k.inputType),zot(v)&&(v=null!=k.expand?k.expand:20),!0===v&&(v=20),zot(b)){if(!zimDefaultFrame)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));b=zimDefaultFrame}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var T=this,A=b.stage,P=this.background=new go.Rectangle(t,o,a,l,s,c,h,null,!1).expand(v);-1!=u&&0<d&&(P.shadow=new createjs.Shadow(u,3,3,d)),T.addChild(P);var B=T.tag=y||z?document.createElement("input"):document.createElement("textarea");document.body.appendChild(B),zot(g)||(B.setAttribute("id",g),B.setAttribute("name",g)),z?B.setAttribute("type","password"):y&&B.setAttribute("type",y),f&&(B.readOnly=!0),m||(B.spellcheck=!1),zot(p)||B.setAttribute("placeholder",p),B.style.cssText="background-color:rgba(0,0,0,.01); color:"+i+"; resize:none; z-index:3; width:"+(t-2*r)+"px; height:"+(o-2*r)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:"+(null!=k.font?k.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",B.addEventListener("change",function(){T.dispatchEvent("change")}),B.addEventListener("input",function(){T.dispatchEvent("input")}),B.addEventListener("focus",function(){b.zil&&window.removeEventListener("keydown",b.zil[0]),T.dispatchEvent("focus")}),B.addEventListener("blur",function(){b.zil&&window.addEventListener("keydown",b.zil[0]),T.dispatchEvent("blur")});var I=new createjs.DOMElement(B);I.alpha=0,this.on("mousedown",function(){setTimeout(function(){B.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?B.focus():B.blur(),T};var S=b.retina&&window.devicePixelRatio||1;this.resize=function(){return setTimeout(function(){var e=T.getConcatenatedMatrix().decompose(),t=T.localToGlobal(r,r);b.retina?(I.x=b.x/A.scaleX+t.x/S,I.y=b.y/A.scaleY+t.y/S,go.sca(I,e.scaleX/S/A.scaleX,e.scaleY/S/A.scaleY)):(I.x=b.x+t.x*b.scale,I.y=b.y+t.y*b.scale,go.sca(I,b.scale*e.scaleX,b.scale*e.scaleY)),I.alpha=1,T.stage&&A.update()},20),T},this.resize(),T.added(function e(){A.addChild(I);setTimeout(function(){B.style.display="block"},50);T.resize();T.on("added",e,null,!0)}),T.on("removed",function(){A.removeChild(I),B.style.display="none"}),Object.defineProperty(this,"currentValue",{get:function(){return B.value},set:function(e){B.value=e}}),Object.defineProperty(this,"text",{get:function(){return B.value},set:function(e){B.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==B},set:function(e){T.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return B.readOnly},set:function(e){B.readOnly=e}}),"undefined"!=typeof KEYFOCUS&&(go.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return go.KEYFOCUS==T},set:function(e){go.KEYFOCUS=T}}),go.KEYFOCUS||(T.keyFocus=!0),B.addEventListener("mousedown",function(){T.keyFocus=!0}),!1!==w&&qe(this,k),this.clone=function(){var e=new go.TextArea(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,this.group,C);return T.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return b},set:function(e){e!=b&&(b.off("update",T.updateEvent),b.off("resize",T.resizeEvent),b=e,T.resizeEvent=b.on("resize",T.resize),T.updateEvent=b.on("update",T.resize),T.resize())}}),this.resizeEvent=b.on("resize",T.resize),this.updateEvent=b.on("update",T.resize),this.dispose=function(e,t,o){var n;return T.stage&&(n=T.stage),b.off("update",T.updateEvent),b.off("resize",T.resizeEvent),B&&document.body.removeChild(B),B=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},go.extend(go.TextArea,go.Container,["clone","dispose"],"zimContainer",!1),go.Tag=function(t,o,n,r,i,a,l,s,c,u,e,d){var h;if(h=zob(go.Tag,arguments,"width, height, id, frame, backgroundColor, padding, paddingHorizontal, paddingVertical, expand, style, group, inherit",this))return h;z_d("67.7"),this.group=e;var g=!1===u?{}:go.getStyle("Tag",this.group,d);if(zot(t)&&(t=null!=g.width?g.width:250),zot(o)&&(o=null!=g.height?g.height:70),zot(n)&&(n=null!=g.id?g.id:"zimTag_"+go.rand(1e4)),zot(r)){if(!zimDefaultFrame)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));r=zimDefaultFrame}zot(i)&&(i=null!=g.backgroundColor?g.backgroundColor:"rgba(0,0,0,0)"),zot(a)&&(a=null!=g.padding?g.padding:10),zot(l)&&(l=null!=g.paddingHorizontal?g.paddingHorizontal:a),zot(s)&&(s=null!=g.paddingVertical?g.paddingVertical:a),zot(c)&&(c=null!=g.expand?g.expand:20),!0===c&&(c=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var p=this,f=r.stage,m=(p.background=new go.Rectangle(t+l,o+s,i).center(this).expand(c||0),p.tag=document.createElement("div"));document.body.appendChild(m),m.setAttribute("id",n),m.setAttribute("name",n),m.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var z=new createjs.DOMElement(m);z.alpha=0;var y=r.retina&&window.devicePixelRatio||1;this.resize=function(){return setTimeout(function(){var e=p.localToGlobal(0,0);r.retina?(z.x=r.x/f.scaleX+e.x/y,z.y=r.y/f.scaleY+e.y/y,go.sca(z,p.scaleX/y,p.scaleY/y)):(z.x=r.x+e.x*r.scale,z.y=r.y+e.y*r.scale,go.sca(z,r.scale*p.scaleX,r.scale*p.scaleY)),z.alpha=1,p.stage&&f.update()},50),p},this.resize(),p.added(function e(){f.addChild(z);setTimeout(function(){m.style.display="block"},50);p.resize();p.on("added",e,null,!0)}),p.on("removed",function(){f.removeChild(z),m.style.display="none"}),this.add=function(e){return m.innerHTML+=e,p},Object.defineProperty(this,"innerHTML",{get:function(){return m.innerHTML},set:function(e){m.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return m.style},set:function(e){m.style=e}}),!1!==u&&qe(this,g),this.clone=function(){var e=new go.Tag(t,o,n,r,i,a,l,s,c,u,this.group,d);return p.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",p.updateEvent),r.off("resize",p.resizeEvent),r=e,p.resizeEvent=r.on("resize",p.resize),p.updateEvent=r.on("update",p.resize),p.resize())}}),this.resizeEvent=r.on("resize",p.resize),this.updateEvent=r.on("update",p.resize),this.dispose=function(e,t,o){var n;return p.stage&&(n=p.stage),r.off("update",p.updateEvent),r.off("resize",p.resizeEvent),m&&document.body.removeChild(m),m=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},go.extend(go.Tag,go.Container,["clone","dispose"],"zimContainer",!1),go.addTo=function(e,t,o,n){var r;if(r=zob(go.addTo,arguments,"obj, container, index, localToLocal"))return r;if(z_d("47.5"),!zot(e)){if(zot(t)){if(!zimDefaultFrame)return void zog("zim methods - addTo(): please provide container");t=zimDefaultFrame.stage}if(zot(n)&&(n=!0),e.parent||(n=!1),n)var i=e.parent.localToLocal(e.x,e.y,t);return zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),n&&(e.x=i.x,e.y=i.y),e}zog("zim methods - addTo(): please provide object")},go.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zog("zim methods - removeFrom(): please provide object")},go.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),!e.stage){var r=Date.now(),i=0,a=setInterval(function(){5<i?clearInterval(a):(i++,e.stage&&(t(e.stage,e),clearInterval(a),clearInterval(l)))},10),l=setInterval(function(){0<n&&r-Date.now()>n&&clearInterval(l),e.stage&&(t(e.stage,e),clearInterval(l))},o);return l}t(e.stage,e)}},go.centerReg=function(e,t,o,n){var r;if(r=zob(go.centerReg,arguments,"obj, container, index, add"))return r;if(z_d("48"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),e;zot(n)&&(n=!0),zot(t)&&e.parent&&n&&(t=e.parent,zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e)),zot(t)||t!=e.parent||(zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e));var i=e.getBounds();return e.regX=i.x+i.width/2,e.regY=i.y+i.height/2,n?go.center(e,t,o):e},go.centerCheck=!1,go.center=function(e,t,o,n){var r;if(r=zob(go.center,arguments,"obj, container, index, add"))return r;if(go.centerCheck||(z_d("48.1"),go.centerCheck=!0),!zot(e)&&e.getBounds){if(zot(t)&&(e.parent?t=e.parent:zimDefaultFrame&&(t=zimDefaultFrame.stage)),!zot(t)&&t.getBounds){var i=e.getBounds(),a=t.getBounds();zot(n)&&(n=!0);var l=!1;if(zot(a)&&(t.setBounds(0,0),a=t.getBounds(),l=!0),n&&t.addChild&&(zot(o)||"number"==typeof o&&isNaN(o)?t.contains(e)||t.addChild(e):t.addChildAt(e,o)),zot(i))return e.x=a.x+a.width/2,e.y=a.y+a.height/2,e;var s=e.localToLocal(e.regX,e.regY,t),c=go.boundsToGlobal(e),u=go.boundsToGlobal(t,c,!0);if(e.x=a.x+a.width/2-u.width/2+(s.x-u.x),e.y=a.y+a.height/2-u.height/2+(s.y-u.y),!n&&t.getStage&&t.stage&&e.parent){var d=t.localToLocal(e.x,e.y,e.parent);e.x=d.x,e.y=d.y}return l&&t.setBounds(null),e}zog("zim.center(): please provide container with bounds")}else zog("zim.center(): please provide object with bounds")},go.place=function(e,t){if(z_d("49"),!zot(e))return zot(t)&&(t="obj"),go.drag({obj:e,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+t+" - to get new position"),e.on("click",function(){zog(t+".x = "+Math.round(e.x)+"; "+t+".y = "+Math.round(e.y)+";"),zog(t+".loc("+Math.round(e.x)+", "+Math.round(e.y)+");")}),e},go.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var e=t.stage;if(zot(e))return zog("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var n=t.parent.localToGlobal(t.x,t.y),r=new go.Shape(-25,-25,50,50,null,!1).addTo(e).pos({x:n.x,y:n.y,reg:!0});return r.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),r.compositeOperation="difference",r.expand(0),go.drag({obj:r}),zog("place cursor to get new registration point location"),e.on("stagemouseup",function(){var e=t.globalToLocal(r.x,r.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}),t}},go.pos=function(m,e,t,o,n,r,i,a,l,s,c){var u;if(u=zob(go.pos,arguments,"obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY"))return u;z_d("41.5");var d=!1;"right"==o&&(d=!0);var h=!1;"bottom"==n&&(h=!0);var g=go.POSREG;if("undefined"!=typeof POSREG&&(g=POSREG),zot(l)&&(l=g),!zot(m)){zot(l)&&zot(s)&&(s=!1),zot(l)&&zot(c)&&(c=!1),!zot(l)&&zot(s)&&(s=l),!zot(l)&&zot(c)&&(c=l),zot(a)&&(a=!0),zot(r)||r.addChild||(r=null),m.getBounds||object.getBounds()||(s=c=!1),zot(r)&&(m.parent?r=m.parent:zimDefaultFrame&&(r=zimDefaultFrame.stage)),!m.parent&&zot(e)&&(e=0),!m.parent&&zot(t)&&(t=0);var p=!1;m.getBounds()||(m.setBounds(0,0),p=!0);var f=!1;if(r&&!r.getBounds()&&(r.setBounds(0,0),f=!0),!zot(r)&&r.addChild&&a){var z=r.getBounds().clone();function y(){zot(i)||"number"==typeof i&&isNaN(i)?r.contains(m)||r.addChild(m):r.addChildAt(m,i)}y();var b=r.getBounds();z.width==b.width&&z.height==b.height&&z.x==b.x&&z.y==b.y||(m.removeFrom(),r.setBounds(z.x,z.y,z.width,z.height),f=!0,y())}if(!s&&!c&&!("center"!=o&&"middle"!=o||"center"!=n&&"middle"!=n))return m.center(r),m.mov(e,t),p&&m.setBounds(null),f&&r.setBounds(null),m;if("center"==o||"middle"==o){if(s)m.x=r.width/2;else{var v=m.y;m.center(),m.y=v}m.mov(e),o=e=null}else!0===o&&(d=!0);if("center"==n||"middle"==n){if(c)m.y=r.height/2;else{var w=m.x;m.center(),m.x=w}m.mov(0,t),n=t=null}else!0===n&&(h=!0);if(m.parent&&m.parent.getBounds){if(r=m.parent,zot(e)&&1==d&&(e=0),zot(t)&&1==h&&(t=0),zot(e)||(m.x=e),zot(t)||(m.y=t),zot(e)&&zot(t)&&!d&&!h)return p&&m.setBounds(null),f&&r.setBounds(null),m;var C=0,x=0;if(m.getBounds()){var k=function(){var e=m.getBounds(),t=e.x,o=e.y,n=e.width,r=e.height,i=m._props.matrix;i=m.getMatrix(i),(t||o)&&i.appendTransform(0,0,1,1,0,0,0,-t,-o);var a=n*i.a,l=n*i.b,s=r*i.c,c=r*i.d,u=i.tx,d=i.ty,h=u,g=u,p=d,f=d;(t=a+u)<h?h=t:g<t&&(g=t);(t=a+s+u)<h?h=t:g<t&&(g=t);(t=s+u)<h?h=t:g<t&&(g=t);(o=l+d)<p?p=o:f<o&&(f=o);(o=l+c+d)<p?p=o:f<o&&(f=o);(o=c+d)<p?p=o:f<o&&(f=o);return{x:h,y:p,width:g-h,height:f-p}}();if(!zot(e)){if(d)T=new go.Point(k.x+k.width,k.y+k.height);else var T=new go.Point(k.x,k.y);C=T.x-e}if(!zot(t)){if(h)T=new go.Point(k.x+k.width,k.y+k.height);else var T=new go.Point(k.x,k.y);x=T.y-t}var A=r.getBounds();zot(e)||(d?m.x=s?A.width+A.x-e:A.width+A.x-e-C:(m.x=s?e:e-C,m.x+=A.x)),zot(t)||(h?m.y=c?A.height+A.y-t:A.height+A.y-t-x:(m.y=c?t:t-x,m.y+=A.y))}}return p&&m.setBounds(null),f&&r.setBounds(null),m}},go.loc=function(e,t,o,n,r,i,a,l){var s;if(s=zob(go.loc,arguments,"obj, target, y, container, index, add, localToLocal, x"))return s;if(z_d("41.55"),!zot(e)){if("number"==typeof t&&(l=t,t=null),zot(t)||(zot(t.x)||(l=t.x),zot(t.y)||(o=t.y)),zot(l)&&zot(t)&&(l=e.x),zot(o)&&zot(t)&&(o=e.y),zot(i)&&(i=!0),zot(n)&&(e.parent?n=e.parent:zimDefaultFrame&&(n=zimDefaultFrame.stage)),i&&n&&(e.parent&&n==e.parent?zot(r)||n.addChildAt(e,r):zot(r)||isNaN(r)?n.addChild(e):n.addChildAt(e,r)),zot(a)&&(a=!0),t&&t.parent&&e.parent&&a){var c=t.parent.localToLocal(l,o,e.parent);l=c.x,o=c.y}return e.x=l,e.y=o,e}},go.mov=function(e,t,o){var n;return(n=zob(go.mov,arguments,"obj, x, y"))?n:(z_d("41.6"),zot(e)?void 0:(zot(t)||(e.x+=t),zot(o)||(e.y+=o),e))},go.sca=function(e,t,o){if(z_d("41.97"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},go.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t),e},go.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,e},go.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update()):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()})),e},go.rot=function(e,t,o,n){if(z_d("41.8"),!zot(e)){if(!zot(t))if(!e.parent||zot(o)&&zot(n))e.rotation=t;else{zot(o)&&(o=e.x),zot(n)&&(n=e.y);e.x,e.y;var r=e.parent.localToLocal(o,n,e),i=new go.Point(e.x,e.y);e.reg(r.x,r.y),e.rotation=t,e.x=o,e.y=n;var a=e.parent.localToLocal(i.x,i.y,e);e.reg(a.x,a.y),e.x=i.x,e.y=i.y}return e}},go.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e},go.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e},go.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){var r=e.regX,i=e.regY;if(zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent){var a=e.localToLocal(r,i,e.parent);e.x-=a.x-e.x,e.y-=a.y-e.y}return e}},go.top=function(e){return z_d("41.62"),zot(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},go.bot=function(e){return z_d("41.63"),zot(e)||!e.parent||e.parent.setChildIndex(e,0),e},go.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,e.parent.getChildIndex(e)+t),e},go.cur=function(e,t){return z_d("41.1"),zot(e)?zog("zim methods - cur(): please provide object"):(zot(t)&&(t="pointer"),e.cursor=t),e},go.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zog("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,r)),e)},go.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},go.tap=function(r,i,a,l,e){if(z_d("47.8"),!zot(r)&&!zot(i)&&"function"==typeof i)return zot(a)&&(a=5),zot(l)&&(l=1e4),zot(e)&&(e=!1),r.cursor="pointer",r.zimClickDownEvent=r.on("mousedown",function(e){if(e.target.stage,"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY).y<=0)return}var t=e.stageX/go.scaX,o=e.stageY/go.scaY,n=Date.now();r.zimClickUpEvent=r.on("pressup",function(e){if(Math.abs(t+o-e.stageX/go.scaX-e.stageY/go.scaY)<a&&Date.now()-n<l){if(r.excludeTap)return;i(e)}},null,!0)},null,e),r},go.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickDownEvent),e.off("pressup",e.zimClickUpEvent),e},go.hold=function(r,i,a,l,e){var s;if(z_d("47.87"),!zot(r)&&!zot(i)&&"function"==typeof i)return zot(a)&&(a=5),zot(l)&&(l=1500),zot(e)&&(e=!1),r.cursor="pointer",r.zimClickHoldDownEvent=r.on("mousedown",function(e){if(zot((s=e.target.stage).frame)&&(s.frame=zimDefaultFrame),!zot(s.frame)&&s.frame.mouseEvent||(s.frame={},s.frame.mouseX=e.stageX/go.scaX,s.frame.mouseY=e.stageY/go.scaY,s.frame.mouseEvent=s.on("stagemousemove",function(e){s.frame.mouseX=e.stageX/go.scaX,s.frame.mouseY=e.stageY/go.scaY})),"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY).y<=0)return}var t=e.stageX/go.scaX,o=e.stageY/go.scaY;Date.now();clearInterval(r.zimHoldInterval);var n=0;r.zimHoldInterval=setInterval(function(){if(n<10)Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)>a&&clearInterval(r.zimHoldInterval);else{if(Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)<a){if(r.excludeHold)return;i(e)}clearInterval(r.zimHoldInterval)}n++},l/10),r.zimClickHoldUpEvent=r.on("pressup",function(e){clearInterval(r.zimHoldInterval)},null,!0)},null,e),r},go.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),clearInterval(e.zimHoldTimeout),e},go.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},go.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},go.drag=function(l,e,s,r,t,o,a,i,c,u,n,d,h,g,p,f,m,z){var y;if(y=zob(go.drag,arguments,"obj, boundary, overCursor, dragCursor, all, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds, rect, currentTarget, offStage"))return y;if(z_d("31"),!zot(l)&&l.on){var b=go.DRAGALL;"undefined"!=typeof DRAGALL&&(b=DRAGALL),zot(t)&&zot(m)&&(t=b),l.zimDown&&l.noDrag(),l.cursor=zot(s)?"pointer":s,zot(t)&&zot(m)?m=!1:zot(t)?zot(m)&&(m=!1):m=t,"Tag"!=l.type&&"TextArea"!=l.type&&"Loader"!=l.type||(m=!0),zot(o)&&(o=!1),zot(a)&&(a=!1),zot(i)&&(i=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(n)&&(n=.3),zot(d)&&(d=!0);if(!0!==d&&["horizontal","vertical","auto"].indexOf(d)<0&&(d=!1),zot(h)&&(h=!1),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(e)&&!zot(f)&&(e=f),u)var v,w,C,x,k,T,A,P,B,I,S,O,E,M,j;else l.zimDragTicker=function(){};go.setSwipe(l,o),l.zimBoundary=e,l.zimLocalBounds=a;var L,D,Y,X,R,_,F,W=!1,H=!1;return l.zimAdded=l.on("added",G,null,!0),l.zimRemoved=l.on("removed",function(){l.zimDragTicker&&go.Ticker.remove(l.zimDragTicker)},null,!0),l.parent&&G(),l.pointers={},l.zimDown=l.on("mousedown",function(e){if(l.stage){F=l.stage,l.dragMouseX=Math.round(e.stageX/go.scaX)+F.x,l.dragMouseY=Math.round(e.stageY/go.scaY)+F.y;var t="id"+Math.abs(e.pointerID+1);if(l.pointers[t]=!0,_=m?e.currentTarget:e.target,!l.zimBoundary||_.getBounds()){if(W=!0,l.stage.mouseMoveOutside=!0,go.Ticker.has(l.zimDragTicker)||go.Ticker.add(l.zimDragTicker),g&&createjs.Tween.removeTweens(_),_.parent){if(i){var o=_.parent.numChildren-1;"Keyboard"==_.parent.getChildAt(o).type&&o--,_.parent.setChildIndex(_,o),_.ZIMoutlineShape&&_.outline()}if(_.parent==l.stage)var n=new go.Point(e.stageX/go.scaX,e.stageY/go.scaY);else n=_.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY);h&&(_.x=n.x,_.y=n.y),L=n.x-_.x,D=n.y-_.y,l.zimBoundary&&(a?(X=go.boundsToGlobal(_.parent,l.zimBoundary),c&&(R=l.zimBoundary)):(X=l.zimBoundary,c&&(R=go.boundsToGlobal(_.parent,l.zimBoundary,!0)))),l.cursor=zot(r)?"pointer":r,u&&(l.slideStartX=l.x,l.slideStartY=l.y,j=!1,x=0,k=[n.x],T=[n.y],M=E=-1e4,l.zimDragMoving=!0),"Pen"==l.type&&(l.zimDragCheck=!0,H=!1)}}else zog("zim.drag() - drag object needs bounds set")}},!0),l.zimMove=l.on("pressmove",function(e){if(W){var t=(z?e.rawX:e.stageX)/go.scaX+F.x,o=(z?e.rawY:e.stageY)/go.scaY+F.y;l.dragMouseX=Math.round(t),l.dragMouseY=Math.round(o),N(_,t,o),_.ZIMoutlineShape&&_.outline(),"Pen"==l.type&&!H&&l.drawing?H=!0:"Tag"!=l.type&&"TextArea"!=l.type&&"Loader"!=l.type||l.resize()}},!0),l.zimPosition=N,l.zimUp=l.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);if(delete l.pointers[t],W){if(l.cursor=zot(s)?"pointer":s,u){if(_.parent)var o=z?e.rawX:e.stageX,n=z?e.rawY:e.stageY,r=_.parent.globalToLocal(o/go.scaX,n/go.scaY);else r=new go.Point(0,0);W=!1,A=r.x,P=r.y,B=_.x,I=_.y,v.immediate(_.x),w.immediate(_.y)}else{var i=0;for(var a in l.pointers)i++;0==i&&go.Ticker.remove(l.zimDragTicker),"Pen"==l.type&&(l.zimDragCheck=!1,H&&l.stopCheck())}l.stage&&l.stage.update()}},!0),l}function G(){l.off("added",l.zimAdded),D=L=0,l.zimBoundary&&(a?(X=go.boundsToGlobal(l.parent,l.zimBoundary),c&&(R=l.zimBoundary)):(X=l.zimBoundary,c&&(R=go.boundsToGlobal(l.parent,l.zimBoundary,!0)))),X&&p&&(Y=l.parent.localToGlobal(l.x,l.y),N(l,Y.x,Y.y)),u&&setTimeout(function(){v=new go.Damp(l.x,n),w=new go.Damp(l.y,n),l.zimDragImmediate=function(e,t){I=t,A=S=P=O=0,zot(B=e)||v.immediate(e),zot(t)||w.immediate(t)},C=3,x=0,k=[],T=[],A=l.x,P=l.y,B=l.x,I=l.y,S=l.x,O=l.y,M=E=-1e4,l.zimDragMoving=!0,function(){l.stage;function r(e,t,o,n,r){Math.abs(e.x-E)<.1&&Math.abs(e.y-M)<.1?(l.zimDragMoving=!1,e.x=n,e.y=r,e.slideStartX=null,e.slideStartY=null,j&&(e.dispatchEvent("slidestop"),go.Ticker.remove(l.zimDragTicker)),"Pen"==l.type&&(l.zimDragCheck=!1,H&&l.stopCheck())):(E=t,M=o)}l.zimDragTicker=function(){if(!zot(l.slideStartX))if(_=_||l,W){if(_.parent)var e=_.parent.globalToLocal(l.dragMouseX,l.dragMouseY);else e=new go.Point(0,0);x++,k.push(e.x),T.push(e.y),O=C<=x?(S=k.shift(),T.shift()):(S=k[0],T[0])}else{if(!l.zimDragMoving)return;var t=B+A-S,o=I+P-O;if(X)t=(n=V(_,t,o)).x,o=n.y;if(d)_.x=v.convert(t),_.y=w.convert(o),r(_,_.x,_.y,t,o);else{var n=V(_,v.convert(t),w.convert(o));_.x=n.x,_.y=n.y,r(_,_.x,_.y,_.x,_.y)}}}}()},50),zot(l.zimMaskDynamic)||l.zimMaskApply()}function N(e,t,o){if(zot(e)&&(e=_||l),e.parent){if(zot(t)||zot(o)){var n=e.parent.localToGlobal(e.x,e.y);L=D=0,l.zimBoundary&&(a?(X=go.boundsToGlobal(e.parent,l.zimBoundary),c&&(R=e.zimBoundary)):(X=l.zimBoundary,c&&(R=go.boundsToGlobal(e.parent,l.zimBoundary,!0)))),t=n.x,o=n.y,u&&(B=e.x,I=e.y,_=e,v&&v.immediate(B),w&&w.immediate(I))}if(F&&F.type)var r=e.parent.globalToLocal(t,o);else r=e.parent.globalToLocal(t*go.scaX,o*go.scaY);var i;u&&d?"vertical"==d?(i=V(e,r.x-L,r.y-D),e.x=i.x,e.y=r.y-D):"horizontal"==d?(i=V(e,r.x-L,r.y-D),e.x=r.x-L,e.y=i.y):(e.x=r.x-L,e.y=r.y-D):(i=V(e,r.x-L,r.y-D),e.x=i.x,e.y=i.y),!u||j||e.slideStartX==e.x&&e.slideStartY==e.y||(j=!0)}}function V(e,t,o){if(!e.parent)return{x:t,y:o};if(X)if(c){var n=e.getBounds().width,r=e.getBounds().height,i=e.getBounds().x,a=e.getBounds().y;n<R.width?t=R.x+(R.width-n)/2+(e.regX-i):(t-(e.regX-i)>R.x&&(t=R.x+(e.regX-i)),t-(e.regX-i)+n<R.x+R.width&&(t=R.x+R.width+(e.regX-i)-n)),e.height<R.height?o=R.y+(R.height-r)/2+(e.regY-a):(o-(e.regY-a)>R.y&&(o=R.y+(e.regY-a)),o-(e.regY-a)+r<R.y+R.height&&(o=R.y+R.height+(e.regY-a)-r))}else{var l=e.parent.localToGlobal(t,o);t=Math.max(X.x,Math.min(X.x+X.width,l.x)),o=Math.max(X.y,Math.min(X.y+X.height,l.y)),t=(l=e.parent.globalToLocal(t,o)).x,o=l.y}return{x:t,y:o}}},go.noDrag=function(e){if(z_d("32"),!zot(e)&&e.on)return e.cursor=null,go.setSwipe(e,!0),e.off("added",e.zimAdded),e.off("removed",e.zimRemoved),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),go.Ticker&&e.zimDragSlide&&go.Ticker.remove(e.zimDragSlide),e.zimDragMoving=e.zimAdded=e.zimRemoved=e.zimDown=e.zimMove=e.zimUp=e.zimBoundary=e.zimDragSlide=null,e},go.dragBoundary=function(e,t,o){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},go.dragRect=go.dragBoundary,go.mouse=function(e){return z_d("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e},go.noMouse=function(e){return z_d("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e},void 0===c);go.bind=function(e,t,o,n,r,i){var a;return(a=zob(go.bind,arguments,"obj, id, props, extra, filter, bindObj"))?a:(z_d("33.17"),c?zot(t)?zon&&zogy("bind() - needs a unique id"):(i||c).add(t,e,o,n,r):zon&&zogy("bind() - needs a Bind() object created first"),e)},go.noBind=function(e,t,o,n,r){var i;return(i=zob(go.noBind,arguments,"obj, props, removeConnectionData, call, bindObj"))?i:(z_d("33.18"),c&&(r||c).remove(e,t,o,n),e)},go.transform=function(l,t,e,o,n,r,i,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P){var B;if(B=zob(go.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden"))return B;if(z_d("33.5"),zot(l)||!l.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),l;if(!l.getBounds())return zog("zim methods - transform(): please setBounds() on object"),l;if(!l.parent)return zog("zim methods - transform(): object should be on stage first"),l;zot(t)&&(t=!0),zot(e)&&(e=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),zot(r)&&(r=!0);var I=go.mobile();zot(i)&&(i=!0),zot(a)&&(a=!0),zot(s)&&(s=!0),zot(c)&&(c=!!I),zot(u)&&(u=!!I),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!0),zot(p)&&(p="brown"),zot(f)&&(f=1),zot(k)&&(k=null),zot(T)&&(T=null),k<0||T<0?k=T=null:null!=k&&null==T&&(T=1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(z)&&(z=!I),zot(y)&&(y=go.mobile()?20:10),zot(b)&&(b=16),zot(v)&&(v=10),zot(w)&&(w=5),zot(C)&&(C=!0),zot(x)&&(x=!1),l.mouseChildren=!1;var S=l.getConcatenatedMatrix().decompose();if(void 0===zimDefaultFrame)if("undefined"==typeof frame||null==frame){if(!l.stage)return zon&&zog("ZIM transform() - please add object to stage before calling transform()"),l;frame=zimDefaultFrame={stage:O,canvas:O.canvas}}else zimDefaultFrame=frame;else"undefined"!=typeof frame&&null!=frame||(frame=zimDefaultFrame);zot(l.stage)&&l.added(function(){l.transformControls&&l.transformControls.resize()});var O=l.stage?l.stage:frame.stage;zot(frame.eventRemove)&&(O.enableMouseOver(),frame.ctrlKey=!1,frame.shiftKey=!1,window.addEventListener("keydown",function(e){frame.altKey=e.altKey,frame.ctrlKey=e.ctrlKey}),window.addEventListener("keyup",function(e){frame.altKey=e.altKey,frame.ctrlKey=e.ctrlKey}));var E=l.getBounds(),M=new go.Shape({style:!1}),j=new go.Shape({style:!1}),L=new go.Shape({style:!1});j.mouseEnabled=!1,L.controlType="reg";var D,Y,X,R,_,F,W,H=l.parent,G=M.graphics,N=j.graphics,V=L.graphics,q=new go.Container({style:!1});q.type="TransformControls";var U,K,Z,Q,J,$=new go.Container({style:!1}),ee=new go.Container({style:!1}),te=new go.Container({style:!1}),oe=new go.Container({style:!1});if(zot(l.zimMaskDynamic)||l.zimMaskApply(),z){var ne=new go.Container({style:!1}),re=new go.Container({style:!1});function ie(e){e==ne&&new go.Triangle(16,12,12,"white").addTo(e).mov(0,-13.5),new go.Triangle(16,12,12,"white").addTo(e).mov(13.5).rot(90),e==ne&&new go.Triangle(16,12,12,"white").addTo(e).mov(0,13.5).rot(180),new go.Triangle(16,12,12,"white").addTo(e).mov(-13.5).rot(-90),e==ne&&new go.Triangle(10,7,7,"black").addTo(e).mov(0,-13),new go.Triangle(10,7,7,"black").addTo(e).mov(13).rot(90),e==ne&&new go.Triangle(10,7,7,"black").addTo(e).mov(0,13).rot(180),new go.Triangle(10,7,7,"black").addTo(e).mov(-13).rot(-90),C&&e.cache(-20,-20,40,40)}ie(ne),ie(re);var ae={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function le(){var e=l;for(Z=K=1,J=Q=U=0;e.parent;)U+=e.rotation,K*=e.scaleX,Z*=e.scaleY,Q+=e.skewX,J+=e.skewY,e=e.parent}le();for(var se=U,ce=["nw-resize","ne-resize","nw-resize","ne-resize"],ue=[2,3,0,1],de=0;de<4;de++){if(d)(ze=new go.Rectangle(y,y,"#e472c4","#333",2,null,null,null,!1)).centerReg($),C&&ze.cache(-1,-1,y+2,y+2);else(ze=new go.Rectangle(y,y,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,!1)).centerReg($),ze.expand(0);ze.rotation=U,F=z?"none":ce[de],ze.drag({overCursor:F,dragCursor:F,onTop:!1}),ze.controlType="corner",ze.cu=ce[de]}for(de=0;de<ue.length;de++)$.getChildAt(de).op=$.getChildAt(ue[de]);var he=["n-resize","e-resize","n-resize","e-resize"];ue=[1,1,0,0];for(de=0;de<4;de++){var ge=de%2==0?l.width/2:y,pe=de%2==0?y:l.height/2;if(c)(ze=new go.Rectangle(y,y,"#AAA","#333",2,null,null,null,!1)).centerReg(de%2==0?te:ee),C&&ze.cache(-1,-1,y+2,y+2);else(ze=new go.Rectangle(ge,pe,"rgba(0,0,0,0)",null,null,null,null,null,!1)).centerReg(de%2==0?te:ee),ze.expand(0);ze.rotation=U,F=z?"none":he[de],ze.drag({overCursor:F,dragCursor:F,onTop:!1}),ze.controlType="side",ze.cu=he[de]}for(de=0;de<ue.length;de++){var fe=de%2==0?te:ee;fe.getChildAt(Math.floor(de/2)).op=fe.getChildAt(ue[de])}var me=["ne-resize","nw-resize","ne-resize","nw-resize"];for(de=0;de<4;de++){var ze;if(u)(ze=new go.Circle(y,"#e472c4",null,null,null,null,null,null,!1)).addTo(oe),C&&ze.cache(-y,-y,2*y,2*y);else(ze=new go.Circle(y,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).addTo(oe),ze.expand(0);F=z?"none":me[de],ze.drag({overCursor:F,dragCursor:F,onTop:!1}),ze.controlType="rotate",ze.cu=me[de]}var ye=1.8;function be(){var e=y*ye*go.sign(K),t=y*ye*go.sign(Z);oe.getChildAt(0).reg(e,t),oe.getChildAt(1).reg(-e,t),oe.getChildAt(2).reg(-e,-t),oe.getChildAt(3).reg(e,-t),O.update()}function ve(){G.c(),N.c(),V.c(),D=l.localToGlobal(E.x,E.y),Y=l.localToGlobal(E.x+E.width,E.y),X=l.localToGlobal(E.x+E.width,E.y+E.height),R=l.localToGlobal(E.x,E.y+E.height),pTM=l.localToGlobal(E.x+E.width/2,E.y),pRM=l.localToGlobal(E.x+E.width,E.y+E.height/2),pBM=l.localToGlobal(E.x+E.width/2,E.y+E.height),pLM=l.localToGlobal(E.x,E.y+E.height/2),_=l.localToGlobal(l.regX,l.regY),pMid=l.localToGlobal(E.x+E.width/2,E.y+E.height/2),W=[D,Y,X,R],mids=[pTM,pRM,pBM,pLM],g&&(G.s(p),m&&G.sd([10,5],0),G.ss(f).mt(D.x,D.y).lt(Y.x,Y.y).lt(X.x,X.y).lt(R.x,R.y).lt(D.x,D.y).cp()),zot(k)||(N.s(k),A&&N.sd([10,5],0),N.ss(T).mt(D.x,D.y).lt(Y.x,Y.y).lt(X.x,X.y).lt(R.x,R.y).lt(D.x,D.y).cp()),M.setBounds(D.x,D.y,Y.x-D.x,R.y-D.y),h&&(V.s("#eee").ss(f).f("rgba(0,0,0,.1)").dc(0,0,b),V.s("#222").ss(f).dc(0,0,.3*b)),le();for(var e=Math.min(50,Math.abs(Q))*go.sign(Q),t=Math.min(50,Math.abs(J))*go.sign(J),o=U*go.sign(K*Z)*go.sign(l.scaleX*l.scaleY),n=0;n<W.length;n++){var r=W[n];$.getChildAt(n).loc(r.x,r.y).ske(e,t).rot(o),oe.getChildAt(n).loc(r.x,r.y).rot(o);var i=mids[n],a=n%2==0?te:ee;a.getChildAt(Math.floor(n/2)).loc(i.x,i.y).ske(e,t).rot(o),c||a.getChildAt(Math.floor(n/2)).sca(n%2==0?K/2:1,n%2==0?1:Z/2)}L.x=_.x,L.y=_.y}oe.alpha=.5,be(),ve();var we=new go.Shape(1e3,1e3,null,null,null,!1);function Ce(){we.x=0,we.y=0,we.graphics.c().f("rgba(0,0,0,.01)").mt(D.x,D.y).lt(Y.x,Y.y).lt(X.x,X.y).lt(R.x,R.y).lt(D.x,D.y).cp(),we.reg(_.x,_.y),we.x=_.x,we.y=_.y}Ce(),q.on("dblclick",function(e){frame.ctrlKey&&l.transformControls.visible&&(l.scaleX=1,l.scaleY=1,l.rotation=0,ve(),Ce(),O.update()),Ue(e,!0)});var xe=q.on("mousedown",Te),ke=l.on("mousedown",Te);function Te(e){var t=O.getObjectUnderPoint(e.stageX,e.stageY,1);go.mobile()||t&&(l.contains&&l.contains(t)||!l.contains&&l==t)?l.transformControls.visible||(z?(et=!1,we.mouseEnabled=!1):frame.canvas.style.cursor="move",l.transformControls.show(),l.dispatchEvent("transformshow")):!l.transformControls.visible||t&&q.contains(t)||(l.transformControls.hide(),l.dispatchEvent("transformhide"))}var Ae,Pe,Be,Ie,Se,Oe,Ee,Me,je,Le,De,Ye=O.on("stagemousedown",function(e){var t=O.getObjectUnderPoint(e.stageX,e.stageY,1),o=t&&t.parent&&t.parent.layer&&t.parent.layer==l;!l.transformControls.visible||t&&(q.contains(t)||o)||(l.dispatchEvent("transformhide"),l.transformControls.hide())});i||(q.off("mousedown",xe),l.off("mousedown",ke),O.off("stagemousedown",Ye));var Xe,Re,_e,Fe=!1,We=!1,He=l.cursor,Ge=new go.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(z){Ge.mouseEnabled=!1,Ge.mouseChildren=!1,Ge.addChild(re),$.on("mouseover",Ze),$.on("mouseout",Qe),ee.on("mouseover",Ze),ee.on("mouseout",Qe),te.on("mouseover",Ze),te.on("mouseout",Qe),oe.on("mouseover",Ze),oe.on("mouseout",Qe);var Ne=new go.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);Ne.cursor="none"}function Ve(e){if(We=!0,s&&Je(),Xe&&O.off("stagemousemove",Xe),Ae=e.target.x,Pe=e.target.y,Me=l.x,je=l.y,startSX=l.scaleX,startSY=l.scaleY,"rotate"==e.target.controlType){Fe=!0,Be=l.rotation;var t=e.stageX/go.scaX,o=e.stageY/go.scaY,n=H.localToGlobal(Me,je);Le=n.x,De=n.y,Ie=180*Math.atan2(o-De,t-Le)/Math.PI}Oe=frame.ctrlKey||"rotate"==e.target.controlType?(Se=Math.abs(Ae-l.x),Math.abs(Pe-l.y)):(Se=Math.abs(Ae-e.target.op.x),Math.abs(Pe-e.target.op.y)),cornerPointObj=e.target.op,"rotate"!=e.target.controlType&&(Ee=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,l.parent)),Ge.stage?O.setChildIndex(Ge,O.getChildIndex(q)):Ge.addTo(O,O.getChildIndex(q)+1),Ge.x=e.stageX/go.scaX,Ge.y=e.stageY/go.scaY,Ge.cursor=z?"none":e.target.cu,z&&(l.getConcatenatedMatrix().decompose(S),S.rotation||(S.rotation=0),re.rotation=S.rotation*go.sign(K*Z)*go.sign(l.scaleX*l.scaleY)+ae[e.target.cu]+se,"side"!=e.target.controlType&&K*Z<0&&(re.rotation+=90),Ne.addTo(O,1).pos({x:e.stageX/go.scaX,y:e.stageY/go.scaY,reg:!0})),we.visible=!1,l.cursor="none"}function qe(e){var t;if(t=frame.ctrlKey&&"corner"==e.target.controlType?Oe<Se?(e.target.x-Me)/(Ae-Me):(e.target.y-je)/(Pe-je):Oe<Se?(e.target.x-e.target.op.x)/(Ae-e.target.op.x):(e.target.y-e.target.op.y)/(Pe-e.target.op.y),"corner"==e.target.controlType?(l.scaleX=t*startSX,l.scaleY=t*startSY):(l.scaleX="e-resize"==e.target.cu?t*startSX:startSX,l.scaleY="n-resize"==e.target.cu?t*startSY:startSY),ve(),Ge.x=e.stageX/go.scaX,Ge.y=e.stageY/go.scaY,z&&(Ne.x=e.stageX/go.scaX,Ne.y=e.stageY/go.scaY),!frame.ctrlKey||"side"==e.target.controlType){var o=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,l.parent);l.x-=(o.x-Ee.x)*go.sign(K)*go.sign(l.scaleX),l.y-=(o.y-Ee.y)*go.sign(Z)*go.sign(l.scaleY)}ve(),l.transformControls.events&&Ke(e,e.target.controlType)}function Ue(e,t){be();var o=e?e.target.controlType:"move";t&&(o="reset"),z&&Ne.removeFrom(O),Ke(e,o,!0),O.update()}function Ke(e,t,o,n){null==n&&(n=!0);var r=!1;_e=null,"move"==t?(l.x==tt.x&&l.y==tt.y||((_e=new createjs.Event("transformed")).transformType="move"),n&&(r=we.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY))):"corner"==t?(l.scaleX==tt.scaleX&&l.scaleY==tt.scaleY||((_e=new createjs.Event("transformed")).transformType="size"),n&&(r=$.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY))):"side"==t?(l.scaleX==tt.scaleX&&l.scaleY==tt.scaleY||((_e=new createjs.Event("transformed")).transformType="stretch"),n&&(r=ee.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY)||te.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY))):"rotate"==t?(l.rotation!=tt.rotation&&((_e=new createjs.Event("transformed")).transformType="rotate"),n&&(r=oe.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY))):"reg"==t?l.regX==tt.regX&&l.regY==tt.regY||((_e=new createjs.Event("transformed")).transformType="reg"):(_e=new createjs.Event("transformed")).transformType="reset"==t?"reset":"unknown",n&&!r&&(Ge.removeFrom(O),frame.canvas.style.cursor="default",l.cursor=He),_e&&(_e.pressup=o,l.dispatchEvent(_e))}function Ze(e){We||(Ge.stage?O.setChildIndex(Ge,O.getChildIndex(q)):Ge.addTo(O,O.getChildIndex(q)+1),Ne.addTo(O,1),Ge.x=e.stageX/go.scaX,Ge.y=e.stageY/go.scaY,Ne.x=e.stageX/go.scaX,Ne.y=e.stageY/go.scaY,l.getConcatenatedMatrix().decompose(S),S.rotation||(S.rotation=0),re.rotation=S.rotation*go.sign(K*Z)*go.sign(l.scaleX*l.scaleY)+ae[e.target.cu]+se,"side"!=e.target.controlType&&K*Z<0&&(re.rotation+=90),O.update(),Xe&&O.off("stagemousemove",Xe),Xe=O.on("stagemousemove",function(e){Ge.x=e.stageX/go.scaX,Ge.y=e.stageY/go.scaY,O.update()}))}function Qe(e){O.off("stagemousemove",Xe),We||(l.cursor=He,Ge.removeFrom(O),Ne.removeFrom(O),O.update())}function Je(){if(s){var e=H.numChildren-1;"Keyboard"==H.getChildAt(e).type&&e--,H.setChildIndex(l,e),$e()}}function $e(){if(H==O)q.removeFrom(),O.addChildAt(q,O.getChildIndex(l)+1);else{for(var e=H;e.parent&&e.parent!=O;)e=e.parent;l.stage&&(q.parent==O&&O.removeChild(q),O.addChildAt(q,O.getChildIndex(e)+1))}}$.on("mousedown",Ve),$.on("pressmove",qe),$.on("pressup",Ue),ee.on("mousedown",Ve),ee.on("pressmove",qe),ee.on("pressup",Ue),te.on("mousedown",Ve),te.on("pressmove",qe),te.on("pressup",Ue),oe.on("mousedown",Ve),oe.on("pressmove",function(e){var t=180*Math.atan2(e.stageY/go.scaY-De,e.stageX/go.scaX-Le)/Math.PI;frame.shiftKey?l.rot(45*Math.round((Be+(t-Ie)*go.sign(K)*go.sign(l.scaleX))/45)):l.rot(Be+(t-Ie)*go.sign(K)*go.sign(l.scaleX));ve(),Ge.x=e.stageX/go.scaX,Ge.y=e.stageY/go.scaY,z&&(l.getConcatenatedMatrix().decompose(S),S.rotation||(S.rotation=0),re.rotation=S.rotation*go.sign(K*Z)*go.sign(l.scaleX*l.scaleY)+ae[e.target.cu]+se,"side"!=e.target.controlType&&K*Z<0&&(re.rotation+=90),Ne.x=e.stageX/go.scaX,Ne.y=e.stageY/go.scaY);if(ve(),l.transformControls.events){var o=e.target.controlType;Ke(e,o,null,!1)}}),oe.on("pressup",Ue),L.drag(),L.on("mousedown",Je),L.on("pressup",function(e){if(!frame.ctrlKey){for(var t=0;t<W.length;t++)if(go.dist(L.x,L.y,W[t].x,W[t].y)<v){L.x=W[t].x,L.y=W[t].y;break}go.dist(L.x,L.y,pMid.x,pMid.y)<v&&(L.x=pMid.x,L.y=pMid.y)}var o=l.rotation,n=l.globalToLocal(L.x,L.y);if(H==O)var r=new go.Point(L.x,L.y);else r=H.globalToLocal(L.x,L.y);l.reg(n.x,n.y),l.rotation=0,l.x=l.x+r.x-l.x,l.y=l.y+r.y-l.y,l.rotation=o,ve(),Ce(),Ue(e),O.update()});var et=!0;F=z?"none":"move",we.drag({overCursor:F,dragCursor:F,onTop:!1}),we.controlType="move",z&&(we.on("mouseover",function(e){if(We||!z||!et)return;ne.addTo(q).pos({x:e.stageX/go.scaX,y:e.stageY/go.scaY,reg:!0}),O.update(),Re&&O.off("stagemousemove",Re);Re=O.on("stagemousemove",function(e){ne.x=e.stageX/go.scaX,ne.y=e.stageY/go.scaY,O.update()})}),we.on("mouseout",function(){if(O.off("stagemousemove",Re),We)return;ne.removeFrom(q),O.update()})),we.on("mousedown",Je),we.on("pressmove",function(e){if(l.transformControls.visible){if(H==O)var t=new go.Point(we.x,we.y);else t=H.globalToLocal(we.x,we.y);if(l.x=t.x,l.y=t.y,ve(),l.transformControls.events){Ke(e,"move")}}}),we.on("pressup",function(e){l.transformControls.visible&&Ue(e)});var tt,ot=O.on("stagemouseup",function(){We=!1,we.mouseEnabled=!0,et||(_e=new createjs.Event("transformed"),l.x!=tt.x||l.y!=tt.y?_e.transformType="move":_e.transformType="select",_e.pressup=!0,l.dispatchEvent(_e)),et=!0,we.visible=!0,Fe&&!frame.ctrlKey&&1<w&&(l.rotation=Math.round(l.rotation/w)*w,ve()),Ce(),we.mouseEnabled=!0,Fe=!1,O.update()});function nt(){tt={x:l.x,y:l.y,rotation:l.rotation,regX:l.regX,regY:l.regY,scaleX:l.scaleX,scaleY:l.scaleY}}nt();var rt,it=l.on("mousedown",nt);q.on("mousedown",nt);q.addChild(M),t&&q.addChild(we),n&&q.addChild($),e&&q.addChild(ee),o&&q.addChild(te),r&&q.addChild(oe),q.addChild(L),t&&(l.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),rt=l.on("pressmove",function(e){if(ve(),Ce(),be(),l.transformControls.events){Ke(e,"move")}}));var at=i;return l.transformControls={visible:a,events:x,ghost:!zot(k),ghostEnabled:!zot(k),show:function(){return s&&Je(),$e(),l.toggled=!0,l.transformControls.visible=!0,j.parent&&j.removeFrom(),O.update(),l},hide:function(){if(l.transformControls.ghost)var e=O.getChildIndex(q);return O.removeChild(q),l.transformControls.ghost&&l.transformControls.ghostEnabled&&O.addChildAt(j,e),l.toggled=!1,l.transformControls.visible=!1,z&&(Xe&&O.off("stagemousemove",Xe),Re&&O.off("stagemousemove",Re),We=!1,Ge.removeFrom(O),Ne.removeFrom(O)),t||(l.cursor=He),O.update(),l},remove:function(e){e||l.transformControls.hide(),toggle=!1,t&&(l.noDrag(),l.off("pressmove",rt))},add:function(e){e||l.transformControls.show(),toggle=at,t&&(l.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),rt=l.on("pressmove",rt))},allowToggleOn:function(){toggle=at=!0,xe=q.on("mousedown",xe),ke=l.on("mousedown",ke),Ye=O.on("stagemousedown",Ye)},allowToggleOff:function(){toggle=at=!1,q.off("mousedown",xe),l.off("mousedown",ke),O.off("stagemousedown",Ye)},disable:function(){q.mouseChildren=!1,q.mouseEnabled=!1,t&&(l.noDrag(),l.off("pressmove",rt))},enable:function(){q.mouseChildren=!0,q.mouseEnabled=!0,t&&(l.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),rt=l.on("pressmove",rt))},recordData:function(e){var t={type:l.type,index:H.getChildIndex(l),x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY,rotation:l.rotation,skewX:l.skewX,skewY:l.skewY,regX:l.regX,regY:l.regY,controls:l.transformControls.visible};return e?JSON.stringify(t):t},setData:function(e,t){if(!zot(e)){t&&(e=JSON.parse(e));e.controls;delete e.controls;var o=e.index;for(var n in zot(o)&&(o=0),delete e.index,e)l[n]=e[n];return timeout(90,function(){ve(),Ce(),be(),H.setChildIndex(l,o),l.transformControls.visible&&"Layer"!=l.type?l.transformControls.show():l.transformControls.hide(),!l.transformControls.ghost||l.transformControls.ghostEnabled||l.transformControls.visible||O.addChild(j)}),l}},hideGhost:function(){l.transformControls.ghost=!1,j.removeFrom()},showGhost:function(){if(l.transformControls.ghost=!0,l.transformControls.ghostEnabled&&!l.transformControls.visible){for(var e=H;e.parent&&e.parent!=O;)e=e.parent;j.stage?O.setChildIndex(j,O.getChildIndex(e)+1):O.addChildAt(j,O.getChildIndex(e)+1)}},addGhost:function(){0<T?(l.transformControls.ghostEnabled=!0,l.transformControls.showGhost()):zon&&zogy("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){l.transformControls.ghostEnabled=!1,l.transformControls.hideGhost()},resize:function(e){if(H=l.parent,ve(),Ce(),be(),a&&l.transformControls.show(),e){var t=new createjs.Event("transformed");t.pressup=!0,t.transformType="resize",l.dispatchEvent(t)}return l},dispose:function(){l.transformControls.hide(),toggle=!1,t&&(l.noDrag(),l.off("pressmove",rt)),q.removeAllEventListeners(),ke&&l.off("mousedown",ke),xe&&l.off("mousedown",xe),Ye&&O.off("stagemousedown",Ye),Xe&&O.off("stagemousemove",Xe),Re&&O.off("stagemousemove",Re),ot&&O.off("stagemouseup",ot),it&&l.off("mousedown",it),rt&&l.off("pressmove",rt),q=Ge=Ne=null,l.transformControls=null},controls:q,scaleControls:$,stretchXControls:ee,stretchYControls:te,rotateControls:oe},l.toggle=function(e){return!0===e?l.transformControls.show():!1===e||l.transformControls.visible?l.transformControls.hide():l.transformControls.show(),l},l.transformControls.ghost&&(l.transformControls.toggleGhost=function(e){return!0===e?l.transformControls.showGhost():!1===e||l.transformControls.visible?l.transformControls.hideGhost():l.transformControls.showGhost(),l}),a?l.transformControls.show():!P&&l.transformControls.ghost&&l.transformControls.showGhost(),l},go.gesture=function(x,e,t,s,o,k,T,c,n,u,d,A,r,i,a,l){var h;if(h=zob(go.gesture,arguments,"obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround, circularBounds, rect"))return h;if(z_d("34.5"),!zot(x)&&x.on){var g,p;if(zot(e)&&(e=!0),zot(t)&&(t=!0),zot(s)&&(s=!0),zot(n)&&(n=!1),zot(c)&&(c=1),zot(u)&&(u=!1),zot(d)&&(d=5),zot(A)&&(A=!1),zot(r)&&(r=!0),zot(i)&&(i=!1),i&&s&&(i=l=null,zon&&zogy("gesture() - does not support surround when rotate is true")),zot(a)&&(a=!1),zot(o)&&!zot(l)&&(o=l),zot(x.zimMaskDynamic)||x.zimMaskApply(),!x.zimTouch){var P,B,I,S,O,E,M,f,j=new go.Damp(x.scaleX,.05),L=new go.Damp(x.scaleY,.05),D=x.scaleX/x.scaleY;if(x.zimTouch={move:e,scale:t,rotate:s,pointers:{},checkBounds:function(e,t){if(x.zimTouch.boundary){var o=x.zimTouch.boundary,n=x.parent.localToLocal(e,t,x.parent);t=i?(e=Math.min(o.x,Math.max(o.x+o.width,n.x)),Math.min(o.y,Math.max(o.y+o.height,n.y))):(e=Math.max(o.x,Math.min(o.x+o.width,n.x)),Math.max(o.y,Math.min(o.y+o.height,n.y))),e=(n=x.parent.globalToLocal(e,t)).x,t=n.y}return{x:e,y:t}}},o){x.zimTouch.boundary=o,n&&(x.zimTouch.boundary=go.boundsToGlobal(x.parent,o)),x.zimTouch.boundaryStartX=x.zimTouch.boundary.x,x.zimTouch.boundaryStartY=x.zimTouch.boundary.y,x.zimTouch.boundaryStartW=x.zimTouch.boundary.width,x.zimTouch.boundaryStartH=x.zimTouch.boundary.height;var m=x.zimTouch.checkBounds(x.x,x.y);x.x=m.x,x.y=m.y}u&&(slideSlice=10,slideTotal=5,p=0,g=[],x.zimTouch.slideInterval=go.interval(slideSlice,function(){g[p++%slideTotal]=[x.x,x.y]}),x.zimTouch.slideInterval.pause(),x.animate({x:x.x,y:x.y},10,"quadOut")),x.zimTouch.mousedown=x.on("mousedown",function(e){zot(f)?f=1:f++;x.stage;if(r){var t=x.parent.numChildren-1;"Keyboard"==x.parent.getChildAt(t).type&&t--,x.parent.setChildIndex(x,t),x.ZIMoutlineShape&&x.outline()}A||(M=null,B=x.scaleX,I=x.scaleY,S=x.rotation,O=x.regX,E=x.regY,x.reg(0,0),P=x.getMatrix(),x.regX=O,x.regY=E);var o="id"+Math.abs(e.pointerID+1),n=x.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY);x.zimTouch.pointers[o]={startX:n.x,startY:n.y,x:n.x,y:n.y},(x.zimTouch.move||x.zimTouch.rotate)&&(x.zimTouch.total=0,go.loop(x.zimTouch.pointers,function(e){x.zimTouch.total++})),u&&1==x.zimTouch.total&&x.zimTouch.slideInterval.pause(!1),z()}),x.zimTouch.pressmove=x.on("pressmove",function(e){x.stage;var t="id"+Math.abs(e.pointerID+1),o=x.parent.globalToLocal(e.stageX/go.scaX,e.stageY/go.scaY);x.zimTouch.pointers[t]&&(x.zimTouch.pointers[t].x=o.x,x.zimTouch.pointers[t].y=o.y);var n,r,i=0,a=0,l=0,s=0;go.loop(x.zimTouch.pointers,function(e,t){i+=t.x-t.startX,a+=t.y-t.startY,l+=t.x,s+=t.y}),n=i/x.zimTouch.total,r=a/x.zimTouch.total,i=x.zimTouch.startX+n,a=x.zimTouch.startY+r,l/=x.zimTouch.total,s/=x.zimTouch.total;var c={x:x.x,y:x.y,scaleX:x.scaleX,scaleY:x.scaleY,rotation:x.rotation};if(x.zimTouch.move){var u=x.zimTouch.checkBounds(i,a);c.x=u.x,c.y=u.y}if(2==x.zimTouch.pair.length){var d=x.zimTouch.pair[0],h=x.zimTouch.pair[1];if(x.zimTouch.scale){var g=Math.sqrt(Math.pow(h.startX-d.startX,2)+Math.pow(h.startY-d.startY,2)),p=Math.sqrt(Math.pow(h.x-d.x,2)+Math.pow(h.y-d.y,2)),f=x.zimTouch.startSX+(p/g-1),m=x.zimTouch.startSY+(p/g-1);c.scaleX=f,c.scaleY=m,c.scaleX=j.convert(f),c.scaleY=L.convert(m);var z=!zot(k)&&Math.min(f,m)<k,y=!zot(T)&&Math.max(f,m)>T;(z||y)&&(z?1<D?(c.scaleY=k,c.scaleX=k*D):(c.scaleX=k,c.scaleY=k/D):y&&(1<D?(c.scaleX=T,c.scaleY=T/D):(c.scaleY=T,c.scaleX=T*D)),j.immediate(c.scaleX),L.immediate(c.scaleY))}if(x.zimTouch.rotate){var b=Math.atan2(d.startY-h.startY,d.startX-h.startX)*(180/Math.PI),v=Math.atan2(d.y-h.y,d.x-h.x)*(180/Math.PI)-b;c.rotation=x.zimTouch.startR+v}if(A)x.scaleX=c.scaleX,x.scaleY=c.scaleY,x.rotation=c.rotation,x.zimTouch.move&&(x.x=c.x,x.y=c.y);else{x.reg(0,0);var w=x.parent.localToGlobal(l,s);l=w.x,s=w.y;var C=zot(M)?x.globalToLocal(l,s):x.globalToLocal(M.x,M.y);P.clone().translate(C.x,C.y).rotate(c.rotation-S).scale(c.scaleX/B,c.scaleY/I).translate(-C.x,-C.y).decompose(x),x.zimTouch.move&&(x.x+=n,x.y+=r),M=x.localToGlobal(C.x,C.y),x.reg(O,E)}x.zimTouch.scale&&x.dispatchEvent("scale"),x.zimTouch.rotate&&x.dispatchEvent("rotate"),x.zimTouch.move&&x.dispatchEvent("move")}else x.x=c.x,x.y=c.y,x.zimTouch.move&&x.dispatchEvent("move");"Tag"!=x.type&&"TextArea"!=x.type&&"Loader"!=x.type||x.resize(),x.ZIMoutlineShape&&x.outline(),x.getStage&&x.stage&&x.stage.update()});function z(){x.zimTouch.pair=[],go.loop(x.zimTouch.pointers,function(e,t,o){t.startX=t.x,t.startY=t.y,o<=1&&x.zimTouch.pair.push(t)}),x.zimTouch.startX=x.x,x.zimTouch.startY=x.y,x.zimTouch.startSX=x.scaleX,x.zimTouch.startSY=x.scaleY,x.zimTouch.startR=x.rotation}function y(){var e=x.localToGlobal(x.regX,x.regY);if(a)var t=x.parent.localToGlobal(x.x-x.width/2,x.y-x.height/2),o=x.parent.localToGlobal(x.x+x.width/2,x.y+x.height/2),n={x:t.x,y:t.y,width:o.x-t.x,height:o.y-t.y};else n=x.boundsToGlobal();var r={x:x.zimTouch.boundaryStartX+e.x-n.x,y:x.zimTouch.boundaryStartY+e.y-n.y,width:x.zimTouch.boundaryStartW-n.width,height:x.zimTouch.boundaryStartH-n.height};x.gestureBoundary(r,!1)}x.on("mousedown",function(){var e=1;x.stage.on("stagemousedown",function(){e++}),x.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){x.zimTouch&&(x.zimTouch.total=0),x.zimTouch&&(x.zimTouch.pointers={}),f=null},50)})},null,!0),x.zimTouch.pressup=x.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);if(delete x.zimTouch.pointers[t],(x.zimTouch.move||x.zimTouch.rotate)&&x.zimTouch.total--,s&&!zot(c)&&0==x.zimTouch.total&&(0<c?x.rotation=Math.round(x.rotation/c)*c:0==c&&(x.rotation=Math.round(x.rotation))),u&&0==x.zimTouch.total&&1==f){x.zimTouch.slideInterval.pause();var o=g[(p+1)%g.length],n=g[p%g.length],r=x.x+(o[0]-n[0])*d,i=x.y+(o[1]-n[1])*d,a=x.zimTouch.checkBounds(r,i),l=slideTotal*slideSlice*d*Math.min((x.x-a.x)/(x.x-r)||1,(x.y-a.y)/(x.y-i)||1);x.animate({x:a.x,y:a.y},l,"quadOut",function(){x.dispatchEvent("slidestop")})}0==x.zimTouch.total&&(f=null),x.getStage&&x.stage&&x.stage.update(),z()}),o&&(y(),x.on("move",y))}return x}},go.noGesture=function(e,t,o,n){var r;return(r=zob(go.noGesture,arguments,"obj, move, scale, rotate"))?r:(z_d("34.6"),!zot(e)&&e.on&&e.zimTouch?(zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),e.zimTouch.move=!t,e.zimTouch.scale=!o,e.zimTouch.rotate=!n,e.zimTouch.move||e.zimTouch.scale||e.zimTouch.rotate||(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e):void 0)},go.gestureBoundary=function(e,t,o){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.localBounds&&e.parent?e.zimTouch.boundary=go.boundsToGlobal(e.parent,t):e.zimTouch.boundary=t,zot(o)&&(o=!0),o&&(e.zimTouch.boundaryStartX=t.x,e.zimTouch.boundaryStartY=t.y,e.zimTouch.boundaryStartW=t.width,e.zimTouch.boundaryStartH=t.height);var n=e.zimTouch.checkBounds(e.x,e.y);return e.x=n.x,e.y=n.y,e}},go.addPhysics=function(e,t,o,n,r,i,a,l,s,c,u,d){var h;if(h=zob(go.addPhysics,arguments,"obj, dynamic, contract, shape, friction, linear, angular, density, restitution, maskBits, categoryBits, physics"))return h;if(z_d("34.8"),zot(d)){if("undefined"==typeof zimPhysics)return zon&&zog("ZIM Physics module must be imported"),e;zot(zimDefaultPhysics)&&(zimDefaultPhysics=new go.Physics),d=zimDefaultPhysics}e.physics=d;var g="rectangle";return"Circle"==e.type||"Dial"==e.type?g="circle":"Triangle"==e.type&&(g="triangle"),zot(n)&&(n=g),function(g,e,t,o,n,r,i,a,l,s,c){z_d("69.97"),zot(t)&&(t=0);"rectangle"==o?g.body=g.physics.makeRectangle(g.width-t,g.height-t,e,n,i,a,l,s,c,r):"circle"==o?g.body=g.physics.makeCircle(g.width/2-t,e,n,i,a,l,s,c,r):"triangle"==o&&(zot(g.a)&&(g.a=g.width,g.b=g.c=Math.sqrt(Math.pow(g.a/2,2)+Math.pow(g.height,2))),g.body=g.physics.makeTriangle(g.a-t,g.b-t,g.c-t,e,n,i,a,l,s,c,r));function u(){zimContactListener=new b2ContactListener,p=new go.Dictionary(!0),f=new go.Dictionary(!0),zimContactListener.BeginContact=function(e){var t=p.at(e.m_fixtureB.GetBody());t?t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody()):(t=p.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody())},zimContactListener.EndContact=function(e){var t=f.at(e.m_fixtureB.GetBody());t?t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody()):(t=f.at(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody()))&&t(e.m_fixtureB.GetBody())},g.physics.world.SetContactListener(zimContactListener)}g.body.x=g.x,g.body.y=g.y,g.body.rotation=g.rotation,g.physics.addMap(g.body,g),g.impulse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=g.body.GetWorldCenter();return zot(o)&&(o=r.x*g.physics.scale),zot(n)&&(n=r.y*g.physics.scale),g.body.ApplyImpulse(new b2Vec2(e,t),new b2Vec2(o/g.physics.scale,n/g.physics.scale)),g},g.force=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=g.body.GetWorldCenter();return zot(o)&&(o=r.x*g.physics.scale),zot(n)&&(n=r.y*g.physics.scale),g.body.ApplyForce(new b2Vec2(e,t),new b2Vec2(o/g.physics.scale,n/g.physics.scale)),g},g.spin=function(e){return zot(e)&&(e=10),g.body.ApplyTorque(1e3*e),g},g.torque=function(e){return zot(e)&&(e=10),g.body.ApplyTorque(e),g},g.follow=function(e,t,o,n,r,i,a,l,s,c,u,d){var h;return(h=zob(g.follow,arguments,"damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal"))?h:(g.physics.follow(g,e,t,o,n,r,i,a,l,s,c,u,d),g)},g.noFollow=function(){return g.physics.follow(null),g},g.control=function(e,t,o,n,r){var i;return(i=zob(g.control,arguments,"type, speed, speedY, horizontal, vertical"))?i:(g.physics.control(g,e,t,o,n,r),g)},g.noControl=function(){return g.physics.noControl(g),g},g.sleep=function(){return zog(g.body),g.body.SetAwake(!1),g},g.wake=function(){return g.body.SetAwake(!0),g},g.contact=function(e){return zimContactListener||u(),p.add(g.body,e),g},g.noContact=function(){return p.remove(g.body),g},g.contactEnd=function(e){return zimContactListener||u(),f.add(g.body,e),g},g.noContactEnd=function(){return f.remove(g.body),g},Object.defineProperty(g,"dynamic",{get:function(){return 2==g.body.GetType()},set:function(e){g.body.SetType(1==e?2:0)}})}(e,t,o,n,r,i,a,l,s,c,u),e},go.removePhysics=function(e){return z_d("34.85"),zot(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.physics.remove(e.body),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.physics=e.impulse=e.force=e.spin=e.torque=null),e},go.hitTestPoint=function(e,t,o,n){if(z_d("35"),!e.stage||zot(t)||zot(o))return!1;e.stage;if(!zot(e)&&e.globalToLocal){if(zot(n)&&(n=!0),n){var r=e.getBounds();if(r){var i=e.globalToLocal(t,o);if(i.x>r.x+r.width||i.x<r.x)return!1;if(i.y>r.y+r.height||i.y<r.y)return!1}}var a={x:t,y:o};return a=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(a.x,a.y):e.globalToLocal(a.x*go.scaX,a.y*go.scaY),e.hitTest(a.x,a.y)}},go.hitTestReg=function(e,t,o){if(z_d("36"),!e.stage||!t.stage)return!1;e.stage;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var n=t.localToGlobal(t.regX,t.regY),r=e.getBounds();if(o&&r){var i=e.globalToLocal(n.x,n.y);if(i.x>r.x+r.width||i.x<r.x)return!1;if(i.y>r.y+r.height||i.y<r.y)return!1}return n=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(n.x,n.y):e.globalToLocal(n.x*go.scaX,n.y*go.scaY),e.hitTest(n.x,n.y)}},go.hitTestRect=function(t,e,o,n){if(z_d("37"),!t.stage||!e.stage)return!1;t.stage;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=0),zot(n)&&(n=!0);var r=e.getBounds();if(r){if(n)if(t.getBounds()&&!go.hitTestBounds(t,e))return!1;var i,a,l=r.x+r.width/2,s=r.y+r.height/2;if(u(e.localToGlobal(l,s)))return!0;for(var c=0;c<=o;c++){if(i=r.width*(c+1)/(o+1),a=r.height*(c+1)/(o+1),u(e.localToGlobal(r.x+i,r.y)))return!0;if(u(e.localToGlobal(r.x+r.width,r.y+a)))return!0;if(u(e.localToGlobal(r.x+r.width-i,r.y+r.height)))return!0;if(u(e.localToGlobal(r.x,r.y+r.height-a)))return!0}}else zog("zim methods - hitTestRect():\n please setBounds() on param b object")}function u(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*go.scaX,e.y*go.scaY),t.hitTest(e.x,e.y)?1:void 0}},go.hitTestCircle=function(t,e,o,n){if(z_d("38"),t.stage&&e.stage&&(stage=t.stage,!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds)){zot(o)&&(o=8),zot(n)&&(n=!0);var r=e.getBounds();if(r){var i=t.getBounds();if(n&&i&&!go.hitTestBounds(t,e))return!1;var a=r.x+r.width/2,l=r.y+r.height/2,s=e.localToGlobal(a,l);if(p(s))return!0;for(var c,u,d,h=(r.width+r.height)/2/2,g=0;g<o;g++)if(c=g/o*2*Math.PI,u=a+h*Math.cos(c),d=l+h*Math.sin(c),p(s=e.localToGlobal(u,d)))return!0;return!1}zog("zim methods - hitTestCircle():\n please setBounds() on param b object")}function p(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*go.scaX,e.y*go.scaY),t.hitTest(e.x,e.y)?1:void 0}},go.hitTestCircles=function(e,t,o){if(z_d("38.5"),e.stage&&t.stage){e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var n=e.getBounds(),r=t.getBounds();if(n&&r){zot(o)&&(o=0);var i=e.localToGlobal(n.x+n.width/2,n.y+n.height/2),a=t.localToGlobal(r.x+r.width/2,r.y+r.height/2),l=e.getConcatenatedMatrix(),s=t.getConcatenatedMatrix();scale1X=Math.sqrt(l.a/go.scaX*l.a/go.scaX+l.c/go.scaX*l.c/go.scaX),scale1Y=Math.sqrt(l.b/go.scaY*l.b/go.scaY+l.d/go.scaY*l.d/go.scaY),scale2X=Math.sqrt(s.a/go.scaX*s.a/go.scaX+s.c/go.scaX*s.c/go.scaX),scale2Y=Math.sqrt(s.b/go.scaY*s.b/go.scaY+s.d/go.scaY*s.d/go.scaY);var c=Math.sqrt(Math.abs(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)));return n.width*Math.max(scale1X,scale1Y)/2+r.width*Math.max(scale2X,scale2Y)/2>=c-o}zog("zim methods - hitTestCircles():\n please setBounds() on both objects")}}},go.hitTestBounds=function(e,t,o,n){if(z_d("39"),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=!1;n&&n.graphics&&(r=!0);var i=e.getBounds(),a=t.getBounds();if(i&&a){zot(o)&&(o=0);var l=go.boundsToGlobal(e),s=go.boundsToGlobal(t);if(r){var c=n.graphics;c.c(),c.ss(1).s("blue"),c.r(l.x,l.y,l.width,l.height),c.s("green"),c.r(s.x,s.y,s.width,s.height),n.stage.update()}return go.rectIntersect(l,s,o)}zog("zim methods - hitTestBounds():\n please setBounds() on both objects")}},go.hitTestPath=function(e,t,o,n){if(z_d("37.5"),e.stage&&t.stage&&(stage=e.stage,!zot(e)&&!zot(t)&&e.hitTest&&("Squiggle"==t.type||"Blob"==t.type))){var r=e.getBounds();zot(o)&&(o=2),zot(n)&&(n=!1);var i,a=t.interpolate(o,null,!0,null,!0);if(n){t.hitPathPoints?t.hitPathPoints.removeAllChildren():t.hitPathPoints=(new go.Container).addTo(stage),t.hitPathPoints.top();for(var l=0;l<a.length;l++){var s=a[l];s=t.localToGlobal(s.x,s.y),new go.Circle(3).loc(s.x,s.y,t.hitPathPoints)}}if(r){var c=go.boundsAroundPoints(a);if(!go.rectIntersect(e.boundsToGlobal(r),t.boundsToGlobal(c)))return}for(l=0;l<a.length;l++){s=a[l];if(s=t.localToGlobal(s.x,s.y),i=s,i=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(i.x,i.y):e.globalToLocal(i.x*go.scaX,i.y*go.scaY),!!e.hitTest(i.x,i.y))return!0}return!1}},go.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!d){var g=e.globalToLocal(i,a);i=g.x,a=g.y}zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0);var p=(t+=c)/n,f=(o+=u)/r,m=Math.min(n-1,Math.max(0,Math.floor((i-l)/p))),z=Math.min(r-1,Math.max(0,Math.floor((a-s)/f)));if(!(p*(m+1)-c<i-l||i-l<p*m||f*(z+1)-u<a-s||a-s<f*z)){var y=z*n+m;return zot(h)||"index"==h?y:"col"==h?m:"row"==h?z:"array"==h?[y,m,z]:void 0}},go.animate=function(s,e,t,c,n,r,l,o,i,a,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,q,U){var K;if(s&&(s.props||s.obj)&&(K=zob(go.animate,arguments,"target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur")))return K;if(z_d("45"),s){if(0==go.ANIMATE||!window.zns&&!ANIMATE)return s;var Z=Array.prototype.slice.call(arguments);if(zot(e)&&!zot(G)&&(e=G),zot(G=e))return zon&&zog("animate() - need props"),s;if("BeadsContainer"==s.type&&zot(T)&&(T=0),zot(U)&&(U=!0),U&&(zot(go.blurCheck)&&go.setBlurDetect(),go.pauseAnimateOnBlur=!0),zot(T)||!s.addChild){t=go.Pick.choose(t),c=go.Pick.choose(c),l=go.Pick.choose(l),u=go.Pick.choose(u),d=go.Pick.choose(d),z=go.Pick.choose(z),y=go.Pick.choose(y),x=zot(x)?t:go.Pick.choose(x),B=go.Pick.choose(B),j=go.Pick.choose(j),L=go.Pick.choose(L);var Q=["loopCount","loopWait","rewind","rewindWait"];for(var J in S)0<=Q.indexOf(J)&&(S[J]=go.Pick.choose(S[J]))}var $={override:!zot(s)&&!zot(s.zimX)&&!zot(G.x)||!zot(s)&&!zot(s.zimY)&&!zot(G.y)};if(zot(a)||($.loop=a),zot(u)||($.count=u),zot(d)||($.loopWait=d),zot(h)||($.loopCall=h),zot(f)||($.loopWaitParams=f),zot(p)||($.loopWaitCall=p),zot(g)||($.loopParams=g),zot(m)||($.loopPick=m),zot(z)||($.rewind=z),zot(y)||($.rewindWait=y),zot(b)||($.rewindCall=b),zot(v)||($.rewindParams=v),zot(w)||($.rewindWaitCall=w),zot(C)||($.rewindWaitParams=C),zot(e)||($=go.merge($,S)),S=$,go.loop(G,function(e,t){if("string"==typeof e){var o=e.split(".");if(1<o.length&&"."!=e.substr(0,1)&&(G["."+e]=t,delete G[e],e="."+e),1<o.length&&"string"==typeof t){var n=t.substr(0,1);"+"!=n&&"-"!=n&&(G[e]="+"+t)}}}),!zot(T)&&s.addChild){for(var ee=[],te=0;te<s.numChildren;te++)ee.push(s.getChildAt(te));X=s,s=ee}var oe=["extra","zoom","speed","layer","fade"],ne={zoom:"Pen"==s.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(s instanceof Array){B&&s.reverse();for(te=0;te<s.length;te++){var re,ie=s[te];if(j)for(var J in ie.zimObj={},G)re=0<=oe.indexOf(J)?G[J]:go.Pick.choose(G[J]),ie.zimObj[J]=ie[J],"string"==typeof re&&(newStart=ie.zimLastObj&&!zot(ie.zimLastObj[J])?ie.zimLastObj[J]:ie[J],re=newStart+Number(re.replace(/\s/g,""))),ie.zimLastObj&&(ie.zimLastObj[J]=z?ie.zimTweenOriginals[J]:G[J]),ie[J]=re;else for(var J in ie.zimObj={},G)oe.indexOf(J),ie.zimObj[J]=G[J];var ae=te*T;0==te&&0!=T&&(ae=20),go.animate(ie,ie.zimObj,t,c,te==s.length-1?n:null,te==s.length-1?r:null,l,null,null,null,null,null,null,null,null,null,m,null,null,null,null,null,null,x,k,null,te==s.length-1?A:null,te==s.length-1?P:null,null,I,go.copy(S),O,E,M,null,L,D,Y,X,R,_,F,W,H,G,N,ae,q)}return X}var le,se,ce,ue=t,de=x;if(zot(ue)&&(ue=1e3),zot(x)&&(x=de=ue),zot(c)&&(c="quadInOut"),zot(l)&&(l=0),zot(y)&&(y=0),zot(S)&&(S={override:!zot(s.zimX)&&!zot(G.x)||!zot(s.zimY)&&!zot(G.y)}),zot(r)&&(r=s),zot(I)&&(I=!0),zot(O)&&(O=!1),zot(E)&&(E=!1),zot(j)&&(j=!1),zot(L)&&(L={}),L.scale&&(L.scaleX=L.scaleY=L.scale,delete L.scale),zot(M)||(S.override=M),zot(_)&&(_=!1),zot(W)&&(W=!!_),zot(R)&&(R=!1),zot(F)&&(F=!0),zot(H)&&(H=!0),G instanceof Array){var he,ge,pe=1;if(0==G.length)return this;function fe(){var e;s.zimLastObj&&go.loop(s.zimLastObj,function(e){zot(s.zimTweenOriginals[e])||(s[e]=s.zimTweenOriginals[e],s.zimLastObj[e]=s.zimTweenOriginals[e])});for(var t,o,n=l,r=0,i=0;i<G.length;i++)if(!zot((e=G[i]).target)){zot(e.time)&&(e.time=ue),n+=e.wait?e.wait:0,t=e.time,o=zot(e.rewindTime)?t:e.rewindTime,e.rewind&&(t=t+o+(e.rewindWait?e.rewindWait:0)),e.loop&&(t*=e.loopCount,t+=(e.loopCount-1)*(e.loopWait?e.loopWait:0)),zot(e.params)&&(e.params=e.target),ge=e.target;var a={target:e.target,obj:go.copy(e.obj),seriesWait:r,wait:n,waitedCall:e.waitedCall,waitedParams:e.waitedParams,time:e.time,ease:e.ease,from:e.from,rewind:e.rewind,call:e.call,params:e.params,loop:e.loop,loopCount:e.loopCount,loopWait:e.loopWait,loopCall:e.loopCall,loopParams:e.loopParams,loopWaitCall:e.loopWaitCall,loopWaitParams:e.loopWaitParams,loopPick:e.loopPick,rewind:e.rewind,rewindWait:e.rewindWait,rewindCall:e.rewindCall,rewindParams:e.rewindParams,rewindWaitCall:e.rewindWaitCall,rewindWaitParams:e.rewindWaitParams,rewindTime:e.rewindTime,rewindEase:e.rewindEase,set:go.copy(e.masterSet),events:Y,rate:q,override:!1,id:D};i==G.length-1&&me(a),go.animate(a),r+=n+t,n=0}}function me(e){var t=e.call,o=e.params;S.loop&&(!S.count||pe<S.count)?e.call=function(){function e(){for(var e=0;e<he.objects.length;e++)he.objects[e].set&&he.objects[e].set(he.values[e]);S.loopWaitCall&&"function"==typeof S.loopWaitCall&&S.loopWaitCall(S.loopWaitParams),fe()}S.loopCall&&"function"==typeof S.loopCall&&S.loopCall(S.loopParams),S.loopWait?(zot(s.zimTweens)&&(s.zimTweens={}),le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,{override:S.override}).wait(S.loopWait,!0).call(e)):e()}:e.call=function(){t&&"function"==typeof t&&t(o),zot(r)&&(r=ge),n&&"function"==typeof n&&n(r),lo(D),s.zimLastObj=null},pe++}return function(){var e=new go.Dictionary;he=new go.Dictionary;for(var t=0;t<G.length;t++)if(Ie=G[t],s=s||Ie.target,zot(Ie.target)&&(Ie.target=s),zot(Ie.ease)&&(Ie.ease=c),!zot(Ie.target)){if(zot(Ie.props)&&!zot(Ie.obj)&&(Ie.props=Ie.obj),Ie.obj=Ie.props,Ie.loop&&(zot(Ie.loopCount)||Ie.loopCount<=0)&&(Ie.loopCount=0,G.splice(t+1,G.length)),zot(Ie.obj.scale)||(Ie.obj.scaleX=Ie.obj.scaleY=Ie.obj.scale,delete Ie.obj.scale),Ie.from){var o=e.at(Ie.target);if(o){if(Ie.set){var n=go.copy(Ie.obj),r=go.merge(o,Ie.set);Ie.obj=eo(Ie.target,Ie.obj,r),Ie.set=go.merge(Ie.set,n)}else Ie.set=go.copy(Ie.obj),Ie.obj=eo(Ie.target,Ie.obj,o);Ie.from=!1}else e.add(Ie.target,eo(Ie.target,Ie.obj,Ie.set))}var i={};for(var a in Ie.obj)i[a]=Ie.set&&Ie.set[a]?Ie.set[a]:Ie.target[a];zot(he.at(Ie.target))&&he.add(Ie.target,{});var l=go.merge(he.at(Ie.target),i);he.remove(Ie.target),he.add(Ie.target,l),Ie.masterSet=go.copy(Ie.set)}zot(s.zimTweens)&&(s.zimTweens={})}(),Qt(),fe(),s}if(G&&(G.x&&(s.zimX=!0),G.y&&(s.zimY=!0)),!zot(G.shape)&&G.shape.type==s.type&&("Blob"==s.type||"Squiggle"==s.type)){var ze=s.pointObjects,ye=G.shape.pointObjects;if(ze.length!=ye.length)zon&&zogy("animate() - shapes must be of same number of points"),delete G.shape;else{G.shape;delete G.shape;var be=zot(G.blobShift)?0:G.blobShift;delete G.blobShift;var ve=!0;for(te=0;te<ze.length;te++){var we=ze[te],Ce=ye[(2e4*ze.length+te+be)%ze.length];for(Ft=0;Ft<4;Ft++)if(1!=Ft){var xe=we[Ft],ke=(Ce[Ft],go.copy(Z));ke[0]=xe,ke[1]={x:Ce[Ft].x,y:Ce[Ft].y,rotation:Ce[Ft].rotation},ve&&(ke[36]=!0,xe.animateEvent&&xe.off("animation",xe.animateEvent),xe.animateEvent=xe.on("animation",function(){s.update()})),ve=!1,go.animate.apply(go.animate,ke)}}if(go.isEmpty(G))return s}}if(!zot(s)){var Te,Ae,Pe;if("Sprite"!=s.type&&s.hasOwnProperty("paused")||Object.defineProperty(s,"paused",{get:function(){return s.animatePaused},set:function(e){s.animatePaused=e}}),s.endTween=function(){return s.stopAnimate(),go.loop(G,function(e){Zt(s,e,G[e])}),s.stage&&s.stage.update(),s},s.zimTweenOriginals={},go.loop(G,function(e,t){s.zimTweenOriginals[e]="path"==e?G[e]:function(e,t){if("."!=t.substr(0,1))return e[t];for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}(s,e)}),s.resetTween=function(e){zot(e)&&(pause=!0),s.pauseAnimate();var o=s.zimSeriesOriginals?s.zimSeriesOriginals:s.zimTweenOriginals;return go.loop(o,function(e){var t;"path"==e?(s.percentComplete=0,s.zimPath=o[e],t=(s.zimStartPercent,s.zimPath.getCurvePoint(s.zimStartPercent/100)),s.loc(t.x,t.y)):Zt(s,e,o[e])}),s.zimLastObj=null,s.stage&&s.stage.update(),s.stopAnimate(),s.zimPath&&(Z[1].path=s.zimPath),zot(s.zimStartRotation)||(s.rotation=s.zimStartRotation),s.zimStartRotation=null,go.animate.apply(null,s.zimSeriesArgs?s.zimSeriesArgs:Z),s.pauseAnimate(e),s},s.replayTween=function(){return s.resetTween(!1),s},G.path||R)s.requestedPercentComplete?Te=s.requestedPercentComplete:s.percentComplete&&(Ae=s,Pe="percentComplete",!Object.getOwnPropertyDescriptor(Ae,Pe).get)&&(Te=s.percentComplete),s.requestedPercentComplete=null,zot(Te)&&(Te=0),s.pathRatio=0,s.zimStartRotation=s.rotation;if(O&&(I=!1),zot(s.zimTweens)&&(s.zimTweens={}),O||(s.stage?Ve=s.stage:zimDefaultFrame?Ve=zimDefaultFrame.stage:O=!0),s.setColorRange&&!zot(G.color)){var Be=G.color;delete G.color,G.colorRange=1,s.setColorRange(s.color,Be),s.colorRange=0}for(var Ie in G){if(!s.zimBusy)break;s.zimBusy[Ie]&&delete G[Ie]}if(!go.isEmpty(G)){"Sprite"!=s.type&&(s.paused=!1),(E||S.loop||S.rewind)&&(s.zimMouseEnabledCheck||(s.zimMouseEnabledCheck=!0,s.zimLastMouseEnabled=s.mouseEnabled),s.mouseEnabled=!1,setTimeout(function(){for(var e in s.zimBusy||(s.zimBusy={}),G)s.zimBusy[e]=!0;s.zimMouseEnabledCheck=null,s.mouseEnabled=s.zimLastMouseEnabled},70)),Qt();var Se,Oe={};for(var te in G)0<=oe.indexOf(te)||(Oe[te]=go.copy(G[te]),G[te]=go.Pick.choose(G[te]));for(te in zot(G.scale)||(G.scaleX=G.scaleY=go.Pick.choose(G.scale),delete G.scale),oe.shift(),L)L[te]=go.Pick.choose(L[te]);for(te in S)"waitedCall"!=te&&"waitedParams"!=te&&"loopCall"!=te&&"rewindCall"!=te&&"loopWaitCall"!=te&&"rewindWaitCall"!=te&&(S[te]=go.Pick.choose(S[te]));if(s.getBounds&&zot(s.percentCompleteCheck)&&(s.percentCompleteCheck=!0,Object.defineProperty(s,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?$t(e,st=!0):this.requestedPercentComplete=e}}),Object.defineProperty(s,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?$t(e,!1):this.requestedPercentComplete=e}})),Object.defineProperty(s,"rate",{get:function(){return q},set:function(e){q=e,s.zimTween.timeScale=q},configurable:!0}),!zot(G.path)&&G.path.segmentPoints){if("Pen"==s.type&&(s.infinite=!0),s.zimOnPath=!0,zot(s.pathRatio)&&(s.pathRatio=0),zot(G.orient)&&(G.orient=G.path,G.startOrient=G.rotation),Se=G.path,_){if(delete G.path,delete G.percent,!zon||zot(s.startPercent)&&zot(s.percent)||zog("ZIM.animate() - percentStart and percent currently not supported with drag on path"),Ne=Se.getCurvePoint(s.pathRatio,He,Qe)){Ne.z;var Ee=s.parent.globalToLocal(Ne.x,Ne.y);s.x=Ee.x,s.y=Ee.y}}else zot(s.startPercent)&&(s.startPercent=go.Pick.choose(zot(G.startPercent)?0:G.startPercent)),zot(s.percent)&&(s.percent=go.Pick.choose(zot(G.percent)?100:G.percent)),delete G.path,delete G.percent;var Me=!Se.lockControls;delete G.path,G.pathRatio=1}j&&(G=eo(s,G,L,!0));s.percentComplete;var je,Le,De,Ye,Xe,Re=!0,_e=!1,Fe=!0,We=!0;if(zot(G.redirect)||(We=G.redirect,delete G.redirect),Se){var He;Me||(Qe=go.copy(Se.segmentPoints),He=go.copy(Se.segmentRatios)),s.currentPercent=s.startPercent+s.percent*s.pathRatio;var Ge=(1e6+s.currentPercent)%100/100,Ne=Se.getCurvePoint(Ge,He,Qe);if(s.parent&&Ne){Ee=s.parent.globalToLocal(Ne.x,Ne.y);s.x=Ee.x,s.y=Ee.y}if(_){c="linear",s.cursor="pointer";var Ve,qe=s.percentComplete,Ue=(W||s.paused,!0),Ke=!0,Ze=qe,Qe=copy(Se.segmentPoints),Je=0;go.loop(Qe,function(e){Je+=distanceAlongCurve(e)});var $e=Math.round(Je/Qe.length/10),et=Se.interpolate($e,null,!0,null,!0),tt=(qe||0)/100*Je,ot=tt;Se.zimAnimateChanged=!1;go.copy(Se.segmentRatios);s.zimAnimatePathChange=Se.on("change",function(){Se.zimAnimateChanged=!0}),s.zimAnimatePathDown=Se.on("mousedown",function(){1==s.paused&&(_e=!0)}),s.zimAnimatePathUp=Se.on("pressup",function(){_e=!1}),s.zimAnimateDragDown=s.on("mousedown",function(e){(Ve=e.target.stage).mouseMoveOutside=!0,Fe=!(Re=!1),setTimeout(function(){Re=!0},50),_e=!0,Se.zimAnimateChanged&&(Qe=go.copy(Se.segmentPoints),Je=0,go.loop(Qe,function(e){Je+=distanceAlongCurve(e)}),$e=Math.round(Je/Qe.length/10),et=Se.interpolate($e,null,!0,null,!0),go.copy(Se.segmentRatios)),Se.zimAnimateChanged=!1,qe=s.percentComplete,rt.immediate(qe);var t=qe;z&&(t=le.position>le.duration/2?2*(100-qe):2*qe),ot=tt=(t||0)/100*Je});var nt=!1;s.zimAnimateDragPress=s.on("pressmove",function(e){nt=!0,function(e){var t=Se.globalToLocal(e.rawX/go.scaX,e.rawY/go.scaY),o=tt;"Blob"==Se.type&&(lt[0]<lt[4]?Ke=!0:lt[0]>lt[4]&&(Ke=!1),o<10&&!Ke?(ot=tt=o=Je-5,rt.immediate(ot/Je*100),lt=[Je-1,Je-2,Je,Je-3,Je-4]):Je-10<o&&Ke&&(ot=tt=o=5,rt.immediate(ot/Je*100),lt=[0,0,0,0,0]));var s=t.x,c=t.y,u=o;et.sort(function(e,t){var o=e.x,n=e.y,r=e.r*Je,i=t.x,a=t.y,l=t.r*Je;return Math.sqrt(Math.pow(s-o,2)+Math.pow(c-n,2)+Math.pow(u-r,2))-Math.sqrt(Math.pow(s-i,2)+Math.pow(c-a,2)+Math.pow(u-l,2))}),ot=et[0].r*Je,qe=ot/Je*100,qe=constrain(qe,0,99.95),z&&(qe/=2,le.position>le.duration/2&&(qe=100-qe))}(e)}),s.animateReturn=function(){z?(Ke=Ue=!1,s.percentComplete<50&&(s.percentComplete=100-s.percentComplete),s.pauseAnimate(!1)):zon&&zogy("animate() - animateReturn() needs rewind set to true")},s.zimAnimateDragUp=s.on("pressup",function(){0==s.paused&&(_e=!1),Re=!1,setTimeout(function(){Re=!0},50),lt[0]<lt[4]?Ke=!0:lt[0]>lt[4]&&(Ke=!1),!s.paused&&z&&We&&Ke!=Ue&&(s.percentComplete=100-s.percentComplete,Ue=Ke)});var rt=new go.Damp(qe,.15),it=0,at=0,lt=[0,0,0,0,0],st=!1;s.zimDragAnimateTicker=go.Ticker.add(function(){if(_)if(++at%20&&(lt.push(ot),lt.shift()),tt=ot,_e||Fe&&1==s.paused){if(st||"Blob"==Se.type&&Math.abs(it-qe)>(z?45:90)){var e=qe;rt.immediate(e),st=!1}else e=rt.convert(qe);.1<Math.abs(it-e)?(s.percentCompleteNoAngle=e,it=e):(s.percentCompleteNoAngle=e,nt=Fe=!1)}else Fe=!1},Ve)}}if(G.orient){if(!0===G.orient){var ct=s.parent.localToGlobal(zot(G.x)?s.x:G.x,zot(G.y)?s.y:G.y);G.orient={x:ct.x,y:ct.y}}je=G.orient,delete G.orient;var ut,dt=s.rotation;if(s.rotation=Se.getPointAngle(0)+dt,je!=Se)ut=je.parent?je.parent.localToLocal(je.x,je.y,s.parent):s.parent.globalToLocal(je.x,je.y),s.rotation=go.angle(s.x,s.y,ut.x,ut.y)+dt}G.flip&&(Le=G.flip,delete G.flip,De=s.scaleX),G.flipVertical&&(Ye=G.flipVertical,delete G.flipVertical,Xe=s.scaleY);var ht=s.x,gt=s.y,pt=0;if(S.loop&&!zot(S.count)){pt=S.count,delete S.count;pe=1}var ft,mt=0;S.loopWait&&(mt=S.loopWait,d=S.loopWait,delete S.loopWait),S.loopCall&&(ft=S.loopCall,delete S.loopCall);var zt,yt=s;S.loopParams&&(yt=S.loopParams,delete S.loopParams),S.loopWaitCall&&(zt=S.loopWaitCall,delete S.loopWaitCall);var bt,vt=s;if(S.loopWaitParams&&(vt=S.loopWaitParams,delete S.loopWaitParams),S.rewind){if(c)-1==(wt=c).indexOf("InOut")&&(-1!=wt.indexOf("Out")?wt=wt.replace("Out","In"):-1!=wt.indexOf("In")&&(wt=wt.replace("In","Out")));if(k)var wt=k;var Ct,xt,kt=0;if(delete S.rewind,z=!0,y=S.rewindWait,S.rewindWait&&(kt=S.rewindWait,delete S.rewindWait),S.rewindCall){Ct=S.rewindCall;var Tt=S.rewindParams;zot(Tt)&&(Tt=s),delete S.rewindCall,delete S.rewindParams}function At(){Ct&&"function"==typeof Ct&&Ct(Tt)}if(S.rewindWaitCall){xt=S.rewindWaitCall;var Pt=S.rewindWaitParams;zot(Pt)&&(Pt=s),delete S.rewindWaitCall,delete S.rewindWaitParams}function Bt(){xt&&"function"==typeof xt&&xt(Pt)}function It(e){Jt(),le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,{override:S.override}).wait(l,!0).call(function(){o&&"function"==typeof o&&o(zot(i)?s:i),l=0,St(le)}),e&&no(e,le)}function St(e){var t=io();s.set&&!j&&s.set(L),le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,S).to(G,ue,createjs.Ease[c]).call(Bt).wait(kt,!0).call(At).to(t,de,createjs.Ease[wt]).call(ro).wait(mt,!0).call(to),e&&no(e,le),ao()}0<N||0<V||0<l?0<N||0<V?le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,{override:S.override}).wait(0<N?N:0,!0).wait(0<V?V:0,!0).call(function(){V=N=0,It(le)}):It():(Jt(),St())}else{function Ot(e){Jt(),le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,{override:S.override}).wait(l,!0).call(function(){l=0,o&&"function"==typeof o&&o(zot(i)?s:i),Et(le)}),e&&no(e,le)}function Et(e){s.set&&!j&&s.set(L),le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,S).to(G,ue,createjs.Ease[c]).call(ro).wait(mt,!0).call(to),e&&no(e,le),ao()}0<N||0<V||0<l?0<N||0<V?le=s.zimTweens[D]=s.zimTween=createjs.Tween.get(s,{override:S.override}).wait(0<N?N:0,!0).wait(0<V?V:0,!0).call(function(){V=N=0,Ot(le)}):Ot():(Jt(),Et())}le.startPaused=W,le.rewinding=!1,zot(q)||(le.timeScale=go.Pick.choose(q)),!O&&I&&(Te&&(s.pathRatio=s.percentComplete&&100!=Math.round(s.percentComplete)?s.percentComplete/100:0,s.percentCompleteNoAngle=100!=Math.round(Te)?Te:0),bt=Y&&!zot(X)&&X.dispatchEvent?go.Ticker.add(function(){(Se||je||Le||Ye)&&jt(),X.dispatchEvent("animation")},Ve):Y&&s.dispatchEvent?go.Ticker.add(function(){(Se||je||Le||Ye)&&jt(),s.dispatchEvent("animation")},Ve):go.Ticker.add(function(){(Se||je||Le||Ye)&&jt()},Ve));var Mt=[1,1,1],jt=function(){if(s.parent&&!le.passive&&!le.startPaused){if(_&&z&&(Ze<50&&50<s.percentComplete||50<Ze&&s.percentComplete<50)&&(Ue=s.percentComplete<50),Ze=s.percentComplete,Se){if(Me&&(Qe=Se.segmentPoints,He=Se.segmentRatios),_)var e=Se.getCurvePoint(s.pathRatio,He,Qe);else{s.currentPercent=s.startPercent+s.percent*s.pathRatio;var t=(1e6+s.currentPercent)%100/100;1==s.pathRatio&&(t+=0<s.percent?1:0);e=Se.getCurvePoint(t,He,Qe)}if(e){e.z;var o=s.parent.globalToLocal(e.x,e.y);s.x=o.x,s.y=o.y}}var n;if(Le&&Re&&(ht>s.x&&go.sign(s.scaleX)==go.sign(De)&&(s.scaleX*=-1),ht<s.x&&go.sign(s.scaleX)!=go.sign(De)&&(s.scaleX*=-1)),Ye&&Re&&(gt>s.y&&go.sign(s.scaleY)==go.sign(Xe)&&(s.scaleY*=-1),gt<s.y&&go.sign(s.scaleY)!=go.sign(Xe)&&(s.scaleY*=-1)),je){var r;if(Se==je)n=go.angle(ht,gt,s.x,s.y)+dt;else r=je.parent?je.parent.localToLocal(je.x,je.y,s.parent):s.parent.globalToLocal(je.x,je.y),n=go.angle(s.x,s.y,r.x,r.y)+dt;0!=n&&(s.paused&&!nt||(Le&&0<ht-s.x&&(n+=180),s.rotation=n==dt?s.rotation:n))}if(_){var i=s.x-ht+s.y-gt;2<Math.abs(i)&&(Mt.push(sign(i)),Mt.shift(),le.forward=function(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}(Mt))}ht=s.x,gt=s.y}};Se&&(s.handlePath=jt),zot(s.zimMaskDynamic)||s.zimMaskApply();var Lt,Dt,Yt=!1;ao(),s.stopAnimate&&s.stopAnimate.real||(s.stopAnimate=function(e,t,o,n){if(!n||!_){if(zot(o)&&(o=!0),null==s.pan&&(s.paused=!0),"Pen"==s.type&&s.zimOnPath&&(s.stop(),s.zimOnPath=!1),zot(t)&&(t=!0),o&&_&&(Se&&Se.off("change",s.zimAnimatePathChange),s.off("mousedown",s.zimAnimateDragDown),s.off("pressmove",s.zimAnimateDragPress),s.off("pressup",s.zimAnimateDragUp),go.Ticker.remove(s.zimDragAnimateTicker)),zot(e)){if(!t)return s;for(var r in s.zimBusy=null,createjs.Tween.removeTweens(s),s.zimTweens)so(r);s.zimTweens=null,s.zimIdSets=null,s.zimTween=null,go.idSets&&go.idSets[se||r]&&(delete go.idSets[se||r],go.isEmpty(go.idSets)&&delete go.idSets),go.animatedObjects.remove(s)}else{Array.isArray(e)||(e=[e]);var i=uo(e);for(var r in s.zimTweens)s.zimTweens[r].requestID&&cancelAnimationFrame(s.zimTweens[r].requestID),t&&0<=i.indexOf(r)&&lo(r),!t&&i.indexOf(r)<0&&lo(r)}return s}s.pauseAnimate()},s.stopAnimate.real=!0,s.pauseAnimate=function(e,t,o,n){if("Pen"==s.type&&(!1===e?s.zimOnPath&&(s.infinite=!0):s.stop()),Dt&&!n)return s.pause(e,t),s;if(zot(e)&&(e=!0),_e=!1,s.paused=e,zot(o)&&(o=!0),zot(t)&&!o)return s;if(zot(t))for(var r in s.zimTweens)co(r,e);else{Array.isArray(t)||(t=[t]);var i=uo(t);for(var r in s.zimTweens)o&&0<=i.indexOf(r)&&co(r,e),!o&&i.indexOf(r)<0&&co(r,e)}return s}),W&&s.pauseAnimate(!0,D,null,!0),G.extra&&(Lt=G.extra,delete G.extra,Array.isArray(Lt)||(Lt=[Lt]));for(te=0;te<oe.length;te++){var Xt=oe[te];G[Xt]&&(zot(Lt)&&(Lt=[]),ho(Xt,G[Xt]),delete G[Xt])}if(Lt){var Rt;le.extraTickers=[];for(te=0;te<Lt.length;te++){var _t=Lt[te];for(var Ft in zot(_t.inputObj)&&(_t.inputObj=s),zot(_t.inputProp)&&(_t.inputProp="y"),zot(_t.inputMin)&&(_t.inputMin=0),zot(_t.inputMax)&&(_t.inputMax="x"==_t.inputProp?Ve.width:Ve.height),zot(_t.outputObj)&&(_t.outputObj=s),zot(_t.outputProp)&&(_t.outputProp="scale"),zot(_t.outputMin)&&(_t.outputMin=0),zot(_t.outputMax)&&(_t.outputMax=_t.outputMin+1),zot(_t.constrain)&&(_t.constrain=!0),_t)G[Ft]=go.Pick.choose(G[Ft]);"percentSpeed"==_t.outputProp&&(R=!0),Rt=new go.Proportion(_t.inputMin,_t.inputMax,_t.outputMin,_t.outputMax,_t.factor,_t.outputRound);var Wt=function(){var r=_t,i=Rt;return function(){var e,t=r.outputObj,o=r.inputObj[r.inputProp];"x"!=r.inputProp&&"y"!=r.inputProp||(o=r.inputObj.parent.localToGlobal(o,o)[r.inputProp]);if(e=r.constrain?go.constrain(i.convert(o),r.outputMin,r.outputMax):i.convert(o),Number.isNaN(e)&&(e=null!=r.outputMin?r.outputMin:0),"scale"==r.outputProp)t.scaleX=go.sign(t.scaleX)*e,t.scaleY=go.sign(t.scaleY)*e;else if("scaleX"==r.outputProp)t.scaleX=go.sign(t.scaleX)*e;else if("scaleY"==r.outputProp)t.scaleY=go.sign(t.scaleY)*e;else if("layer"==r.outputProp){if(!t.parent)return;var n=go.constrain(Math.round(e),0,t.parent.numChildren-1);n!=t.parent.getChildIndex(t)&&t.parent.setChildIndex(t,n)}else"percentSpeed"==r.outputProp?t[r.outputProp]=100*e:t[r.outputProp]=e}}();Wt(),le.extraTickers.push(go.Ticker.add(Wt,Ve))}}if(R||s.zimAnimateDragDown){var Ht;if(R){Dt=!0,s.pauseAnimate(!0,D,null,!0),s.paused=!1,le.currentTime=0;var Gt=le;zot(s.percentSpeed)&&(s.percentSpeed=le.startPaused?0:100);var Nt=1e3/60;le.currentTime=0;var Vt=!V&&!N&&!l&&!pt&&S.loop;F&&S.loop&&!pt&&(F=!1);var qt,Ut=t+(z?x||t:0)+(y||0)+(d||0),Kt=1;S.loop&&pt&&(Kt=pt),F&&(qt=Ut*Kt),function e(){if(le.requestID=requestAnimationFrame(e),R&&(!le.startPaused||0!=s.percentSpeed)){le.startPaused=!1,le!=Gt&&((Gt=le).currentTime=0,s.pauseAnimate(!0,D,null,!0),s.paused=!1,Vt=!V&&!N&&!l&&!pt&&S.loop),Vt&&(le.currentTime+=1e4*Ut,le.setPosition(le.currentTime,!0),Vt=!1);var t=le.currentTime+Nt*s.percentSpeed/100;qt&&0==l&&(t=go.constrain(t,0,qt)),le.currentTime=t,le.setPosition(le.currentTime),(Se||je||Le||Ye)&&jt(),Ve.update()}}()}s.pause=function(e,t){if(zot(e)&&(e=!0),zot(t)&&(t=0),e){if(s.zimAnimateDragDown&&(_=!1,s.cursor="default",Se&&Se.off("change",s.zimAnimatePathChange),s.off("mousedown",s.zimAnimateDragDown),s.off("pressmove",s.zimAnimateDragPress),s.off("pressup",s.zimAnimateDragUp),!R))return;Ht=s.percentSpeed,0<t?go.animate({target:s,props:{percentSpeed:0},override:!1,ticker:!1,time:t,call:function(){s.percentSpeed=0,s.paused=!0,R=!1,s.dispatchEvent("pause")}}):(le.startPaused=!1,s.percentSpeed=0,s.paused=!0,R=!1,setTimeout(function(){s.dispatchEvent("pause")},10))}else{if(s.zimAnimateDragDown&&(_=!0,s.cursor="pointer",Se&&(s.zimAnimatePathChange=Se.on("change",s.zimAnimatePathChange)),s.zimAnimateDragDown=s.on("mousedown",s.zimAnimateDragDown),s.zimAnimateDragPress=s.on("pressmove",s.zimAnimateDragPress),s.zimAnimateDragUp=s.on("pressup",s.zimAnimateDragUp),!R))return;_e=!1,le.currentTime=le.position,0<t?go.animate({target:s,props:{percentSpeed:Ht},override:!1,ticker:!1,time:t,call:function(){s.percentSpeed=Ht,s.paused=!1,R=!0}}):(s.percentSpeed=Ht,s.paused=!1,R=!0)}return s}}return s}}}function Zt(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function Qt(){zot(D)?D=go.makeID(10):(D=String(D),ce=D),zot(s.zimIdSets)&&(s.zimIdSets={}),zot(s.zimIdSets[D])?zot(s.zimTweens[D])||(se=D,D=go.makeID(10),s.zimIdSets[se]=[se],s.zimTweens[se].zimIdSet=se,s.zimIdSets[se].push(D)):(se=D,D=go.makeID(10),s.zimIdSets[se].push(D))}function Jt(){var e;for(te in s.zimLastObj||(s.zimLastObj={}),G){if("string"==typeof G[te]){if("+"==G[te].substr(0,1))continue;e=s.zimLastObj&&!zot(s.zimLastObj[te])?s.zimLastObj[te]:s[te],G[te]=e+Number(G[te].replace(/\s/g,""))}s.zimLastObj[te]=z?s.zimTweenOriginals[te]:G[te]}for(te in L){if("string"==typeof L[te]){if("+"==L[te].substr(0,1))continue;e=s.zimLastObj&&!zot(s.zimLastObj[te])?s.zimLastObj[te]:s[te],L[te]=e+Number(L[te].replace(/\s/g,""))}s.zimLastObj[te]=z?s.zimTweenOriginals[te]:G[te]}}function $t(e,t){s.zimTween.startPaused=!1,R?zot(s.zimTween.currentTime)||(s.zimTween.currentTime=s.zimTween.currentTime-s.zimTween.position+e*s.zimTween.duration/100):s.zimTween.setPosition(Math.round(e*s.zimTween.duration/100)),t&&Se&&!1!==G.orient&&Se.getCurvePoint&&(s.rotation=Se.getCurvePoint(e/100,null,null,!0).angle+(dt||0)),st&&void 0!==qe&&(qe=e),s.handlePath()}function eo(e,t,o,n){Se&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&zot((o=o||{}).pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100);var r={};for(te in t)o&&!zot(o[te])?r[te]=o[te]:r[te]=e[te],n&&(e[te]=t[te]);return r}function to(){if(A&&"function"==typeof A&&A(P),ft&&"function"==typeof ft&&ft(yt),m){var e,t=go.Pick.choose(q);if(zot(q)||(le.timeScale=t),zot(Oe.scale)||(e=go.Pick.choose(Oe.scale)),!j&&le.step&&le.step.prev&&le.step.prev.props)for(var o in le.step.prev.props)0<=oe.indexOf(o)||(zot(Oe[o])||(le.step.prev.props[o]=go.Pick.choose(Oe[o])),"scaleX"!=o||zot(e)||(le.step.prev.props.scaleX=e),"scaleY"!=o||zot(e)||(le.step.prev.props.scaleY=e))}}function oo(){zt&&"function"==typeof zt&&zt(vt)}function no(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function ro(){if(s.paused&&"Sprite"!=s.type)n&&"function"==typeof n&&n(r);else{if(S.loop){if(!(0<pt))return void oo();if(pe<pt)return oo(),void pe++;z?s.set&&s.set(io()):s.set&&s.set(G)}H?lo(D):s.pauseAnimate(!0,D),A&&"function"==typeof A&&A(P),n&&"function"==typeof n&&n(r)}}function io(){var e={};for(var t in G)if(O)zot(L[t])||j?e[t]=s.style[t]:e[t]=L[t];else if(zot(L[t])||j)if("."==t.substr(0,1)){for(var o=t.split("."),n=s,r=1;r<o.length;r++)n=n[o[r]];e[t]=n}else e[t]=s[t];else e[t]=L[t];return e}function ao(){le.zimObj=G,le.zimTicker=bt,le.zimPaused=Yt,se&&(le.zimIdSet=se),ce&&(zot(go.idSets)&&(go.idSets={}),zot(go.idSets[ce])?go.idSets[ce]=[s]:go.idSets[ce].indexOf(s)<0&&go.idSets[ce].push(s)),go.animatedObjects||(go.animatedObjects=new go.Dictionary(!0)),go.animatedObjects.add(s,!0)}function lo(e){if(!zot(s.zimTweens)&&!zot(s.zimTweens[e])){s.zimX=null,s.zimY=null,function(e){if(s.zimBusy){for(var t in e)delete s.zimBusy[t];go.isEmpty(s.zimBusy)&&(s.zimBusy=null)}}(s.zimTweens[e].zimObj),s.zimTweens[e].paused=!0,so(e);var t=s.zimTweens[e].zimIdSet;if(!zot(t)&&s.zimIdSets){var o=s.zimIdSets[t];o&&o.splice(o.indexOf(e),1),o&&0==o.length&&(delete s.zimIdSets[t],go.isEmpty(s.zimIdSets)&&delete s.zimIdSets)}if("Pen"==s.type&&s.zimOnPath&&(s.stop(),s.zimOnPath=!1),delete s.zimTweens[e],go.isEmpty(s.zimTweens)&&s.stopAnimate(null,null,!1,!0),!(s.zimTweens&&s.zimTweens[e]||s.zimIdSets&&s.zimIdSets[t||e])&&go.idSets&&go.idSets[t||e]){go.idSets[t||e];var n=go.idSets[t||e].indexOf(s);0<=n&&go.idSets[t||e].splice(n,1),go.idSets[t||e].length<=0&&(delete go.idSets[t||e],go.isEmpty(go.idSets)&&delete go.idSets)}}}function so(o){!function(){var e=s.zimTweens[o].zimTicker;if(s.zimTweens[o].extraTickers)for(var t=0;t<s.zimTweens[o].extraTickers.length;t++)go.Ticker.remove(s.zimTweens[o].extraTickers[t]);e&&setTimeout(function(){e&&go.Ticker.remove(e),e=null},200)}()}function co(e,t){var o=s.zimTweens[e];(o.paused=t)!=o.zimPaused&&((o.zimPaused=t)?o.zimTicker&&(o.zimAnimateTimeout=setTimeout(function(){go.Ticker.remove(o.zimTicker)},200)):(o.startPaused=!1,clearTimeout(o.zimAnimateTimeout),o.zimTicker&&(o.zimTicker=go.Ticker.add(o.zimTicker,Ve))))}function uo(e){for(var t=[],o=0;o<e.length;o++)s.zimIdSets&&!zot(s.zimIdSets[e[o]])?t=t.concat(s.zimIdSets[e[o]]):t.push(e[o]);return t}function ho(e,t){!0===t?Lt.push({outputProp:ne[e]}):Array.isArray(t)?Lt.push({outputProp:ne[e],outputMin:t[0],outputMax:t[1],inputMin:t[2],inputMax:t[3]}):Lt.push({outputProp:ne[e],outputMax:t})}},go.stopAnimate=function(e){if(z_d("45.12"),zot(e)){if(go.animatedObjects)for(var t=go.animatedObjects.length-1;0<=t;t--)go.animatedObjects.objects[t].stopAnimate()}else if(Array.isArray(e)||(e=[e]),go.idSets)for(var o=0;o<e.length;o++){var n=e[o];if(go.idSets[n])for(t=go.idSets[n].length-1;0<=t;t--)go.idSets[n][t].stopAnimate(n)}},go.stopZimAnimate=function(e){z_d("45.1"),go.stopAnimate(e)},go.pauseAnimate=function(e,t){if(z_d("45.22"),zot(e)&&(e=!0),zot(t)){if(go.animatedObjects)for(var o=go.animatedObjects.length-1;0<=o;o--)go.animatedObjects.objects[o].pauseAnimate(e)}else if(Array.isArray(t)||(t=[t]),go.idSets)for(var n=0;n<t.length;n++){var r=t[n];if(go.idSets[r])for(o=go.idSets[r].length-1;0<=o;o--)go.idSets[r][o].pauseAnimate(e,r)}},go.pauseZimAnimate=function(e,t){z_d("45.2"),go.pauseAnimate(e,t)},go.wiggle=function(i,a,l,s,c,u,d,e,h,g,p,f,m,t){var o;if(o=zob(go.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker"))return o;if(z_d("45.25"),zot(i)||zot(l)||zot(s))return i;zot(c)&&(c=s),zot(u)&&(u=1e3),zot(d)&&(d=u),zot(g)&&(g="quadInOut"),zot(p)&&(p=!1),zot(f)&&(f=go.makeID()),zot(h)&&(h="both"),zot(m)&&(m="both"),zot(t)&&(t=!0),zot(e)||(i.wiggleTimeout=setTimeout(function(){i.stopAnimate(f),i.dispatchEvent("wigglestop")},e));var z,y=0;return function e(){var t=go.rand(go.Pick.choose(u),go.Pick.choose(d)),o={},n={};if(n[a]=go.Pick.choose(l),"negative"==h||0==y&&"negative"==m)var r=-go.rand(go.Pick.choose(s),go.Pick.choose(c),p);else r="positive"==h||0==y&&"positive"==m?go.rand(go.Pick.choose(s),go.Pick.choose(c),p):0==y?go.rand(go.Pick.choose(s),go.Pick.choose(c),p,!0):go.rand(go.Pick.choose(s),go.Pick.choose(c),p)*go.sign(z)*-1;o[a]=go.Pick.choose(l)+r,0==y&&(t/=2),z=r,y++,"negative"==h||"positive"==h?go.animate({target:i,obj:o,set:n,ease:g,time:2*t,rewind:!0,override:!1,call:e,id:f,ticker:!!i.stage}):go.animate({target:i,obj:o,ease:g,time:t,override:!1,call:e,id:f,ticker:!!i.stage})}(),i},go.zimLoopCheck=!1,go.loop=function(e,t,o,n,r,i){var a;if(a=zob(go.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(go.zimLoopCheck||z_d("45.3"),go.zimLoopCheck=!0,!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var l="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":"invalid";if("container"!=l||e.addChild){if("number"==l||"array"==l||"nodelist"==l||"htmlcollection"==l){if(0==(h=g((u="number"==l?e:e.length)-1)))return;if(o)for(var s=r;i<=s;s-=n){if("number"==l)var c=t(s,h,r,i,e);else if("array"==l)c=t(e[s],s,h,r,i,e);else c=t(e.item(s),s,h,r,i,e);if(void 0!==c)return c}else for(s=r;s<=i;s+=n){if("number"==l)c=t(s,h,r,i,e);else if("array"==l)c=t(e[s],s,h,r,i,e);else c=t(e.item(s),s,h,r,i,e);if(void 0!==c)return c}return!0}if("object"==l){var u=0,d=[];for(var s in e)u++,d.push(s);if(0==(h=g(u-1)))return;if(o)for(s=r;i<=s;s-=n){if(void 0!==(c=t(d[s],e[d[s]],s,h,r,i,e)))return c}else for(s=r;s<=i;s+=n){if(void 0!==(c=t(d[s],e[d[s]],s,h,r,i,e)))return c}return!0}var h;if(0!=(h=g(e.numChildren-1))){if(o)for(s=r;i<=s;s-=n){if(void 0!==(c=t(e.getChildAt(s),s,h,r,i,e)))return c}else for(s=r;s<=i;s+=n){if(void 0!==(c=t(e.getChildAt(s),s,h,r,i,e)))return c}return!0}}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},go.scaleTo=function(e,t,o,n,r,i){var a;if(a=zob(go.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return a;if(z_d("43"),!zot(e)&&e.getBounds&&e.getBounds()){if(!zot(t)&&t.getBounds&&t.getBounds()){zot(o)&&(o=-1),zot(n)&&(n=-1),-1==o&&-1==n&&(o=n=100),zot(r)&&(r="smallest"),zot(i)&&(i=!1);var l=t.getBounds().width*o/100*(i?1:t.scaleX),s=t.getBounds().height*n/100*(i?1:t.scaleY);if("Stage"!=t.type&&"StageGL"!=t.type||(l=t.width*o/100,s=t.height*n/100),(-1==o||-1==n)&&"both"!=r&&"stretch"!=r)return-1==o?go.sca(e,s/e.getBounds().height):go.sca(e,l/e.getBounds().width),e;if("both"==r||"stretch"==r)return e.scaleX=-1!=o?l/e.getBounds().width:e.scaleX,e.scaleY=-1!=n?s/e.getBounds().height:e.scaleY,e;if("biggest"==r||"largest"==r||"outside"==r)var c=Math.max(l/e.getBounds().width,s/e.getBounds().height);else c=Math.min(l/e.getBounds().width,s/e.getBounds().height);return go.sca(e,c),e}zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to")}else zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale")},go.fit=function(e,t,o,n,r,i){var a;if(a=zob(go.fit,arguments,"obj, left, top, width, height, inside"))return a;if(z_d("46"),!zot(e)&&e.getBounds){if(e.getBounds()){if(zot(t)){if(!e.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!e.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=t=0,n=e.stage.getBounds().width,r=e.stage.getBounds().height}zot(i)&&(i=!0),e.scaleX=e.scaleY=1;var l,s=n,c=r,u=e.getBounds().width,d=e.getBounds().height;l=i?u/d<=s/c?c/d:s/u:u/d<=s/c?s/u:c/d,e.scaleX=e.scaleY=l;var h=u*l,g=d*l;return e.x=(e.regX-e.getBounds().x)*l+t+(s-h)/2,e.y=(e.regY-e.getBounds().y)*l+o+(c-g)/2,{x:e.x,y:e.y,width:h,height:g,scale:l,bX:t,bY:o,bWidth:n,bHeight:r}}zog("zim methods - fit(): please setBounds() on object")}},go.boundsCheck=!1,go.boundsToGlobal=function(e,t,o){if(go.boundsCheck||(z_d("40"),go.boundsCheck=!0),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n=e.getBounds();if(n||!zot(t)){if(t&&(n=t),o)var r=e.globalToLocal(n.x,n.y),i=e.globalToLocal(n.x+n.width,n.y),a=e.globalToLocal(n.x+n.width,n.y+n.height),l=e.globalToLocal(n.x,n.y+n.height);else r=e.localToGlobal(n.x,n.y),i=e.localToGlobal(n.x+n.width,n.y),a=e.localToGlobal(n.x+n.width,n.y+n.height),l=e.localToGlobal(n.x,n.y+n.height);var s=Math.min(r.x,i.x,a.x,l.x),c=Math.min(r.y,i.y,a.y,l.y),u=Math.max(r.x,i.x,a.x,l.x),d=Math.max(r.y,i.y,a.y,l.y);return new createjs.Rectangle(s,c,u-s,d-c)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},go.resetBounds=function(e,t,o,n,r){if(z_d("40.5"),zot(n))i=0,a=t,l=0,s=o;else var i=t,a=n,l=o,s=r;return zot(s)&&(s=a),zot(t)?e.setBounds(null):e.setBounds(i,l,a,s),e},go.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},go.duplicate=function(e,t){z_d("45.6");var o=e.clone(t);for(var n in e)if(e.hasOwnProperty(n)&&null==o[n]){if("parent"==n)continue;o[n]=e[n]}return o},go.expand=function(e,t,o){if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),r=new createjs.Shape;return r.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=r,e},go.setSwipe=function(i,e){if(z_d("34"),!zot(i)&&i.on)return i.zimNoSwipe=!e||null,i instanceof createjs.Container&&function e(t){var o=t.numChildren;var n;for(var r=0;r<o;r++)(n=t.getChildAt(r)).zimNoSwipe=i.zimNoSwipe,n instanceof createjs.Container&&e(n)}(i),i},go.setMask=function(n,r,i){if(z_d("50.1"),zot(n)&&zog("zim methods - setMask(): please provide obj"),zot(r))return e(),n;var a,l=n.stage||(zimDefaultFrame?zimDefaultFrame.stage:null);function e(){n.zimMask&&n.zimMask.parent&&n.zimMask.parent.removeChild(n.zimMask),n.zimMask=null,n.zimMaskTicker&&go.Ticker.remove(n.zimMaskTicker),n.mask=null}function t(){if(i&&(!l||!r.stage))return n;if(a=null,n.zimMask=r.zimMask=a=r.shape.clone(),go.copyMatrix(a,r),r.addChildAt(a,0),a.alpha=0,n.parent){var e=r.getConcatenatedMatrix().decompose(),t=n.parent.getConcatenatedMatrix().decompose();a.scaleX=e.scaleX/t.scaleX,a.scaleY=e.scaleY/t.scaleY,a.rotation=(e.rotation?e.rotation:0)-(t.rotation?t.rotation:0);var o=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,n.parent);a.x=o.x,a.y=o.y,n.mask=a}else n.mask=a}return n.zimMaskOriginal&&n.zimMaskOriginal!=r&&e(),zot(i)&&(i=!("Blob"!=r.type&&zot(r.zimDown)&&zot(r.transformControls)&&zot(r.zimTouch)&&zot(r.zimTweens)),r.zimMaskDynamic=i),(n.zimMaskOriginal=r).zimMaskApply=function(){n.zimMaskTicker&&go.Ticker.remove(n.zimMaskTicker),n.zimMaskTicker=go.Ticker.add(t)},r&&r.shape?(t(),i&&r.zimMaskApply()):(a=r,n.mask=a),n},go.outline=function(t,e,o,n){var r;if(r=zob(go.outline,arguments,"obj, color, size, boundsOnly"))return r;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zogy("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - outline(): object should be on stage first"),t;if(zot(e)&&(e="brown"),zot(o)&&(o=2),o<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var i=t.getBounds(),a=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new go.Shape;a.type="zimOutlineShape";var l=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new go.Shape;l.type="zimOutlineShape";var s=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var c=t.localToLocal(i.x,i.y,s),u=t.localToLocal(i.x+i.width,i.y,s),d=t.localToLocal(i.x+i.width,i.y+i.height,s),h=t.localToLocal(i.x,i.y+i.height,s),g=t.localToLocal(0,0,s),p=a.graphics.c(),f=l.graphics.c();if(p.s(e).ss(o).mt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(h.x,h.y).lt(c.x,c.y).cp(),!n){f.s("white").ss(o+2),f.mt(-11,0).lt(11,0),f.mt(0,-11).lt(0,11),f.s(e).ss(o),f.mt(-10,0).lt(10,0),f.mt(0,-10).lt(0,10),f.cp(),l.x=g.x,l.y=g.y,l.rotation=t.rotation,p.s("white").ss(o+2).dc(t.x,t.y,16),p.s(e).ss(o).dc(t.x,t.y,16)}t.parent.removeChild(a),t.parent.removeChild(l);var m=t.parent.getChildIndex(t);return t.parent.addChildAt(l,m+1),t.parent.addChildAt(a,m+1),a.mouseEnabled=!1,l.mouseEnabled=!1,t},go.STYLE=null,go.STYLECHECK=!1,go.ignore="ignore",go.getStyle=function(e,t,o){go.STYLECHECK||(z_d("50.34"),go.STYLECHECK=!0);var n=["pos","addTo","center","centerReg","mov","drag","transform","gesture","outline","bounds","animate","wiggle"],r=go.STYLE;if("undefined"!=typeof STYLE&&(r=STYLE),r=zot(r)?{}:go.copy(r),zot(o))o={};else for(var i=0;i<n.length;i++)delete o[n[i]];var a,l=o,s=r.type;if(s&&delete r.type,!zot(t)&&!zot(r.group)){var c=t.split(","),u={};for(i=0;i<c.length;i++){var d=c[i].trim();zot(r.group[d])||(u=go.merge(u,r.group[d]))}delete r.group}for(var h in zot(e)||zot(s)||zot(s[e])||(r=go.merge(r,s[e])),zot(t)||zot(u)||(r=go.merge(r,u)),r)l[h]?delete r[h]:"ignore"!=(a=-1!=n.indexOf(h)||r.delayPick?r[h]:go.Pick.choose(r[h]))?(a&&a.constructor==={}.constructor&&(a=go.copy(a,!0,!1)),r[h]=a):delete r[h];return!1===(r=go.merge(r,l)).style?{}:r};var r=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","regX","regY"],qe=function(t,o){if(o){o.add&&t.addTo(),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg);for(var n=0;n<r.length;n++)null!=o[r[n]]&&(t[r[n]]=go.Pick.choose(o[r[n]]));if(o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x?o.bounds.x:0,o.bounds.y?o.bounds.y:0,o.bounds.width?o.bounds.width:100,o.bounds.height?o.bounds.height:100),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(go.Pick.choose(o.loc.x),go.Pick.choose(o.loc.y)):t.loc(go.Pick.choose(o.loc))),o.pos)if(o.pos.constructor==={}.constructor)t.pos(go.Pick.choose(o.pos.x),go.Pick.choose(o.pos.y),go.Pick.choose(o.pos.right),go.Pick.choose(o.pos.bottom),go.Pick.choose(o.pos.index),o.pos.add,go.Pick.choose(o.pos.reg),go.Pick.choose(o.pos.regX),go.Pick.choose(o.pos.regY));else{var e=go.Pick.choose(o.pos);"left"!=e&&"top"!=e||t.pos(),"right"==e&&t.pos({right:!0}),"bottom"==e&&t.pos({bottom:!0}),"rightbottom"!=e&&"bottomright"!=e||t.pos({right:!0,bottom:!0}),"center"==e&&t.center()}if((o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(go.Pick.choose(o.mov.x),go.Pick.choose(o.mov.y)):t.mov(go.Pick.choose(o.mov))),o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate){Array.isArray(o.animate)||(o.animate=[o.animate]);for(n=0;n<o.animate.length;n++)!function(){var e=o.animate[n];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}()}if(o.wiggle){Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]);for(n=0;n<o.wiggle.length;n++)!function(){var e=o.wiggle[n];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}()}o.expand&&t.expand(!0===o.expand?null:o.expand)}};if(go.ANIMATE=!0,go.OPTIMIZE=!1,go.ACTIONEVENT="mousedown",go.KEYFOCUS=null,go.POSREG=!1,go.DRAGALL=!1,go.Ticker={stages:null,myUpdate:null,alwaysList:new go.Dictionary,list:new go.Dictionary,setFPS:function(e,t){zot(e)&&zot(t)?(e=30,t=60):zot(e)?e=30:zot(t)&&(t=e),go.Ticker.framerate=createjs.Ticker.framerate=go.mobile()?e:t},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(e,t){z_d("30");var o=go.Ticker;return o.has(e,t)?e:(o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zimDefaultFrame.stage),zot(e)||"function"!=typeof e?void zog("zim.Ticker.add() - only add functions"):(o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.list.at(t)?o.list.at(t).push(e):o.list.add(t,[e]),e))},rawID:{},raw:function(o){z_d("30");var n=go.makeID(7,"letters");return function e(t){o(t),go.Ticker.rawID[n]=requestAnimationFrame(e)}(),n},removeRaw:function(e){cancelAnimationFrame(go.Ticker.rawID[e]),delete go.Ticker.rawID[e]},call:function(e){for(var t,o,n=go.Ticker,r=0;r<n.list.length;r++){t=n.list.objects[r],o=n.list.values[r];for(var i=0;i<o.length;i++)o[i](e);n.alwaysList.at(t)?t.update():0<o.length&&(!zot(n.update)||go.OPTIMIZE||!zns&&OPTIMIZE?n.update&&t.update():t.update())}if(0==n.list.length)for(r=0;r<n.alwaysList.length;r++)t=n.alwaysList.objects[r],null==n.list[t]&&t.update()},always:function(e){z_d("30");var t=go.Ticker;t.framerate||t.setFPS(),!zot(e)&&e.update||(e=zimDefaultFrame.stage),t.alwaysList.add(e,!0),t.ticker||(t.ticker=createjs.Ticker.on("tick",t.call))},alwaysOff:function(e){var t=go.Ticker;!zot(e)&&e.update||(e=zimDefaultFrame.stage),t.alwaysList.remove(e)},remove:function(e){var t=go.Ticker;if(zot(e)||"function"!=typeof e)zog("zim.Ticker - only remove functions");else{for(var o=0,n=0;n<t.list.length;n++){t.list.objects[n];var r=t.list.values[n].indexOf(e);-1<r&&t.list.values[n].splice(r,1),o+=t.list.values[n].length}0<t.alwaysList.length||0==o&&(createjs.Ticker.off("tick",t.ticker),t.ticker=null)}},removeAll:function(e){for(var t,o=go.Ticker,n=0,r=0;r<o.list.length;r++)t=o.list.objects[r],!zot(e)&&e!==t||(o.list.values[r]=[]),n+=o.list.values[r].length;0<o.alwaysList.length||0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},has:function(e,t){return!zot(t)&&t.update||(t=zimDefaultFrame.stage),go.Ticker.list&&go.Ticker.list.at(t)&&0<=go.Ticker.list.at(t).indexOf(e)},dispose:function(e){for(var t,o=go.Ticker,n=0,r=o.list.length-1;0<=r;r--)t=o.list.objects[r],zot(e)||e===t?(o.list.remove(e),o.alwaysList.remove(e)):n+=o.list.values[r].length;if(!(0<o.alwaysList.length))return 0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null),!0}},Object.defineProperty(go.Ticker,"update",{get:function(){return go.Ticker.myUpdate},set:function(e){var t=go.Ticker;"boolean"!=typeof e&&(e=null),t.myUpdate=e,!1===t.myUpdate&&(cancelAnimationFrame(t.ticker),t.alwaysList=new go.Dictionary)}}),go.Pages=function(o,p,f,e,m,t,n,r){var i;if(i=zob(go.Pages,arguments,"pages, transition, speed, transitionTable, holder, style, group, inherit",this))return i;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=n;var a=!1===t?{}:go.getStyle(this.type,this.group,r);if(zot(o)&&(o=null!=a.pages?a.pages:[]),this.pages=o,zot(p)&&(p=null!=a.transition?a.transition:"none"),zot(f)&&(f=null!=a.speed?a.speed:200),zot(e)&&(e=null!=a.transitionTable?a.transitionTable:[]),this.transitionTable=e,zot(m)&&(m=null!=a.holder?a.holder:null),zot(m)&&zimDefaultFrame&&(m=zimDefaultFrame.stage),m.getBounds&&m.getBounds()){this.speed=f,this.active=!0;var z=this;z.transitioning=!1;var y,b,v=m.getBounds().width,w=m.getBounds().height;"none"==p&&e==[]||h();for(var l,s,C=["left","right","up","down"],c=0;c<o.length;c++)(l=o[c]).constructor!=={}.constructor&&(l=o[c]={page:o[c]}),g(l.page,l.swipe);var u,x=this.page=o[0]?o[0].page:null;zot(this.page)||(this.index=0),this.addChild(x),A(x),this.swipe=new go.Swipe(m);var k=!1,d=this.swipe.on("swipe",function(e){if(z.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=C.indexOf(t);s=x.zimSwipeArray[n],u=[s,t,null,null,!0],z.page=x,z.nextPage=s,z.direction=t,z.dispatchEvent("swipe"),setTimeout(function(){k||z.go(s,t,null,null,!0)},50)}}});this.addPage=function(e,t){g(e,t),z.pages.push({page:e}),x?e.parent&&e.parent.removeChild(e):(x=z.page=e,z.addChild(x))},this.removePage=function(o){P(o),z.currentPage==o&&(z.removeChild(o),m.stage&&m.stage.update()),go.loop(z.pages,function(e,t){e.page!=o&&e!=o||z.pages.splice(t,1)},!0),o.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){k=!0},this.unpause=function(){k&&z.go(u[0],u[1],u[2],u[3],u[4])};var T=!0;this.go=function(e,t,o,n,r){if("number"==typeof e){var i=z.pages[e];if(zot(i))return;e=i.page}setTimeout(function(){k=!1},200);for(var a=[{x:v},{x:-v},{y:w},{y:-w}],l=[{x:v/2,alpha:0},{x:-v/2,alpha:0},{y:w/2,alpha:0},{y:-w/2,alpha:0}],s=p,c=f,u=0;u<z.transitionTable.length;u++)if(z.transitionTable[u][0]==x&&z.transitionTable[u][1]==e){s=z.transitionTable[u][2],c=z.transitionTable[u][3];break}if(zot(o)&&(o=s),zot(n)&&(n=c),z.speed=n,z.direction=t,""==e||null==e)z.page=x,z.dispatchEvent("nothing");else if("string"==typeof e)z.page=x,z.dispatchEvent(e);else{if(e==x)return;zot(t)&&(t="right");var d=C.indexOf(t);if(!T)return;function h(e){e[0].uncache(),e[1].uncache(),z.transitioning=!1,z.dispatchEvent("pagetransitioned"),z.removeChild(z.lastPage),z.removeChild(y),z.removeChild(b),A(x),T=!0}function g(e){z.removeChild(z.lastPage),go.animate(e.shift(),{alpha:0},z.speed/2,null,h,e)}T=!1,e.x=0,e.y=0,e.alpha=e.zimOriginalAlpha,z.transitioning=!0,"slide"==o?(e.x=-(0|a[d].x),e.y=-(0|a[d].y),e.cache(0,0,(v+1)/e.scaleX,(w+1)/e.scaleY),x.cache(0,0,(v+1)/x.scaleX,(w+1)/x.scaleY),z.addChild(e),z.addChild(x),go.animate(x,a[d],z.speed,null,h,[x,e]),go.animate(e,[{x:0},{x:0},{y:0},{y:0}][d],z.speed)):"reveal"==o?(e.cache(0,0,(v+1)/e.scaleX,(w+1)/e.scaleY),x.cache(0,0,(v+1)/x.scaleX,(w+1)/x.scaleY),z.addChild(e),z.addChild(x),go.animate(x,l[d],z.speed,null,h,[x,e])):"fade"==o?(e.cache(0,0,(v+1)/e.scaleX,(w+1)/e.scaleY),x.cache(0,0,(v+1)/x.scaleX,(w+1)/x.scaleY),e.alpha=1,z.addChild(e),z.addChild(x),go.animate(x,{alpha:0},z.speed,null,h,[x,e])):"black"==o?(e.cache(0,0,(v+1)/e.scaleX,(w+1)/e.scaleY),x.cache(0,0,(v+1)/x.scaleX,(w+1)/x.scaleY),e.alpha=1,z.addChild(e),z.addChild(x),y.alpha=0,z.addChild(y),go.animate(y,{alpha:1},z.speed/2,null,g,[y,x,e])):"clear"==o?(e.cache(0,0,(v+1)/e.scaleX,(w+1)/e.scaleY),x.cache(0,0,(v+1)/x.scaleX,(w+1)/x.scaleY),e.alpha=0,z.addChild(e),z.addChild(x),go.animate(x,{alpha:0},z.speed/2),go.animate(e,{alpha:1},z.speed/2,null,h,[x,e],z.speed/2)):"white"==o?(e.cache(0,0,(v+1)/e.scaleX,(w+1)/e.scaleY),x.cache(0,0,(v+1)/x.scaleX,(w+1)/x.scaleY),e.alpha=1,z.addChild(e),z.addChild(x),b.alpha=0,z.addChild(b),go.animate(b,{alpha:1},z.speed/2,null,g,[b,x,e])):(z.transitioning=!1,z.addChild(e),z.removeChild(x),T=!0),P(x),z.lastPage=x,z.page=e,z.index=-1;for(u=0;u<z.pages.length;u++){z.pages[u].page==z.page&&(z.index=u)}"none"==o&&A(e),zot(r)&&(r=!1),z.fromSwipe=r,z.dispatchEvent("page"),x=e,m.stage&&m.stage.update()}},this.resize=function(){v=m.getBounds().width,w=m.getBounds().height,"none"==p&&e==[]||h()},this.puff=function(e){for(var t=0;t<o.length;t++)z.addChild(o[t].page);z.addChild(x),0<e&&setTimeout(function(){z.settle()},e)},this.settle=function(){z.removeAllChildren(),z.addChild(x),z.dispatchEvent("puffed")},this.disable=function(){z.active=!1},!(this.enable=function(){z.active=!0})!==t&&qe(this,a),this.dispose=function(e,t,o){return z.swipe.off("swipe",d),o||this.zimContainer_dispose(!0),!0}}else zog("zim controls - Pages():\nholder object must have bounds set");function h(){(y=new createjs.Shape).graphics.f("black").r(0,0,v,w+1),(b=new createjs.Shape).graphics.f("white").r(0,0,v,w+1)}function g(e,t){e.zimHTMLList=new go.Dictionary,P(e),e.zimSwipeArray=t||[],e.zimOriginalAlpha=e.alpha,e.parent&&e.parent.removeChild(l.page)}function A(e){if(!zot(e))for(var t=0;t<e.zimHTMLList.length;t++)e.addChildAt(e.zimHTMLList.values[t].obj,e.zimHTMLList.values[t].depth)}function P(e){e.zimHTMLList.clear();for(var t=0;t<e.numChildren;t++)if(ch=e.getChildAt(t),"TextArea"==ch.type||"Loader"==ch.type||"Tag"==ch.type){var o={obj:ch,depth:e.getChildIndex(ch)};e.zimHTMLList.add(ch,o)}for(t=e.numChildren-1;0<=t;t--)ch=e.getChildAt(t),"TextArea"!=ch.type&&"Loader"!=ch.type&&"Tag"!=ch.type||e.removeChild(ch)}},go.extend(go.Pages,go.Container,["clone","dispose"],"zimContainer",!1),go.HotSpots=function(a,o,r){var e;if(e=zob(go.HotSpots,arguments,"spots, local, mouseDowns",this))return e;if(z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",!zot(a)&&Array.isArray(a)){zot(o)&&(o=!0),zot(r)&&(r=!1);for(var l,i,s=(zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",c=this.hotSpots=[],t=0;t<a.length;t++)u(a[t]);this.addHotSpot=function(e,t,o,n,r,i){l={page:e,rect:t,call:o,callOver:n,callOut:r,talk:i},a.push(l),u(l)},this.show=function(){for(var e=0;e<c.length;e++)(i=c[e]).button||(i.spot.alpha=.2)},this.hide=function(){for(var e=0;e<c.length;e++)(i=c[e]).spot.alpha=0},this.removeHotSpots=function(e,t){for(var o=a.length-1;0<=o;o--)l=a[o],i=c[o],t&&!Array.isArray(t)&&(t=[t.x,t.y,t.getBounds().width,t.getBounds().height]),(zot(e)&&zot(t)||zot(t)&&e==l.page||zot(e)&&go.arraysEqual(t,l.rect)||e==l.page&&go.arraysEqual(t,l.rect))&&(a.splice(o,1),i.button&&(i.button.off(s,i.button.zimHSEvent),i.button.zimHSEvent=null,r||(i.button.off("mousedown",i.button.zimHSMDEvent),i.button.zimHSMDEvent=null)),i.off(s,d),i.dispose(),c.splice(o,1))},this.dispose=function(e,t,o){for(var n=0;n<c.length;n++)(i=c[n]).button&&(i.button.off(s,i.button.zimHSEvent),i.button.zimHSCall=null,i.button.zimHSEvent=null,r||(i.button.off("mousedown",i.button.zimHSMDEvent),i.button.zimHSMDEvent=null)),i.off(s,d),i.dispose();return!0}}else zog("zim controls - HotSpots():\nplease provide an array of HotSpot data");function u(e){var t=null;if(!Array.isArray(e.rect)){if(!(t=e.rect))return void zog("zim controls - HotSpots(): HotSpot "+e.page+" "+e.rect+" button does not exist");e.rect=[t.x,t.y,t.width,t.height]}(i=new go.HotSpot(e.page,e.rect[0],e.rect[1],e.rect[2],e.rect[3],e.call,e.callOver,e.callOut,o,e.talk)).zimHSpage=e.page,i.button=t,c.push(i),i.on(s,d),t&&zot(e.callOver)&&zot(e.callOut)&&(i.spot.mouseEnabled=!1,i.spot.mouseChildren=!1,t.zimHScall=e.call,t.zimHSEvent=t.on(s,d,!0),r||(t.zimHSMDEvent=t.on("mousedown",function(e){e.stopImmediatePropagation()})),t.cursor="pointer")}function d(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}},go.extend(go.HotSpots,go.Container,"clone","zimContainer",!1),go.HotSpot=function(n,e,t,o,r,i,a,l,s,c){var u;if(u=zob(go.HotSpot,arguments,"obj, x, y, width, height, call, callOver, callOut, local, talk",this))return u;if(z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(n)&&n.addChild)if(n instanceof createjs.Container!=0)if(zot(e)||zot(t)||zot(o)||zot(r))zog("zim controls - HotSpot():\nPlease pass in x, y, width, height");else{zot(s)&&(s=!0),eventType=(zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click";var d=o,h=r;if(s)g=new go.Point(e,t),f=o,m=r;else var g=n.globalToLocal(e,t),p=n.globalToLocal(e+d,t+h),f=p.x-g.x,m=p.y-g.y;var z=new go.Shape(o,r);if(z.talk=zot(c)?"HotSpot":c,z.alpha=0,z.graphics.f("black").dr(0,0,f,m),z.x=g.x,z.y=g.y,z.cursor="pointer",z.expand(0),this.spot=z,"function"==typeof i)var y=z.on(eventType,function(e){i(e)});if("function"==typeof a)var b=z.on("mouseover",function(e){a(e)});if("function"==typeof l)var v=z.on("mouseout",function(e){l(e)});n.addChild(z),this.show=function(){n.addChild(backing)},this.hide=function(){n.removeChild(backing)},this.dispose=function(e,t,o){return y&&z.off(eventType,b),b&&z.off("mouseover",b),v&&z.off("mouseout",v),n.removeChild(z),!(z=null)}}else zog("zim controls - HotSpot():\nObjects passed in should be Containers");else zog("zim controls - HotSpot():\nPlease pass in container object for obj")},go.extend(go.HotSpot,go.Container,"clone","zimContainer",!1),go.Guide=function(n,r,i,t,o,e,a,l){var s;if(s=zob(go.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey, style, group, inherit",this))return s;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=a;var c=!1===e?{}:go.getStyle(this.type,this.group,l);if(zot(n)&&(size=null!=c.obj?c.obj:null),zot(n)&&(n=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(r)&&(r=null==c.vertical||c.vertical),"stage"==n||n.addChild&&n.getBounds&&n.getBounds()){zot(i)&&(i=null==c.percent||c.percent),zot(t)&&(t=null!=c.hideKey?c.hideKey:"G"),zot(o)&&(o=null!=c.pixelKey?c.pixelKey:"P");var u,d,h,g,p,f=this,m=80,z=26,y=m/6+m/2,b=2*z;r?((g=P("#00c5af","white","white")).shape.regX=m+m/6,g.shape.regY=z/2,g.label.x=-m/2-m/6):((g=P("#d61fa0","white","white")).shape.regX=m/2,g.shape.regY=z+z/4,g.label.y=3*-z/4),"stage"!=n&&n.addChild(f);var v,w,C,x,k=go.added(f,function(){"stage"==n?(p=f.stage,n=p):p=n.stage;n.addChild(f),v=n.getBounds().width,w=n.getBounds().height,r?(g.y=w/2,g.label.text="x:"+(f.percent?"70%":Math.round(70*v/100))):(g.x=v/2,g.label.text="y:"+(f.percent?"70%":Math.round(70*w/100)));C=new createjs.Shape,f.addChild(C),r?C.x=.7*v:C.y=.7*w,T||(n.addChild(f),I());p.off("stagemousemove",u),u=p.on("stagemousemove",B),p.update()}),T=!1,A={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!i},set:function(e){i=!e,f.resize()}}),window.addEventListener("keydown",S),this.toggled=!0,this.toggle=function(e){return!0===e?f.visible=f.toggled=!0:!1===e?f.visible=f.toggled=!1:(f.visible=!f.visible,f.toggled=f.visible),p.off("stagemousemove",u),f.visible&&(u=p.on("stagemousemove",B,f)),f},!(this.resize=function(){return!!f&&(p&&(I(),B()),!0)})!==e&&qe(this,c),this.dispose=function(e,t,o){return!!f&&(go.noDrag(C),clearInterval(k),f.removeAllChildren(),window.removeEventListener("keydown",S),f.parent&&f.parent.removeChild(f),!(f=null))}}else zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");function P(e,t,o){var n=new go.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,m,z),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function B(e){var t,o;e?(t=n.globalToLocal(e.rawX/go.scaX,e.rawY/go.scaY),A=t):t={x:A.x,y:A.y},i?r?(o=Math.round(Math.abs(t.x-C.x)/v*100),g.label.text="x:"+Math.max(0,Math.min(o,100))+"%",g.y=Math.max(b,Math.min(t.y,h))):(o=Math.round(Math.abs(t.y-C.y)/w*100),g.label.text="y:"+Math.max(0,Math.min(o,100))+"%",g.x=Math.max(y,Math.min(t.x,d))):r?(o=Math.round(Math.abs(t.x-C.x)),g.label.text="x:"+Math.max(0,Math.min(o,Math.round(v))),g.y=Math.max(b,Math.min(t.y,h))):(o=Math.round(Math.abs(t.y-C.y)),g.label.text="y:"+Math.max(0,Math.min(o,Math.round(w))),g.x=Math.max(y,Math.min(t.x,d))),p&&p.update()}function I(){var e;T=!0,v=n.getBounds().width,w=n.getBounds().height,x=r?(e="ew-resize",new createjs.Rectangle(0,0,v,0)):(e="ns-resize",new createjs.Rectangle(0,0,0,w)),go.noDrag(C),setTimeout(function(){go.drag(C,x,e,e,null,null,!0)},500),p.mouseMoveOutside=!0,p.enableMouseOver(10),d=v-2*m/3,h=w-z-z,C.uncache();var t=C.graphics;r?(t.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,w),t.f().s("white").ss(2).mt(0,0).lt(0,w),t.s("#00c5af").sd([20,20]).mt(0,0).lt(0,w).sd(),C.cache(-10,0,20,w)):(t.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(v,0),t.f().s("white").ss(2).mt(0,0).lt(v,0),t.s("#d61fa0").sd([20,20]).mt(0,0).lt(v,0).sd(),C.cache(0,-10,v,20)),r?g.x=v:g.y=w,f.addChild(g)}function S(e){e=e||event,p&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&f.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(f.pixels=!f.pixels))}},go.extend(go.Guide,go.Container,"clone","zimContainer",!1),go.Grid=function(r,i,a,t,o,e,n,l){var s;if(s=zob(go.Grid,arguments,"obj, color, percent, hideKey, pixelKey, style, group, inherit",this))return s;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=n;var c=!1===e?{}:go.getStyle(this.type,this.group,l);if(zot(r)&&(size=null!=c.obj?c.obj:null),zot(r)&&(r=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(i)&&(i=null!=c.color?c.color:"black"),"stage"==r||r.addChild&&r.getBounds&&r.getBounds()){zot(a)&&(a=null==c.percent||c.percent),zot(t)&&(t=null!=c.hideKey?c.hideKey:"G"),zot(o)&&(o=null!=c.pixelKey?c.pixelKey:"P");var u,d=this,h=10;this.mouseChildren=!1,this.mouseEnabled=!1;var g=80,p=26,f=B("#dddddd",i,"#333333");f.shape.regX=g/2,f.shape.regY=-p/4,f.label.y=3*p/4;var m=B("#dddddd",i,"#333333");m.shape.regX=-g/6,m.shape.regY=p/2,m.label.x=g/2+g/6;var z,y,b,v=g/6+g/2,w=2*p;f.x=v,m.y=w,f.label.text="x:0",m.label.text="y:0","stage"!=r&&r.addChild(d);var C,x,k,T=go.added(d,function(){"stage"==r?(b=d.stage,r=b):b=r.stage;A||(S(),r.addChild(d));b.off("stagemousemove",u),u=b.on("stagemousemove",I),b.update()}),A=!1,P={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!a},set:function(e){a=!e,d.resize()}}),window.addEventListener("keydown",O),this.toggled=!0,this.toggle=function(e){return!0===e?d.visible=d.toggled=!0:!1===e?d.visible=d.toggled=!1:(d.visible=!d.visible,d.toggled=d.visible),b.off("stagemousemove",u),d.visible&&(u=b.on("stagemousemove",I,d)),d},!(this.resize=function(){return!!d&&(d.removeChild(k),k=null,b&&(S(),I(),setTimeout(function(){d.removeChild(k),k=null,S()},200)),!0)})!==e&&qe(this,c),this.dispose=function(e,t,o){return clearInterval(T),d.removeAllChildren(),window.removeEventListener("keydown",O),d.parent&&d.parent.removeChild(d),!(d=null)}}else zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");function B(e,t,o){var n=new go.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,g,p),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function I(e){var t;e?(t=r.globalToLocal(e.rawX/go.scaX,e.rawY/go.scaY),P=t):t={x:P.x,y:P.y},a?(f.label.text="x:"+Math.max(0,Math.min(Math.round(t.x/C*100),100))+"%",f.x=Math.max(v,Math.min(t.x,z)),m.label.text="y:"+Math.max(0,Math.min(Math.round(t.y/x*100),100))+"%"):(f.label.text="x:"+Math.max(0,Math.min(Math.round(t.x),Math.round(C))),f.x=Math.max(v,Math.min(t.x,z)),m.label.text="y:"+Math.max(0,Math.min(Math.round(t.y),Math.round(x)))),m.y=Math.max(w,Math.min(t.y,y)),b&&b.update()}function S(){A=!0,r&&r.getBounds&&(C=r.getBounds().width,x=r.getBounds().height),b&&(b.mouseMoveOutside=!0,b.enableMouseOver(10)),z=C-2*g/3,y=x-p-p,k=new go.Container({style:!1}),d.addChild(k);var e=new createjs.Shape;k.addChild(e);var t=e.graphics;t.s(i).ss(1);var o=new createjs.Shape;if(k.addChild(o),a){for(n=1;n<22;n++)t.mt(n*C/20,0).lt(n*C/20,x);for(n=1;n<20;n++)t.mt(0,n*x/20).lt(C,n*x/20);e.alpha=.3,(t=o.graphics).s(i).ss(1);for(n=1;n<10;n++)t.mt(n*C/10,0).lt(n*C/10,x);for(n=1;n<10;n++)t.mt(0,n*x/10).lt(C,n*x/10)}else{for(var n=0;n<C/h;n++)t.mt(n*h,0).lt(n*h,x);for(var n=0;n<x/h;n++)t.mt(0,n*h).lt(C,n*h);e.alpha=.3,(t=o.graphics).s(i).ss(1);for(var n=0;n<C/(10*h);n++)t.mt(n*(10*h),0).lt(n*(10*h),x);for(var n=0;n<x/(10*h);n++)t.mt(0,n*(10*h)).lt(C,n*(10*h))}t.s("#FFFFFF").ss(8),t.mt(C/2,x/2-40).lt(C/2,x/2+40),t.mt(C/2-40,x/2).lt(C/2+40,x/2),t.s("#000000").ss(4),t.mt(C/2,x/2-40).lt(C/2,x/2+40),t.mt(C/2-40,x/2).lt(C/2+40,x/2),t.s(i).ss(3),t.dr(0,0,C,x),o.alpha=.5,k.cache(0,0,C,x),d.addChild(f),d.addChild(m),b&&b.update()}function O(e){e=e||event,b&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&d.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(d.removeChild(k),k=null,d.pixels=!d.pixels))}},go.extend(go.Grid,go.Container,"clone","zimContainer",!1),go.Wrapper=function(e,P,C,x,k,B,T,I,S,O,A,E,M,j,L,t,D,Y,X,R,_,o,n,r){var i;if(i=zob(go.Wrapper,arguments,"items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",this))return i;z_d("78.5"),this.group=n;var a=!1===o?{}:go.getStyle("Wrapper",this.group,r);zot(P)&&(P=null!=a.width?a.width:300),zot(L)&&(L=null!=a.height?a.height:null),zot(C)&&(C=null!=a.spacingH?a.spacingH:null),zot(x)&&(x=null!=a.spacingV?a.spacingV:null),zot(k)&&(k=null!=a.wrapperType?a.wrapperType:"spacing"),zot(B)&&(B=null!=a.align?a.align:"left"),zot(T)&&(T=null!=a.valign?a.valign:"top"),zot(I)&&(I=null!=a.alignInner?a.alignInner:"left"),zot(S)&&(S=null!=a.valignInner?a.valignInner:"bottom"),zot(O)&&(O=null!=a.flip&&a.flip),zot(A)&&(A=null!=a.reverse&&a.reverse),zot(E)&&(E=null!=a.bottomFull&&a.bottomFull),zot(M)&&(M=null!=a.colSize?a.colSize:100),zot(j)&&(j=null!=a.rowSize?a.rowSize:null),zot(C)&&(C=0),zot(x)&&(x=0),zot(t)&&(t=null!=a.minSpreadNum?a.minSpreadNum:2),zot(D)&&(D=null!=a.minStretchNum?a.minStretchNum:3),zot(Y)&&(Y=null!=a.percentVoidH?a.percentVoidH:0),zot(X)&&(X=null!=a.offsetVoidH?a.offsetVoidH:0),zot(R)&&(R=null!=a.percentVoidV?a.percentVoidV:0),zot(_)&&(_=null!=a.offsetVoidV?a.offsetVoidV:0);var F,W,H=0,G=0,N=0,V=P;this.items=[],"spread"==k?F=!0:"stretch"==k&&(W=!0),this.zimContainer_constructor(P,200),this.type="Wrapper","middle"==B&&(B="center"),"middle"==T&&(T="center"),"middle"==I&&(I="center"),"middle"==S&&(S="center");var q=this;function U(n,t,o,e,r,i,a,l){var s=go.Pick.choose(B),c=go.Pick.choose(F),u=go.Pick.choose(W),d=go.Pick.choose(O),h=go.Pick.choose(I),g=go.Pick.choose(S);zot(s)&&(s="left"),zot(g)&&(g="top"),zot(h)&&(h="left"),d&&n.reverse();var p=((100-i)/100/2+a/100)*P,f=P*i/100,m=0,z=!1;if(r){(E||O)&&n.reverse();var y=V%r,b=V/2+a/100*V,v=0,w=Math.floor(V/r);0!=q.rows&&l&&(z=!0),go.loop(n,function(e,t){if(m=0,v="right"==h?r*t+0+r-e.wrapWidth:"center"==h||"middle"==h?r*t+0+(r-e.wrapWidth)/2:r*t+0,lastX=e.x,e.pos(v),T=e.x-lastX,e.centerX+=T,e.marginLeft&&(m+=e.marginLeft),e.marginRight&&(m-=e.marginRight),"center"==s||"middle"==s){var o=Math.floor(V/r)-n.length;m+=(y+(o?o*r:0))/2}else if("right"==s){o=Math.floor(V/r)-n.length;m+=y+(o?o*r:0)}e.mov(m),e.centerX+=m}),"center"==s&&z&&(n.length+w)%2!=0&&(m=(b<=V/2?-1:1)*r/2,go.loop(n,function(e,t){e.mov(m),e.centerX+=m}))}else if(c||u){if(c)var C=n.length?(V-e)/(n.length+1):0;else if(u)C=0<n.length-1?(V-e)/(n.length-1):0;n.length<D&&0!=q.rows&&l&&(C=N,z=!0),N=C;var x=0;if((E||O)&&n.reverse(),go.loop(n,function(e,t,o){m=0,lastX=e.x,e.pos(C*(t+(c?1:0))+x),T=e.x-lastX,e.centerX+=T,z||(e.marginLeft&&(m+=e.marginLeft),e.marginRight&&(m-=e.marginRight),e.mov(m),e.centerX+=m),x+=e.wrapWidth}),z){m=0;var k=c?C:0,T=0;go.loop(n,function(e,t){if("right"==s){var o=e.x;e.pos(k,null,RIGHT),T=e.x-o,k+=e.wrapWidth+C}else if("center"==s){centerShift=(V-(x+(n.length-1)*C))/2-(c?C:0);o=e.x;e.pos(k+centerShift,null,RIGHT),T=e.x-o,k+=e.wrapWidth+C}e.marginLeft&&(m+=e.marginLeft),e.marginRight&&(m-=e.marginRight),e.mov(m),e.centerX+=T+m},!0)}}else if("center"==s)go.loop(n,function(e){m=((E||O?0:P)-t.x)/2,(c||u)&&(e.marginLeft&&(m+=e.marginLeft),e.marginRight&&(m-=e.marginRight)),e.mov(m),e.centerX+=m});else if((E||O)&&"left"==s){var A=n[n.length-1].marginLeft;go.loop(n,function(e){m=-t.x+(A||0),c&&(m+=G),e.mov(m),e.centerX+=m})}else if(E||O||"right"!=s)c&&c&&go.loop(n,function(e){m=G*("right"==s?-1:1),e.mov(m),e.centerX+=m});else{A=n[n.length-1].marginRight;go.loop(n,function(e){m=P-t.x-(A||0),c&&(m-=G),e.mov(m),e.centerX+=m})}if(i){p=(.5+a/100)*V,f=P*i/100;go.loop(n,function(e){r||u||c?"right"==s?e.centerX>V-p&&e.mov(f):"center"==s?Math.round(e.centerX)==Math.round(V/2+a/100*V)?e.mov(f/2):Math.round(e.centerX)>Math.round(V/2+a/100*V)&&e.mov(f):e.centerX>p&&e.mov(f):E||O||"right"!=s?E||O||"center"!=s?(E||O)&&"right"==s?e.centerX>V-p&&e.mov(f):(E||O)&&"center"==s?e.centerX>V/2+a/100*V&&e.mov(f):e.centerX>p&&e.mov(f):e.centerX>P/2+a/100*V?e.mov(f/2):e.mov(-f/2):e.centerX<P-p&&e.mov(-f)})}c&&(G=(H+=C)/(q.rows+1)),"center"==g?go.loop(n,function(e){e.mov(0,(o-e.wrapHeight)/2*(E?-1:1))}):E||"bottom"!=g?E&&"top"==g&&go.loop(n,function(e){e.mov(0,-(o-e.wrapHeight)+(e.marginTop?e.marginTop:0))}):go.loop(n,function(e){e.mov(0,o-e.wrapHeight-(e.marginBottom?e.marginBottom:0))})}this.add=function(e){return this.addAt(e,this.numChildren-1),q},this.addAt=function(e,o){return zot(e)||((zot(o)||o<0)&&(o=0),Array.isArray(e)||(e=[e]),go.loop(e,function(e,t){q.addChildAt(e,o+t)}),q.resize()),q},this.remove=function(e){return Array.isArray(e)||(e=[e]),go.loop(e,function(e){e&&e.removeFrom&&e.removeFrom()},!0),q.resize(),q},this.convert=function(e,t){var o=[];return e.loop(function(e){o.push(e),t&&e.cache()}),q.add(o),e.removeFrom(),q},this.resize=function(e,t){if(!q.preventResize){zot(e)||(P=e),zot(t)||(L=t),this.items2D=[],this.items=[],N=G=H=0,zot(Y)&&(Y=0),zot(X)&&(X=0);var s=go.Pick.choose(Y),c=go.Pick.choose(X);V=P*(100-s)/100,this.setBounds(V,200);var u=0,d=0,h=0;q.cols=0,q.rows=0;var g=[],p=[0],f=null,m=0,z=null,y=go.Pick.choose(M);"column"!=k&&(y=null);var b=go.Pick.choose(j),v=0;go.loop(this,function(e,t,o){E||O?e.pos(u+(e.marginRight?e.marginRight:0),d+(e.marginTop?e.marginTop:0),RIGHT,O?TOP:BOTTOM):e.pos(u+(e.marginLeft?e.marginLeft:0),d+(e.marginTop?e.marginTop:0)),v++,z=e.boundsToGlobal();var n=q.globalToLocal(z.x,z.y),r=q.globalToLocal(z.x+z.width,z.y+z.height);if(E||O)var i=q.globalToLocal(z.x,z.y);else i=q.globalToLocal(z.x+z.width,z.y+z.height);if(e.wrapHeight=r.y-n.y,e.wrapWidth=r.x-n.x,s){var a=q.globalToLocal(z.x+e.wrapWidth/2,z.y+e.wrapHeight/2);e.centerX=a.x,e.centerY=a.y,a=null}if(y)var l=y*v;else if(E||O)l=V-i.x+(e.marginLeft?e.marginLeft:0)+C;else l=i.x+(e.marginRight?e.marginRight:0)+C;Math.round(l)-C>V&&(U(g,f,h,m,y,s,c,!1),(m=0)==q.cols&&(q.cols=t),u=0,d+=h+(b?0:go.Pick.choose(x)),h=0,b=go.Pick.choose(j),s=go.Pick.choose(Y),c=go.Pick.choose(X),v=0,q.items2D.push(go.copy(g)),q.rows++,p.push(d),g=[],E||O?e.pos(u+(e.marginRight?e.marginRight:0),d+(e.marginTop?e.marginTop:0),RIGHT,O?TOP:BOTTOM):e.pos(u+(e.marginLeft?e.marginLeft:0),d+(e.marginTop?e.marginTop:0)),s&&(z=e.boundsToGlobal(),a=q.globalToLocal(z.x+e.wrapWidth/2,z.y+e.wrapHeight/2),e.centerX=a.x,e.centerY=a.y,a=null),v++,y?l=0:(l=(e.marginLeft?e.marginLeft:0)+e.wrapWidth+(e.marginRight?e.marginRight:0)+go.Pick.choose(C),i.x=E||O?V-((e.marginRight?e.marginRight:0)+e.wrapWidth):(e.marginLeft?e.marginLeft:0)+e.wrapWidth)),g.push(e),m+=e.wrapWidth,u=l,h=b||Math.max(h,e.wrapHeight+(e.marginTop?e.marginTop:0)+(e.marginBottom?e.marginBottom:0)),f=new go.Point(i.x,d+h)},(!A||!E)&&(A||E)),0<q.numChildren&&(0==q.cols&&(q.cols=q.numChildren),q.items2D.push(go.copy(g)),p.push(d),U(g,f,h,m,y,s,c,!0),q.rows+=1);var o=go.Pick.choose(T);if(zot(o)&&(o="top"),E){var n=d+h-200;go.loop(this,function(e){e.mov(0,n)}),q.items2D.reverse(),go.loop(q.items2D,function(e){e.reverse()})}var r=go.Pick.choose(R),i=go.Pick.choose(_);if(!zot(r)){zot(i)&&(i=0);var a=d+h,l=a*r/100,w=a/2+i/100*a;go.loop(p,function(e,t){if(w<=e)return go.loop(q.items2D,function(e,t){go.loop(e,function(e){e.mov(0,l)})},null,1,t),"break"})}if(!zot(L))if("bottom"==T){n=L-(d+h);go.loop(this,function(e){e.mov(0,n)})}else if("center"==T||"middle"==T){n=(L-(d+h))/2;go.loop(this,function(e){e.mov(0,n)})}return q.setBounds(null),(z=q.getBounds())&&q.setBounds(0,z.y,P,z.height),go.loop(q.items2D,function(e){go.loop(e,function(e){q.items.push(e)})}),this.stage&&this.stage.update(),q}},Object.defineProperty(q,"spacingH",{get:function(){return C},set:function(e){C=e,this.resize()}}),Object.defineProperty(q,"spacingV",{get:function(){return x},set:function(e){x=e,this.resize()}}),Object.defineProperty(q,"wrapperType",{get:function(){return k},set:function(e){F="spread"==e,W="stretch"==e,k=e,this.resize()}}),Object.defineProperty(q,"align",{get:function(){return B},set:function(e){"middle"==(B=e)&&(B="center"),this.resize()}}),Object.defineProperty(q,"valign",{get:function(){return T},set:function(e){"middle"==(T=e)&&(T="center"),this.resize()}}),Object.defineProperty(q,"alignInner",{get:function(){return I},set:function(e){"middle"==(I=e)&&(I="center"),this.resize()}}),Object.defineProperty(q,"valignInner",{get:function(){return S},set:function(e){"middle"==(S=e)&&(S="center"),this.resize()}}),Object.defineProperty(q,"colSize",{get:function(){return M},set:function(e){M=e,"column"==k&&this.resize()}}),Object.defineProperty(q,"rowSize",{get:function(){return j},set:function(e){j=e,this.resize()}}),Object.defineProperty(q,"flip",{get:function(){return O},set:function(e){O=e,this.resize()}}),Object.defineProperty(q,"reverse",{get:function(){return A},set:function(e){A=e,this.resize()}}),Object.defineProperty(q,"bottomFull",{get:function(){return E},set:function(e){E=e,this.resize()}}),Object.defineProperty(q,"percentVoidH",{get:function(){return Y},set:function(e){Y=e,this.resize()}}),Object.defineProperty(q,"offsetVoidH",{get:function(){return X},set:function(e){X=e,this.resize()}}),Object.defineProperty(q,"percentVoidV",{get:function(){return R},set:function(e){R=e,this.resize()}}),Object.defineProperty(q,"offsetVoidV",{get:function(){return _},set:function(e){_=e,this.resize()}}),zot(e)||q.add(e),!1!==o&&qe(this,a),this.clone=function(){return q.cloneProps(new go.Wrapper(e,P,C,x,k,B,T,I,S,O,A,E,M,j,L,t,D,Y,X,R,_,this.style,this.group))}},go.extend(go.Wrapper,go.Container,"clone","zimContainer",!1),go.Tile=function(n,e,t,o,r,a,l,i,s,c,u,g,p,d,f,m,z,y,b,v,C,x){var k;if(k=zob(go.Tile,arguments,"obj, cols, rows, spacingH, spacingV, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, group, style, inherit",this))return k;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=v;var T=!1===C?{}:go.getStyle(this.type,this.group,x);zot(n)&&(n=null!=T.obj?T.obj:new go.Circle),zot(e)&&(e=null!=T.cols?T.cols:1),zot(t)&&(t=null!=T.rows?T.rows:1),zot(a)&&(a=null!=T.width?T.width:null),zot(l)&&(l=null!=T.height?T.height:null),zot(c)&&(c=null!=T.colSize?T.colSize:null),zot(u)&&(u=null!=T.rowSize?T.rowSize:null),zot(a)||(c=null),zot(l)||(u=null),zot(o)&&(o=null!=T.spacingH?T.spacingH:null),zot(r)&&(r=null!=T.spacingV?T.spacingV:null),!zot(o)&&zot(c)||(o=0),!zot(r)&&zot(u)||(r=0),zot(i)&&(i=null!=T.squeezeH&&T.squeezeH),zot(s)&&(s=null!=T.squeezeV&&T.squeezeV),zot(g)&&(g=null!=T.align?T.align:"left"),zot(p)&&(p=null!=T.valign?T.valign:"top"),zot(d)&&(d=null!=T.count?T.count:null),0==d&&(d=null,zon&&zog("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(f)&&(f=null!=T.mirrorH&&T.mirrorH),zot(m)&&(m=null!=T.mirrorV&&T.mirrorV),zot(z)&&(z=null==T.snapToPixel||T.snapToPixel),z&&(n&&n.stage?n.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&zimDefaultFrame&&(zimDefaultFrame.stage.snapToPixelEnabled=!0)),zot(y)&&(y=null==T.clone||T.clone),zot(b)&&(b=null==T.events||T.events);var A=this;A.cols=e,A.rows=t,A.spacingH=o,A.spacingV=r,A.squeezeH=i,A.squeezeV=s;var P,B="function"==typeof g,I="function"==typeof p;A.align=B?"left":g,A.valign=I?"top":p,A.mirrorH=f,A.mirrorV=m,A.items=[];var S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G=0;e:for(var N=0;N<t;N++)for(var V=0;V<e;V++){if(G++,!zot(d)&&d<G)break e;zot(P=go.Pick.choose(n))&&(P=new go.Container(0,0,0,0)),y&&(0==N&&0==V||(P=P.clone())),b&&P.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,A.dispatchEvent(t)}),A.items.push(P),P.tileNum=G-1}function q(){A.removeAllChildren(),S=[],O=[],E=[],M=[],j=[],X=Y=D=L=0,R=[],_=[],F=[],H=[],W=[],A.items&&A.items.length||(A.items=[]),d=A.items.length;for(var e,t=0,o=0,n=0,r=0;r<d;r++)o=Math.floor(r/A.cols),n=r%A.cols,zot(S[o])&&(S[o]=[]),zot(A.items[r])&&(A.items[r]=new go.Container(0,0,0,0)),S[o][n]=A.items[r];A.rows=Math.max(1,S.length),A.cols=Math.max(1,zot(S[0])?0:S[0].length);e:for(o=0;o<A.rows;o++){R.push([]),_.push([]),H.push([]),u&&zot(l)&&(h=go.Pick.choose(u));for(r=0;r<A.cols;r++){if(t++,!zot(d)&&d<t)break e;(e=S[o][r]).snapToPixel=z,A.addChild(e),R[o].push(e.scaleX),_[o].push(e.scaleY),0==o&&c&&zot(a)&&(w=go.Pick.choose(c)),0==o&&W.push(go.Pick.choose(g)),c&&zot(a)||(w=Math.abs(e.width)),u&&zot(l)||(h=Math.abs(e.height)),H[o][r]=[w,h],zot(M[r])&&(M[r]=0),zot(j[o])&&(j[o]=0),w>M[r]&&(M[r]=w),h>j[o]&&(j[o]=h),zot(O[o])&&(O[o]=0),zot(E[r])&&(E[r]=0),O[o]+=w,E[r]+=h,O[o]>L&&(L=O[o]),E[r]>D&&(D=E[r]),zot(F[r])&&(F[r]=0),F[r]++}}if(!1===A.squeezeH)for(r=0;r<M.length;r++){var i=M[r];Y+=i}if(!1===A.squeezeV)for(r=0;r<j.length;r++){i=j[r];X+=i}}function U(e,t){var o,n,r,i;e<=0&&(e=null),t<=0&&(t=null),o=zot(e)||"full"!=A.squeezeH?zot(e)?0<Y?Y+(A.cols-1)*A.spacingH:L+(A.cols-1)*A.spacingH:Math.max(L+(A.cols-1)*A.spacingH,e):e,n=zot(t)||"full"!=A.squeezeV?zot(t)?0<X?X+(A.rows-1)*A.spacingV:D+(A.rows-1)*A.spacingV:Math.max(D+(A.rows-1)*A.spacingV,t):t,A.setBounds(0,0,o,n);var a=[],l=[],s=[];for(N=0;N<S.length;N++)for(r=S[N],i=0,zot(e)||0,V=0;V<r.length;V++){var c,u;P=r[V],0==N&&(a[V]=0,zot(t)||("full"==A.squeezeV?l[V]=1<F[V]?(t-E[V])/(F[V]-1):0:A.squeezeV?l[V]=1<F[V]?Math.max(A.spacingV,(t-E[V])/(F[V]-1)):0:l[V]=1<F[V]?Math.max(A.spacingV,(n-E[V])/(F[V]-1)):0),A.squeezeV?"center"==A.valign||"middle"==A.valign?s[V]=(n-(E[V]+(F[V]-1)*(zot(t)?A.spacingV:l[V])))/2:"bottom"==A.valign?s[V]=n-(E[V]+(F[V]-1)*(zot(t)?A.spacingV:l[V])):s[V]=0:s[V]=0),P.getBounds(),0==V&&(zot(e)||(u="full"==A.squeezeH?1<r.length?(e-O[N])/(r.length-1):0:A.squeezeH?1<r.length?Math.max(A.spacingH,(e-O[N])/(r.length-1)):0:1<r.length?Math.max(A.spacingH,(o-O[N])/(r.length-1)):0),c=A.squeezeH?"center"==A.align||"middle"==A.align?(o-(O[N]+(r.length-1)*(zot(e)?A.spacingH:u)))/2:"right"==A.align?o-(O[N]+(r.length-1)*(zot(e)?A.spacingH:u)):0:0,finalVAlign=go.Pick.choose(p)),g=W[V];var d=H[N][V][0],h=H[N][V][1];A.mirrorH&&V%2==1&&(P.scaleX=-R[N][V]),P.pos(i,null),!A.squeezeH&&B?!zot(e)||"center"!=g&&"middle"!=g?zot(e)&&"right"==g&&(P.x+=M[V]-P.width):P.x+=(M[V]-P.width)/2:A.squeezeH?!zot(e)||"center"!=A.align&&"middle"!=A.align?zot(e)&&"right"==A.align&&(P.x+=d-P.width):P.x+=(d-P.width)/2:!zot(e)||"center"!=A.align&&"middle"!=A.align?zot(e)&&"right"==A.align&&(P.x+=M[V]-P.width):P.x+=(M[V]-P.width)/2,A.mirrorV&&N%2==1&&(P.scaleY=-_[N][V]),P.pos(null,a[V]),!A.squeezeV&&I?!zot(t)||"center"!=finalVAlign&&"middle"!=finalVAlign?zot(t)&&"bottom"==finalVAlign&&(P.y+=j[N]-P.height):P.y+=(j[N]-P.height)/2:A.squeezeV?!zot(t)||"center"!=A.valign&&"middle"!=A.valign?zot(t)&&"bottom"==A.valign&&(P.y+=h-P.height):P.y+=(h-P.height)/2:!zot(t)||"center"!=A.valign&&"middle"!=A.valign?zot(t)&&"bottom"==A.valign&&(P.y+=j[N]-P.height):P.y+=(j[N]-P.height)/2,!0!==A.squeezeH&&zot(e)?i+=M[V]+(zot(e)?A.spacingH:u):i+=d+(zot(e)?A.spacingH:u),P.x+=c,P.y+=s[V],!0!==A.squeezeV&&zot(t)?a[V]+=j[N]+(zot(t)?A.spacingV:l[V]):a[V]+=h+(zot(t)?A.spacingV:l[V])}}q(),U(a,l),this.remake=function(e){return zot(e)||(A.items=e),q(),U(a,l),A},this.resize=function(e,t){return zot(e)&&(e=a),zot(t)&&(t=l),U(a=e,l=t),A},Object.defineProperty(this,"items2D",{get:function(){for(var e,t=[],o=0;o<A.items.length;o++)o%A.cols==0&&(e=[],t.push(e)),e.push(A.items[o]);return t},set:function(e){zon&&zogy("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){for(var e=[],t=0;t<A.cols;t++)e.push([]);for(t=0;t<A.items.length;t++)e[t%A.cols][Math.floor(t/A.cols)]=A.items[t];return e},set:function(e){zon&&zogy("Tile() - items2DCols is read only")}}),!1!==C&&qe(this,T),this.clone=function(e){if(e)for(var t=[],o=0;o<A.items.length;o++)t.push(A.items[o].clone(!0));return A.cloneProps(new go.Tile(e?series(t):n.clone?n.clone():n,A.cols,A.rows,A.spacingH,A.spacingV,a,l,A.squeezeH,A.squeezeV,c,u,g,p,A.items.length,A.mirrorH,A.mirrorV,z,!e&&y,b,this.style,this.group))}},go.extend(go.Tile,go.Container,"clone","zimContainer",!1),go.Beads=function(i,n,e,a,r,l,s,c,u,d,h,g,t,o,p){var f;if(f=zob(go.Beads,arguments,"path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",this))return f;z_d("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=t;var m=!1===o?{}:go.getStyle(this.type,this.group,p);zot(c)&&(c=null!=m.onTop&&m.onTop),zot(u)&&(u=null!=m.showControls&&m.showControls),zot(d)&&(d=null==m.visible||m.visible),zot(h)&&(h=null==m.interactive||m.interactive),zot(i)&&(i=null!=m.path?m.path:new go.Blob({color:null,borderWidth:3,borderColor:blue})),i.visible=d,i.toggle(u),i.interactive=h,i.onTop=c,zot(n)&&(n=null!=m.obj?m.obj:new go.Circle(10)),zot(e)&&(e=null!=m.count?m.count:10),zot(a)&&(a=null!=m.angle?m.angle:null),zot(r)&&(r=null!=m.startPercent?m.startPercent:0),zot(l)&&(l=null!=m.endPercent?m.endPercent:100),zot(s)&&(s=null!=m.percents?m.percents:null);var z=l;if(l<r&&(z=100+l),zot(s)){var y;y="Squiggle"==i.type?(z-r)/(e-1):(z-r)/(e-(r!=z%100?1:0)),s=[];for(var b=r-y,v=0;v<e;v++)s.push(b+y),100<(b+=y)&&(b-=100)}zot(g)&&(g=null==m.clone||m.clone);var w,C=this;C.count=e,C.percents=s,C.items=[];for(v=0;v<e;v++)w=go.Pick.choose(n),g&&0!=v&&(w=w.clone()),w.beadNum=v,w.startPercent=s[v],C.items.push(w);C.path=i.addTo(C),C.beads=(new go.Container).addTo(C,c?0:null),C.beads.type="BeadsContainer",this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<C.count;o++){var n=i.getCurvePoint(Math.max(0,Math.min(.9999,s[o]/100)),e,t,!0);if(n){var r=C.beads.globalToLocal(n.x,n.y);r&&C.items[o].loc(r,null,C.beads).rot((zot(a)?180<n.angle?n.angle-360:n.angle:a)+C.items[o].rotation)}}return this},C.resize(),h&&(i.on("pressmove",C.resize),i.on("update",C.resize)),!1!==o&&qe(this,m),this.clone=function(e){if(e)for(var t=[],o=0;o<C.items.length;o++)t.push(C.items[o].clone(!0));return C.cloneProps(new go.Beads(i.clone(),e?series(t):n.clone?n.clone():n,C.count,a,r,l,s,c,u,d,h,g,this.style,this.group))}},go.extend(go.Beads,go.Container,"clone","zimContainer",!1),go.Layout=function(b,v,w,C,x,k,T,t,e,o,n){var r;if(r=zob(go.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey, style, group, inherit",this))return r;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=o;var i=!1===e?{}:go.getStyle(this.type,this.group,n);if(zot(b)&&(b=null!=i.holder?i.holder:null),zot(T)&&(T=null!=i.scalingObject?i.scalingObject:null),!zot(b)&&b.getBounds)if((T=zot(T)?b:T).getBounds&&T.getBounds()){var A=T.getBounds();b.setBounds(0,0,A.width,A.height),zot(w)&&(w=null!=i.lastMargin?i.lastMargin:0),zot(x)&&(x=null==i.vertical||i.vertical),zot(C)&&(C=null!=i.backgroundColor?i.backgroundColor:""),zot(t)&&(t=null!=i.hideKey?i.hideKey:"B"),zot(k)&&(k=null!=i.regionShape?i.regionShape.clone():null);var P=new createjs.Shape,B=this;if(this.active=!0,zot(v)&&(v=null!=i.regions?go.copy(i.regions):null),!zot(v)){var I;this.regions=v;var S=0,O="minWidth",E="width",M="height",j="marginLeft",L="maxHeight";x&&(O="minHeight",E="height",M="width",j="marginTop",L="maxWidth",0);for(var a=0;a<v.length;a++){if(!(I=v[a]).object||!I.object.getBounds())return void zog("zim controls - Layout(): each region object must have an object with setBounds() set");I[O]||(I[O]=0),I[E]||(I[E]=0),I.backgroundColor||(I.backgroundColor=""),I.given=0,I.maxGiven=0,zot(I[j])&&(I[j]=1e-4),I[L]||(I[L]=100),x?(I.align||(I.align="middle"),I.valign||(0==a?I.valign="top":a==v.length-1?I.valign="bottom":I.valign="middle",1==v.length&&(I.valign="middle"))):(I.valign||(I.valign="top"),I.align||(0==a?I.align="left":a==v.length-1?I.align="right":I.align="middle",1==v.length&&(I.align="middle"))),I[E]&&(I[O]=0),S+=I[E]+I[j]}if(100<(S+=w))zog("zim controls - Layout(): cannot fit regions into 100% bounds");else{var D=100-S;Y(),this.resize=function(){if(B.active){A=T.getBounds(),b.setBounds(0,0,A.width,A.height),P.graphics.clear(),""!=C&&P.graphics.f(C).r(0,0,A.width,A.height);for(var e=0;e<v.length;e++)(I=v[e]).maxGiven=0,I.marginGiven=0;for(var t,o,n,r=!0,i=D;r;){t=!(r=!1);for(e=0;e<v.length;e++)0<(I=v[e]).given&&0==I.maxGiven&&(d=I.object.getBounds()[E],h=I.object.getBounds()[M],o=I.given*A[E]/100,(n=I[L]*A[M]/100)<h/d*o&&"Window"!=I.object.type?(I.maxGiven=d/h*n*100/A[E],I.given,I.maxGiven,i-=I.maxGiven):t=!1);if(t)break;for(e=totalPrimaries=0;e<v.length;e++)0==(I=v[e])[E]&&0==I.maxGiven&&(totalPrimaries+=I.object.getBounds()[E]);for(e=0;e<v.length;e++)0==(I=v[e])[E]&&0==I.maxGiven&&(I.given=I.object.getBounds()[E]/totalPrimaries*i)}var a=!0;if(0<(I=v[0]).maxGiven?I.maxGiven<I[O]&&(I[E]=I[O],a=!1):0<I.given&&I.given<I[O]&&(I[E]=I[O],a=!1),0<(I=v[v.length-1]).maxGiven?I.maxGiven<I[O]&&(I[E]=I[O],a=!1):0<I.given&&I.given<I[O]&&(I[E]=I[O],a=!1),!a){for(e=S=0;e<v.length;e++)I=v[e],S+=I[E]+I[j];return 100<(S+=w)?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(D=100-S,Y(),void B.resize())}var l=!0,s=0,c=0;for(e=0;e<v.length;e++)s+=(I=v[e])[j],0<I[E]?c+=I[E]:0<I.maxGiven?c+=I.maxGiven:0<I.given&&(c+=I.given),0==I[E]&&(l=!1);if(l||t){var u=100-c-(s+=w);if(s-=w+v[0][j],0!=u&&0!=s)for(e=0;e<v.length;e++)0!=e&&((I=v[e]).marginGiven=I[j]/s*(s+u))}var d,h,g,p,f,m=0,z=0;if(k&&k.graphics){var y=k.graphics;y.c()}for(e=0;e<v.length;e++)0<(I=v[e]).marginGiven?m+=I.marginGiven*A[E]/100:m+=I[j]*A[E]/100,d=(d=0<I[E]?I[E]:0<I.maxGiven?I.maxGiven:0<I.given?I.given:0)*A[E]/100,h=I[L]*A[M]/100,z=(A[M]-h)/2,g=x?("Wrapper"==I.object.type&&I.object.resize(h),"Window"==I.object.type&&I.object.resize(h,d),go.fit(I.object,z,m,h,d)):("Wrapper"==I.object.type&&I.object.resize(d),"Window"==I.object.type&&I.object.resize(d,h),go.fit(I.object,m,z,d,h)),"top"==I.valign?I.object.y=g.bY:"bottom"==I.valign&&(I.object.y=g.bY+g.bHeight-g.height),"left"==I.align?I.object.x=g.bX:"right"==I.align&&(I.object.x=g.bX+g.bWidth-g.width),k&&k.graphics&&(y.s("white").ss(2).r(g.bX,g.bY,g.bWidth,g.bHeight),y.s("#ff8203").sd([20,20]).r(g.bX,g.bY,g.bWidth,g.bHeight).sd()),f=p=0,0!=m&&m+d!=A[E]||(x?f=1:p=1),h==A[M]&&(x?p=1:f=1),""!=I.backgroundColor&&P.graphics.f(I.backgroundColor).r(g.bX,g.bY,g.bWidth+p,g.bHeight+f),m+=d}},this.resize(),k&&b.addChild(k),b.addChildAt(P,0),window.addEventListener("keydown",l),this.disable=function(){B.active=!1,window.removeEventListener("keydown",l),k&&(k.alpha=0)},this.enable=function(){B.active=!0,window.addEventListener("keydown",l),B.resize(),k&&(k.alpha=1)},this.removeShape=function(){k&&(k.graphics.clear(),b.removeChild(k),k=null,k=!1),window.removeEventListener("keydown",l)},this.toggled=!0,this.toggle=function(e){return k.visible=!0===e||!1!==e&&!k.visible,B.toggled=k.visible,B},!(this.addShape=function(e,t){B.removeShape(),k=e,window.addEventListener("keydown",l),b.addChild(k),B.resize()})!==e&&qe(this,i),this.dispose=function(e,t,o){return B.removeShape(),!0}}}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");function Y(){for(var e=0,t=0;t<v.length;t++)((I=v[t]).given=0)==I[E]&&(e+=I.object.getBounds()[E]);for(t=0;t<v.length;t++)0==(I=v[t])[E]&&(I.given=I.object.getBounds()[E]/e*D)}function l(e){e=e||event,k&&String.fromCharCode(e.keyCode)==t.toUpperCase()&&(B.toggle(),k.stage&&k.stage.update())}},go.extend(go.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.Accessibility=function(u,e,o,t,n,g,p,r,i,a,l,s,c,d,h){var f;if(f=zob(go.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return f;if(z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(u)&&(u="application"),zot(t)&&(t=!1),zot(n)&&(n=2),zot(g)&&(g=zimDefaultFrame),zot(p)&&(p=!go.mobile()),zot(r)&&(r=!1),zot(i)&&(i=700),zot(a)&&(a="brown"),zot(l)&&(l=3),zot(s)&&(s=5),zot(c)&&(c=.8),zot(h)&&(h=.8),zot(d)){var m=new go.Shape({style:!1});m.mouseEnabled=!1}else d.mouseEnabled&&(d.mouseEnabled=!1);var z=g.retina&&window.devicePixelRatio||1,y=this;y.cycle=t,y.decimals=n,y.alwaysHighlight=r,y.AHTime=i,y.AHColor=a,y.AHBorderWidth=l,y.AHBorderPadding=s,y.AHAlpha=c,y.AHObjectScale=h;var b,v,w,C,x,k,T,A,P,B=-1,I=-1,S=[],O=[],E={RadioButtons:"option",Tabs:"tab",Pad:"key"},M=g.canvas.id,j=go.mobile(),L=!1,D=null,Y=[];function X(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,n=t.y+t.height/2;(e.stageX/go.scaX<o-5||e.stageX/go.scaX>o+5||e.stageY/go.scaY<n-5||e.stageY/go.scaY>n+5?F:_)()}function R(){C&&(C.innerHTML="")}function _(){var e,t;D=!0,N(),C&&C.setAttribute("aria-hidden",!1),go.ACTIONEVENT="click",zns||(ACTIONEVENT="click"),g.stage.removeChild(b),j&&(y.alwaysHighlight=!1),g.stage.update();for(var o=0;o<B.length;o++)(t=(e=B[o]).obj.zimTabTag).disabled=!1,e.title=e.title.replace(/\s\(use arrow keys\)/,""),t.setAttribute("aria-label",e.title),t.addEventListener("focus",W)}function F(){D=!1;for(var e=0;e<B.length;e++)B[e].obj.zimTabTag.disabled=!1;N(),r&&function(){for(var e=0;e<S.length;e++){var t=S[e];t.zimObject&&("Loader"==t.zimObject.type||"TextArea"==t.zimObject.type||"Tag"==t.zimObject.type)||(S[e].style.left="-2000px")}}()}function W(e){var t=e.currentTarget,o=t.zimObject;I=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),y.dispatchEvent(n)}function H(e){D=!1,e.target.focusTab.focus()}function G(){(zot(D)||D?_:F)()}function N(){L=!0,v.removeEventListener("focus",G),w.removeEventListener("focus",G),x.removeEventListener("focus",H),k.removeEventListener("focus",H),x.parentNode&&(x.parentNode.removeChild(x),k.parentNode.removeChild(k)),T.removeEventListener("focus",H),A.removeEventListener("focus",H),T.parentNode&&(T.parentNode.removeChild(T),A.parentNode.removeChild(A));for(var e=0;e<Y.length;e++)Y[e][0].off("mousedown",Y[e][1])}function V(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}y.tabIndex=e.currentTarget.zimTabIndex,y.activatedObject=t}function q(e){return e.talk?e.talk:"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function U(e){var t=e.obj;e.title=e.title.replace(/\.$/,""),"RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type?e.title=e.title+(t.tabIndex==t.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==t.type?e.title=e.title+(t.checked?" - currently checked":" - currently not checked"):"Stepper"==t.type?e.title=e.title+" - currently displaying "+t.currentValue:"Slider"==t.type||"Dial"==t.type?e.title=e.title+" - currently at "+go.decimals(t.currentValue,y.decimals):"ColorPicker"==t.type?e.title=e.title+" - currently at "+t.selectedColor:"TextArea"==t.type?e.title=e.title+(""!=t.tag.value?"":" - placeholder: "+t.tag.placeholder):"Indicator"==t.type&&(e.title=e.title+" - currently "+(0<=t.selectedIndex?"at "+(t.selectedIndex+1)+" of "+t.num:"not indicating")),e.title+="."}function K(e,t,o,n,r){var i;if(n&&(d=n.obj),n&&("TextArea"==d.type||"Loader"==d.type))return(i=d.tag).setAttribute("aria-label",t),d&&i.setAttribute("aria-hidden",!d.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.zIndex=-5,i.zimObject=d,n.obj.zimTabTag=i,S.push(i),i;if(!n||"Dial"!=d.type&&"Slider"!=d.type&&"Stepper"!=d.type&&"ColorPicker"!=d.type)i=document.createElement("div"),d&&(i.zimObject=d),i.innerHTML="tag",i.setAttribute("role",p?"application":"button");else{var a,l,s=[];if("Dial"==d.type||"Slider"==d.type)for(var c=d.step<=0?(d.max-d.min)/20:d.step,u=d.min;u<d.max;u+=c)s.push(d.min+u);else"Stepper"==d.type?s=d.stepperArray:"ColorPicker"==d.type&&(s=d.colors);(i=document.createElement("select")).disabled=!0,i.zimObject=d,i.addEventListener("change",function(e){D&&(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,g.stage.update())}),i.size=1;for(u=0;u<s.length;u++)a=s[u],(l=document.createElement("option")).setAttribute("aria-label",a),l.innerHTML=a,i.add(l),a==d.zimTabParent.currentValue&&l.setAttribute("selected","selected");i.setAttribute("role","button")}if(i.setAttribute("id",e),i.setAttribute("tabindex",0),i.setAttribute("aria-label",t),d&&i.setAttribute("aria-hidden",!d.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.position="absolute",n){var d,h=(d=n.obj).boundsToGlobal();g.retina?(i.style.left=g.x+h.x*g.scale/z+"px",i.style.top=g.y+h.y*g.scale/z+"px",i.style.width=h.width*g.scale/z+"px",i.style.height=h.height*g.scale/z+"px"):(i.style.left=g.x+h.x*g.scale+"px",i.style.top=g.y+h.y*g.scale+"px",i.style.width=h.width*g.scale+"px",i.style.height=h.height*g.scale+"px"),n.obj.zimTabTag=i}else i.style.left="-1000px",i.style.top=g.y+"px";return i.style.overflow="hidden",i.style.zIndex=-5,i.style.fontSize="20px",i.style.color="rgba(0,0,0,.01)",S.push(i),i}Object.defineProperty(this,"tabOrder",{get:function(){return B},set:function(e){v&&v.removeEventListener("focus",R),w&&w.removeEventListener("focus",R);for(var t=0;t<S.length;t++)S[t].parentElement&&(S[t].outerHTML="");var o,n;for(S=[],t=0;t<O.length;t++)(o=B[t])&&O[t][0].off("mousedown",O[t][1]);O=[],B=[];var r=[];P=g.shim?document.body:g.canvas,oe=!1;var i=0;for(t=0;t<e.length;t++){if("HotSpots"==(o=e[t]).type&&(e.splice.apply(e,[t,1].concat(o.hotSpots)),o=o.hotSpots[0]),"HotSpot"==o.type&&(o=o.spot),o.constructor=={}.constructor){if(!(n=o.obj)||!n.getStage)continue;o.title||(o.title=q(n))}else o={obj:n=o,title:q(o)};if("RadioButtons"==n.type||"Tabs"==n.type||"Pad"==n.type){var a=[];i--;for(var l=0;l<n.buttons.length;l++){i++;var s=n.buttons[l],c={obj:s,title:o.title+" - "+E[n.type]+": "+("a"==s.text||"A"==s.text?"eh":s.text)};a.push(c),s.zimTabParent=n,s.zimTabParent.zimAccessibility=y,s.zimTabIndex=t+i,s.tabIndex=l,s.zimAccessibility=y,U(c),P=K(M+"Tab"+(t+i),c.title,P,c),O.push([s,s.on("mousedown",V)]),L||Y.push([s,s.on("mousedown",X)])}r=r.concat(a)}else n.zimTabIndex=t+i,n.zimTabParent=n,U(o),n.zimAccessibility=y,O.push([n,n.on("mousedown",V)]),L||Y.push([n,n.on("mousedown",X)]),r.push(o),P=K(M+"Tab"+(t+i),o.title,P,o)}(v=y.startAppTag=K(M+"PrefixTab",u+" start",g.shim?document.body:g.canvas,null,"before")).addEventListener("focus",R),L||(v.addEventListener("focus",G),(x=K(M+"noAriaTab","",v,null,"before")).setAttribute("aria-hidden",!0),x.focusTab=v,x.addEventListener("focus",H),(T=K(M+"noAriaTab","",v)).setAttribute("aria-hidden",!0),T.focusTab=v,T.addEventListener("focus",H)),P=K(M+"BufferTab","",P),j&&P.setAttribute("aria-hidden",!0),P=w=y.endAppTag=K(M+"SuffixTab",u+" end",P),w.addEventListener("focus",R),L||(w.addEventListener("focus",G),P=k=K(M+"noAriaTab","",w),k.setAttribute("aria-hidden",!0),k.focusTab=w,k.addEventListener("focus",H),(A=K(M+"noAriaTab","",w,null,"before")).setAttribute("aria-hidden",!0),A.focusTab=w,A.addEventListener("focus",H)),B=r}}),Object.defineProperty(this,"tabIndex",{get:function(){return I},set:function(e){if(_state)if(e<0||e>=B.length)u();else{e!=I&&c();var t=B[e].obj;if(t.stage){if(I=e,t.focus=!0,J=!(Q=!0),y.changeTitle(t),t.zimTabTag.focus(),setTimeout(function(){t.zimTabTag.focus();var e=new createjs.Event("change");e.title=t.zimTabTag.getAttribute("aria-label"),y.dispatchEvent(e)},150),y.alwaysHighlight&&(!D||!j)){if(y.AHObject){b=y.AHObject;var o=go.boundsToGlobal(t);y.AHObject.alp(y.AHAlpha).addTo(g.stage,null,!1),y.AHObject.fit(o.x,o.y,o.width,o.height),y.AHObject.sca(y.AHObject.scaleX*y.AHObjectScale),0<y.AHTime&&(Z=setTimeout(function(){g.stage.removeChild(y.AHObject),g.stage.update()},y.AHTime))}else{b=m;var n=t.getBounds(),r=t.localToGlobal(n.x-5,n.y-5),i=t.localToGlobal(n.x+n.width+5,n.y-5),a=t.localToGlobal(n.x+n.width+5,n.y+n.height+5),l=t.localToGlobal(n.x-5,n.y+n.height+5),s=m.graphics;s.clear(),s.s(y.AHColor).ss(y.AHBorderWidth).mt(r.x-y.AHBorderPadding,r.y-y.AHBorderPadding).lt(i.x+y.AHBorderPadding,i.y-y.AHBorderPadding).lt(a.x+y.AHBorderPadding,a.y+y.AHBorderPadding).lt(l.x-y.AHBorderPadding,l.y+y.AHBorderPadding).lt(r.x-y.AHBorderPadding,r.y-y.AHBorderPadding).cp(),m.alpha=y.AHAlpha,0<y.AHTime&&(Z=setTimeout(function(){g.stage.removeChild(m),g.stage.update()},y.AHTime))}g.stage.addChild(b),g.stage.update()}}else u()}function c(){if(I&&-1<I)B&&B[I]&&(B[I].obj.focus=!1);else for(var e=0;e<B.length;e++)B[e].obj.focus=!1}function u(){c(),Q=!1,y.AHObject&&g.stage.removeChild(y.AHObject),y.alwaysHighlightShape&&g.stage.removeChild(y.alwaysHighlightShape),g.stage.update(),I=-1}}}),Object.defineProperty(this,"aria",{get:function(){return D},set:function(e){(D=e)&&_()}}),zot(e)?setTimeout(function(){if(-1==B){B=[];var t=[];go.loop(g.stage,function(e){e.type&&t.push(e)}),y.tabOrder=t,zot(o)||(y.tabIndex=o)}},50):(B=[],y.tabOrder=e,zot(o)||(y.tabIndex=o));var Z,Q=!1,J=!0,$=g.on("keydown",function(e){var t;if(9==e.keyCode&&(!function(){for(var e=!1,t=0;t<S.length;t++)if(document.activeElement==S[t]){e=!0;break}return!(document.activeElement!=g.canvas&&!e)}()&&(Q=!1,-1!=y.tabIndex&&(y.tabIndex=-1)),Q?ee(e):(t=e,g.shiftKey||zid(M+"PrefixTab")!=document.activeElement&&g.canvas!=document.activeElement?!g.shiftKey||zid(M+"SuffixTab")!=document.activeElement&&zid(M+"BufferTab")!=document.activeElement||(0<B.length&&(B[0].obj.focus=!0),Q=J=!0,ee(t)):(0<B.length&&(B[B.length-1].obj.focus=!0),Q=J=!0,ee(t)))),Q&&0<B.length&&0<=y.tabIndex&&13==e.keyCode){var o=B[y.tabIndex],n=o.obj;if(o&&n.stage){var r=new createjs.Event("mousedown"),i=new createjs.Event("click");r.fromEnter=i.fromEnter=!0,"Pane"==n.type?(n.backdrop.dispatchEvent(r),n.backdrop.dispatchEvent(i)):(n.dispatchEvent(r),n.dispatchEvent(i))}}});function ee(e){e.ctrlKey?te(e.shiftKey?-1:1):(e.shiftKey?y.tab(-1):y.tab(1),e.preventDefault())}function te(e){Q=!1,zid(M+(1==e?"SuffixTab":"PrefixTab")).focus(),g.stage.removeChild(d),g.stage.update(),y.tabIndex=-1}this.tab=function(e){if(clearTimeout(Z),b&&g.stage.removeChild(b),zot(e)&&(e=1),0!=B.length)for(var t=0;t<B.length;t++){var o=B[t].obj;if(o.focus){o.focus=!1;var n=t+e,r=(n+1e4*B.length)%B.length,i=B[r];o=i.obj;for(var a=0,l=!1;!o.stage||!(!o.zimTabParent&&(zot(o.enabled)||o.enabled)||o.zimTabParent&&(zot(o.zimTabParent.enabled)||o.zimTabParent.enabled));)if(a++,r=((n+=e)+100*B.length)%B.length,o=(i=B[r]).obj,a==B.length){l=!0;break}if(l||!y.cycle&&n!=r&&!J)return void te(e);J=!1,y.tabIndex=r;break}}else te(e)};var oe=!(this.changeTitle=function(e,t,o){if("number"!=typeof e&&(e=e.zimTabIndex),!zot(e))if(o&&zot(t))y.tabIndex=e;else{var n=B[e],r=n.obj;zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,U(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(y.tabIndex=e)}});this.talk=function(e){oe||((C=K(M+"TalkTab","",w)).setAttribute("role","alert"),oe=!0),C.removeAttribute("role"),C.setAttribute("aria-label",e),C.setAttribute("role","alert");var t=new createjs.Event("change");t.title=e,y.dispatchEvent(t)},this.resize=function(e){if(zot(e))for(var t=0;t<B.length;t++)n(B[t].obj);else{if("number"!=typeof e&&(e=e.zimTabIndex),e<0)return;var o=B[e].obj;!o.stage&&b&&o==y.currentObject&&(g.stage.removeChild(b),g.stage.update()),n(o)}function n(e){if("TextArea"!=e.type&&"Loader"!=e.type){var t=e.boundsToGlobal(),o=e.zimTabTag;g.retina?(o.style.left=g.x+t.x*g.scale/z+"px",o.style.top=g.y+t.y*g.scale/z+"px",o.style.width=t.width*g.scale/z+"px",o.style.height=t.height*g.scale/z+"px"):(o.style.left=g.x+t.x*g.scale/z/z+"px",o.style.top=g.y+t.y*g.scale/z/z+"px",o.style.width=t.width*g.scale/z/z+"px",o.style.height=t.height*g.scale/z/z+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage}else e.resize()}},Object.defineProperty(this,"currentObject",{get:function(){return B[I]&&B[I].obj?B[I].obj:null},set:function(e){for(var t=0;t<B.length;t++)if(B[t].obj==e){y.tabIndex=t;break}}}),_state=!0,Object.defineProperty(this,"enabled",{get:function(){return _state},set:function(e){_state=e}}),this.dispose=function(e,t,o){m&&m.graphics.clear(),y.tabOrder=[];for(var n=0;n<S.length;n++)S[n].parentElement&&(S[n].outerHTML="");v&&(v.removeEventListener("focus",R),v.removeEventListener("focus",G),v.parentNode&&(v.outerHTML="")),x&&(x.removeEventListener("focus",H),x.parentNode&&(x.outerHTML="")),T&&(T.removeEventListener("focus",H),T.parentNode&&(T.outerHTML="")),P&&P.parentNode&&(P.outerHTML=""),w&&(w.removeEventListener("focus",R),w.removeEventListener("focus",G),w.parentNode&&(w.outerHTML="")),k&&(k.removeEventListener("focus",H),k.parentNode&&(k.outerHTML="")),A&&(A.removeEventListener("focus",H),A.parentNode&&(A.outerHTML="")),y.removeAllEventListeners(),g.off("keydown",$)}},go.extend(go.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.Manager=function(e){z_d("75");var r=this;this.type=e,this.items=[],this.add=function(e){Array.isArray(e)?r.items=r.items.concat(e):r.items.push(e)},this.remove=function(e){if(zot(e))r.items=[];else{var t;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){t=e[o];var n=r.items.indexOf(t);-1!=n&&r.items.splice(n,1)}}},this.resize=function(){if(r)for(var e=0;e<r.items.length;e++)r.items[e].resize?r.items[e].resize():r.items.splice(e)},this.toggle=function(e){if(r)for(var t=0;t<r.items.length;t++)r.items[t].toggle?r.items[t].toggle(e):r.items.splice(t)},this.dispose=function(e,t,o){for(var n=r.items.length-1;0<=n;n--)r.items[n].dispose();return r.items=[],!(r=null)}},go.ResizeManager=function(){z_d("75.5"),go.Manager.call(this,"ResizeManager")},go.ResizeManager.prototype=new go.Manager,go.ResizeManager.prototype.constructor=go.ResizeManager,go.TransformManager=function(e,r){z_d("75.7");var a=this;function l(e){!localStorage||e&&!e.pressup||a.savePersist(e)}this.type="TransformManager",this.persistID=r,this.items=[],this.add=function(e){var t,o=[];o=Array.isArray(e)?e:[e];for(var n=!1,r=0;r<o.length;r++)(t=o[r]).transformControls&&(t.originalVisible=t.transformControls.visible),t.toggle&&t.toggle(!1),0==a.items.length&&0==r&&(n=!0),"Blob"==t.type||"Squiggle"==t.type?(a.persistID||n&&(n=!1,t.controlsVisible=!0,a.currentObject=t),t.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)}),t.on("controlsshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),t.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}),t.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)})):(transObj=t.transformControls,a.persistID||n&&"Layer"!=t.type&&(n=!1,t.originalVisible&&(transObj.show(),a.currentObject=t)),t.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,a.dispatchEvent(t)}),t.on("transformshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),t.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}));a.items=a.items.concat(e)},this.remove=function(e){if(zot(e))a.items=[];else{var t;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){t=e[o],a.currentObject==t&&(a.currentObject=null),t.transformedEvent&&(t.off("transformed",t.transformedEvent),t.transformedEvent=null),"Blob"==t.type||"Squiggle"==t.type?t.controlsVisible=!1:t.transformControls.remove();var n=a.items.indexOf(t);-1!=n&&a.items.splice(n,1)}r&&a.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}a.currentObject=e}},this.hide=function(e){if(!zot(e))if(a.currentObject==e&&(a.currentObject=null),"Blob"==e.type||"Squiggle"==e.type)e.controlsVisible&&(e.controlsVisible=!1);else{var t=e.transformControls;if(!t||t.visible)return;t.hide()}},this.hideAll=function(e){for(var t,o,n=0;n<a.items.length;n++)if((o=a.items[n])&&(o.transformControls||o.update)){if(a.items[n]==e)continue;"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible&&(o.controlsVisible=!1):(t=a.items[n].transformControls).visible&&t.hide()}else a.items.splice(n);a.currentObject=null},this.resize=function(){if(a){for(var e,t=0;t<a.items.length;t++)(e=a.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():a.items.splice(t);r&&a.savePersist()}},zot(e)||a.add(e);var s="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){if(zot(e)&&zon)zog(s);else{a.persistID=e;var t,n=0;if(localStorage&&localStorage[e]){var r=a.persistData=JSON.parse(localStorage[e]);if(r.length==a.items.length)for(var i=0;i<a.items.length;i++)r[i].controls&&(a.currentObject=a.items[i]),!r[i]||"Blob"!=r[i].type&&"Squiggle"!=r[i].type?r[i]&&(zot(a.items[i].transformControls)?function(){var t=a.items[i],o=r[i];interval(50,function(e){t.transformControls&&(t.transformControls.setData(o),t.dispatchEvent("persistset"),++n==r.length&&(setTimeout(function(){t==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear()))},20)}():(a.items[i].transformControls.setData(r[i]),function(){var t=a.items[i];interval(50,function(e){t.dispatchEvent("persistset"),++n==r.length&&(setTimeout(function(){t==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear())},20)}())):(a.items[i].points.length!=r[i].points.length&&(a.items[i].points=r[i].points),a.items[i].setData(r[i]),a.items[i]==a.currentObject&&a.currentObject.toggle(!0))}for(i=0;i<a.items.length;i++)(t=a.items[i]).transformedEvent||("Blob"==t.type||"Squiggle"==t.type?(t.transformedEvent=t.on("change",function(e){e.pressup=!0,l(e)}),t.transformedEvent=t.on("update",function(e){e.pressup=!0,l(e)}),t.transformedEvent=t.on("controlsshow",function(e){e.pressup=!0,l(e)}),t.transformedEvent=t.on("controlshide",function(e){e.pressup=!0,l(e)})):(t.transformedEvent=t.on("transformed",l),t.transformedEvent=t.on("transformshow",l),t.transformedEvent=t.on("transformhide",l)))}},this.savePersist=function(e){for(var t=[],o=0;o<a.items.length;o++)it=a.items[o],"Blob"==it.type||"Squiggle"==it.type?it.recordData&&t.push(it.recordData()):it.transformControls&&it.transformControls.recordData&&t.push(it.transformControls.recordData());a.persistData=t,localStorage[a.persistID]=JSON.stringify(t)},this.clearPersist=function(e){zot(e)&&zon?zog(s):(a.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<a.items.length;e++)it=a.items[e],it.transformedEvent&&("Blob"==it.type||"Squiggle"==it.type?it.off("change",it.transformedEvent):it.off("transformed",it.transformedEvent),it.transformedEvent=null);a.persistData=null},zot(r)||a.persist(r),this.dispose=function(e,t,n){if(zot(e)&&(e=!0),a.removeAllEventListeners(),a.persistID&&e&&a.stopPersist(),t)for(var r=0;r<a.items.length;r++)o=a.items[r],"Blob"==o.type||"Squiggle"==o.type?o.dispose():o.transformControls.dispose()}},go.extend(go.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.GuideManager=function(){z_d("77"),go.Manager.call(this,"GuideManager")},go.GuideManager.prototype=new go.Manager,go.GuideManager.prototype.constructor=go.GuideManager,go.GridManager=function(){z_d("79"),go.Manager.call(this,"GridManager")},go.GridManager.prototype=new go.Manager,go.GridManager.prototype.constructor=go.GridManager,go.LayoutManager=function(){z_d("81"),this.type="LayoutManager";var r=this;this.items=[],this.add=function(e){r.items.push(e)},this.resize=function(){for(var e=0;e<r.items.length;e++)r.items[e].resize()},this.disable=function(){for(var e=0;e<r.items.length;e++)r.items[e].disable()},this.enable=function(){for(var e=0;e<r.items.length;e++)r.items[e].enable()},this.dispose=function(e,t,o){for(var n=0;n<r.items.length;n++)r.items[n].removeShape();return!0}},go.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return 0<=this.selections.indexOf(e)},this.add=function(e,t,o,n){if(!zot(e)&&(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),!(0<=this.selections.indexOf(e)))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?0<=r&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(e,t,o){return this.clear(),!(this.selections=null)}},go.SelectionManager=function(o,e,t){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(o)&&(o=[]),zot(t)&&(t=!0),Array.isArray(o)||(o=[o]),this.sets=o,this.multipleKey=e,this.multipleSets=t,this.multiple=!1;for(var n=this,r=0;r<o.length;r++)o[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var e=0;e<o.length;e++)o[e].clear()},this.setCurrent=function(e){this.currentSet=e;for(var t=0;t<o.length;t++)o[t]!=e&&(this.multipleSets||o[t].clear())};var i=new createjs.Event("keydown");this.eventRemove=i.remove,this.keydownEvent=window.addEventListener("keydown",function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")}),this.keyupEvent=window.addEventListener("keyup",function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)}),this.dispose=function(){window.removeEventListener("keydown",this.keydownEvent),window.removeEventListener("keyup",this.keyupEvent)}},go.extend(go.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),void 0===c)var c;go.Bind=function(e,t,p,o,f,n,m){var r;if(r=zob(go.Bind,arguments,"connection, bindType, master, masterFilter, couple, smartDecimals, report",this))return r;z_d("81.8"),this.type="Bind";var z=this;function y(i,e,t){var a=[];if(zot(e)&&zot(t)){if("from"==i&&z.bindType!=LOCALSTORAGE)return go.loop(z.bindings,function(e){e.filter&&a.push(e.filter)}),[a,"full"];var o=z.ids}else if(zot(e)||Array.isArray(e)||(e=[e]),zot(t)||Array.isArray(t)||(t=[t]),e){o=[];go.loop(e,function(e){if("string"==typeof e)o.indexOf(e)<0&&o.push(e);else{var t=z.objIDs.at(e);t&&go.loop(t,function(e){o.indexOf(e)<0&&o.push(e)})}})}var l,s,c={};return o?(s=t,go.loop(o,function(n){var e=z.bindings[n];if(e){e.filter&&a.push(e.filter);var r=e.obj;go.loop(s||e.props,function(e){var t=z.toIDs[e];if(t&&0<=t.indexOf(n))if("from"==i)c[n]||(c[n]=[]),c[n].push(e);else{c[n]||(c[n]={});var o=r[e];"number"==typeof o&&z.smartDecimals&&(o=1<o?go.decimals(o,1):go.decimals(o,2)),c[n][e]=go.copy(o)}})}})):t&&(l=[],go.loop(t,function(r){go.loop(z.toIDs[r],function(e){var t=z.bindings[e];l.indexOf(e)<0&&(t.filter&&a.push(t.filter),l.push(e));var o=t.obj;if("from"==i)c[e]||(c[e]=[]),c[e].push(r);else{c[e]||(c[e]={});var n=o[r];"number"==typeof n&&z.smartDecimals&&(n=1<n?go.decimals(n,1):go.decimals(n,2)),c[e][r]=go.copy(n)}})})),[a,c]}zot(e)&&localStorage&&zot(c)&&(zot(t)||t==LOCALSTORAGE)?(e="zimBind",t=LOCALSTORAGE):e&&e.match(/\/|\./)?(zot(t)&&(t=GET),e.match(/\?/)?e+="&":e+="?"):e&&zot(t)&&(t=LOCALSTORAGE),zot(n)&&(n=!0),t!=LOCALSTORAGE||localStorage||(zon&&zogy("Bind() - no localStorage"),z.error="error - no localStorage"),this.connection=e,this.bindType=t,this.master=p,this.masterFilter=o,this.smartDecimals=n,zot(m)&&(m=!1),c||((c=this).default=!0),this.bindType==POST&&(z.ajax=new go.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(o,e,t,n,r){if(zot(t)||zot(e)||zot(o))return z;if(z.bindings[o]){if(z.bindings[o].obj!=e)return zon&&zogy("Bind() - id can be used with only one object"),z}else{z.ids.indexOf(o)<=0&&z.ids.push(o),z.bindings[o]={obj:e,props:[]},zot(r)||"function"!=typeof r||(z.bindings[o].filter=r);var i=z.objIDs.at(e);i?i.indexOf(o)<0&&i.push(o):z.objIDs.add(e,[o])}Array.isArray(t)||t.constructor=={}.constructor||(t=[t]);var a=z.bindings[o].props;function l(e,t,o){zot(e[t])?e[t]=[o]:e[t].indexOf(o)<0&&e[t].push(o)}return Array.isArray(t)?go.loop(t,function(e){l(z.toIDs,e,o),l(z.fromIDs,e,o),a.indexOf(e)<0&&a.push(e)}):go.loop(t,function(e,t){t!=BOTH&&t!=TO||l(z.toIDs,e,o),t!=BOTH&&t!=FROM||l(z.fromIDs,e,o),a.indexOf(e)<0&&a.push(e)}),m&&v("Bind Report: ADD ["+o+"]",(t?" "+t:"")+(n?" "+n:"")),z.bindType==LOCALSTORAGE?(z.from(null,o,t,n),z.data&&!go.isEmpty(z.data)||z.to(o,t)):(b("bind",null,[r],z.data,n),z.applyData()),z},this.updatefilter=function(e,t){var o=z.bindings[e];return o&&(zot(t)?o.filter&&delete o.filter:"function"==typeof t&&(o.filter=t)),z},this.remove=function(e,t,o,n,r,i){if(zot(e)||Array.isArray(e)||(e=[e]),!zot(e)){var a=[],l=[];go.loop(e,function(e){"string"==typeof e?a.push(e):l.push(e)})}zot(t)||Array.isArray(t)||(t=[t]),zot(r)&&(r=!0),0==(e=a.concat(l)).length&&(e=null);var s=y("from",e,t,!1);if("stop"!=(u=b("remove",n,s[0],s=s[1],o))){var c=go.copy(s);if(zot(t)||0==t.length)0<a.length&&go.loop(a,function(e){g(e,!0)}),0<l.length&&go.loop(l,function(e){0<(a=z.objIDs.at(e)).length&&go.loop(a,function(e){g(e,!1)}),z.objIDs.remove(e)});else{a=[];go.loop(s,function(o,e){var n=z.bindings[o].props;go.loop(e,function(e){var t=n.indexOf(e);0<=t&&n.splice(t,1),h(e,o)}),0==n.length&&a.push(o)}),0<a.length&&z.remove(a)}if(r){if(z.bindType==LOCALSTORAGE)z.to(),d("success");else if(z.bindType==GET){var u=JSON.stringify(c);f&&(u=go.couple(u)),go.async(z.connection+"remove="+u,d,"callbackRemove")}else z.bindType==POST?z.ajax.post(z.connection,c,d,"remove"):(z.bindType,SOCKET);function d(e){i&&"function"==typeof i&&(f&&(e=go.couple(e)),i(e)),m&&v("Bind Report: REMOVE"+(o?" ["+o+"]":""),e)}}return z}function h(e,t){var o,n;(o=z.fromIDs[e])&&(0<=(n=o.indexOf(t))&&o.splice(n,1),0==o.length&&delete z.fromIDs[e]),(o=z.toIDs[e])&&(0<=(n=o.indexOf(t))&&o.splice(n,1),0==o.length&&delete z.toIDs[e])}function g(t,e){var o=z.bindings[t].obj,n=z.bindings[t].props,r=z.objIDs.at(o),i=r.indexOf(t);0<=i&&r.splice(i,1),e&&0==r.length&&l.push(o),0<=(i=z.ids.indexOf(t))&&z.ids.splice(i,1),go.loop(n,function(e){h(e,t)}),delete z.bindings[t]}},this.stopProcess=!1,this.stop=function(){z.stopped=!0};var l=function(){var e=this;e.stop=function(){e.stopped=!0}};function b(t,e,o,n,r){var i=new l,a=null!=n&&!go.isEmpty(n);return s(i,r)?"stop":(z.masterFilter&&"function"==typeof z.masterFunction&&(n=z.data=z.masterFilter(n,t,r,i)),go.loop(o,function(e){if("function"==typeof e){if(s(i,r))return"stop";n=z.data=e(n,t,r,i)}}),s(i,r)?"stop":(e&&"function"==typeof e&&(n=z.data=e(n,t,r,i)),s(i,r)?"stop":void(a&&!z.data&&zon&&zogy("Bind()"+(t?" ["+t+"]":"")+(r?" ["+r+"]":"")+" - warning, a filter may not have returned data"))))}function s(e,t){return(z.stopped||e.stopped)&&(v("STOP"+(t?" ["+t+"]":""),e.stopped?"process stopped":"bind stopped"),e.stopped?e.stop=null:z.stopped=!1,1)}function v(e,t){(z==c?zogl:zogd)(e,t)}return this.to=function(e,t,o,n,r,i,a){var l;if(l=zob(z.to,arguments,"targets, props, extra, filter, smartDecimals, call, lock"))return l;var s=y("to",e,t);if("stop"!=(c=b("to",n,s[0],s=s[1],o))){if(z.bindType==LOCALSTORAGE)localStorage[z.connection]=JSON.stringify(s),g(s);else{if(!s||go.isEmpty(s))return z;if(z.bindType==GET){var c=s;go.isJSON(c)||(c=JSON.stringify(c)),f&&(c=go.couple(c));var u=zot(z.master)?"":"&master="+encodeURI(p),d=zot(a)?"":"&lock="+encodeURI(a),h=zot(o)?"":"&extra="+encodeURI(o);go.async(z.connection+"command=to&data="+c+u+d+h,g,"callbackTo")}else z.bindType==POST?(z.ajax.master=p,z.ajax.couple=f,z.ajax.lock=a,z.ajax.post(z.connection,s,"to",o,g)):(z.bindType,SOCKET)}return z}function g(e){f&&(e=go.decouple(e)),i&&"function"==typeof i&&i(e),m&&v("Bind Report: TO"+(o?" ["+o+"]":""),e)}},this.toLock=function(t,o,n,r,i,a){var e;if(e=zob(z.toLock,arguments,"targets, props, extra, filter, smartDecimals, call"))return e;var l=go.makeID();z.from(function(e){z.to(t,o,n,r,i,a,l)},t,o,n,r,l)},this.toggleReport=function(e){return m=zot(e)?!m:e,z},m&&v("Bind Report: CREATE ["+t.toUpperCase()+"]",e+(p?"master="+p:"")),this.report=function(){var e="Bind {DATA} Report:",t=go.copy(z.data);(z==c?zogl:zogd)(e,t)},this.from=function(t,e,o,n,r,i){var a;if(a=zob(z.from,arguments,"call, targets, props, extra, filter, lock"))return a;var l=y("from",e,o),s=l[0];if(l=l[1],"stop"!=(c=b("fromTo",r,s,l,n))){if(z.bindType==LOCALSTORAGE)localStorage[z.connection]&&null!=localStorage[z.connection]||(localStorage[z.connection]="{}"),z.data=JSON.parse(localStorage[z.connection]),g(z.data);else if(z.bindType==GET){var c=l;go.isJSON(c)||(c=JSON.stringify(c)),f&&(c=go.couple(c));var u=zot(z.master)?"":"&master="+encodeURI(p),d=zot(i)?"":"&lock="+encodeURI(i),h=zot(n)?"":"&extra="+encodeURI(n);go.async(z.connection+"data="+c+"&command=from"+u+d+h,g,"callbackFrom")}else z.bindType==POST?(z.ajax.master=p,z.ajax.couple=f,z.ajax.lock=i,z.ajax.post(z.connection,l,"from",n,g)):(z.bindType,SOCKET);return z}function g(e){z.data=e,f&&(z.data=go.decouple(z.data)),b("from",r,s,z.data,n),z.applyData(),t&&"function"==typeof t&&t(z.data),m&&v("Bind Report: FROM"+(n?" ["+n+"]":""),z.data)}},this.applyData=function(){return go.loop(z.data,function(e,t){if(z.bindings[e]){var o=z.bindings[e].obj;go.loop(t,function(e,t){o[e]=t})}}),z},this.clear=function(){return z.bindType==LOCALSTORAGE&&(localStorage[z.connection]=null),z},this.removeAllBindings=function(e,t){if(zot(e)&&(e=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new Dictionary(!0),this.toIDs={},this.fromIDs={},e){if(z.bindType==LOCALSTORAGE)z.clear(),n("success");else if(z.bindType==GET){var o=zot(z.master)?"":"&master="+encodeURI(p);go.async(z.connection+"command=removeAll"+o,n,"callbackRemoveAll")}else z.bindType==POST?(z.ajax.master=p,z.ajax.post(z.connection,{},"removeAll",null,n,"removeAll")):(z.bindType,SOCKET);function n(e){t&&"function"==typeof t&&t(e),m&&v("Bind Report: REMOVEALL",e)}}},z},go.Swipe=function(e,t,o,n){var r;if(r=zob(go.Swipe,arguments,"obj, distance, duration, isometric",this))return r;if(z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(e)&&e.on){var i,a,l,s,c,u;zot(t)&&(t=30),zot(o)&&(o=80),this.distance=t,this.duration=o,this.active=!0;var d=this;e.on("mousedown",function(o){function t(){var e=new createjs.Event("swipe");if(e.obj=d.obj,e.stageX=o.stageX/go.scaX,e.stageY=o.stageY/go.scaY,e.rawX=o.rawX/go.scaX,e.rawY=o.rawY/go.scaY,e.swipeX=e.swipeY=0,d.direction="none",n){if(Math.abs(l-i)>d.distance||Math.abs(s-a)>d.distance){var t=180*Math.atan2(s-a,l-i)/Math.PI;270<=(t=(t+360)%360)&&t<360?(e.swipeY=-1,d.direction="up"):0<=t&&t<90?(e.swipeX=1,d.direction="right"):90<=t&&t<180?(e.swipeY=1,d.direction="down"):180<=t&&t<270&&(e.swipeX=-1,d.direction="left")}}else Math.abs(l-i)>Math.abs(s-a)?(l-i>d.distance&&(e.swipeX=1,d.direction="right"),i-l>d.distance&&(e.swipeX=-1,d.direction="left")):(s-a>d.distance&&(e.swipeY=1,d.direction="down"),a-s>d.distance&&(e.swipeY=-1,d.direction="up"));d.dispatchEvent(e)}d.active&&!o.target.zimNoSwipe&&(d.obj=o.target,o.target.stage,l=i=o.stageX/go.scaX,s=a=o.stageY/go.scaY,c=!0,d.dispatchEvent("swipedown"),clearTimeout(u),u=setTimeout(function(){c&&(t(),c=!1)},d.duration),e.on("pressmove",function(e){l=e.stageX/go.scaX,s=e.stageY/go.scaY}),e.on("pressup",function(e){c&&(t(),c=!1,clearTimeout(u))}))}),this.disable=function(){d.active=!1},this.enable=function(){d.active=!0}}else zog("zim controls - Swipe():\nPlease pass in object")},go.extend(go.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.Swiper=function(e,t,o,n,r,i,a,l,s,c,u,d){var h;if(h=zob(go.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer, factor, loop, pauseTime",this))return h;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(e)&&e.getStage&&e.stage){if(!zot(t)){zot(n)&&(n=1),zot(r)&&(r=!0),zot(l)&&(l=.1),zot(s)&&(s=!1),zot(c)&&(c=1),zot(u)&&(u=!1),zot(d)&&(d=200);var g,p,f,m,z,y=this,b=e,v=y.desiredValue=t[o];this.target=t,this.property=o,this.sensitivity=n;var w,C=!1;b.canvas?(f=b.on("stagemousedown",function(e){C=!0,P(e),m=b.on("stagemousemove",B),z=b.on("stagemouseup",function(){C=!1,b.off("stagemousemove",m),b.off("stagemouseup",z),y.dispatchEvent("swipeup")})}),w=b):(w=b.stage,I(),f=b.on("mousedown",P),m=b.on("pressmove",B),z=b.on("pressup",function(){C=!1,y.dispatchEvent("swipeup")}));var x=new go.Damp(y.target[y.property],l),k=(y.target[y.property],0),T=null;y.target.swiperTicker=go.Ticker.add(function(){v==k?v!=T&&(y.pauseTimeout&&y.pauseTimeout.clear(),T=v,y.pauseTimeout=go.timeout(d,function(){y.dispatchEvent("swipepause"),y.pauseTimeout=null})):(T=null,k=v,y.pauseTimeout&&y.pauseTimeout.clear()),y.swiperMoving&&(y.target[y.property]=s?Math.round(x.convert(v)):x.convert(v),!C&&!zot(i)&&!zot(a)&&Math.abs(y.target[y.property]-v)<Math.abs(a-i)/1e3?(y.swiperMoving=!1,y.target[y.property]=v,y.immediate(y.target[y.property]),y.dispatchEvent("swipestop")):y.target[y.property])},w),this.immediate=function(e){x.immediate(e),y.target[y.property]=s?Math.round(e):e,y.desiredValue=v=e};var A=!0;Object.defineProperty(y,"enabled",{get:function(){return A},set:function(e){A!=e&&((e?function(){b.canvas?f=b.on("stagemousedown",f):(f=b.on("mousedown",f),m=b.on("pressmove",m),z=b.on("pressup",z));y.immediate(y.target[y.property]),y.target.swiperTicker=go.Ticker.add(y.target.swiperTicker,w)}:S)(),A=Boolean(e))}}),Object.defineProperty(y,"desiredValue",{get:function(){return v},set:function(e){v=e}}),this.dispose=function(e,t,o){S(),x=null}}}else zog("zim.Swiper() - please provide container on stage");function P(e){w=e.target.stage,C=!0,g=r?e.stageX/go.scaX:e.stageY/go.scaY,p=y.target[y.property],y.dispatchEvent("swipedown")}function B(e){var t=g-(r?e.stageX/go.scaX:e.stageY/go.scaY);if(0<Math.abs(t)&&(y.swiperMoving=!0),v=p-t*y.sensitivity*c,zot(i)||zot(a)||!u)zot(i)||(v=Math.max(v,i)),zot(a)||(v=Math.min(v,a));else{var o=v;v=(v+1e4*(a-i)-i)%(a-i)+i,Math.abs(o-v)>.8*Math.abs(a-i)&&(y.immediate(v),g=r?e.stageX/go.scaX:e.stageY/go.scaY,p=y.target[y.property])}y.desiredValue=v,y.dispatchEvent("swipemove")}function I(){b.off("mousedown",f),b.off("pressmove",m),b.off("pressup",z)}function S(){b.canvas?(b.off("stagemousedown",f),b.off("stagemousemove",m),b.off("stagemouseup",z)):I(),go.Ticker.remove(y.target.swiperTicker)}},go.extend(go.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.MotionController=function(a,l,e,s,t,r,i,o,c,u,n,d,h,g,p,f,m,z,y,b,v,w){var C;if(C=zob(go.MotionController,arguments,"target, type, speed, axis, boundary, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBounds, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup",this))return C;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var x=this,k="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(f)){if(!zimDefaultFrame)return void zog(k);Y=f=zimDefaultFrame.stage}else if(zot(f.stage)){if(!zimDefaultFrame)return void zog(k);Y=zimDefaultFrame.stage}else Y=f.stage;zot(a)&&(a=new go.Container(1,1,null,null,!1));var T="Accelerator"==a.type;if(zot(e)&&(e=7),!zot(l)&&"DPad"==l.type){var A=l;l="manual",zot(s)&&(s=A.axis),"all"==s&&(s="both");a.x,a.y;A.on("change",function(){x.convert(a.x+A.dirX*e,a.y+A.dirY*e)})}(zot(l)||"mousemove"!=l&&"pressmove"!=l&&"pressdrag"!=l&&"keydown"!=l&&"gamebutton"!=l&&"gamestick"!=l&&"swipe"!=l&&"follow"!=l&&"manual"!=l)&&(l="mousedown"),zot(s)&&(s=T?"horizontal":"both"),"keydown"==l&&zot(r)&&(r=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==l&&zot(r)&&(r=d?[14,15,go.GamePad.RT,go.GamePad.LT]:[14,15,12,13]),"gamestick"==l&&zot(r)&&(r=d?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==l&&zot(r)&&(r=[0,0,1,1]),zot(i)&&(i=!0),"horizontal"!=s&&"vertical"!=s||(i=!1),zot(o)&&(o="keydown"==l||"gamebutton"==l?1:"pressmove"==l?.2:.1),zot(d)&&(d=!1),zot(h)&&(h=.4*e),zot(g)&&(g=4),zot(p)&&(p=.2),zot(z)&&(z=!1),Y.mouseMoveOutside=z,zot(y)&&(y=[]),Array.isArray(y)||(y=[y]),"Pen"!=a.type||a.draggable?y.push(a):y.push(a,a.paper),(a.motionController=this).mousedownIncludes=y,zot(w)&&(w=.3),x.dampKeyup=w,this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=h,this.axis=s,this.target=a,this.moveThreshold=g,this.stickThreshold=p,this.boundary=t;var P,B,I,S=x.speed,O=x.speed,E=0;(x.rotation=0,T)?(I=!(B=f.getBounds())||"vertical"==s&&!B.height||"vertical"!=s&&!B.width?1e3:"vertical"==s?B.height:B.width,zot(b)&&(b=0),zot(v)&&(v=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(v-b)/2),x.x=I/2,x.y=I/2,P=new go.Proportion(0,I,b,v)):(x.x=this.target.x,x.y=this.target.y);var M,j,L,D,Y,X=x.scaleX=a.scaleX,R=(x.scaleY=a.scaleY,!1),_=!1;if("keydown"==l||"gamebutton"==l){for(var F=0;F<4;F++)Array.isArray(r[F])||(r[F]=[r[F]]);var W=[0,0,0,0],H=[],G=["X","X","Y","Y"],N=[-1,1,-1,1],V={dirX:0,dirY:0};if("keydown"==l)var q=frame.on("keydown",K);else var U=(oe=x.gamepad=new go.GamePad).on("buttondown",K);function K(e){var t,o="keydown"==l?e.keyCode:e.buttonCode;for(F=0;F<4;F++)if(-1<r[F].indexOf(o)){if(i||"both"!=x.axis||(V.dirX=V.dirY=0),V["dir"+G[F]]=N[F],W[F]=1,0==(t=H.indexOf(F)))return;return 0<t&&H.splice(t,1),void H.unshift(F)}}if(zot(n))if("keydown"==l)var Z=frame.on("keyup",J);else var Q=oe.on("buttonup",J);function J(e){var t,o="keydown"==l?e.keyCode:e.buttonCode;for(F=0;F<4;F++)if(-1<r[F].indexOf(o)){if((W[F]=0)<=(t=H.indexOf(F))&&H.splice(t,1),"both"!=x.axis||i)V["dir"+G[F]]=-W[2*Math.floor(F/2)]+W[2*Math.floor(F/2)+1];else if(0<H.length){V["dir"+G[F]]=0;var n=H[0];V["dir"+G[n]]=N[n]}else V.dirX=V.dirY=0;return}}var $={rotation:0,speedX:x.speed,speedY:x.speed},ee=go.Ticker.add(function(){if(d)le(V);else{var e=x.speed,t=x.speed;if("both"==x.axis&&0!=V.dirX&&0!=V.dirY){var o=ue(V.dirX,V.dirY);e=o.speedX,t=o.speedY}"horizontal"!=x.axis&&"both"!=x.axis||(x.x+=e*V.dirX),"vertical"!=x.axis&&"both"!=x.axis||(x.y+=t*V.dirY),se()}},Y)}else if("mousedown"==l||"mousemove"==l)M=Y.on("stage"+l,function(e){if(Y=e.target.stage,"mousedown"==l){if(Array.isArray(x.mousedownIncludes)||(x.mousedownIncludes=[x.mousedownIncludes]),x.mousedownIncludes.indexOf(f)<0)for(var t=0;t<f.numChildren;t++){var o=f.getChildAt(t);if(-1==x.mousedownIncludes.indexOf(o)&&o.mouseEnabled&&o.hitTestPoint&&o.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY))return}x.dispatchEvent("mousedown")}var n=f.globalToLocal(z?e.rawX/go.scaX:e.stageX/go.scaX,z?e.rawY/go.scaY:e.stageY/go.scaY);x.x=n.x,x.y=n.y,se()});else if("pressmove"==l||"pressdrag"==l||"follow"==l){function te(){var e=f.globalToLocal(x.moveX,x.moveY);x.x=e.x,x.y=e.y,se(),"Pen"==a.type&&!_&&a.drawing&&(_=!0)}"Pen"==a.type&&(a.write=!1),M=Y.on("stagemousedown",function(e){if("pressdrag"!=l||a.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY)){_=!1,Array.isArray(x.mousedownIncludes)||(x.mousedownIncludes=[x.mousedownIncludes]);var t,o=!1;x.mouseDownIncludes&&(t=Y.getObjectUnderPoint(e.stageX,e.stageY));for(var n=0;n<x.mousedownIncludes.length;n++)t&&x.mousedownIncludes[n].hitTestPoint&&x.mousedownIncludes[n].hitTestPoint(e.stageX,e.stageY)&&x.mousedownIncludes[n].contains(t)&&(o=!0);if(!o)for(n=0;n<f.numChildren;n++){var r=f.getChildAt(n);if(-1==x.mousedownIncludes.indexOf(r)&&r.mouseEnabled&&r.hitTestPoint&&r.hitTestPoint(e.stageX/go.scaX,e.stageY/go.scaY))return}var i=f.globalToLocal(z?e.rawX/go.scaX:e.stageX/go.scaX,z?e.rawY/go.scaY:e.stageY/go.scaY);"follow"!=l&&"pressdrag"!=l&&x.immediate("both"==s||"horizontal"==s?i.x:null,"both"==s||"vertical"==s?i.y:null),se(),x.dispatchEvent("mousedown"),R=!0,x.moveX=z?e.rawX/go.scaX:e.stageX/go.scaX,x.moveY=z?e.rawY/go.scaY:e.stageY/go.scaY,j=Y.on("stagemousemove",function(e){x.moveX=z?e.rawX/go.scaX:e.stageX/go.scaX,x.moveY=z?e.rawY/go.scaY:e.stageY/go.scaY,"follow"!=l&&te()}),D&&go.Ticker.remove(D),"follow"==l&&(D=go.Ticker.add(te)),"Pen"==a.type&&(a.write=!0,a.zimDragCheck=!0)}}),L=Y.on("stagemouseup",function(e){"Pen"==a.type&&(a.write=!1,a.zimDragCheck=!1,_&&a.stopCheck()),D&&go.Ticker.remove(D),Y.off("stagemousemove",j),R=!1})}else if("gamestick"==l){var oe=this.gamepad=new go.GamePad;for(F=0;F<4;F++)Array.isArray(r[F])||(r[F]=[r[F]]);$={rotation:0,speedX:x.speed,speedY:x.speed};var ne=oe.on("data",function(e){V={dirX:0,dirY:0};for(var t=0;t<r[0].length;t++){var o=e.axes[r[0][t]];if(Math.abs(o)>x.stickThreshold){V.dirX=o;break}}for(t=0;t<r[2].length;t++){o=e.axes[r[2][t]];if(Math.abs(o)>x.stickThreshold){V.dirY=o;break}}d?le(V):(x.x+=x.speed*V.dirX,x.y+=x.speed*V.dirY,se())})}else if("swipe"==l)var re=new go.Swiper(Y,x,"x",.8),ie=new go.Swiper(Y,x,"y",.8,!1),ae=re.on("swipemove",function(){se()});function le(e){$.rotation+=e.dirX*x.turnSpeed,x.rotation=$.rotation,$.speedX=Math.sin($.rotation*Math.PI/180)*x.speed*-e.dirY,$.speedY=-Math.cos($.rotation*Math.PI/180)*x.speed*-e.dirY,x.x+=$.speedX,x.y+=$.speedY}function se(){var e=ue(x.x-(T?x.target.percentSpeed:x.target.x),x.y-(T?x.target.percentSpeed:x.target.y));if(S=e.speedX,O=e.speedY,u)if(x.rotation=e.angle,zot(x.rotation))x.rotation=x.target.rotation;else{x.rotation+=E;var t=ce(x.rotation),o=x.target.rotation=ce(x.target.rotation);180<Math.abs(t-o)&&(t<o?o-=360:t-=360),x.dampR.immediate(o),x.target.rotation=o,x.rotation=t}}function ce(e){return(e%360+360)%360}function ue(e,t){var o,n=x.speed,r=x.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<i&&(n=Math.abs(e)/i*x.speed,r=Math.abs(t)/i*x.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}var de=this.x=T?I/2:this.target.x,he=this.y=T?I/2:this.target.y;this.dampX=new go.Damp(de,o),this.dampY=new go.Damp(he,o),this.dampR=new go.Damp(this.target.rotation,o);var ge=0,pe=0,fe=go.Ticker.add(function(){if("manual"==l&&se(),x.boundary&&(x.x=go.constrain(x.x,x.boundary.x,x.boundary.x+x.boundary.width),x.y=go.constrain(x.y,x.boundary.y,x.boundary.y+x.boundary.height)),"horizontal"==x.axis||"both"==x.axis){if(x.dirX=go.sign(x.x-de),Math.abs(x.x-de)<S?de=x.x:de+=x.dirX*S,V&&0==V.dirX){var e=x.boundary?x.boundary.width/2:Y.width/2,t=x.x-(x.x-e)*(T?x.dampKeyup:0);de=t,x.x=de}T&&B&&B.width?x.target.percentSpeed=P.convert(x.dampX.convert(de)):x.target.x=x.dampX.convert(de)}if("vertical"==x.axis||"both"==x.axis){if(x.dirY=go.sign(x.y-he),Math.abs(x.y-he)<O?he=x.y:he+=go.sign(x.y-he)*O,V&&0==V.dirY){e=x.boundary?x.boundary.height/2:Y.height/2;var o=x.y-(x.y-e)*(T?x.dampKeyup:0);he=o,x.y=he}T&&B&&B.height?x.target.percentSpeed=P.convert(x.dampY.convert(he)):x.target.y=x.dampY.convert(he)}if("pressmove"==l&&R&&x.dispatchEvent("pressing"),x.movingX=Math.abs(de-(T?x.target.percentSpeed:x.target.x))>x.moveThreshold,x.movingY=Math.abs(he-(T?x.target.percentSpeed:x.target.y))>x.moveThreshold,!x.moving||x.movingX||x.movingY?x.moving||!x.movingX&&!x.movingY||x.dispatchEvent("startmoving"):x.dispatchEvent("stopmoving"),x.moving=x.movingX||x.movingY,x.moving&&x.dispatchEvent("moving"),x.dirX!=ge||x.dirY!=pe){var n=new createjs.Event("change");if(x.dirX!=ge){var r=["left",null,"right"];n.dir=r[x.dirX+1],ge=x.dirX,"horizontal"!=c&&"both"!=c||(x.scaleX=a.scaleX=x.dirX?Math.abs(a.scaleX)*x.dirX:a.scaleX,E=0!=X&&-1==Math.round(x.scaleX/X)?180:0)}else{r=["up",null,"down"];n.dir=r[x.dirY+1],pe=x.dirY,"vertical"!=c&&"both"!=c||(x.scaleY=a.scaleY=x.dirY?Math.abs(a.scaleY)*-x.dirY:a.scaleY)}x.dispatchEvent(n)}u&&!zot(x.rotation)&&(x.target.rotation=x.dampR.convert(x.rotation))},Y);this.immediate=function(e,t,o){return!zot(e)&&x.dampX&&(x.dampX.immediate(e),x.x=T?x.target.percentSpeed=de=e:x.target.x=de=e,re&&re.immediate(e)),!zot(t)&&x.dampY&&(x.dampY.immediate(t),x.y=T?x.target.percentSpeed=he=t:x.target.y=he=t,ie&&ie.immediate(t)),!zot(o)&&x.dampR&&(x.dampR.immediate(o),x.rotation=x.target.rotation=o),x},this.convert=function(e,t){zot(e)||(x.x=e),zot(t)||(x.y=t),se()};var me=!0;function ze(){"keydown"==l?(frame.off("keydown",q),frame.off("keyup",Z),go.Ticker.remove(ee)):"gamebutton"==l?(oe.off("buttondown",U),oe.off("buttonup",Q),go.Ticker.remove(ee)):"gamestick"==l?oe.off("data",ne):"swipe"==l?(re.enabled=!1,ie.enabled=!1,re.off("swipemove",ae)):"mousedown"==l||"mousemove"==l?Y.off("stage"+l,M):"pressmove"==l&&(Y.off("stagemousedown",M),Y.off("stagemousemove",j),Y.off("stagemouseup",L)),go.Ticker.remove(fe)}Object.defineProperty(x,"enabled",{get:function(){return me},set:function(e){me!=e&&((e?function(){"keydown"==l?(q=frame.on("keydown",q),Z=frame.on("keyup",Z),ee=go.Ticker.add(ee,Y)):"gamebutton"==l?(U=oe.on("buttondown",U),Q=oe.on("buttonup",Q),ee=go.Ticker.add(ee,Y)):"gamestick"==l?ne=oe.on("data",ne):"swipe"==l?(re.enabled=!0,ie.enabled=!0,ae=re.on("swipemove",ae)):"mousedown"==l||"mousemove"==l?M=Y.on("stage"+l,M):"pressmove"==l&&(M=Y.on("stagemousedown",M),j=Y.on("stagemousemove",j),L=Y.on("stagemouseup",L));fe=go.Ticker.add(fe,Y)}:ze)(),me=Boolean(e))}}),this.dispose=function(e,t,o){ze(),oe&&oe.dispose(),re&&re.dispose(),ie&&re.dispose()}},go.extend(go.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),go.GamePad=function(){if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var a;window.addEventListener("gamepadconnected",n),this.currentIndex=0;var l=this;function n(e){var t,o,n;l.connected=!0,t="gamepadconnected",o=e,(n=new createjs.Event(t)).index=o.gamepad.index,n.id=o.gamepad.id,n.buttons=o.gamepad.buttons,n.axes=o.gamepad.axes,l.dispatchEvent(n);var r=navigator.getGamepads()[l.currentIndex];l.lastData=[];for(var i=0;i<r.buttons.length;i++)l.lastData[i]=r.buttons[i].pressed;!function e(){if(a=requestAnimationFrame(e),l.data=navigator.getGamepads()[l.currentIndex],l.data){for(var t=l.buttons=[],o=0;o<l.data.buttons.length;o++)if(t[o]=l.data.buttons[o].pressed,t[o]!=l.lastData[o]){if(l.lastData[o]=t[o],t[o])var n=new createjs.Event("buttondown");else n=new createjs.Event("buttonup");n.buttonCode=o,n.button=s[o],l.dispatchEvent(n)}(n=new createjs.Event("data")).axes=l.axes=l.data.axes,n.buttons=l.buttons,l.dispatchEvent(n)}}()}var r=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(l.connected||n(),clearInterval(r))},500);var i=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==l.currentIndex&&(cancelAnimationFrame(a),connected=!1,l.dispatchEvent("gamepaddisconnected"))});this.dispose=function(e,t,o){window.removeEventListener("gamepadconnected",n),window.addEventListener("gamepaddisconnected",i),cancelAnimationFrame(a),clearInterval(r),l.connected=!1}};for(var s=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],l=0;l<s.length;l++)go.GamePad[s[l]]=l;var p,f,e=["LSX","LSY","RSX","RSY"];for(l=0;l<e.length;l++)go.GamePad[e[l]]=l;go.extend(go.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),go.Portal=function(t,o){var e;if(e=zob(go.Portal,arguments,"obj, lands",this))return e;if(z_d("69.96"),!zot(t)&&t.stage){this.type="Portal";var n=this,r=o&&o.numChildren&&0<o.numChildren;if(r){var i=o.getChildAt(o.numChildren-1),a=o.getChildAt(o.numChildren-2);o.setChildIndex(a,o.numChildren-1),a.setMask(t)}t.on(go.mobile()?"mousedown":"mouseover",function(){n._enabled&&(r&&l(),n.dispatchEvent("enter"))}),t.on(go.mobile()?"pressup":"mouseout",function(){n._enabled&&n.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?a.setMask(t):zog("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return i},set:function(e){if(o.contains(e))for(;e!=i;)l()}}),Object.defineProperty(this,"nextLand",{get:function(){return a},set:function(e){zon&&zog("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(n,"enabled",{get:function(){return n._enabled},set:function(e){n._enabled=e}}),this.dispose=function(e,t,o){}}function l(){o.setChildIndex(i,0),i=a,a=o.getChildAt(o.numChildren-2),o.setChildIndex(a,o.numChildren-1),i.setMask(null),a.setMask(t),t.stage.update()}},go.extend(go.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),zimContactListener=null,go.Parallax=function(e,t,a,o,n,r,l){var i;if(i=zob(go.Parallax,arguments,"layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",this))return i;if(z_d("68"),this.type="Parallax",zot(o))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)o=e[0].obj.stage;else{if(!zimDefaultFrame)return;o=zimDefaultFrame.stage}a=!!zot(a),zot(n)&&(n=!1),zot(r)&&(r=!1);var s=o.getBounds().width,c=o.getBounds().height;o.mouseMoveOutside=r;var u=this;o.on("stagemousemove",function(e){u.mouseX=e.rawX/go.scaX,u.mouseY=e.rawY/go.scaY});var d=zot(t)?.1:t;this.addLayer=function(e){if(!(zot(e.obj)||zot(e.prop)||zot(e.propChange))){var t={obj:e.obj,prop:e.prop};t[t.prop]=e.propChange,zot(e.input)&&(e.input="mouseX"),t.input=e.input,t.split=zot(e.split)?!("mouseX"!=e.input||!a):e.split;var o=zot(e.inMin)?0:e.inMin,n=zot(e.inMax)?"mouseX"==e.input||"scrollX"==e.input?s:c:e.inMax,r=zot(e.factor)?1:e.factor,i=!zot(e.integer)&&e.integer;return t["p_"+t.prop]=new go.ProportionDamp(o,n,0,t[t.prop],d,r,i,l),"scale"==t.prop?t["s_"+t.prop]=t.obj.scaleX:"frame"==t.prop?t["s_"+t.prop]=t.obj.currentFrame:t["s_"+t.prop]=t.obj[t.prop],zot(e.immediate)||t["p_"+t.prop].immediate(e.immediate),h.push(t),h.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=h[e];t["p_"+t.prop].dispose(),h.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<h.length;o++)(t=h[o])["p_"+t.prop].immediate(e[o])},this.dispose=function(e,t,o){return h=null,a&&go.Ticker.remove(p),!0},e=zot(e)?[]:e;for(var h=[],g=0;g<e.length;g++)this.addLayer(e[g]);if(a){var p=go.Ticker.add(function(e){u.step()},o);n&&go.Ticker.remove(p)}this.step=function(e){for(var t,o,n=0;n<h.length;n++)t=h[n],zot(e)?"mouseX"==t.input?o=u.mouseX:"mouseY"==t.input?o=u.mouseY:"scrollX"==t.input?o=go.scrollX():"scrollY"==t.input&&(o=go.scrollY()):o=e,"scale"==t.prop?t.obj.scaleX=t.obj.scaleY=t["s_"+t.prop]+t["p_"+t.prop].convert(o):"frame"==t.prop?t.obj.gotoAndStop(t["s_"+t.prop]+t["p_"+t.prop].convert(o)):(t.obj[t.prop]=t["s_"+t.prop]+t["p_"+t.prop].convert(o),t.split&&(t.obj[t.prop]-=t[t.prop]/2))},u.paused=n,u.pause=function(e){zot(e)&&(e=!0),u.paused!=e&&(u.paused=e,p&&(e?go.Ticker.remove(p):p=go.Ticker.add(p)))},Object.defineProperty(u,"damp",{get:function(){return d},set:function(e){var t;d=e;for(var o=0;o<h.length;o++)(t=h[o])["p_"+t.prop].damp=d}})},go.Scroller=function(e,t,o,n,r,i,a,l,s,c){var u;if(u=zob(go.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",this))return u;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=s;var d=!1===l?{}:go.getStyle(this.type,this.group,c);if(zot(e)&&(e=null!=d.backing?d.backing:null),!zot(e)){var h=this.backing1=e;if(!zot(h)&&h.getBounds){var g=this.backing2=e.clone();zot(n)&&(n=null==d.horizontal||d.horizontal),zot(r)&&(r=null!=d.gapFix?d.gapFix:0),zot(a)&&(a=null!=d.container?d.container:null),zot(i)&&(i=null!=d.stage?d.stage:null);var p=this;zot(t)&&(t=null!=d.speed?d.speed:1),this.speed=t;var f=this.baseSpeed=this.speed;zot(o)&&(o=null!=d.direction?d.direction:1),this.direction=o;var m=n?h.scaleX:h.scaleY;if(h.getBounds())if(i||h.stage)if(h.parent)if(h.parent.addChildAt(g,h.parent.getChildIndex(h)),i=i||h.stage,zot(a)&&(a=i),a.getBounds()){var z,y,b=h.getBounds().width*m-r,v=h.getBounds().height*m-r;n?g.x=b:g.y=v;var w=!1,C=go.Ticker.add(function(e){z||(z=a.getBounds().width,y=a.getBounds().height);if(0==p.speed||0==p.direction)return;n?(h.x-=p.speed*p.direction,h.x<g.x?g.x=h.x+b:g.x=h.x-b,0<p.direction*p.speed?g.x<0&&h.x<g.x?h.x=g.x+b:h.x<0&&g.x<h.x&&(g.x=h.x+b):g.x>z&&g.x>h.x?g.x=h.x-b:h.x>z&&h.x>g.x&&(h.x=g.x-b)):(h.y-=p.speed*p.direction,h.y<g.y?g.y=h.y+v:g.y=h.y-v,0<p.direction*p.speed?g.y<0&&h.y<g.y?h.y=g.y+v:h.y<0&&g.y<h.y&&(g.y=h.y+v):g.y>y&&g.y>h.y?g.y=h.y-v:h.y>y&&h.y>g.y&&(h.y=g.y-v))},i);this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(f=p.speed,0<t?(w=!0,go.animate({target:p,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){p.speed=0,p.paused=!0,w=!1,p.dispatchEvent("pause")}})):(w=!1,p.speed=0,p.paused=!0,setTimeout(function(){p.dispatchEvent("pause")},10))):(w=!1,0<t?go.animate({target:p,obj:{pausingSpeed:f},ticker:!1,time:t,call:function(){p.speed=f,p.paused=!1,w=!1}}):(p.speed=f,p.paused=!1)),p},Object.defineProperty(p,"percentSpeed",{get:function(){return 0==p.baseSpeed?NaN:p.speed/p.baseSpeed*100},set:function(e){w||p.paused||(p.speed=p.baseSpeed*e/100)}}),Object.defineProperty(p,"pausingSpeed",{get:function(){return 0==p.baseSpeed?NaN:p.speed/p.baseSpeed*100},set:function(e){p.speed=p.baseSpeed*e/100}}),!1!==l&&qe(this,d),this.dispose=function(e,t,o){return go.Ticker.remove(C),!0}}else zog("zim display - Scroller(): please setBounds() on container or stage if no container");else zog("zim display - Scroller(): please add object to container or stage before adding to Scroller");else zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim display - Scroller(): please setBounds() on backing objects")}}},go.extend(go.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),go.Dynamo=function(n,e,t,o,r,i,a,l,s,c,u,d){var h;if(h=zob(go.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",this))return h;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=u;var g=!1===c?{}:go.getStyle(this.type,this.group,d);if(zot(n)&&(n=null!=g.sprite?g.sprite:null),!zot(n)){var p=this.frames=n.parseFrames(t,o,r,!0);if(0!=p.length){this.totalFrames=p.length;var f=0;zot(e)&&(e=null!=g.speed?g.speed:30),zot(a)&&(a=null==g.reversible||g.reversible);var m=this.baseSpeed=this.speed=e;zot(i)&&(i=null!=g.update&&g.update),zot(l)&&(l=null!=g.flip?g.flip:null),zot(l)&&0==a&&(l=!0);var z,y,b,v,w,C=this,x=Date.now(),k=!1;C.scaleX=n.scaleX,C.scaleY=n.scaleY,function e(){if(z=requestAnimationFrame(e),y=p[f].s,0!=C.speed&&0!=y&&(v=1e3/Math.abs(C.speed)*y,b=Date.now(),v<b-x)){x=b;var t=C.frame+(0<C.speed||!a?1:-1),o=!1;t>=p.length&&(o=!0,t=0),t<0&&(o=!0,t=p.length-1),C.frame=t,l&&(C.speed<0?n.scaleX=-C.scaleX:n.scaleX=C.scaleX),s&&(C.speed<0?n.scaleY=-C.scaleY:n.scaleY=C.scaleY),o&&C.dispatchEvent("loop"),C.dispatchEvent("change"),i&&n.stage&&n.stage.update(),zot(w)||w!=C.frame||(k=!1,C.speed=0,C.paused=!0,C.dispatchEvent("pause"))}}(),this.paused=!1,this.pause=function(e,t,o){if(zot(e)&&(e=!0),e!=C.paused)return zot(t)&&(t=0),e?(m=C.speed,zot(o)?0<t?(k=!0,go.animate({target:C,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){k=!1,C.speed=0,C.paused=!0,C.dispatchEvent("pause")}})):(k=!1,C.speed=0,C.paused=!0,setTimeout(function(){C.dispatchEvent("pause")},10)):(k=!0,w=o)):(w=null,0<t?(k=!0,go.animate({target:C,obj:{pausingSpeed:m},ticker:!1,time:t,call:function(){k=!1,C.speed=m,C.paused=!1}})):(k=!1,C.speed=m,C.paused=!1)),C},Object.defineProperty(C,"frame",{get:function(){return f},set:function(e){f=Math.round(e)%p.length;var t=p[f];zot(t)||(n.frame=t.f)}}),Object.defineProperty(C,"percentSpeed",{get:function(){return 0==C.baseSpeed?NaN:k||C.paused?m/C.baseSpeed*100:C.speed/C.baseSpeed*100},set:function(e){k||C.paused?m=C.baseSpeed*e/100:C.speed=C.baseSpeed*e/100}}),Object.defineProperty(C,"pausingSpeed",{get:function(){return 0==C.baseSpeed?NaN:C.speed/C.baseSpeed*100},set:function(e){C.speed=C.baseSpeed*e/100}}),!1!==c&&qe(this,g),this.dispose=function(e,t,o){cancelAnimationFrame(z)}}}},go.extend(go.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),go.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var l=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var t;t=Array.isArray(e)?e:[e];for(var o=0;o<t.length;o++)l.items.indexOf(t[o])<0&&l.items.push(t[o]);return l},e&&this.add(e),this.remove=function(e){var t,o;t=Array.isArray(e)?e:[e];for(var n=0;n<t.length;n++)0<=(o=l.items.indexOf(t[n]))&&l.items.splice(o,1);return l},this.pause=function(t,e,o){if(zot(t)&&(t=!0),t!=l.paused){var n=[];if(t){zot(o)||(e=null);for(var r=!1,i=0;i<l.items.length;i++)(zot(e)||!zot(o)||l.items[i].totalFrames)&&(!l.items[i].totalFrames||zot(e)&&zot(o))||(l.items[i].pause(!0,e,o),r=!0,n[i]=1,l.items[i].on("pause",function(){l.paused||(a(!0),l.paused=!0,l.dispatchEvent("pause"))},null,!0));r||(a(),l.paused=!0,setTimeout(function(){l.dispatchEvent("pause")},10))}else l.paused=!1,a()}function a(){for(var e=0;e<l.items.length;e++)1!=n[e]&&l.items[e].pause(t)}},Object.defineProperty(l,"percentSpeed",{get:function(){return l._percentSpeed},set:function(e){l._percentSpeed=e;for(var t=0;t<l.items.length;t++)l.items[t].percentSpeed=e}}),this.dispose=function(e,t,o){for(var n=0;n<l.items.length;n++)l.items[n].dispose();return!0}},go.extend(go.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),go.Emitter=function(f,m,z,t,e,o,n,r,i,a,l,s,y,b,c,u,d,h,g,p,v,w,C,x,k,T,A,P,B,I,S,O,E,M){var j;if(j=zob(go.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",this))return j;z_d("69.9"),this.type="Emitter",this.group=E;var L=!1===O?{}:go.getStyle(this.type,this.group,M);zot(f)&&(f=null!=L.obj?L.obj:[new go.Circle(20,"#e472c4"),new go.Circle(20,"#acd241"),new go.Circle(20,"#50c4b7")]),zot(m)&&(m=null!=L.width?L.width:300),zot(z)&&(z=null!=L.height?L.height:300),zot(t)&&(t=null!=L.interval?L.interval:20),"number"==typeof t&&(t=Math.max(10,t)),zot(e)&&(e=null!=L.num?L.num:1),zot(l)&&(l=null!=L.trace&&l.size),zot(s)&&(s=null!=L.traceFadeTime?L.traceFadeTime:i),zot(y)&&(y=null!=L.traceShiftX?L.traceShiftX:0),zot(b)&&(b=null!=L.traceShiftY?L.traceShiftY:0),zot(o)&&(o=null!=L.life?L.life:1e3),zot(n)&&(n=null==L.fade||L.fade),zot(r)&&(r=null!=L.shrink?L.shrink:!l),zot(i)&&(i=null!=L.decayTime?L.decayTime:1e3),zot(c)&&(c=null!=L.angle?L.angle:{min:0,max:360}),zot(u)&&(u=null!=L.force?L.force:5),zot(d)&&(d=null!=L.gravity?L.gravity:9.8),zot(h)&&(h=null!=L.wind?L.wind:0),zot(g)&&(g=null!=L.layers?L.layers:"top"),zot(m)&&(m=null!=L.width?L.width:100),zot(z)&&(z=null!=L.height?L.height:100),zot(w)&&(w=null!=L.horizontal&&L.horizontal),zot(C)&&(C=null!=L.vertical&&L.vertical),zot(x)&&(x=null!=L.sink?L.sink:null),!zot(x)&&zot(k)&&(k=null!=L.sinkForce?L.sinkForce:10),zot(A)&&(A=null!=L.events&&L.events),zot(P)&&(P=null!=L.startPaused&&L.startPaused),zot(B)&&(B=null==L.pool||L.pool),zot(I)&&(I=null!=L.poolMin?L.poolMin:0),zot(S)&&(S=null!=L.particles?L.particles:new go.Container),zot(p)&&(p=null!=L.animation?L.animation:null),this.zimContainer_constructor(m,z,null,null,!1),this.type="Emitter";var D=this;this.regX=m/2,this.regY=z/2,D.obj=f,D.particles=S,D.interval=t,D.num=e,D.life=o,D.fade=n,D.shrink=r,D.decayTime=i,D.decayStart=a,D.trace=l,D.traceFadeTime=s,D.traceShiftX=y,D.traceShiftY=b,D.angle=c,D.emitterForce=u,D.gravity=d,D.wind=h,D.layers=g,D.animation=p,D.random=v,D.horizontal=w,D.vertical=C,D.sink=x,D.sinkForce=k,D.events=A,D.startEmitterPaused=P,D.pool=B,D.poolMin=I,D.particlesEmitted=0;var Y,X,R=[],_=0,F=0;function W(e){if(D.events&&H("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(H("spurtfizzed",e),D.spurting=!1),D.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,R.push(e)),void(e.visible=!1);D.removeChild(e),D.trace&&e.uncache(),e=null}function H(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,D.dispatchEvent(o)}function G(e){D.pauseEmitter(),D.spurtCount=D.spurtNum=null,H("spurted",e),e.endSpurt=!0}go.added(D,function(e){D.on("added",function(){D.particles.addTo(D.parent)}),X=e,zot(T)&&(T=!X.isWebGL&&go.mobile());T&&(X.snapToPixelEnabled=!0);if(X){var t=D.parent.getChildIndex(D);D.parent.addChildAt(S,t),w||C||D.centerReg(null,null,!1),D.zimInterval=go.interval(D.interval,function(){var g,p;D.startEmitterPaused?D.pauseEmitter():(f=Array.isArray(D.obj)?D.obj:[D.obj]).length<=0||(g=Array.isArray(D.interval)?(D.interval.sort(e),D.interval[0]):D.interval.constructor=={}.constructor?D.interval.min:D.interval,p=Array.isArray(D.num)?(D.num.sort(e),D.num[D.num.length-1]):D.num.constructor=={}.constructor?D.num.max:D.num,go.loop(go.Pick.choose(D.num),function(){if(0<D.decayTime){var e={};D.shrink&&(e.scale=0),D.fade&&(e.alpha=0)}if(D.pool&&0<R.length&&F>=Math.max(D.poolMin,(D.life/g+5)*p)){if((o=R[_++%R.length]).visible=!0,(r=o.trace?o.getChildAt(0):o).emitShape){var t=r.template;r.graphics.c().s(t.s?go.Pick.choose(t.s):null).ss(t.ss?go.Pick.choose(t.ss):null).sd(t.sd?go.Pick.choose(t.sd):null,t.offset?go.Pick.choose(t.offset):null)}o.trace&&o.updateCache(),"top"==D.layers?r.emitShape?o.addTo(S,null,!1):o.centerReg(S):r.emitShape?o.addTo(S,"bottom"==D.layers?0:go.rand(S.numChildren),!1):o.centerReg(S,"bottom"==D.layers?0:go.rand(S.numChildren)),o.alpha=1,o.scaleX=1,o.scaleY=1,r.alpha=r.originalAlpha,r.scaleX=r.originalScaleX,r.scaleY=r.originalScaleY,r.endSpurt=!1}else{var o;F++,D.trace&&((o=new go.Container(m,z,null,null,!1)).trace=!0);var n=go.Pick.choose(go.shuffle(f)[0]);if("shape"==n.type){t=n;(r=new go.Shape(1,1,null,null,null,!1)).emitShape=!0,r.template=t,r.graphics.s(t.s?go.Pick.choose(t.s):null).ss(t.ss?go.Pick.choose(t.ss):null).sd(t.sd?go.Pick.choose(t.sd):null,t.offset?go.Pick.choose(t.offset):null),D.trace?r.addTo(o,null,!1):"top"==D.layers?r.addTo(S,null,!1):r.addTo(S,"bottom"==D.layers?0:go.rand(S.numChildren),null,!1)}else{var r;(r=n.clone()).centerReg||zimify(r),D.trace?r.centerReg(o).pos({x:-1e3,y:-1e3,reg:!0}):"top"==D.layers?r.centerReg(S):r.centerReg(S,"bottom"==D.layers?0:go.rand(S.numChildren))}D.trace&&("top"==D.layers?o.addTo(S,null,!1):o.addTo(S,"bottom"==D.layers?0:go.rand(S.numChildren),!1),o.cache(y,b,m,z)),D.trace||(o=r),(o.particle=r).originalAlpha=r.alpha,r.originalScaleX=r.scaleX,r.originalScaleY=r.scaleY}D.currentParticle=r,D.particlesEmitted++,o.particleNormal=!0,o.particleDecaying=!1,o.particleFizzing=!1;var i=go.Pick.choose(D.angle),a=go.Pick.choose(D.emitterForce),l=a*Math.cos(i*Math.PI/180),s=a*Math.sin(i*Math.PI/180);r.info={position:{x:D.x,y:D.y},velocity:{x:l,y:s}},D.horizontal&&(r.info.position={x:D.x-D.regX+go.rand(0,m),y:D.y-D.regY+(D.vertical?z/2:0)}),D.vertical&&(r.info.position={x:D.x-D.regX+(D.horizontal?m/2:0),y:D.y-D.regY+go.rand(0,z)}),r.emitShape?r.graphics.mt(r.info.position.x,r.info.position.y):(r.x=r.info.position.x,r.y=r.info.position.y),D.random&&go.loop(D.random,function(e,t){val=go.Pick.choose(t),"scale"==e?r.sca(val):("x"==e?r.info.position.x=D.horizontal||D.vertical?val:val+m/2:"y"==e&&(r.info.position.y=D.horizontal||D.vertical?val:val+z/2),"x"!=e&&"y"!=e||!r.emitShape||r.graphics.mt(r.info.position.x,r.info.position.y),r[e]=val,r.emitShape&&(r.x=0,r.y=0))}),T&&!r.emitShape&&r.cache(r.getBounds().x-10,r.getBounds().y-10,r.getBounds().width+20,r.getBounds().height+20);var c,u=!r.emitShape&&D.shrink;if(0<D.decayTime&&(D.fade||u||D.trace&&0<D.traceFadeTime)){if(D.trace&&0<D.traceFadeTime&&o.animate({obj:{alpha:0},time:D.traceFadeTime,wait:D.life-D.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:W,override:!1,id:"decay"}),D.fade||u){var d={};D.fade&&(d.alpha=0),u&&(d.scaleX=0,d.scaleY=0),r.animate({obj:d,time:D.decayTime,wait:zot(D.decayStart)?D.life-D.decayTime:D.decayStart,waitedCall:function(e){e.parent!=D&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(e){var t;D.events&&H("decayed",e),e.endSpurt&&H("spurtdecayed",e),D.trace&&0<D.traceFadeTime||(zot(D.decayStart)||D.decayStart+D.decayTime>D.life?e.parent&&W(e.parent.trace?e.parent:e):(t=o,go.timeout(D.life-(D.decayStart+D.decayTime),function(){W(t)})))},override:!1,id:"decay"})}}else 0<D.life&&((c=o).timeOut=go.timeout(D.life,function(){W(c)}));if(D.events&&H("emitted",o),function(e){if(zot(D.spurtCount)&&zot(D.spurtNum))return;D.spurtCount++,D.spurtCount>=D.spurtNum&&G(e)}(r),D.animation){var h=go.Pick.choose(D.animation);zot(h.override)&&(h.override=!1),r.animate(go.copy(h))}}));function e(e,t){return e-t}},null,!0,!0);Y=D.emitterTicker=go.Ticker.add(function(){go.loop(S,function(e){if(e.trace){var t=e;e=e.getChildAt(0)}var o=e.info,n=0,r=0;if(!zot(D.sink)){var i=D.particles.localToGlobal(o.position.x,o.position.y);if(D.sink.parent&&D.sink.parent.localToGlobal)var a=D.sink.parent.localToGlobal(D.sink.x,D.sink.y);else a=new createjs.Point(go.Pick.choose(D.sink.x),go.Pick.choose(D.sink.y));var l=go.angle(i.x,i.y,a.x,a.y);n=D.sinkForce*Math.cos(l*Math.PI/180),r=D.sinkForce*Math.sin(l*Math.PI/180)}var s=D.wind+n,c=D.gravity+r;o.velocity.x+=s*frameRate,o.velocity.y+=c*frameRate,o.position.x+=o.velocity.x*frameRate*100,o.position.y+=o.velocity.y*frameRate*100,e.emitShape?e.graphics.lt(o.position.x,o.position.y):(e.x=o.position.x,e.y=o.position.y),D.trace&&t&&t.updateCache(e.emitShape?null:"source-over")})},X),frameRate=1/go.Ticker.framerate}}),Object.defineProperty(D,"interval",{get:function(){return t},set:function(e){t=e,D.zimInterval&&(D.zimInterval.time=t)}}),this.removeFrom=function(e){D.parent&&D.parent.removeChild(D),D.particles.removeFrom()},this.spurting=!1,this.spurt=function(e,t,o){var n;return(n=zob(D.spurt,arguments,"num, time, restart"))?n:(zot(t)||(go.timeout(go.Pick.choose(t),function(){G(D.currentParticle)}),D.spurting=!0),zot(e)||(D.spurtNum=go.Pick.choose(e),D.spurtCount=0,D.spurting=!0),D.pauseEmitter(!1,o,null,!0),D)},this.clearPool=function(){go.loop(D,function(e){e.pooled="end",e.visible||D.removeChild(e)},!0),_=F=0,R=[]},D.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(e,t,o,n){if(D.startEmitterPaused=null,zot(e)&&(e=!0),zot(t)&&(t=!1),zot(o)&&(o=!1),e){if(D.emitterPaused)return D;o&&(Y&&go.Ticker.remove(Y),go.loop(D,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),D.zimInterval.pause(),D.emitterPaused=!0}else{if(!D.emitterPaused)return D;t&&(go.loop(D,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),D.removeAllChildren()),X&&Y&&!go.Ticker.has(X,Y)&&(go.Ticker.add(Y,X),go.loop(D,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),D.zimInterval.pause(!1,n),D.emitterPaused=!1}return D},!(this.resize=function(e,t){zot(e)||(m=e),zot(t)||(z=t),D.setBounds(0,0,m,z),w||C||D.centerReg(),D.clearPool()})!==O&&qe(this,L),this.clone=function(e){var t;return t=Array.isArray(D.obj)||D.obj.constructor=={}.constructor?go.copy(D.obj):D.obj.clone?D.obj.clone(e):D.obj,D.cloneProps(new go.Emitter(t,m,z,D.interval,D.num,D.life,D.fade,D.shrink,D.decayTime,D.decayStart,D.trace,D.traceFadeTime,D.traceShiftX,D.traceShiftY,D.angle,D.emitterForce,D.gravity,D.wind,D.layers,D.animation,go.copy(D.random),D.horizontal,D.vertical,D.sink,D.sinkForce,T,D.events,P,D.pool,D.poolMin))},this.dispose=function(e,t,o){return Y&&go.Ticker.remove(Y),go.loop(D,function(e){e.stopAnimate()}),D.zimInterval&&D.zimInterval.clear(),!0}},go.extend(go.Emitter,go.Container,"clone","zimContainer",!1),go.Pen=function(f,m,z,t,y,b,v,w,C,o,r,e,i,a,n,l,s,c,u,d,h,g,p,x,k){var T;if(T=zob(go.Pen,arguments,"size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, draggable, onTop, deleteable, doubleClickDelete, immediateStop, lineAlpha, lineBlendMode, style, group, inherit",this))return T;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=x;var A=!1===p?{}:go.getStyle(this.type,this.group,k);zot(z)&&(z=null!=A.penType?A.penType:"line");var P={size:2,color:"#333",spread:{min:5,max:20},borderColor:"#111",borderWidth:0},B={line:{size:2},kitetail:{size:{min:5,max:20},color:go.series(go.pink,go.blue,go.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:"#acd241",size:3,spread:{min:10,max:30}},hair:{color:["#e472c4","#50c4b7"],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:["#333","#111","#555"]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(B[z])&&(z="line"),zot(f)&&(f=null!=A.size?A.size:zot(B[z].size)?P.size:B[z].size),zot(m)&&(m=null!=A.color?A.color:zot(B[z].color)?P.color:B[z].color),zot(t)&&(t=null!=A.damp?A.damp:.1),!1===t&&(t=1),zot(y)&&(y=null!=A.spread?A.spread:zot(B[z].spread)?P.spread:B[z].spread),zot(b)&&(b=null!=A.borderColor?A.borderColor:zot(B[z].borderColor)?P.borderColor:B[z].borderColor),zot(v)&&(v=null!=A.borderWidth?A.borderWidth:zot(B[z].borderWidth)?P.borderWidth:B[z].borderWidth),zot(w)&&(w=null!=A.end?A.end:"butt"),zot(i)&&(i=null!=A.cropScale?A.cropScale:1),zot(r)&&(r=null==A.cache||A.cache),zot(a)&&(a=null!=A.undo?A.undo:0),zot(n)&&(n=null==A.undoKeys||A.undoKeys),zot(l)&&(l=null==A.draggable||A.draggable),zot(c)&&(c=null==A.deleteable||A.deleteable),zot(u)&&(u=null==A.doubleClickDelete||A.doubleClickDelete),zot(s)&&(s=null==A.onTop||A.onTop),zot(d)&&(d=null!=A.immediateStop?A.immediateStop:"both"),zot(h)&&(h=null!=A.lineAlpha?A.lineAlpha:1),zot(g)&&(g=null!=A.lineBlendMode?A.lineBlendMode:"normal"),zot(C)&&(C=null!=A.paper?A.paper:new go.Container),zot(o)&&(o=null!=A.nib?A.nib.clone():null);var I=this;this.dampX=new go.Damp(null,t),this.dampY=new go.Damp(null,t);var S=!0;this.drawing=!1,this.immediateStop=d,this.undoLevels=a,this.undoKeys=n,this.draggable=l,this.lineAlpha=h,this.lineBlendMode=g;var O,E,M,j,L=new go.Shape,D=zimDefaultFrame?zimDefaultFrame.stage.width:1024,Y=zimDefaultFrame?zimDefaultFrame.stage.height:768;I.paperNum=0,I.sizeScale=1,I.spreadScale=1,I.sizeFactor=1,I.spreadFactor=1,I.stop=function(){},L.addTo(C),this.added(function(){if(I.paper=C,!zot(o))if(I.zimDown)I.nib=o.addTo(I);else{function t(e){I.drawing&&(I.nib.x=e.stageX/go.scaX,I.nib.y=e.stageY/go.scaY)}I.nib=o.addTo(I.parent,I.parent.getChildIndex(I)),I.nib.x=I.x,I.nib.y=I.y,I.nib.mouseEnabled=!1,I.stage.on("stagemousedown",function(e){e.target.stage,I.nibEvent=I.stage.on("stagemousemove",t)}),I.stage.on("stagemouseup",function(e){I.stage.off("stagemousemove",I.nibEvent)})}I.zimDragCheck=!1,I.stop=function(){I.stopCheck(!0)},I.infinite=!1,I.stopCheck=function(e){if(e)I.drawing=!1,I.infinite=!1;else{if(I.infinite)return;if(I.zimDragCheck)return;if(!I.immediateStop&&I.drawing)return}I.immediate(I.x,I.y),setTimeout(function(){if(!I.drawing){if(r){L.cache(-(D*i-D)/2,-(Y*i-Y)/2,D*i,Y*i);var e=C.bitmap=new go.Bitmap(L.cacheCanvas).reg((D*i-D)/2,(Y*i-Y)/2).addTo(C);L.graphics.clear(),L.uncache(),L.top()}else e=L;if(0<I.undoLevels){var t={paper:C,line:e};a.push(t),a.length>I.undoLevels&&a.unshift(),I.dispatchEvent("recordUndo")}r||(L=(new go.Shape).clone().addTo(C)),I.lastSegment=e,(I.lastSelected=e).alpha=I.lineAlpha,e.blendMode=I.lineBlendMode,e.paper=C,I.dispatchEvent("stop"),I.dispatchEvent("change")}},I.immediateStop||e?0:50)};var p=0;I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.x,I.lastY=I.y,I.ticker=go.Ticker.add(function(){var e=I.dampX.convert(S?I.x:I.finishX),t=I.dampY.convert(S?I.y:I.finishY),o=I.parent.localToLocal(e,t,L),n=go.Pick.choose(f)*I.sizeScale*I.sizeFactor,r=go.Pick.choose(y)*I.spreadScale*I.spreadFactor;if(Math.abs(I.lastX-e)+Math.abs(I.lastY-t)<1)return I.drawing&&(I.drawing=!1,I.zimDown?(I.x=I.lastX=S?I.x:I.finishX,I.y=I.lastY=S?I.y:I.finishY,I.dampX.immediate(I.x),I.dampY.immediate(I.y)):(I.x=I.finishX=I.lastX=e,I.y=I.finishY=I.lastY=t),I.stopCheck()),I.lastX=e,void(I.lastY=t);if(I.drawing||(X=[],C.getChildIndex(L)!=C.numChildren-1&&L.top()),I.drawing=!0,I.dispatchEvent("drawing"),"splatter"==z)for(var i=0;i<=3;i++){var a=go.rand(360)*Math.PI/180,l=r,s={x:e+l*Math.cos(a),y:t+l*Math.sin(a)},c=I.parent.localToLocal(s.x,s.y,L);L.graphics.mt(c.x,c.y).f(go.Pick.choose(m)).dc(c.x,c.y,n/2)}else if("grass"==z||"hair"==z||"city"==z){if("grass"==z||"hair"==z){var u=I.lastX+(e-I.lastX)/2,d=I.lastY+(t-I.lastY)/2,h=I.parent.localToLocal(u,d,L);L.graphics.s(go.Pick.choose(m)).ss(n,w).mt(h.x,h.y).lt(h.x+rand(-r/4,r/4),"hair"==z?h.y+r:h.y-r)}("grass"==z||"hair"==z||"city"==z&&p%3==0)&&L.graphics.s(go.Pick.choose(m)).ss(n,w).mt(o.x,o.y).lt(o.x+("city"==z?0:rand(-r/4,r/4)),"hair"==z?h.y+r:o.y-r),p++}else{if("kitetail"==z&&L.graphics.s(go.Pick.choose(m)).ss(n,w),"barbwire"==z){L.graphics.s(go.Pick.choose(m)).ss(n,w);u=I.lastX+(e-I.lastX)/2+rand(-r,r),d=I.lastY+(t-I.lastY)/2+rand(-r,r)}else u=I.lastX+(e-I.lastX)/2,d=I.lastY+(t-I.lastY)/2;h=I.parent.localToLocal(u,d,L);L.graphics.qt(h.x,h.y,o.x,o.y)}var g=I.parent.localToLocal(I.lastX,I.lastY,L);if(0<v&&"line"!=z){u=I.lastX+(e-I.lastX)/2,d=I.lastY+(t-I.lastY)/2,h=I.parent.localToLocal(u,d,L);L.graphics.s(go.Pick.choose(b)).ss(go.Pick.choose(v)).mt(g.x,g.y).qt(h.x,h.y,o.x,o.y),"splatter"==z&&L.graphics.es()}"splatter"==z?L.graphics.f(go.Pick.choose(m)):"kitetail"==z||L.graphics.s(go.Pick.choose(m)).ss(n,w),"grass"!=z&&"hair"!=z&&"city"!=z&&"splatter"!=z&&L.graphics.mt(g.x,g.y).qt(h.x,h.y,o.x,o.y),I.lastX=e,I.lastY=t}),I.stage.on("stagemouseup",function(){0})}),I.mouseChildren=!1;a=[];var X=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:I.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),a.push(r),I.dispatchEvent("recordUndo"),a.length>I.undoLevels&&a.unshift()};var R,_,F={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};function W(e,t){for(var o,n=a.length-1;0<=n;n--)if(a[n][e]==t&&a[n][e+"Transform"]){o=a[n][e+"Transform"];break}o=o||go.copy(F),t.x=o.x,t.y=o.y,t.alpha=o.a,t.rotation=o.r,t.regX=o.rX,t.regY=o.rY,t.scaleX=o.sX,t.scaleY=o.sY,t.skewX=o.skX,t.skewY=o.skY,t.visible=o.v,"line"==e&&r&&(t.regX=(D*i-D)/2,t.regY=(Y*i-Y)/2)}this.undo=function(){var e=a.pop();if(e){if(X.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(L)}else e.line&&e.lineTransform?(zot(e.startLayer)||(L.top(),e.paper.setChildIndex(e.line,M)),W("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&W("paper",e.paper);I.lastPaper=I.paper,e.paper!=I.paper&&(I.paper=e.paper,I.dispatchEvent("paperChange")),I.dispatchEvent("change"),!OPTIMIZE&&I.stage&&I.stage.update()}},this.redo=function(){var e=X.pop();if(e){if(a.push(e),e.clear)e.paper.removeAllChildren(),e.paper.addChild(L);else if(e.line&&e.lineTransform){zot(e.endLayer)||(L.top(),e.paper.setChildIndex(e.line,j));var t=e.lineTransform,o=e.line}else if(e.line)e.line.addTo(e.paper);else if(e.paperTransform)t=e.paperTransform,o=e.paper;o&&(o.x=t.x,o.y=t.y,o.alpha=t.a,o.rotation=t.r,o.regX=t.rX,o.regY=t.rY,o.scaleX=t.sX,o.scaleY=t.sY,o.skewX=t.skX,o.skewY=t.skY,o.visible=t.v),I.lastPaper=I.paper,e.paper!=I.paper&&(I.paper=e.paper,I.dispatchEvent("paperChange")),I.dispatchEvent("change"),!OPTIMIZE&&I.stage&&I.stage.update()}},I.ctrlKey=!1,I.shiftKey=!1,I.ctrlKeyCheck=!1,I.zimkeydownEvent=window.addEventListener("keydown",function(e){I.ctrlKey=e.ctrlKey,I.shiftKey=e.shiftKey,17==e.keyCode&&l&&!I.ctrlKeyCheck&&(I.ctrlKeyCheck=!0,C.noDrag(),C.drag({onTop:s,all:!0})),I.undoLevels<=0||I.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?I.redo():e.ctrlKey&&90==e.keyCode&&I.undo())}),I.zimkeyupEvent=window.addEventListener("keyup",function(e){17==e.keyCode&&l&&I.ctrlKeyCheck&&(I.ctrlKeyCheck=!1,C.noDrag(),C.drag({onTop:s})),e.ctrlKey||(I.ctrlKey=!1),e.shiftKey||(I.shiftKey=!1)}),Object.defineProperty(this,"paper",{get:function(){return C},set:function(e){"Container"==e.type&&(C=e,L.addTo(C,0,!1),C.shape=L,I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.finishX=I.x,I.lastY=I.finishY=I.y,"barbwire"==z&&L.graphics.s(go.Pick.choose(m)).ss(go.Pick.choose(f)*I.sizeScale*I.sizeFactor,w),L.graphics.mt(I.x,I.y),C.parent||C.addTo(I.parent,I.parent.getChildIndex(I)),zot(C.paperNum)&&(C.paperNum=++I.paperNum,c&&C.on("mousedown",function(e){I.lastSelected=e.target,I.nibEvent&&I.stage.off("stagemousemove",I.nibEvent);var t=e.target.paper;t&&(t!=I.paper&&(I.paper=t,I.dispatchEvent("paperChange")),I.shiftKey&&(I.ctrlKey?I.clear():(e.target.visible=!1,0<I.undoLevels&&I.saveState(e.target),I.dispatchEvent("change"))))}),u&&C.on("dblclick",function(e){e.target.visible=!1,0<I.undoLevels&&I.saveState(e.target)}),l&&(C.on("mousedown",function(e){stage=e.target.stage,I.shiftKey&&c||(O=e.stageX/go.scaX,E=e.stageY/go.scaY,L.top(),M=C.getChildIndex(e.target))}),C.drag({onTop:s}),C.on("pressup",function(e){c&&I.shiftKey||0!=e.target.visible&&(I.undoLevels<=0||(Math.abs(e.stageX/go.scaX-O)<1&&Math.abs(e.stageY/go.scaY-E)<1?s&&(L.top(),j=C.getChildIndex(e.target),M!=j&&I.saveState(e.target,M,j)):(I.ctrlKey?(I.saveState(C),I.dispatchEvent("paperChange")):(L.top(),j=C.getChildIndex(e.target),I.saveState(e.target,M,j)),I.dispatchEvent("change"),L.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return S},set:function(e){S&&!1===e&&(I.finishX=I.x,I.finishY=I.y),!S&&e&&(L.graphics.es(),L.graphics.ef(),I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.x,I.lastY=I.y),S=e}}),Object.defineProperty(this,"size",{get:function(){return f},set:function(e){L.graphics.es(),L.graphics.ef(),f=e,"splatter"!=z&&L.graphics.ss(go.Pick.choose(f)*I.sizeScale*I.sizeFactor,w)}}),Object.defineProperty(this,"color",{get:function(){return m},set:function(e){m=e,L.graphics.es(),L.graphics.ef(),"splatter"!=z&&L.graphics.s(go.Pick.choose(m))}}),Object.defineProperty(this,"penType",{get:function(){return z},set:function(e){z=e,L.graphics.ef().es(),"splatter"!=z?L.graphics.s(go.Pick.choose(m)):L.graphics.s(go.Pick.choose(m)).ss(go.Pick.choose(f)*I.sizeScale*I.sizeFactor,w)}}),Object.defineProperty(this,"damp",{get:function(){return t},set:function(e){t=e,I.dampX.damp=t,I.dampY.damp=t}}),Object.defineProperty(this,"spread",{get:function(){return y},set:function(e){y=e}}),this.setColorRange=function(e,t){return _=zot(t)?(R=I.color,e):(R=zot(e)?I.color:e,t),I};var H=0;Object.defineProperty(I,"colorRange",{get:function(){return H},set:function(e){H=e,zot(R)||zot(_)||(I.color=go.colorRange(R,_,e))}}),Object.defineProperty(this,"borderColor",{get:function(){return b},set:function(e){b=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return v},set:function(e){v=e}}),zimDefaultFrame&&(zimDefaultFrame.on("keydown",function(){frame.ctrlKey&&I.write&&(I.lastWrite=I.write,I.write=!1)}),zimDefaultFrame.on("keyup",function(){frame.ctrlKey||0!=I.write||(I.write=I.lastWrite)})),I.setPen=function(e){I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.finishX=I.x,I.lastY=I.finishY=I.y,zot(e)&&(e=z),zot(B[e])&&(e="line"),I.penType=z=e;var t=go.merge(P,B[e]);for(var o in t)I[o]!=t[o]&&(I[o]=t[o]);return I},I.immediate=function(e,t){return zot(e)||(I.x=e,I.dampX.immediate(I.x),I.lastX=I.finishX=I.x),zot(t)||(I.y=t,I.dampY.immediate(I.y),I.lastY=I.finishY=I.y),I},I.clear=function(){for(var e=[],t=0;t<C.numChildren-1;t++)e.push(C.getChildAt(t));return a.push({paper:C,clear:e}),a.length>I.undoLevels&&a.unshift(),I.dispatchEvent("recordUndo"),C.removeAllChildren(),L.graphics.clear(),C.addChild(L),I.dispatchEvent("change"),I.stage&&I.stage.update(),I},this.delete=function(e){C.getChildAt(e).visible=!1,0<I.undoLevels&&I.saveState(C.getChildAt(e))},this.deleteSegment=function(e){e.visible=!1,0<I.undoLevels&&I.saveState(e)},!(I.dispose=function(e){return zot(e)?(window.removeEventListener("keydown",I.zimkeydownEvent),window.removeEventListener("keyup",I.zimkeyupEvent),Ticker.remove(I.ticker),I.removeAllEventListeners(),L.graphics.clear(),r?I.bitmap&&I.bitmap.removeFrom():L.removeFrom(),o&&o.removeFrom(),!0):(e.removeAllEventListeners(),e.shape.graphics.clear(),void(r?e.bitmap.removeFrom():e.shape.removeFrom()))})!==p&&qe(this,A)},go.extend(go.Pen,go.Container,"clone","zimContainer",!1),go.SoundWave=function(e,i,a,t,o,n,l,r,s,c){var u;if(u=zob(go.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce",this))return u;z_d("69.95"),this.type="SoundWave",zot(e)&&(e=120),zot(i)&&(i="mic"),zot(a)&&(a=.1171875),zot(t)&&(t=.85),zot(o)&&(o="mic"==i?-80:-100),zot(n)&&(n="mic"==i?-40:-10),zot(l)&&(l=function(e,t){return e*(.5+t/Math.pow(go.SoundWave.bufferLength,.95))}),zot(r)&&(r="mic"==i?0:30),zot(s)&&(s="mic"==i?1:10),zot(c)&&(c=0),go.SoundWave.bufferLength=1024,_num=e;var d=this;d.baseline=r,d.magnify=s,d.reduce=c;var h=new(window.AudioContext||window.webkitAudioContext),g=d.analyser=h.createAnalyser();if(g.minDecibels=o,g.maxDecibels=n,g.smoothingTimeConstant=t,Object.defineProperty(this,"smoothing",{get:function(){return g.smoothingTimeConstant},set:function(e){g.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return _num},set:function(e){_num=e,(m=Math.floor(a*go.SoundWave.bufferLength/_num))<1&&zog("ZIM SoundWave: num is too big")}}),"mic"==i)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){z(d.source=h.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(i.type&&"sound"==i.type)zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");else{if(i.playbackResource)var p=i.playbackResource,f=h.createMediaElementSource(p);else p=i,f=h.createMediaElementSource(p);var m;z(f)}function z(e){if(e.connect(g),"mic"!=i&&g.connect(h.destination),g.fftSize=2*go.SoundWave.bufferLength,(m=Math.floor(a*go.SoundWave.bufferLength/_num))<1)zog("ZIM SoundWave: include param is too small or num param is too big");else{var t=g.frequencyBinCount,r=new Uint8Array(t);d.calculate=function(){g.getByteFrequencyData(r);var e=r.map(l);if(1==m)return e;for(var t=[],o=0,n=0;n<=a*go.SoundWave.bufferLength;n++)o+=e[n],0!=n&&n%m==0&&(t.push(Math.max(0,(o/m-d.baseline)*d.magnify-d.reduce)),o=0);return"mic"!=i&&(t[0]*=.75,t[1]*=.85,t[2]*=.9,t[t.length-2]*=.8,t[t.length-1]*=.75),t[t.length-1]*=1.3,t[t.length-2]*=1.2,t[t.length-3]*=1.1,t},setTimeout(function(){d.dispatchEvent("ready")},50)}}},go.extend(go.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.VR=function(o,n,r,i,a,e,l,t,s,c,u,d){var h;if(h=zob(go.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return h;if(z_d("69.98"),this.type="VR",zimDefaultFrame){var g=zimDefaultFrame;if(zot(d)||!d.getBounds||!d.getBounds().width)d=g.stage;zot(n)&&(n=0),zot(r)&&(r=100),zot(e)&&(e=.5),zot(i)&&(i=0),zot(a)&&(a=60),zot(l)&&(l=.1),zot(t)&&(t=0),zot(s)&&(s=!1),zot(c)&&(c=!0),zot(u)&&(u=!0),this.angle=n,this.currentAngle=t,go.mobile()&&(u=!1);var p=this,f=d.width,m=d.height;p.zimContainer_constructor();var z=p.left=new go.Container(f/2,m,null,null,!1),y=new go.Rectangle(f/2,m,"rgba(0,0,0,.01)",null,null,null,null,null,!1);z.addChild(y);var b=p.right=z.clone();p.addChild(z,b),b.x=f/2;var v=p.contentLeft=p.content=o,w=p.contentRight=o.clone();if(0!=t)var C=setTimeout(N,100);else N();var x=[],k=[];if(V(v,w),q(x,"left"),q(k,"right"),0!=n&&0!=r){var T=new go.Damp(180+t,e);T.immediate(180+t);var A=!1,P=!1;function B(e){p.currentAngle=e;var t=-p.currentAngle*r/n;if(p.contentLeft.x=t,p.contentRight.x=t,Math.round(p.currentAngle)<=-n/2&&!A)(o=new createjs.Event("boundaryout")).boundary="left",A=!0,p.dispatchEvent(o);else if(Math.round(p.currentAngle)>=n/2&&!P){(o=new createjs.Event("boundaryout")).boundary="right",P=!0,p.dispatchEvent(o)}else if(Math.round(p.currentAngle)>-n/2&&Math.round(p.currentAngle)<n/2){var o=new createjs.Event("boundaryin");A?(o.boundary="left",p.dispatchEvent(o),A=!1):P&&(o.boundary="right",p.dispatchEvent(o),P=!1)}}function I(e){var t=e.parent.localToLocal(e.vrStartX,0,d),o=e.vrParallaxDamp.convert("left"==e.vrChannel?p.contentLeft.x+t.x-f/4:p.contentRight.x+t.x-f/2-f/4);e.depth<=0&&!s&&(o=0),e.vrParallaxDistance=Math.max(-r/n*a/2,Math.min(r/n*a/2,o)),e.dep(e.depth)}g.on("deviceorientation",function(e){B(T.convert((180<e.rotation.z?-180:180)+e.rotation.z+t)-180)}),go.Ticker.always()}if(0!=i&&0!=r){var S=new go.ProportionDamp(180-a/2,180+a/2,-a/2,a/2,l);if(S.immediate(180),0==n)function O(e,t){e.vrParallaxDistance=e.depth<=0&&!s?0:t,e.dep(e.depth)}function E(t){0!=n&&0!=r?(go.loop(x,I),go.loop(k,I)):(go.loop(x,function(e){O(e,t)}),go.loop(k,function(e){O(e,t)}))}g.on("deviceorientation",function(e){var t=0;0==n&&0!=i&&0!=r&&(t=S.convert((180<e.rotation.z?-180:180)+e.rotation.z)),E(t)}),go.Ticker.always()}!u||0==r||0==n&&0==i||p.added(function(){var e={swipeAngle:0};p.swiper=new go.Swiper({swipeOn:p,target:e,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330});Ticker.add(function(){0!=n&&0!=r&&B(e.swipeAngle),0!=i&&0!=r&&E(S.convert(e.swipeAngle+180))})});var M=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,j=M,L=!1;v.startRegX=v.regX,w.startRegX=w.regX;var D=this.adjuster=new go.Container(800,300,null,null,!1),Y=(y=D.backing=new go.Rectangle(D.width,D.height,go.lighter,null,null,null,null,null,!1).center(D).alp(1).sha("rgba(0,0,0,.2)",0,0,30),D.strip=new go.Rectangle(D.width,D.height/3,go.white,null,null,null,null,null,!1).center(D).alp(1),D.label=new go.Label({text:"slide to adjust center of left and right",size:28,color:go.dark,align:"center",valign:"center"}).center(D).pos({y:50,reg:!0}),D.close=new go.Rectangle(50,50,go.light,null,null,null,null,null,!1).addTo(D).mov(D.width-70,26)),X=new go.Shape(-40,-40,80,80,null,!1);X.graphics.f(go.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),X.center(Y).sca(.3),Y.cursor="pointer",Y.on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){p.hideAdjuster(),F.currentValue=(F.max-F.min)/2+j,p.dispatchEvent("closed")});var R=new go.Circle(30,go.dark,null,null,null,null,null,null,!1).center(D).pos({x:D.width/4,reg:!0});R.shape.alpha=.2,new go.Circle(12,go.dark,null,null,null,null,null,!1).center(R);var _=new go.Circle(30,go.dark,null,null,null,null,null,!1).center(D).pos({x:D.width/4*3,reg:!0});_.shape.alpha=.2,new go.Circle(12,go.dark,null,null,null,null,null,null,!1).center(_);var F=D.slider=new go.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(D).pos({y:D.height-40,reg:!0});F.currentValue=(F.max-F.min)/2+M;var W=new go.Proportion(F.min,F.max,R.x-D.width/4,R.x+D.width/4,-1),H=new go.Proportion(F.min,F.max,_.x-D.width/4,_.x+D.width/4);F.on("change",function(){R.x=W.convert(F.currentValue),_.x=H.convert(F.currentValue)}),new go.Label("closer",24,null,go.silver).centerReg(D).pos({x:F.x-220,y:F.y,reg:!0}),new go.Label("farther",24,null,go.silver).centerReg(D).pos({x:F.x+220,y:F.y,reg:!0}),(p.ok=new go.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:go.blue,rollBackgroundColor:go.green,shadowColor:-1,style:!1}).centerReg(D).sca(.8).pos({x:D.width-58,y:F.y,reg:!0})).on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=F.currentValue-(F.max-F.min)/2),U(),p.hideAdjuster(),p.dispatchEvent("saved"),p.dispatchEvent("closed")}),(p.zero=new go.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:go.yellow,rollBackgroundColor:go.green,shadowColor:-1,style:!1}).centerReg(D).sca(.8).pos({x:58,y:F.y,reg:!0})).on((zns?"mousedown"==go.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){F.currentValue=(F.max-F.min)/2,R.x=W.convert(F.currentValue),_.x=H.convert(F.currentValue)});var G=new go.Proportion(0,30,-d.width/4,d.width/4);U(),this.showAdjuster=function(){if(L)return p;L=!0,R.x=W.convert(F.currentValue),_.x=H.convert(F.currentValue),j=F.currentValue-(F.max-F.min)/2,D.scaleTo(d).center(this),d.stage.update()},this.hideAdjuster=function(){if(!L)return p;L=!1,D.removeFrom(this),d.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zog("ZIM VR() - please only register objects already inside content container"),e;var t=e.clone().addTo(e.parent.vrMatch),o=[],n=[];return V(e,t,o,n),q(o,"left"),q(n,"right"),e},0!=n&&0!=r&&c&&(p.boundaryRight=new go.Container({style:!1}),new go.Circle(24,go.light,null,null,null,null,null,null,!1).addTo(p.boundaryRight).dep(-2),new go.Triangle(16,16,16,go.yellow,go.grey,null,null,-3,null,null,!1).rot(-90).center(p.boundaryRight).dep(-6),p.boundaryRight.center(o).mov(r/2+24),p.boundaryLeft=new go.Container({style:!1}),new go.Circle(24,go.light,null,null,null,null,null,null,!1).addTo(p.boundaryLeft).dep(-2),new go.Triangle(16,16,16,go.yellow,go.grey,null,null,-3,null,null,!1).rot(90).center(p.boundaryLeft).dep(-6),p.boundaryLeft.center(o).mov(-r/2-24),p.register(p.boundaryRight),p.register(p.boundaryLeft)),this.remove=function(e){return go.loop(arguments,function(e,t){o.contains(t)&&(!function t(e){var o=x.indexOf(e);0<=x.indexOf(e)&&(x.splice(o,1),k.splice(o,1)),go.loop(e,function(e){t(e)})}(t),t.parent.removeChild(t),t.vrMatch.parent.removeChild(t.vrMatch))}),p},this.resize=function(){f=d.width,m=d.height,z.getChildAt(0).widthOnly=b.getChildAt(0).widthOnly=f/2,z.getChildAt(0).heightOnly=b.getChildAt(0).heightOnly=m,b.x=f/2,z.setBounds(0,0,f/2,m),b.setBounds(0,0,f/2,m),0!=t?(clearTimeout(C),C=setTimeout(N,100)):N(),D.scaleTo(d).center(this,null,!1)}}else zon&&zogy("VR() - please use ZIM Frame");function N(){v.addTo(z,null,!1).setMask(z.getChildAt(0)).pos({y:(d.height-v.height)/2,reg:!0}),w.addTo(b,null,!1).setMask(b.getChildAt(0)).pos({y:(d.height-v.height)/2,reg:!0})}function V(e,o,n,r){((e.vrMatch=o).vrMatch=e).cacheCanvas&&o.cache(),e.dep&&!zot(e.depth)&&(x.push(e),k.push(o),zot(n)||n.push(e),zot(r)||r.push(o),o.dep(e.depth)),go.loop(e,function(e,t){V(e,o.getChildAt(t),n,r)})}function q(e,t){go.loop(e,function(e){e.vrChannel=t,e.vrStartX=e.x,0!=n&&0!=r&&(e.vrAngle=n,e.vrDistance=r),0!=i&&0!=r&&(e.vrParallax=i/100,(e.vrParallaxDistance=0)!=n&&(e.vrParallaxDamp=new go.Damp(0,l))),e.dep(e.depth)})}function U(){var e=G.convert(F.currentValue);v.regX=v.startRegX+e,w.regX=w.startRegX-e}},go.extend(go.VR,go.Container,"clone","zimContainer",!1),go.scaX=1,go.scaY=1,go.Frame=function(m,z,o,i,n,r,a,l,e,t,y,b,v,w,s,c,u,C,d,h,g,x,p,f,k,T,A,P){var B;if(B=zob(go.Frame,arguments,"scaling, width, height, color, outerColor, assets, path, progress, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim",this))return B;z_d("83"),zon&&zogg("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var X=this;if(void 0!==zimDefaultFrame&&null!=zimDefaultFrame&&zimDefaultFrame.type||(zimDefaultFrame=this),zot(u)&&(u=!0),!!window.HTMLCanvasElement||!u){var I=go.mobile();zot(m)&&(m="full"),zot(e)&&(e=!I),zot(t)&&(t=!0),zot(y)&&(y=!1),zot(b)&&(b="center"),zot(v)&&(v="center");zot(w)&&(w=zimDefaultFrame!=this?"myCanvas"+go.makeID(5):"myCanvas"),zot(s)&&(s=20),zot(c)&&(c=I?1e3:30),zot(C)&&(C=!1),zot(x)&&(x=!1),zot(p)&&(p="circles"),this.loadFailObj=p,zot(f)&&(f=!1),zot(k)&&(k=!0),this.retina=k,zot(T)&&(T=!1),zot(A)&&(A=!0),zot(P)&&(P=!1);var S,O,E=["fit","outside","full"];if(P){this.shim=!0;var M,j=(P.stage.frame=this).canvas=P.canvas;this.scale=P.stage.scaleX,setTimeout(function(){Y(),window.addEventListener("resize",function(){Y(),M&&M.clear(),M=timeout(50,Y)})},20);var L=(R=P.stage).getBounds()?R.getBounds().width:j.width/R.scaleX,D=R.getBounds()?R.getBounds().height:j.height/R.scaleY;function Y(){X.scale=P.stage.scaleX;var e=j.getBoundingClientRect();X.x=e.x+go.scrollX(),X.y=e.y+go.scrollY(),go.scaX=createjs.stageTransformable?1:P.stage.scaleX,go.scaY=createjs.stageTransformable?1:P.stage.scaleY}R.getBounds()||R.setBounds(0,0,L,D),i=j.style.backgroundColor,ae(),Y()}else{var R;this.scale=1,this.x=0,this.y=0}var _,F,W,H=!1,G=!1,N=!1,V=!1;P||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){ne()},200):document.addEventListener("DOMContentLoaded",ne));var q,U,K=!1,Z="full"==m&&"undefined"!=typeof InstallTrigger;if(this.swapRotation=!1,I){var Q=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,J=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;this.swapRotation=(0==window.orientation||180==window.orientation)&&J<Q||90==Math.abs(window.orientation)&&Q<J}window.addEventListener("resize",oe),this.update=function(){se(),X.dispatchEvent("update")},this.loadAssets=function(e,l,t,o,n,r,i,a,s,c){if(!zot(e)){if(zot(e.src)){var u;if(u=zob(X.loadAssets,arguments,"assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly"))return u}if(!zot(t)&&"ProgressBar"==t.type&&zot(o)&&(o=!0),Array.isArray(e)||(e=[e]),0!=e.length){zot(n)&&(n=0),zot(r)&&(r=8e3),zot(i)&&(i=!1),zot(a)&&(a="anonymous"),zot(c)&&(c=!1);var d,h,g,p=!1,f=[],m=/\.([^.]+)$/i,z=[],y=[],b=0,v=!0;for(S=0;S<e.length;S++){if((d=e[S]).constructor=={}.constructor)if(d.audioSprite){L(d=(x=go.copy(d)).src);var w,C=[];for(g=0;g<x.audioSprite.length;g++)w=x.audioSprite[g],C.push({id:w[0],startTime:Math.round(1e3*w[1]),duration:Math.round(1e3*(w[2]-w[1]))});delete x.audioSprite,x.data={audioSprite:C},i&&zog(JSON.stringify(x)),f.push(x)}else if(d.data&&d.data.audioSprite){var x;L(d=(x=go.copy(d)).src),f.push(x)}else if(d.id){X.assetIDs[d.id]=d.src,L(d=d.src);var k={src:d,loadTimeout:r};zot(s)||(k.type=s),f.push(k)}else d.src.match(/fonts\.googleapis\.com/)?y.push(d):z.push(d);else{L(d);k={src:d,loadTimeout:r};zot(s)||(k.type=s),f.push(k)}if(p&&v){var T=document.createElement("audio");T.setAttribute("src",(zot(l)||d.match(/^http:\/\/|https:\/\//i)?"":l)+d),document.body.appendChild(T),v=!1}}X.loadAssetsCount++,X.isLoading=!0;var A=new go.Queue;if(A.isLoading=!0,A.loadAssetsCount=0,!zot(t)&&t.show&&(t.zimActiveLoader=A,t.show()),0<z.length){for(var P,B,I=[],S=0;S<z.length;S++)P={src:"url("+((B=z[S]).src.match(/^http/i)?"":l||"")+B.src+")"+(B.type?" format('"+B.type+"')":""),family:B.font},B.weight&&(P.weight=B.weight),B.style&&(P.style=B.style),I.push(P);(O=new createjs.FontLoader({src:I},!0)).on("complete",D),O.on("error",D),O.load(),A.loadAssetsCount++}if(0<y.length){var O;for(S=0;S<y.length;S++)P={src:(B=y[S]).src,type:"fontcss"},A.loadAssetsCount++,(O=new createjs.FontLoader(P,!0)).on("complete",D),O.on("error",D),O.load()}var E=Date.now(),M=new createjs.Event("complete");if(0<b){A.loadAssetsCount++;var j=A.preload=X.preload=new createjs.LoadQueue(o,l,a);p&&j.installPlugin(createjs.Sound),j.on("progress",function(e){A.dispatchEvent(e),c||X.dispatchEvent(e)}),j.on("error",function(e){A.dispatchEvent(e),c||X.dispatchEvent(e)}),j.on("fileload",function(e){var t,o=e.item,n=e.item.type;o.id.match(m);if(n&&"sound"==n){var r=[];if(o.data&&o.data.audioSprite)for(var i=0;i<o.data.audioSprite.length;i++)r.push(o.data.audioSprite[i].id);else r.push(o.id);for(i=0;i<r.length;i++)!function(){var o=r[i];t=X.assets[r[i]]={type:"sound",path:l,id:o,play:function(e){e&&!0===e.loop&&(e.loop=-1),e&&e.loopCount&&(e.loop=e.loopCount);var t=createjs.Sound.play(o,e);return t.getStage=function(){return R},t}}}()}else"image"==n?e.result.width&&(t=X.assets[o.id]=new go.Bitmap(e.result,e.result.width,e.result.height,o.id)):t=X.assets[o.id]=e.result;var a=new createjs.Event("assetload");a.item=o,a.asset=t,A.dispatchEvent(a),c||X.dispatchEvent(a)}),X.preloadEvent=j.on("complete",function(e){M=e,A.loadAssetsCount--,0==A.loadAssetsCount&&Y()});try{j.loadManifest(f)}catch(e){}}return A}}function L(e){b++;var t=e.split("?");(h=t[0].match(m))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(h[1])&&(p=!0)}function D(){A.loadAssetsCount--,0==A.loadAssetsCount&&Y()}function Y(){var e=Date.now();n=Math.max(0,n-(e-E)),setTimeout(function(){X.loadAssetsCount--,X.loadAssetsCount<=0&&(X.isLoading=!1),A.isLoading=!1,A.dispatchEvent(M),c||X.dispatchEvent(M)},n)}},asset=this.asset=function(e){if(!zot(e)){var t=X.assetIDs[e];if(t&&(e=t),X.assets[e])return X.assets[e];if("circles"==X.loadFailObj)var o=X.makeCircles(14);else o=X.loadFailObj;return o&&(o.type="EmptyAsset",o.id=e,o.play=function(){if(zon)return zog("zim.Frame - asset("+e+") not found"),{}}),o}},this.setDefault=function(){return zimDefaultFrame=X},Object.defineProperty(X,"isDefault",{get:function(){return zimDefaultFrame==X},set:function(e){zog("zim.Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(X,"stage",{get:function(){return R},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(X,"width",{get:function(){return L},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(X,"height",{get:function(){return D},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(e){zot(i=e)?zid(w).style.backgroundColor="default":!zot(zid(w).style.backgroundColor=i)&&C&&R.setClearColor(go.convertColor(i))}}),Object.defineProperty(this,"outerColor",{get:function(){return U},set:function(e){U=e,zet("body").css({backgroundColor:U})}}),Object.defineProperty(X,"allowDefault",{get:function(){return x},set:function(e){e?(R.preventSelection=!1,document.body.style.overflow="visible",X.zil&&(window.removeEventListener("keydown",X.zil[0]),window.removeEventListener("wheel",X.zil[1]),window.removeEventListener("DOMMouseScroll",X.zil[2]),X.zil=null)):(R.preventSelection=!0,document.body.style.overflow="hidden",zot(X.zil)&&(X.zil=zil())),x=e}});var $=new createjs.Event("keydown");if(this.eventRemove=$.remove,window.addEventListener("keydown",de),window.addEventListener("keyup",he),window.addEventListener("wheel",ge),f&&window.DeviceMotionEvent&&window.addEventListener("devicemotion",pe),f&&window.DeviceOrientationEvent){var ee=0,te=0;window.addEventListener("deviceorientation",fe)}this.remakeCanvas=function(e,t){if("full"!=m){zot(e)&&(e=L),zot(t)&&(t=D),zid(w)&&zid(w).parentNode.removeChild(zid(w)),L=e,D=t;for(var o=[],n=0;n<X.stage.numChildren;n++)o.push(X.stage.getChildAt(n));ie(),le();for(n=0;n<o.length;n++)X.stage.addChild(o[n])}},this.follow=function(r,e,t,o,i,a,l,s,c,u,d,h,g,p){var n;if(n=zob(X.follow,arguments,"obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag"))return n;if(X.followObj=null,X.followTicker&&go.Ticker.remove(X.followTicker),!zot(r))return r.dirX=r.dirY=0,(X.followObj=r).followDampX=null,r.followDampY=null,zot(e)&&(e=new go.Boundary(0,0,X.stage.width,X.stage.height)),X.followBoundary=e,zot(t)&&(t=.05),zot(o)&&(o=t),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!1),zot(p)&&(p=!1),r.parent?f():r.on("added",f),r;function f(){var n=r.parent;X.frameBorderLock=g,d&&(X.followDampX=new go.Damp(n.x,t),X.offsetDampX=new go.Damp(e.x+i+(e.width-i-a)/2,c)),h&&(X.followDampY=new go.Damp(n.y,o),X.offsetDampY=new go.Damp(e.y+l+(e.height-l-s)/2,u)),X.followTicker=Ticker.add(function(){var e=X.followBoundary;if(d){var t=e.x+i+(e.width-i-a)/2;X.followOffsetX=[p?e.x+e.width-i:t,t,p?e.x+i:t],X.followObj&&(n.x=X.followDampX.convert(X.offsetDampX.convert(X.followOffsetX[r.motionController?r.motionController.dirX+1:1])-r.x))}if(h){var o=e.y+l+(e.height-l-s)/2;X.followOffsetY=[p?e.y+e.height-s:o,o,p?e.y+l:o],X.followObj&&(n.y=X.followDampY.convert(X.offsetDampY.convert(X.followOffsetY[r.motionController?r.motionController.dirY+1:1])-r.y))}X.frameBorderLock&&(n.x>X.followBoundary.x&&(n.x=X.followBoundary.x),n.y>X.followBoundary.y&&(n.y=X.followBoundary.y),n.x<X.followBoundary.x+X.followBoundary.width-n.width&&(n.x=X.followBoundary.x+X.followBoundary.width-n.width),n.y<X.followBoundary.y+X.followBoundary.height-n.height&&(n.y=X.followBoundary.y+X.followBoundary.height-n.height))})}},this.dispose=function(e,t,o){return X.zil&&X.zil.length&&(window.removeEventListener("keydown",X.zil[0]),window.removeEventListener("wheel",X.zil[1]),window.removeEventListener("DOMMouseScroll",X.zil[2])),window.removeEventListener("resize",oe),window.removeEventListener("keydown",de),window.removeEventListener("keyup",he),window.removeEventListener("wheel",ge),window.removeEventListener("devicemotion",pe),window.removeEventListener("deviceorientation",fe),x||(document.body.style.overflow="auto"),function e(t){if(t.dispose)t.dispose();else{if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}}(R),zid(w)&&zid(w).parentNode.removeChild(zid(w)),X==go.tickerFrame&&(go.tickerFrame=null),X===zimDefaultFrame&&(zimDefaultFrame=null),!(X=R=null)},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.black="#000000",this.darker="#111111",this.dark="#333333",this.grey="#555555",this.gray="#555555",this.tin="#777777",this.silver="#999999",this.fog="#aaaaaa",this.mist="#bbbbbb",this.light="#cccccc",this.moon="#dddddd",this.lighter="#eeeeee",this.white="#ffffff",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(e,t){zot(e)&&(e=100);var o=[X.orange,X.green,X.pink,X.blue,X.brown,X.dark];if(t){(r=new go.Container({style:!1})).radius=e;for(var n=0;n<o.length;n++)r.addChild(new go.Circle(r.radius/o.length*(o.length-n),o[n],null,null,null,null,null,null,!1))}else{var r,i=(r=new go.Shape({style:!1})).graphics;r.radius=e;for(n=0;n<o.length;n++)i.f(o[n]).dc(0,0,r.radius/o.length*(o.length-n));r.setBounds(-r.radius,-r.radius,2*r.radius,2*r.radius)}return r},this.makeIcon=function(e,t,o,n,r){var i=new go.Container(-14,-13,90,120).reg(-14,-13);zot(e)&&(e=X.light),zot(t)&&(t=X.dark),!0===o&&(o=[X.silver,X.silver,X.silver,X.silver,X.silver]),new Rectangle(i.width,i.height,t,n,r).loc(-14,-13,i);var a=[[o?o[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[o?o[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[o?o[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[o?o[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[o?o[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[e,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return go.loop(a,function(e){var t=(new go.Shape).addTo(i);t.graphics.f(e[0]).p(e[1]),t.setTransform(e[2],e[3])}),i.mouseChildren=!1,i}}else setTimeout(function(){X.dispatchEvent("failed")},100);function oe(){if(P){var e=R.getBounds();return L=e.width,D=e.height,void X.dispatchEvent("resize")}q=Date.now()+c,Z?K||(K=!0,W=go.Ticker.update,go.tickerFrame||(go.Ticker.update=!1,go.tickerFrame=X),se(),ue(),clearInterval(X.frameTime),X.frameTime=setInterval(function(){if(Date.now()>q)return clearInterval(X.frameTime),K=!1,void(X==go.tickerFrame&&(go.Ticker.update=W));se(),ue()},50)):(se(),ue(),clearInterval(X.frameTime),X.frameTime=setInterval(function(){Date.now()>q?clearInterval(X.frameTime):(se(),ue())},c<50?c+5:50))}function ne(){if(!V){if(V=!0,-1==E.indexOf(m)){if(zot(zid(_=m)))return void zog("zim.Frame - scaling: HTML tag with id="+m+" must exist");F=this.tag=zid(_),m=zot(z)||zot(o)?"tag":"inline",0==w.indexOf("myCanvas")&&(w=_+"Canvas")}if(X.canvasID=w,zot(z)&&(z=500),zot(o)&&(o=500),L=z,D=o,zot(n)||(X.outerColor=n),ie(),le(),I){function e(){se(),G=!0,re(),ue(),R&&R.update()}y&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(e,100),100!=c&&setTimeout(e,c)}else G=!0,re();var t;if(X.loadAssetsCount=0,X.assets={},X.assetIDs={},zot(r))N=!0,re();else zot(t=r.constructor!={}.constructor||r.audioSprite||r.id||r.data||r.src?X.loadAssets({assets:r,path:a,progress:l,queueOnly:!0}):X.loadAssets(go.merge(r,{progress:l,queueOnly:!0})))||!t.on?(zon&&zogy("Frame() - load failed"),N=!0,re()):t.on("complete",function(){N=!0,re()})}}function re(){G&&N&&!H&&(!zot(l)&&l.show&&l.hide(),X.dispatchEvent("ready"),H=!0,ue())}function ie(){var e=X.canvas=document.createElement("canvas");e.setAttribute("id",w),e.setAttribute("tabindex",0);var t=go.windowWidth(),o=go.windowHeight(),n=window.devicePixelRatio||1;"full"==m||"tag"==m?k?(X.scale=n,e.setAttribute("width",t*X.scale),e.setAttribute("height",o*X.scale),"full"==m&&(e.style.width=t+"px",e.style.height=o+"px")):(e.setAttribute("width",t),e.setAttribute("height",o)):(e.setAttribute("width",L),e.setAttribute("height",D));var r=zid(w+"Alternative");r&&e.appendChild(r),"tag"==m||"inline"==m?F.appendChild(e):document.body.appendChild(e),zot(i)||(e.style.backgroundColor=i),"full"!=m&&"fit"!=m&&"outside"!=m||(e.style.position="absolute",x||(document.body.style.overflow="hidden"))}function ae(){A&&(X.mouseX=0,X.mouseY=0,X.mousedownEvent=R.on("stagemousedown",function(e){X.mouseX=e.stageX/go.scaX,X.mouseY=e.stageY/go.scaY}),X.mousemoveEvent=R.on("stagemousemove",function(e){X.mouseX=e.stageX/go.scaX,X.mouseY=e.stageY/go.scaY}))}function le(){se(),-1==E.indexOf(m)||x||(X.zil=zil()),X.mousedownEvent&&R&&R.off("stagemousedown",X.mousedownEvent),X.mousemoveEvent&&R&&R.off("stagemousemove",X.mousemoveEvent),(R=C?new go.StageGL(w,d):new go.Stage(w)).frame=X,R.mouseMoveOutside=T,!zot(i)&&C&&R.setClearColor(go.convertColor(i)),R.setBounds(0,0,L,D),R.width=L,R.height=D,k&&se(),e&&R.enableMouseOver(s),t&&createjs.Touch.enable(R,!1,x),x&&(R.preventSelection=!1),h&&(R.nextStage=h.stage),g&&(R.nextStage=g),ae()}function se(){if(X){var e,t,o=zid(w),n=go.windowWidth(),r=go.windowHeight();if((S=X.orientation=r<n?"horizontal":"vertical")!=O&&(O=S,X.dispatchEvent("orientation")),I&&y&&setTimeout(function(){window.scrollTo(0,0)},100),o){if("fit"==m)X.scale=L/D<=n/r?r/D:n/L;else if("outside"==m)X.scale=L/D<=n/r?n/L:r/D;else{if("full"==m){if(o.style.left=o.style.top="0px",o.width=L=n,o.height=D=r,R){if(R.setBounds(0,0,L,D),k){var i=window.devicePixelRatio||1;o.width=n*i,o.height=r*i,o.style.width=n+"px",o.style.height=r+"px",X.scale=i,R.scaleX=R.scaleY=X.scale,R.tickOnUpdate=!1,R.update(),R.tickOnUpdate=!0}else R.scaleX=R.scaleY=1;R.width=L,R.height=D,C&&R.updateViewport(L/R.scaleX,D/R.scaleY),go.scaX=createjs.stageTransformable?1:R.scaleX,go.scaY=createjs.stageTransformable?1:R.scaleY}return x||(go.scrollX(0),go.scrollY(0)),void ce()}if("tag"==m){L=""==F.style.width?F.getAttribute("width")||F.offsetWidth:F.style.width,D=""==F.style.height?F.getAttribute("height")||F.offsetHeight:F.style.height,k?(o.width=L*X.scale,o.height=D*X.scale,o.style.width=L+"px",o.style.height=D+"px",R&&(R.scaleX=R.scaleY=X.scale,R.tickOnUpdate=!1,R.update(),R.tickOnUpdate=!0)):(R&&(R.scaleX=R.scaleY=1),o.width=L,o.height=D),R&&(R.setBounds(0,0,L,D),R.width=L,R.height=D,C&&R.updateViewport(L/R.scaleX,D/R.scaleY),go.scaX=createjs.stageTransformable?1:R.scaleX,go.scaY=createjs.stageTransformable?1:R.scaleY),F.style.overflow="hidden",o.style.left=o.style.top="0px";var a=o.getBoundingClientRect();return X.x=a.x+go.scrollX(),X.y=a.y+go.scrollY(),void ce()}if("inline"==m){if(k){if(document.styleSheets[0])for(var l=document.styleSheets[0].rules||document.styleSheets[0].cssRules,s=0;s<l.length;s++){var c=l[s];if(c.selectorText=="#"+w){var u=c.style.getPropertyValue("width");if(u){var d=zum(o.style.width),h=zum(o.style.height);o.style.width=u}}}var g=window.getComputedStyle(o),p=zum(g.getPropertyValue("width"));d&&(o.style.height=h*p/d+"px",g=window.getComputedStyle(o));var f=zum(g.getPropertyValue("height"));i=window.devicePixelRatio||1;X.scale=p/z*i,o.width=L*X.scale,o.height=D*X.scale,o.style.width=p+"px",o.style.height=f+"px",R&&(R.scaleX=R.scaleY=X.scale,R.tickOnUpdate=!1,R.update(),R.tickOnUpdate=!0)}else R&&(R.scaleX=R.scaleY=1);R&&(R.setBounds(0,0,L,D),R.width=L,R.height=D,C&&R.updateViewport(L/R.scaleX,D/R.scaleY),go.scaX=createjs.stageTransformable?1:R.scaleX,go.scaY=createjs.stageTransformable?1:R.scaleY),o.style.left=o.style.top="0px";a=o.getBoundingClientRect();return X.x=a.x+go.scrollX(),X.y=a.y+go.scrollY(),void ce()}}if(t=D*X.scale,e=L*X.scale,k){i=window.devicePixelRatio||1;X.scale*=i,o.width=L*X.scale,o.height=D*X.scale,o.style.width=L*X.scale/i+"px",o.style.height=D*X.scale/i+"px",R&&(R.scaleX=R.scaleY=X.scale,R.tickOnUpdate=!1,R.update(),R.tickOnUpdate=!0)}else R&&(R.scaleX=R.scaleY=1),o.style.width=e+"px",o.style.height=t+"px";X.x="left"==b?0:"right"==b?n-e:(n-e)/2,X.y="top"==v?0:"bottom"==v?r-t:(r-t)/2,o.style.left=X.x+"px",o.style.top=X.y+"px",x||(go.scrollX(0),go.scrollY(0)),ce(),R&&(go.scaX=createjs.stageTransformable?1:R.scaleX,go.scaY=createjs.stageTransformable?1:R.scaleY)}}}function ce(){if("outside"==m){var e=(zum(X.canvas.style.width)-go.windowWidth())/2;"left"==b?(X.visibleLeft=0,X.visibleRight=go.windowWidth()/(go.windowWidth()+2*e)*L):"right"==b?(X.visibleLeft=2*e/(go.windowWidth()+2*e)*L,X.visibleRight=L):(X.visibleLeft=e/(go.windowWidth()+2*e)*L,X.visibleRight=(go.windowWidth()+e)/(go.windowWidth()+2*e)*L);var t=(zum(X.canvas.style.height)-go.windowHeight())/2;"top"==v?(X.visibleTop=0,X.visibleBottom=go.windowHeight()/(go.windowHeight()+2*t)*D):"bottom"==v?(X.visibleTop=2*t/(go.windowHeight()+2*t)*D,X.visibleBottom=D):(X.visibleTop=t/(go.windowHeight()+2*t)*D,X.visibleBottom=(go.windowHeight()+t)/(go.windowHeight()+2*t)*D)}else X.visibleLeft=X.visibleTop=0,X.visibleRight=L,X.visibleBottom=D}function ue(){if(H&&X){X.dispatchEvent("resize");var e=(new Date).getTime();setTimeout(function(){80<(new Date).getTime()-e&&(se(),setTimeout(function(){X.dispatchEvent("resize"),go.OPTIMIZE||!zns&&OPTIMIZE||!R||"full"!=m&&"tag"!=m||R.update()},100))},100),go.OPTIMIZE||!zns&&OPTIMIZE||!R||"full"!=m&&"tag"!=m||R.update()}}function de(e){e.remove=X.eventRemove,X.altKey=e.altKey,X.ctrlKey=e.ctrlKey,X.metaKey=e.metaKey,X.shiftKey=e.shiftKey,X.dispatchEvent(e)}function he(e){X.altKey=e.altKey,X.ctrlKey=e.ctrlKey,X.metaKey=e.metaKey,X.shiftKey=e.shiftKey,e.remove=X.eventRemove,X.dispatchEvent(e)}function ge(e){X.dispatchEvent(e)}function pe(e){e.remove=X.eventRemove,X.dispatchEvent(e)}function fe(e){e.remove=X.eventRemove;var t=360-e.alpha;135<Math.abs(t-ee)&&Math.abs(t-ee)<225&&(te=0==te?180:0),ee=t,e.rotation={x:e.beta,y:e.gamma,z:(t+te)%360},X.dispatchEvent(e)}},go.extend(go.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),go.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},go.extend(go.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),go.LEFT="left",go.RIGHT="right",go.CENTER="center",go.MIDDLE="middle",go.TOP="top",go.BOTTOM="bottom",go.HORIZONTAL="horizontal",go.VERTICAL="vertical",go.BOTH="both",go.GET="get",go.POST="post",go.LOCALSTORAGE="localStorage",go.SOCKET="socket",go.TO="to",go.FROM="from",go.colorsHex=["#f58e25","#acd241","#e472c4","#50c4b7","#d1a170","#ebcb35","#993399","#fb4758","#000000","#111111","#333333","#555555","#555555","#777777","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],go.colors=["orange","green","pink","blue","brown","yellow","purple","red","black","darker","dark","grey","gray","tin","silver","fog","mist","light","moon","lighter","white","faint","clear"];for(l=0;l<go.colors.length;l++)go[go.colors[l]]=go.colorsHex[l];String.prototype.darken=function(e){return go.darken(this,e)};String.prototype.lighten=function(e){return go.lighten(this,e)};return go.distillery=[],go.distill=function(){!window.zns&&go&&(go.DISTILL||window.DISTILL)&&go.distillery.push("83.3","83.35"),zog("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(0<go.distillery.length?go.distillery.join(" "):"must set zim.DISTILL = true;")},go.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n=e.resources[0],r=e.spritemap,i=[],a={src:n,data:{}};for(l in r)o=r[l],i.push({id:l,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return a.data.audioSprite=i,t&&zog(JSON.stringify(a)),a}},go.previewAudioSprite=function(e,t,o){if(z_d("83.26"),!zot(e)){if(zot(t)&&(t=3),zot(o)){if(zot(zimDefaultFrame))return;stage=(o=zimDefaultFrame).stage}var n=o.width,r=(o.height,e),i=[],a=[];if(r.constructor=={}.constructor){r.resources&&(r=go.parseAudioSprite(r)),r.audioSprite?loop(r.audioSprite,function(e){i.push(e[0].substr(0,t)),a.push(e[0])}):r.data&&r.data.audioSprite&&loop(r.data.audioSprite,function(e){i.push(e.id.substr(0,t)),a.push(e.id)});var l=new go.Tabs({tabs:i,width:n,currentEnabled:!0}).addTo(stage);return l.on("change",function(){o.asset(a[l.selectedIndex]).play()}),l}}},go.svgToBitmap=function(e,t){if(z_d("83.27"),!zot(e.draggable)){var o=new DOMParser;e=(e=e.innerHTML?o.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg")?e.getElementsByTagName("svg")[0]:null}if(XMLSerializer||!zon){var n="string"==typeof e?e:(new XMLSerializer).serializeToString(e);if(n){var r=n.split(">")[0];if(1<r.length)if(1==r.split(/width/i).length){var i=100,a=100,l=r.split(/viewBox/i);if(1<l.length){var s=l[1].split('"')[1];if(s){var c=s.split(" ");1<c.length&&(i=c[c.length-2],a=c[c.length-1])}}n=n.replace(/svg /i,'svg  width="'+i+'" height="'+a+'" ')}n.match(/xmlns/i)||(n=n.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var u=self.URL||self.webkitURL||self,d=new Image;d.onload=function(){var e=new go.Bitmap(d);t(e)},d.src=u.createObjectURL(new document.Blob([n],{type:"image/svg+xml;charset=utf-8"}))}else zog("ZIM svgToBitmap() - sorry, not supported in Browser")},go}(zim||{});function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(n,e){z_d("83.3");var t={drag:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f)},noDrag:function(){return zim.noDrag(this)},mouse:function(){return zim.mouse(this)},noMouse:function(){return zim.noMouse(this)},bind:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.bind(e)):zim.bind(this,e,t,o,n,r)},noBind:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.noBind(e)):zim.noBind(this,e,t,o,n)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p)},noGesture:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noGesture(e)):zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,a,l,s,c,u){return isDUO(arguments)?(e.obj=this,zim.addPhysics(e)):zim.addPhysics(this,e,t,o,n,r,i,a,l,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o){return zim.hitTestRect(this,e,t,o)},hitTestCircle:function(e,t,o){return zim.hitTestCircle(this,e,t,o)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o){return zim.boundsToGlobal(this,e,t,o)},resetBounds:function(e,t,o,n){return zim.resetBounds(this,e,t,o,n)},hitTestPath:function(e,t,o){return zim.hitTestPath(this,e,t,o)},hitTestGrid:function(e,t,o,n,r,i,a,l,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},animate:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,q){return e&&(e.props||e.obj)&&isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,I,S,O,E,M,j,L,D,Y,X,R,_,F,W,H,G,N,V,q)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,a,l,s,c,u,d,h){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,r,i,a,l,s,c,u,d,h)},loop:function(e,t,o,n,r){return zim.loop(this,e,t,o,n,r)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(e){return zim.duplicate(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,a,l,s,c){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,r,i,a,l,s,c)},loc:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.obj=this,zim.loc(e)):zim.loc(this,e,t,o,n,r,i,a)},mov:function(e,t){return isDUO(arguments)?(e.obj=this,zim.mov(e)):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},alp:function(e){return zim.alp(this,e)},ble:function(e){return zim.ble(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,r)},outline:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t,o)},addTo:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.addTo(e)):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},tap:function(e,t,o,n){return zim.tap(this,e,t,o,n)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name=this.name,e.regX=this.regX*e.width/this.width,e.regY=this.regY*e.height/this.height,e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e,t){e.children.length&&e.removeAllChildren();for(var o=e.children,n=0,r=this.children.length;n<r;n++){var i=this.children[n].clone(t);i.parent=e,o.push(i)}return e}};if(!zot(e)){e=[];for(var o in t)e.push(o);return e}for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return zim&&(n.cjsLocalToGlobal=n.localToGlobal,n.cjsGlobalToLocal=n.globalToLocal,n.cjsLocalToLocal=n.localToLocal,n.localToGlobal=function(e,t){return zim.localToGlobal(e,t,n,n.cjsLocalToGlobal)},n.globalToLocal=function(e,t){return zim.globalToLocal(e,t,n,n.cjsGlobalToLocal)},n.localToLocal=function(e,t,o){return zim.localToLocal(e,t,o,n)}),Object.defineProperty(n,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zon&&zogy("DisplayObject() - width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(n,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zon&&zogy("DisplayObject() - height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(n,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();if(!zot(t)&&0!=t.width||!zon){var o=e/t.width;this.scaleX=o}else zogy("DisplayObject() - widthOnly needs bounds set with setBounds()")}}),Object.defineProperty(n,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();if(!zot(t)&&0!=t.height||!zon){var o=e/t.height;this.scaleY=o}else zogy("DisplayObject() - heightOnly needs bounds set with setBounds()")}}),Object.defineProperty(n,"level",{enumerable:!0,get:function(){if(this.parent)return this.parent.getChildIndex(this)},set:function(e){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(e,this.parent.numChildren-1)))}}),Object.defineProperty(n,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){if(this._depth=e,!zot(this.vrChannel)){var t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0;"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t)}}}),Object.defineProperty(n,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),n}function zimplify(e){z_d("83.35"),document.window=window,document.Blob=Blob,ignore="ignore",zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopAnimate","pauseAnimate","animate","wiggle"];for(var n in zim)(-1==t.indexOf(n)||0<=o.indexOf(n))&&-1==e.indexOf(n)&&(window[n]=zim[n]);window.KEYFOCUS=zim.KEYFOCUS,window.OPTIMIZE=zim.OPTIMIZE,window.ACTIONEVENT=zim.ACTIONEVENT,window.STYLE=zim.STYLE}if(void 0===zimDefaultFrame)var zimDefaultFrame;zim.fastFrame=function(e,t){if(z_d("83.355"),createjs=e,zot(zimDefaultFrame))return t.frame=new zim.Frame({shim:{stage:t,canvas:t.canvas}}),zimDefaultFrame=t.frame,zim.scaX=createjs.stageTransformable?1:t.scaleX,zim.scaY=createjs.stageTransformable?1:t.scaleY,t.frame};var ZIMONON=!(zim.setBlurDetect=function(){z_d("83.36"),zim.blurCheck=!0,zim.pauseAnimateOnBlur=!0,zim.pauseOnBlur=[],zim.blurDetect=function(){var t,o,e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in e)if(t in document){o=e[t];break}return function(e){return e&&document.addEventListener(o,e),!document[t]}}(),zim.blurDetect(function(){if(zim.blurDetect())setTimeout(function(){if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++){var t=zim.pauseOnBlur[e];t.pauseOnBlurPaused||t.pause(!1)}zim.pauseAnimateOnBlur&&zim.animatedObjects&&zim.loop(zim.animatedObjects.objects,function(e){e.pauseOnBlurPaused||e.pauseAnimate(!1)})},300);else{if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++){var t=zim.pauseOnBlur[e];t.pauseOnBlurPaused=t.paused,t.pause(!0)}zim.pauseAnimateOnBlur&&zim.animatedObjects&&(zim.loop(zim.animatedObjects.objects,function(e){e.pauseOnBlurPaused=e.paused}),zim.pauseAnimate(!0))}})});zim=function(m){return m.ZIMON={stringify:function(i,a){if(z_d("83.39"),!zot(i)){if(ZIMONON)return function o(n,e,t){if(zot(n))return;if(Array.isArray(n))m.loop(n,function(e,t){o(e,n,t)});else if(n.constructor=={}.constructor)m.loop(n,function(e,t){o(t,n,e)});else if(n.type){var r={zimon:n.type};n.arguments&&(r.args=Array.prototype.slice.call(n.arguments),o(r.args)),"series"==n.type&&(r.args=Array.prototype.slice.call(n.array),o(r.args)),a&&a[n.type]&&a[n.type].props&&(r.props=[],m.loop(a[n.type].props,function(e){r.props.push(n[e])})),e?e[t]=r:i=r}else"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&null!==n&&zon&&zogy("ZIMON - potentially bad JSON value"+n)}(i=m.copy(i)),JSON.stringify({obj:i,key:a,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zogy("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(e,u){if(z_d("83.39"),!zot(e)){var t=JSON.parse(e),d=t.obj;u=t.key;return function o(n,e,t){if(zot(n))return;if(Array.isArray(n))m.loop(n,function(e,t){o(e,n,t)});else if(zot(n.zimon)&&n.constructor=={}.constructor)m.loop(n,function(e,t){o(t,n,e)});else if(n.zimon){var r=n.zimon;function i(t){try{return Function("return("+t+")")()}catch(e){return zon&&zogy("ZIMON: bad function scope or name: "+t),null}}var a="";u&&(u[r]&&u[r].scope?a=u[r].scope+".":u.scope&&(a=u.scope+"."));var l=i(a+r),s=n.args;if(zot(s)&&(s=[]),o(s),"series"==n.type)var c=m.series(s);else var c=l?new(l.bind.apply(l,[null].concat(Array.prototype.slice.call(s)))):null;e?e[t]=c:d=c,u&&u[r]&&u[r].props&&c&&m.loop(u[r].props,function(e,t){zot(n.props[t])||(c[e]=n.props[t])})}}(d),d}}},m.Wonder=function(n,r,i,a,e){var t;if(t=zob(m.Wonder,arguments,"wid, client, app, notes, server",this))return t;if(z_d("82"),zot(n))zog("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");else{zot(e)&&(e="http://54.237.229.197:3001/wonder");var o=this;zot(m.wonderSession)&&(m.wonderSession="W"+m.rand(1e5,999999));var l,s=[],c=setInterval(p,1e3),u=0,d=setInterval(function(){28<u&&(s.push({id:n,c:r,a:i,n:a,k:l,t:"e",v:"frequency max - terminated",s:m.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),o.dispose()),u=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(e){f(e,"count")&&(l=e,s.push({id:n,c:r,a:i,n:a,k:e,t:"c",v:1,s:m.wonderSession}))};var h={};this.timeStart=function(e){f(e,"time")&&(o.timeEnd(e),h[l=e]=(new Date).getTime())};var g={};this.timePause=function(e){f(e,"time")&&(g[e]||(g[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(f(e,"time")&&g[e]){var t=(new Date).getTime()-g[e];h[e]&&(h[e]+=t),delete g[e]}},this.timeEnd=function(e){if(f(e,"time")&&h[e]){var t=g[e]?g[e]:(new Date).getTime(),o=Math.round((t-h[e])/1e3);delete g[e],delete h[e],s.push({id:n,c:r,a:i,n:a,k:e,t:"t",v:o,s:m.wonderSession})}},this.order=function(e,t){f(e,"order")&&(l=e,zot(t)?zog("zim.Wonder order() - please provide an item"):s.push({id:n,c:r,a:i,n:a,k:e,t:"o",v:t,s:m.wonderSession}))},this.countOff=function(e){o.countsOff[e]=1},this.countOn=function(e){delete o.countOff[e]},this.timeOff=function(e){o.timesOff[e]=1},this.timeOn=function(e){delete o.timesOff[e]},this.orderOff=function(e){o.ordersOff[e]=1},this.orderOn=function(e){delete o.ordersOff[e]},this.dispose=function(e,t,o){return p(),clearInterval(c),clearInterval(d),!0}}function p(){0<s.length&&(m.async(e+"?wonder="+JSON.stringify(s)),s=[],u++)}function f(e,t){return zot(e)?void zog("zim.Wonder "+t+" - please provide a keyword"):!o[t+"sOff"][e]}},m}(zim||{});window.zns||zimplify();
